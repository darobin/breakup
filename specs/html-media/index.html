<html lang="en"><head>
    <meta charset="utf-8">
    <title>HTML Media</title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove"></script>
    <script class="remove">
      var respecConfig = {
              specStatus:     "ED"
          ,   shortName:      "html-media"
          ,   editors:      [{ name: "Up for the taking" }]
          ,   wg:             "HTML Working Group"
          ,   wgURI:          "http://www.w3.org/html/wg/"
          ,   wgPublicList:   "public-html"
          ,   wgPatentURI:    "http://www.w3.org/2004/01/pp-impl/40318/status"
          ,   license:        "cc-by"
          ,   processVersion: "2014"
        };
    </script>
  </head>
  <body>
    <section id="abstract">
      <p>
        Media.
      </p>
    </section>
    <section id="sotd">
      <p>
        This specification is an experimental breakup of the
        <a href="http://www.w3.org/TR/html51/">HTML specification</a>. You can see the full list on
        <a href="https://darobin.github.io/breakup/specs/">the index page</a> and take part in the
        discussion in <a href="https://github.com/darobin/breakup/">the repository</a>.
      </p>
    </section>
  

<section><h2>The <dfn id="video"><code>video</code></dfn> element</h2>

  <dl class="element"><dt><a href="/breakup/specs/html-best-practices/#concept-element-categories" id="the-video-element:concept-element-categories">Categories</a>:</dt><dd><a href="/breakup/specs/html-best-practices/#flow-content-2" id="the-video-element:flow-content-2">Flow content</a>.</dd><dd><a href="/breakup/specs/html-best-practices/#phrasing-content-2" id="the-video-element:phrasing-content-2">Phrasing content</a>.</dd><dd><a href="/breakup/specs/html-best-practices/#embedded-content-category" id="the-video-element:embedded-content-category">Embedded content</a>.</dd><dd>If the element has a <code id="the-video-element:attr-media-controls"><a href="/breakup/specs/html-media/#attr-media-controls">controls</a></code> attribute: <a href="/breakup/specs/html-best-practices/#interactive-content-2" id="the-video-element:interactive-content-2">Interactive content</a>.</dd><dd><a href="/breakup/specs/html-best-practices/#palpable-content-2" id="the-video-element:palpable-content-2">Palpable content</a>.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-contexts" id="the-video-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>Where <a href="/breakup/specs/html-best-practices/#embedded-content-category" id="the-video-element:embedded-content-category-2">embedded content</a> is expected.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-content-model" id="the-video-element:concept-element-content-model">Content model</a>:</dt><dd>If the element has a <code id="the-video-element:attr-media-src"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute:
 zero or more <code id="the-video-element:the-track-element"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> elements, then
 <a href="/breakup/specs/html-best-practices/#transparent" id="the-video-element:transparent">transparent</a>, but with no <a href="/breakup/specs/html-media/#media-element" id="the-video-element:media-element">media element</a> descendants.</dd><dd>If the element does not have a <code id="the-video-element:attr-media-src-2"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute: zero or more <code id="the-video-element:the-source-element"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> elements, then
 zero or more <code id="the-video-element:the-track-element-2"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> elements, then
 <a href="/breakup/specs/html-best-practices/#transparent" id="the-video-element:transparent-2">transparent</a>, but with no <a href="/breakup/specs/html-media/#media-element" id="the-video-element:media-element-2">media element</a> descendants.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-tag-omission" id="the-video-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>Neither tag is omissible.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-attributes" id="the-video-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-video-element:global-attributes">Global attributes</a></dd><dd><code id="the-video-element:attr-media-src-3"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> — Address of the resource</dd><dd><code id="the-video-element:attr-media-crossorigin"><a href="/breakup/specs/html-media/#attr-media-crossorigin">crossorigin</a></code> — How the element handles crossorigin requests</dd><dd><code id="the-video-element:attr-video-poster"><a href="/breakup/specs/html-media/#attr-video-poster">poster</a></code> — Poster frame to show prior to video playback</dd><dd><code id="the-video-element:attr-media-preload"><a href="/breakup/specs/html-media/#attr-media-preload">preload</a></code> — Hints how much buffering the <a href="/breakup/specs/html-media/#media-resource" id="the-video-element:media-resource">media resource</a> will likely need</dd><dd><code id="the-video-element:attr-media-autoplay"><a href="/breakup/specs/html-media/#attr-media-autoplay">autoplay</a></code> — Hint that the <a href="/breakup/specs/html-media/#media-resource" id="the-video-element:media-resource-2">media resource</a> can be started automatically when the page is loaded</dd><dd><code id="the-video-element:attr-media-mediagroup"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> — Groups <a href="/breakup/specs/html-media/#media-element" id="the-video-element:media-element-3">media elements</a> together with an implicit <code id="the-video-element:mediacontroller"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code></dd><dd><code id="the-video-element:attr-media-loop"><a href="/breakup/specs/html-media/#attr-media-loop">loop</a></code> — Whether to loop the <a href="/breakup/specs/html-media/#media-resource" id="the-video-element:media-resource-3">media resource</a></dd><dd><code id="the-video-element:attr-media-muted"><a href="/breakup/specs/html-media/#attr-media-muted">muted</a></code> — Whether to mute the <a href="/breakup/specs/html-media/#media-resource" id="the-video-element:media-resource-4">media resource</a> by default</dd><dd><code id="the-video-element:attr-media-controls-2"><a href="/breakup/specs/html-media/#attr-media-controls">controls</a></code> — Show user agent controls</dd><dd><code id="the-video-element:attr-dim-width"><a href="/breakup/specs/html-embedding/#attr-dim-width">width</a></code> — Horizontal dimension</dd><dd><code id="the-video-element:attr-dim-height"><a href="/breakup/specs/html-embedding/#attr-dim-height">height</a></code> — Vertical dimension</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#aria-role-attribute">ARIA role attribute</a> values:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-application"><code title="">application</code></a>.</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-global">Global aria-* attributes</a></dd><dd>Any <code title="">aria-*</code> attributes 
   <a href="/breakup/specs/html-aria-integration/#allowed-aria-roles,-states-and-properties">applicable to the allowed roles</a>.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-dom" id="the-video-element:concept-element-dom">DOM interface</a>:</dt><dd>
    <pre class="idl">interface <dfn id="htmlvideoelement">HTMLVideoElement</dfn> : <a href="/breakup/specs/html-media/#htmlmediaelement" id="the-video-element:htmlmediaelement">HTMLMediaElement</a> {
  attribute unsigned long <a href="/breakup/specs/html-embedding/#dom-dim-width" id="the-video-element:dom-dim-width">width</a>;
  attribute unsigned long <a href="/breakup/specs/html-embedding/#dom-dim-height" id="the-video-element:dom-dim-height">height</a>;
  readonly attribute unsigned long <a href="/breakup/specs/html-media/#dom-video-videowidth" id="the-video-element:dom-video-videowidth">videoWidth</a>;
  readonly attribute unsigned long <a href="/breakup/specs/html-media/#dom-video-videoheight" id="the-video-element:dom-video-videoheight">videoHeight</a>;
  attribute DOMString <a href="/breakup/specs/html-media/#dom-video-poster" id="the-video-element:dom-video-poster">poster</a>;
};</pre>
   </dd></dl>

  <p>A <code id="the-video-element:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element is used for playing videos or movies, and audio files with
  captions.</p>

  <p>Content may be provided inside the <code id="the-video-element:the-video-element-2"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element. User agents
  should not show this content to the user; it is intended for older Web browsers which do
  not support <code id="the-video-element:the-video-element-3"><a href="/breakup/specs/html-media/#the-video-element">video</a></code>, so that legacy video plugins can be tried, or to show text to the
  users of these older browsers informing them of how to access the video contents.</p>

  <p class="note">In particular, this content is not intended to address accessibility concerns. To
  make video content accessible to the partially sighted, the blind, the hard-of-hearing, the deaf,
  and those with other physical or cognitive disabilities, a variety of features are available.
  Captions can be provided, either embedded in the video stream or as external files using the
  <code id="the-video-element:the-track-element-3"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element. Sign-language tracks can be provided, again either embedded in the
  video stream or by synchronising multiple <code id="the-video-element:the-video-element-4"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> elements using the <code id="the-video-element:attr-media-mediagroup-2"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> attribute or a <code id="the-video-element:mediacontroller-2"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>
  object. Audio descriptions can be provided, either as a separate track embedded in the video
  stream, or a separate audio track in an <code id="the-video-element:the-audio-element"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element <a href="/breakup/specs/html-media/#slaved-media-elements" id="the-video-element:slaved-media-elements">slaved</a> to the same controller as the <code id="the-video-element:the-video-element-5"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element(s), or in text
  form using a <a href="/breakup/specs/core-algorithms/#webvtt-file" id="the-video-element:webvtt-file">WebVTT file</a> referenced using the <code id="the-video-element:the-track-element-4"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element and
  synthesized into speech by the user agent. WebVTT can also be used to provide chapter titles. For
  users who would rather not use a media element at all, transcripts or other textual alternatives
  can be provided by simply linking to them in the prose near the <code id="the-video-element:the-video-element-6"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element. [[!WEBVTT]]</p>

  <p>The <code id="the-video-element:the-video-element-7"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element is a <a href="/breakup/specs/html-media/#media-element" id="the-video-element:media-element-4">media element</a> whose <a href="/breakup/specs/html-media/#media-data" id="the-video-element:media-data">media data</a> is
  ostensibly video data, possibly with associated audio data.</p>

  <p>The <code id="the-video-element:attr-media-src-4"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code>, <code id="the-video-element:attr-media-preload-2"><a href="/breakup/specs/html-media/#attr-media-preload">preload</a></code>,
  <code id="the-video-element:attr-media-autoplay-2"><a href="/breakup/specs/html-media/#attr-media-autoplay">autoplay</a></code>, <code id="the-video-element:attr-media-mediagroup-3"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code>, <code id="the-video-element:attr-media-loop-2"><a href="/breakup/specs/html-media/#attr-media-loop">loop</a></code>, <code id="the-video-element:attr-media-muted-2"><a href="/breakup/specs/html-media/#attr-media-muted">muted</a></code>, and <code id="the-video-element:attr-media-controls-3"><a href="/breakup/specs/html-media/#attr-media-controls">controls</a></code>
  attributes are <a href="/breakup/specs/html-media/#media-element-attributes" id="the-video-element:media-element-attributes">the attributes common to all media
  elements</a>.</p>

  <p>The <dfn id="attr-video-poster"><code>poster</code></dfn> attribute gives the address of an
  image file that the user agent can show while no video data is available. The attribute, if
  present, must contain a <a href="/breakup/specs/core-algorithms/#valid-non-empty-url-potentially-surrounded-by-spaces" id="the-video-element:valid-non-empty-url-potentially-surrounded-by-spaces">valid non-empty URL potentially surrounded by spaces</a>.</p>

  

  <p>If the specified resource is to be used, then, when the element is created or when the <code id="the-video-element:attr-video-poster-2"><a href="/breakup/specs/html-media/#attr-video-poster">poster</a></code> attribute is set, changed, or removed, the user agent must
  run the following steps to determine the element's <dfn id="poster-frame">poster frame</dfn> (regardless of the
  value of the element's <a href="/breakup/specs/html-media/#show-poster-flag" id="the-video-element:show-poster-flag">show poster flag</a>):</p> 

  <ol><li><p>If there is an existing instance of this algorithm running for this <code id="the-video-element:the-video-element-8"><a href="/breakup/specs/html-media/#the-video-element">video</a></code>
   element, abort that instance of this algorithm without changing the <a href="/breakup/specs/html-media/#poster-frame" id="the-video-element:poster-frame">poster
   frame</a>.</p></li><li><p>If the <code id="the-video-element:attr-video-poster-3"><a href="/breakup/specs/html-media/#attr-video-poster">poster</a></code> attribute's value is the empty string
   or if the attribute is absent, then there is no <a href="/breakup/specs/html-media/#poster-frame" id="the-video-element:poster-frame-2">poster frame</a>; abort these
   steps.</p></li><li><p><a href="/breakup/specs/core-algorithms/#resolve-a-url" id="the-video-element:resolve-a-url">Resolve</a> the <code id="the-video-element:attr-video-poster-4"><a href="/breakup/specs/html-media/#attr-video-poster">poster</a></code> attribute's value relative to the element. If this fails,
   then there is no <a href="/breakup/specs/html-media/#poster-frame" id="the-video-element:poster-frame-3">poster frame</a>; abort these steps.</p></li><li><p><a href="/breakup/specs/core-algorithms/#fetch" id="the-video-element:fetch">Fetch</a> the resulting <a href="/breakup/specs/core-algorithms/#absolute-url" id="the-video-element:absolute-url">absolute URL</a>, from the element's
   <a id="the-video-element:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="/breakup/specs/browser-dom/#origin-2" id="the-video-element:origin-2">origin</a>. This must <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="the-video-element:delay-the-load-event">delay the load event</a> of the
   element's <a id="the-video-element:node-document-2" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>.</p></li><li><p>If an image is thus obtained, the <a href="/breakup/specs/html-media/#poster-frame" id="the-video-element:poster-frame-4">poster frame</a> is that image. Otherwise,
   there is no <a href="/breakup/specs/html-media/#poster-frame" id="the-video-element:poster-frame-5">poster frame</a>.</p></li></ol>

  

  <p class="note">The image given by the <code id="the-video-element:attr-video-poster-5"><a href="/breakup/specs/html-media/#attr-video-poster">poster</a></code> attribute,
  the <i id="the-video-element:poster-frame-6"><a href="/breakup/specs/html-media/#poster-frame">poster frame</a></i>, is intended to be a representative frame of the
  video (typically one of the first non-blank frames) that gives the user an idea of what the video
  is like.</p>

  

  <hr>

  <p>A <code id="the-video-element:the-video-element-9"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element represents what is given for the first matching condition in the
  list below:</p>

  <dl class="switch"><dt>When no video data is available (the element's <code id="the-video-element:dom-media-readystate"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute is either <code id="the-video-element:dom-media-have_nothing"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>, or <code id="the-video-element:dom-media-have_metadata"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> but no video data has yet been obtained at
   all, or the element's <code id="the-video-element:dom-media-readystate-2"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute is any
   subsequent value but the <a href="/breakup/specs/html-media/#media-resource" id="the-video-element:media-resource-5">media resource</a> does not have a video channel)</dt><dd>The <code id="the-video-element:the-video-element-10"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element <a href="/breakup/specs/html-scripting/#represents" id="the-video-element:represents">represents</a> its <a href="/breakup/specs/html-media/#poster-frame" id="the-video-element:poster-frame-7">poster frame</a>, if any,
   or else transparent black with no intrinsic dimensions.</dd><dt>When the <code id="the-video-element:the-video-element-11"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element is <a href="/breakup/specs/html-media/#dom-media-paused" id="the-video-element:dom-media-paused">paused</a>, the <a href="/breakup/specs/html-media/#current-playback-position" id="the-video-element:current-playback-position">current playback position</a> is the first frame of video,
   and the element's <a href="/breakup/specs/html-media/#show-poster-flag" id="the-video-element:show-poster-flag-2">show poster flag</a> is set</dt><dd>The <code id="the-video-element:the-video-element-12"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element <a href="/breakup/specs/html-scripting/#represents" id="the-video-element:represents-2">represents</a> its <a href="/breakup/specs/html-media/#poster-frame" id="the-video-element:poster-frame-8">poster frame</a>, if any,
   or else the first frame of the video.</dd><dt>When the <code id="the-video-element:the-video-element-13"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element is <a href="/breakup/specs/html-media/#dom-media-paused" id="the-video-element:dom-media-paused-2">paused</a>, and the
   frame of video corresponding to the <a href="/breakup/specs/html-media/#current-playback-position" id="the-video-element:current-playback-position-2">current playback
   position</a> is not available (e.g. because the video is seeking or buffering)</dt><dt>When the <code id="the-video-element:the-video-element-14"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element is neither <a href="/breakup/specs/html-media/#potentially-playing" id="the-video-element:potentially-playing">potentially playing</a> nor <a href="/breakup/specs/html-media/#dom-media-paused" id="the-video-element:dom-media-paused-3">paused</a> (e.g. when seeking or stalled)</dt><dd>The <code id="the-video-element:the-video-element-15"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element <a href="/breakup/specs/html-scripting/#represents" id="the-video-element:represents-3">represents</a> the last frame of the video to have
   been rendered.</dd><dt>When the <code id="the-video-element:the-video-element-16"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element is <a href="/breakup/specs/html-media/#dom-media-paused" id="the-video-element:dom-media-paused-4">paused</a></dt><dd>The <code id="the-video-element:the-video-element-17"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element <a href="/breakup/specs/html-scripting/#represents" id="the-video-element:represents-4">represents</a> the frame of video corresponding to
   the <a href="/breakup/specs/html-media/#current-playback-position" id="the-video-element:current-playback-position-3">current playback position</a>.</dd><dt>Otherwise (the <code id="the-video-element:the-video-element-18"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element has a video channel and is <a href="/breakup/specs/html-media/#potentially-playing" id="the-video-element:potentially-playing-2">potentially
   playing</a>)</dt><dd>The <code id="the-video-element:the-video-element-19"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element <a href="/breakup/specs/html-scripting/#represents" id="the-video-element:represents-5">represents</a> the frame of video at the continuously
   increasing <a href="/breakup/specs/html-media/#current-playback-position" id="the-video-element:current-playback-position-4">"current" position</a>. When the
   <a href="/breakup/specs/html-media/#current-playback-position" id="the-video-element:current-playback-position-5">current playback position</a> changes such that the last frame rendered is no longer the
   frame corresponding to the <a href="/breakup/specs/html-media/#current-playback-position" id="the-video-element:current-playback-position-6">current playback position</a> in the video, the new frame
   must be rendered.</dd></dl>

  <p>Frames of video must be obtained from the video track that was <a href="/breakup/specs/html-media/#dom-videotrack-selected" id="the-video-element:dom-videotrack-selected">selected</a> when the <a href="/breakup/specs/browser-dom/#event-loop" id="the-video-element:event-loop">event loop</a> last reached
  <a href="/breakup/specs/browser-dom/#step1">step 1</a>.</p>

  <p class="note">Which frame in a video stream corresponds to a particular playback position is
  defined by the video stream's format.</p>

  <p>The <code id="the-video-element:the-video-element-20"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element also <a href="/breakup/specs/html-scripting/#represents" id="the-video-element:represents-6">represents</a> any <a href="/breakup/specs/html-media/#text-track-cue" id="the-video-element:text-track-cue">text track cues</a> whose <a href="/breakup/specs/html-media/#text-track-cue-active-flag" id="the-video-element:text-track-cue-active-flag">text track cue active flag</a> is set and whose
  <a href="/breakup/specs/html-media/#text-track" id="the-video-element:text-track">text track</a> is in the <a href="/breakup/specs/html-media/#text-track-showing" id="the-video-element:text-track-showing">showing</a> mode, and any
  audio from the <a href="/breakup/specs/html-media/#media-resource" id="the-video-element:media-resource-6">media resource</a>, at the <a href="/breakup/specs/html-media/#current-playback-position" id="the-video-element:current-playback-position-7">current playback position</a>.</p>

  <p>Any audio associated with the <a href="/breakup/specs/html-media/#media-resource" id="the-video-element:media-resource-7">media resource</a> must, if played, be played
  synchronised with the <a href="/breakup/specs/html-media/#current-playback-position" id="the-video-element:current-playback-position-8">current playback position</a>, at the element's <a href="/breakup/specs/html-media/#effective-media-volume" id="the-video-element:effective-media-volume">effective
  media volume</a>. The user agent must play the audio from audio tracks that were <a href="/breakup/specs/html-media/#dom-audiotrack-enabled" id="the-video-element:dom-audiotrack-enabled">enabled</a> when the <a href="/breakup/specs/browser-dom/#event-loop" id="the-video-element:event-loop-2">event loop</a> last reached step
  1.</p>

  <p>In addition to the above, the user agent may provide messages to the user (such as "buffering",
  "no video loaded", "error", or more detailed information) by overlaying text or icons on the video
  or other areas of the element's playback area, or in another appropriate manner.</p>

  <p>User agents that cannot render the video may instead make the element <a href="/breakup/specs/html-scripting/#represents" id="the-video-element:represents-7">represent</a> a link to an external video playback utility or to the video
  data itself.</p>

  <p>When a <code id="the-video-element:the-video-element-21"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element's <a href="/breakup/specs/html-media/#media-resource" id="the-video-element:media-resource-8">media resource</a> has a video channel, the
  element <a href="/breakup/specs/core-algorithms/#provides-a-paint-source" id="the-video-element:provides-a-paint-source">provides a paint source</a> whose width is the <a href="/breakup/specs/html-media/#media-resource" id="the-video-element:media-resource-9">media resource</a>'s
  <a href="/breakup/specs/html-media/#concept-video-intrinsic-width" id="the-video-element:concept-video-intrinsic-width">intrinsic width</a>, whose height is the
  <a href="/breakup/specs/html-media/#media-resource" id="the-video-element:media-resource-10">media resource</a>'s <a href="/breakup/specs/html-media/#concept-video-intrinsic-height" id="the-video-element:concept-video-intrinsic-height">intrinsic
  height</a>, and whose appearance is the frame of video corresponding to the <a href="/breakup/specs/html-media/#current-playback-position" id="the-video-element:current-playback-position-9">current playback position</a>, if that is available, or else
  (e.g. when the video is seeking or buffering) its previous appearance, if any, or else (e.g.
  because the video is still loading the first frame) blackness.</p>

  <hr>

  

  <dl class="domintro"><dt><var>video</var> . <code id="the-video-element:dom-video-videowidth-2"><a href="/breakup/specs/html-media/#dom-video-videowidth">videoWidth</a></code></dt><dt><var>video</var> . <code id="the-video-element:dom-video-videoheight-2"><a href="/breakup/specs/html-media/#dom-video-videoheight">videoHeight</a></code></dt><dd>

    <p>These attributes return the intrinsic dimensions of the video,
    or zero if the dimensions are not known.</p>

   </dd></dl>

  

  <p>The <dfn id="concept-video-intrinsic-width">intrinsic width</dfn> and <dfn id="concept-video-intrinsic-height">intrinsic height</dfn> of the <a href="/breakup/specs/html-media/#media-resource" id="the-video-element:media-resource-11">media resource</a>
  are the dimensions of the resource in CSS pixels after taking into account the resource's
  dimensions, aspect ratio, clean aperture, resolution, and so forth, as defined for the format used
  by the resource. If an anamorphic format does not define how to apply the aspect ratio to the
  video data's dimensions to obtain the "correct" dimensions, then the user agent must apply the
  ratio by increasing one dimension and leaving the other unchanged.</p>

  <p>The <dfn id="dom-video-videowidth"><code>videoWidth</code></dfn> IDL attribute must return
  the <a href="/breakup/specs/html-media/#concept-video-intrinsic-width" id="the-video-element:concept-video-intrinsic-width-2">intrinsic width</a> of the video in CSS pixels.
  The <dfn id="dom-video-videoheight"><code>videoHeight</code></dfn> IDL attribute must return
  the <a href="/breakup/specs/html-media/#concept-video-intrinsic-height" id="the-video-element:concept-video-intrinsic-height-2">intrinsic height</a> of the video in CSS
  pixels. If the element's <code id="the-video-element:dom-media-readystate-3"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute is <code id="the-video-element:dom-media-have_nothing-2"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>, then the attributes must return 0.</p>

  <p id="dimUpdate">Whenever the <a href="/breakup/specs/html-media/#concept-video-intrinsic-width" id="the-video-element:concept-video-intrinsic-width-3">intrinsic width</a>
  or <a href="/breakup/specs/html-media/#concept-video-intrinsic-height" id="the-video-element:concept-video-intrinsic-height-3">intrinsic height</a> of the video changes
  (including, for example, because the <a href="/breakup/specs/html-media/#dom-videotrack-selected" id="the-video-element:dom-videotrack-selected-2">selected video
  track</a> was changed), if the element's <code id="the-video-element:dom-media-readystate-4"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code>
  attribute is not <code id="the-video-element:dom-media-have_nothing-3"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>, the user agent must
  <a href="/breakup/specs/browser-dom/#queue-a-task" id="the-video-element:queue-a-task">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="the-video-element:fire-a-simple-event">fire a simple event</a> named <code id="the-video-element:event-media-resize"><a href="/breakup/specs/html-media/#event-media-resize">resize</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="the-video-element:media-element-5">media element</a>.</p>

  

  <p>The <code id="the-video-element:the-video-element-22"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element supports <a href="/breakup/specs/html-embedding/#dimension-attributes" id="the-video-element:dimension-attributes">dimension attributes</a>.</p>

  

  <p>In the absence of style rules to the contrary, video content should be rendered inside the
  element's playback area such that the video content is shown centered in the playback area at the
  largest possible size that fits completely within it, with the video content's aspect ratio being
  preserved. Thus, if the aspect ratio of the playback area does not match the aspect ratio of the
  video, the video will be shown letterboxed or pillarboxed. Areas of the element's playback area
  that do not contain the video represent nothing.</p>

  <p class="note">In user agents that implement CSS, the above requirement can be implemented by
  using the <a href="/breakup/specs/rendering-html/#video-object-fit">style rule suggested in the rendering section</a>.</p>

  <p>The intrinsic width of a <code id="the-video-element:the-video-element-23"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element's playback area is the intrinsic width of
  the <a href="/breakup/specs/html-media/#poster-frame" id="the-video-element:poster-frame-9">poster frame</a>, if that is available and the element currently
  <a href="/breakup/specs/html-scripting/#represents" id="the-video-element:represents-8">represents</a> its poster frame; otherwise, it is the <a href="/breakup/specs/html-media/#concept-video-intrinsic-width" id="the-video-element:concept-video-intrinsic-width-4">intrinsic width</a> of the video resource, if that is
  available; otherwise the intrinsic width is missing.</p>

  <p>The intrinsic height of a <code id="the-video-element:the-video-element-24"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element's playback area is the intrinsic height of
  the <a href="/breakup/specs/html-media/#poster-frame" id="the-video-element:poster-frame-10">poster frame</a>, if that is available and the element currently
  <a href="/breakup/specs/html-scripting/#represents" id="the-video-element:represents-9">represents</a> its poster frame; otherwise it is the <a href="/breakup/specs/html-media/#concept-video-intrinsic-height" id="the-video-element:concept-video-intrinsic-height-4">intrinsic height</a> of the video resource, if that is
  available; otherwise the intrinsic height is missing.</p>

  <p>The <a href="/breakup/specs/core-algorithms/#default-object-size" id="the-video-element:default-object-size">default object size</a> is a width of 300 CSS pixels and a height of 150 CSS
  pixels. [[!CSSIMAGES]]</p>

  <hr>

  <p>User agents should provide controls to enable or disable the display of closed captions, audio
  description tracks, and other additional data associated with the video stream, though such
  features should, again, not interfere with the page's normal rendering.</p>

  <p>User agents may allow users to view the video content in manners more suitable to the user
  (e.g. full-screen or in an independent resizable window). As for the other user interface
  features, controls to enable this should not interfere with the page's normal rendering unless the
  user agent is <a href="/breakup/specs/html-media/#expose-a-user-interface-to-the-user" id="the-video-element:expose-a-user-interface-to-the-user">exposing a user interface</a>.
  In such an independent context, however, user agents may make full user interfaces visible, with,
  e.g., play, pause, seeking, and volume controls, even if the <code id="the-video-element:attr-media-controls-4"><a href="/breakup/specs/html-media/#attr-media-controls">controls</a></code> attribute is absent.</p>

  <p>User agents may allow video playback to affect system features that could interfere with the
  user's experience; for example, user agents could disable screensavers while video playback is in
  progress.</p>

  <hr>

  <p>The <dfn id="dom-video-poster"><code>poster</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="the-video-element:reflect">reflect</a> the <code id="the-video-element:attr-video-poster-6"><a href="/breakup/specs/html-media/#attr-video-poster">poster</a></code> content attribute.</p>

  

  <div class="example">

   <p>This example shows how to detect when a video has failed to play correctly:</p>

   <pre>&lt;script&gt;
 function failed(e) {
   // video playback failed - show a message saying why
   switch (e.target.error.code) {
     case e.target.error.MEDIA_ERR_ABORTED:
       alert('You aborted the video playback.');
       break;
     case e.target.error.MEDIA_ERR_NETWORK:
       alert('A network error caused the video download to fail part-way.');
       break;
     case e.target.error.MEDIA_ERR_DECODE:
       alert('The video playback was aborted due to a corruption problem or because the video used features your browser did not support.');
       break;
     case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
       alert('The video could not be loaded, either because the server or network failed or because the format is not supported.');
       break;
     default:
       alert('An unknown error occurred.');
       break;
   }
 }
&lt;/script&gt;
&lt;p&gt;&lt;video src="tgif.vid" autoplay controls onerror="failed(event)"&gt;&lt;/video&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="tgif.vid"&gt;Download the video file&lt;/a&gt;.&lt;/p&gt;</pre>

  </div></section><section><h2>The <dfn id="audio"><code>audio</code></dfn> element</h2>

  <dl class="element"><dt><a href="/breakup/specs/html-best-practices/#concept-element-categories" id="the-audio-element:concept-element-categories">Categories</a>:</dt><dd><a href="/breakup/specs/html-best-practices/#flow-content-2" id="the-audio-element:flow-content-2">Flow content</a>.</dd><dd><a href="/breakup/specs/html-best-practices/#phrasing-content-2" id="the-audio-element:phrasing-content-2">Phrasing content</a>.</dd><dd><a href="/breakup/specs/html-best-practices/#embedded-content-category" id="the-audio-element:embedded-content-category">Embedded content</a>.</dd><dd>If the element has a <code id="the-audio-element:attr-media-controls"><a href="/breakup/specs/html-media/#attr-media-controls">controls</a></code> attribute: <a href="/breakup/specs/html-best-practices/#interactive-content-2" id="the-audio-element:interactive-content-2">Interactive content</a>.</dd><dd>If the element has a <code id="the-audio-element:attr-media-controls-2"><a href="/breakup/specs/html-media/#attr-media-controls">controls</a></code> attribute: <a href="/breakup/specs/html-best-practices/#palpable-content-2" id="the-audio-element:palpable-content-2">Palpable content</a>.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-contexts" id="the-audio-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>Where <a href="/breakup/specs/html-best-practices/#embedded-content-category" id="the-audio-element:embedded-content-category-2">embedded content</a> is expected.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-content-model" id="the-audio-element:concept-element-content-model">Content model</a>:</dt><dd>If the element has a <code id="the-audio-element:attr-media-src"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute:
zero or more <code id="the-audio-element:the-track-element"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> elements, then
<a href="/breakup/specs/html-best-practices/#transparent" id="the-audio-element:transparent">transparent</a>, but with no <a href="/breakup/specs/html-media/#media-element" id="the-audio-element:media-element">media element</a> descendants.</dd><dd>If the element does not have a <code id="the-audio-element:attr-media-src-2"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute: zero or more <code id="the-audio-element:the-source-element"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> elements, then
 zero or more <code id="the-audio-element:the-track-element-2"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> elements, then
 <a href="/breakup/specs/html-best-practices/#transparent" id="the-audio-element:transparent-2">transparent</a>, but with no <a href="/breakup/specs/html-media/#media-element" id="the-audio-element:media-element-2">media element</a> descendants.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-tag-omission" id="the-audio-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>Neither tag is omissible.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-attributes" id="the-audio-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-audio-element:global-attributes">Global attributes</a></dd><dd><code id="the-audio-element:attr-media-src-3"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> — Address of the resource</dd><dd><code id="the-audio-element:attr-media-crossorigin"><a href="/breakup/specs/html-media/#attr-media-crossorigin">crossorigin</a></code> — How the element handles crossorigin requests</dd><dd><code id="the-audio-element:attr-media-preload"><a href="/breakup/specs/html-media/#attr-media-preload">preload</a></code> — Hints how much buffering the <a href="/breakup/specs/html-media/#media-resource" id="the-audio-element:media-resource">media resource</a> will likely need</dd><dd><code id="the-audio-element:attr-media-autoplay"><a href="/breakup/specs/html-media/#attr-media-autoplay">autoplay</a></code> — Hint that the <a href="/breakup/specs/html-media/#media-resource" id="the-audio-element:media-resource-2">media resource</a> can be started automatically when the page is loaded</dd><dd><code id="the-audio-element:attr-media-mediagroup"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> — Groups <a href="/breakup/specs/html-media/#media-element" id="the-audio-element:media-element-3">media elements</a> together with an implicit <code id="the-audio-element:mediacontroller"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code></dd><dd><code id="the-audio-element:attr-media-loop"><a href="/breakup/specs/html-media/#attr-media-loop">loop</a></code> — Whether to loop the <a href="/breakup/specs/html-media/#media-resource" id="the-audio-element:media-resource-3">media resource</a></dd><dd><code id="the-audio-element:attr-media-muted"><a href="/breakup/specs/html-media/#attr-media-muted">muted</a></code> — Whether to mute the <a href="/breakup/specs/html-media/#media-resource" id="the-audio-element:media-resource-4">media resource</a> by default</dd><dd><code id="the-audio-element:attr-media-controls-3"><a href="/breakup/specs/html-media/#attr-media-controls">controls</a></code> — Show user agent controls</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#aria-role-attribute">ARIA role attribute</a> values:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-application"><code title="">application</code></a>.</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-global">Global aria-* attributes</a></dd><dd>Any <code title="">aria-*</code> attributes 
   <a href="/breakup/specs/html-aria-integration/#allowed-aria-roles,-states-and-properties">applicable to the allowed roles</a>.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-dom" id="the-audio-element:concept-element-dom">DOM interface</a>:</dt><dd>
    <pre class="idl">[NamedConstructor=<a href="/breakup/specs/html-media/#dom-audio" id="the-audio-element:dom-audio">Audio</a>(optional DOMString src)]
interface <dfn id="htmlaudioelement">HTMLAudioElement</dfn> : <a href="/breakup/specs/html-media/#htmlmediaelement" id="the-audio-element:htmlmediaelement">HTMLMediaElement</a> {};</pre>
   </dd></dl>

  <p>An <code id="the-audio-element:the-audio-element"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element <a href="/breakup/specs/html-scripting/#represents" id="the-audio-element:represents">represents</a> a sound or audio stream.</p>

  

  <p>Content may be provided inside the <code id="the-audio-element:the-audio-element-2"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element. User agents
  should not show this content to the user; it is intended for older Web browsers which do
  not support <code id="the-audio-element:the-audio-element-3"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code>, so that legacy audio plugins can be tried, or to show text to the
  users of these older browsers informing them of how to access the audio contents.</p>

  <p class="note">In particular, this content is not intended to address accessibility concerns. To
  make audio content accessible to the deaf or to those with other physical or cognitive
  disabilities, a variety of features are available. If captions or a sign language video are
  available, the <code id="the-audio-element:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element can be used instead of the <code id="the-audio-element:the-audio-element-4"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element to
  play the audio, allowing users to enable the visual alternatives. Chapter titles can be provided
  to aid navigation, using the <code id="the-audio-element:the-track-element-3"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element and a <a href="/breakup/specs/core-algorithms/#webvtt-file" id="the-audio-element:webvtt-file">WebVTT file</a>. And,
  naturally, transcripts or other textual alternatives can be provided by simply linking to them in
  the prose near the <code id="the-audio-element:the-audio-element-5"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element. [[!WEBVTT]]</p>

  <p>The <code id="the-audio-element:the-audio-element-6"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element is a <a href="/breakup/specs/html-media/#media-element" id="the-audio-element:media-element-4">media element</a> whose <a href="/breakup/specs/html-media/#media-data" id="the-audio-element:media-data">media data</a> is
  ostensibly audio data.</p>

  <p>The <code id="the-audio-element:attr-media-src-4"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code>, <code id="the-audio-element:attr-media-preload-2"><a href="/breakup/specs/html-media/#attr-media-preload">preload</a></code>,
  <code id="the-audio-element:attr-media-autoplay-2"><a href="/breakup/specs/html-media/#attr-media-autoplay">autoplay</a></code>, <code id="the-audio-element:attr-media-mediagroup-2"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code>, <code id="the-audio-element:attr-media-loop-2"><a href="/breakup/specs/html-media/#attr-media-loop">loop</a></code>, <code id="the-audio-element:attr-media-muted-2"><a href="/breakup/specs/html-media/#attr-media-muted">muted</a></code>, and <code id="the-audio-element:attr-media-controls-4"><a href="/breakup/specs/html-media/#attr-media-controls">controls</a></code>
  attributes are <a href="/breakup/specs/html-media/#media-element-attributes" id="the-audio-element:media-element-attributes">the attributes common to all media
  elements</a>.</p>

  

  <p>When an <code id="the-audio-element:the-audio-element-7"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element is <a href="/breakup/specs/html-media/#potentially-playing" id="the-audio-element:potentially-playing">potentially playing</a>, it must have its audio
  data played synchronised with the <a href="/breakup/specs/html-media/#current-playback-position" id="the-audio-element:current-playback-position">current playback position</a>, at the element's
  <a href="/breakup/specs/html-media/#effective-media-volume" id="the-audio-element:effective-media-volume">effective media volume</a>. The user agent must play the audio from audio tracks that
  were enabled when the <a href="/breakup/specs/browser-dom/#event-loop" id="the-audio-element:event-loop">event loop</a> last reached <a href="/breakup/specs/browser-dom/#step1">step 1</a>.</p>

  <p>When an <code id="the-audio-element:the-audio-element-8"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element is not <a href="/breakup/specs/html-media/#potentially-playing" id="the-audio-element:potentially-playing-2">potentially playing</a>, audio must not play
  for the element.</p>

  

  <dl class="domintro"><dt><var>audio</var> = new <code id="the-audio-element:dom-audio-2"><a href="/breakup/specs/html-media/#dom-audio">Audio</a></code>( [ <var>url</var> ] )</dt><dd>

    <p>Returns a new <code id="the-audio-element:the-audio-element-9"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element, with the <code id="the-audio-element:attr-media-src-5"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code>
    attribute set to the value passed in the argument, if applicable.</p>

   </dd></dl>

  

  <p>A constructor is provided for creating <code id="the-audio-element:htmlaudioelement"><a href="/breakup/specs/html-media/#htmlaudioelement">HTMLAudioElement</a></code> objects (in addition to
  the factory methods from DOM such as <code>createElement()</code>): <dfn id="dom-audio"><code>Audio(<var>src</var>)</code></dfn>. When invoked as a
  constructor, it must return a new <code id="the-audio-element:htmlaudioelement-2"><a href="/breakup/specs/html-media/#htmlaudioelement">HTMLAudioElement</a></code> object (a new <code id="the-audio-element:the-audio-element-10"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code>
  element). The element must be created with its <code id="the-audio-element:attr-media-preload-3"><a href="/breakup/specs/html-media/#attr-media-preload">preload</a></code>
  attribute set to the literal value "<code id="the-audio-element:attr-media-preload-auto"><a href="/breakup/specs/html-media/#attr-media-preload-auto">auto</a></code>". If the
  <var>src</var> argument is present, the object created must be created with its <code id="the-audio-element:attr-media-src-6"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> content attribute set to the provided value (this will <a href="/breakup/specs/html-media/#concept-media-load-algorithm-at-creation">cause the user agent to invoke</a> the object's
  <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="the-audio-element:concept-media-load-algorithm">resource selection algorithm</a> before returning).
  The element's <a id="the-audio-element:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> must be the <a href="/breakup/specs/browser-dom/#active-document" id="the-audio-element:active-document">active document</a> of the <a href="/breakup/specs/browser-dom/#browsing-context" id="the-audio-element:browsing-context">browsing
  context</a> of the <code id="the-audio-element:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object on which the interface object of the invoked
  constructor is found.</p></section><section><h2>The <dfn><code>source</code></dfn> element</h2>

  <dl class="element"><dt><a href="/breakup/specs/html-best-practices/#concept-element-categories" id="the-source-element:concept-element-categories">Categories</a>:</dt><dd>None.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-contexts" id="the-source-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>As a child of a <a href="/breakup/specs/html-media/#media-element" id="the-source-element:media-element">media element</a>, before any <a href="/breakup/specs/html-best-practices/#flow-content-2" id="the-source-element:flow-content-2">flow content</a>
 or <code id="the-source-element:the-track-element"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> elements.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-content-model" id="the-source-element:concept-element-content-model">Content model</a>:</dt><dd><a href="/breakup/specs/html-best-practices/#concept-content-nothing" id="the-source-element:concept-content-nothing">Nothing</a>.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-tag-omission" id="the-source-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>No <a href="/breakup/specs/html-syntax/#syntax-end-tag" id="the-source-element:syntax-end-tag">end tag</a>.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-attributes" id="the-source-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-source-element:global-attributes">Global attributes</a></dd><dd><code id="the-source-element:attr-source-src"><a href="/breakup/specs/html-media/#attr-source-src">src</a></code> — Address of the resource</dd><dd><code id="the-source-element:attr-source-type"><a href="/breakup/specs/html-media/#attr-source-type">type</a></code> — Type of embedded resource</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#aria-role-attribute">ARIA role attribute</a> values:</dt><dd>None</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-global">Global aria-* attributes</a></dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-dom" id="the-source-element:concept-element-dom">DOM interface</a>:</dt><dd>
<pre class="idl">interface <dfn id="htmlsourceelement">HTMLSourceElement</dfn> : <a href="/breakup/specs/html-scripting/#htmlelement" id="the-source-element:htmlelement">HTMLElement</a> {
  attribute DOMString <a href="/breakup/specs/html-media/#dom-source-src" id="the-source-element:dom-source-src">src</a>;
  attribute DOMString <a href="/breakup/specs/html-media/#dom-source-type" id="the-source-element:dom-source-type">type</a>;

  // <a href="/breakup/specs/html-images/#the-source-element-when-used-with-the-picture-element:htmlsourceelement">also has obsolete members</a>
};</pre>
   </dd></dl>

  <p>The <code id="the-source-element:the-source-element"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> element allows authors to specify multiple alternative <a href="/breakup/specs/html-media/#media-resource" id="the-source-element:media-resource">media resources</a> for <a href="/breakup/specs/html-media/#media-element" id="the-source-element:media-element-2">media
  elements</a>. It does not <a href="/breakup/specs/html-scripting/#represents" id="the-source-element:represents">represent</a> anything on its own.</p>

  <p>The <dfn id="attr-source-src"><code>src</code></dfn> attribute gives the address of the
  <a href="/breakup/specs/html-media/#media-resource" id="the-source-element:media-resource-2">media resource</a>. The value must be a <a href="/breakup/specs/core-algorithms/#valid-non-empty-url-potentially-surrounded-by-spaces" id="the-source-element:valid-non-empty-url-potentially-surrounded-by-spaces">valid non-empty URL potentially surrounded
  by spaces</a>. This attribute must be present.</p>

  <p class="note">Dynamically modifying a <code id="the-source-element:the-source-element-2"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> element and its attribute when the
  element is already inserted in a <code id="the-source-element:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> or <code id="the-source-element:the-audio-element"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element will have no
  effect. To change what is playing, just use the <code id="the-source-element:attr-media-src"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute
  on the <a href="/breakup/specs/html-media/#media-element" id="the-source-element:media-element-3">media element</a> directly, possibly making use of the <code id="the-source-element:dom-navigator-canplaytype"><a href="/breakup/specs/html-media/#dom-navigator-canplaytype">canPlayType()</a></code> method to pick from amongst available
  resources. Generally, manipulating <code id="the-source-element:the-source-element-3"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> elements manually after the document has
  been parsed is an unnecessarily complicated approach.</p>

  <p>The <dfn id="attr-source-type"><code>type</code></dfn> attribute gives the type of the
  <a href="/breakup/specs/html-media/#media-resource" id="the-source-element:media-resource-3">media resource</a>, to help the user agent determine if it can play this <a href="/breakup/specs/html-media/#media-resource" id="the-source-element:media-resource-4">media
  resource</a> before fetching it. If specified, its value must be a <a href="/breakup/specs/core-algorithms/#valid-mime-type" id="the-source-element:valid-mime-type">valid MIME
  type</a>. The <code>codecs</code> parameter, which certain MIME types define, might be
  necessary to specify exactly how the resource is encoded. [[!RFC6381]]</p>

  <div class="example">

   <p>The following list shows some examples of how to use the <code>codecs=</code> MIME
   parameter in the <code id="the-source-element:attr-source-type-2"><a href="/breakup/specs/html-media/#attr-source-type">type</a></code> attribute.</p>

   <dl><dt>H.264 Constrained baseline profile video (main and extended video compatible) level 3 and Low-Complexity AAC audio in MP4 container</dt><dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'&gt;</pre></dd><dt>H.264 Extended profile video (baseline-compatible) level 3 and Low-Complexity AAC audio in MP4 container</dt><dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="avc1.58A01E, mp4a.40.2"'&gt;</pre></dd><dt>H.264 Main profile video level 3 and Low-Complexity AAC audio in MP4 container</dt><dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="avc1.4D401E, mp4a.40.2"'&gt;</pre></dd><dt>H.264 'High' profile video (incompatible with main, baseline, or extended profiles) level 3 and Low-Complexity AAC audio in MP4 container</dt><dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="avc1.64001E, mp4a.40.2"'&gt;</pre></dd><dt>MPEG-4 Visual Simple Profile Level 0 video and Low-Complexity AAC audio in MP4 container</dt><dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="mp4v.20.8, mp4a.40.2"'&gt;</pre></dd><dt>MPEG-4 Advanced Simple Profile Level 0 video and Low-Complexity AAC audio in MP4 container</dt><dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="mp4v.20.240, mp4a.40.2"'&gt;</pre></dd><dt>MPEG-4 Visual Simple Profile Level 0 video and AMR audio in 3GPP container</dt><dd><pre>&lt;source src='video.3gp' type='video/3gpp; codecs="mp4v.20.8, samr"'&gt;</pre></dd><dt>Theora video and Vorbis audio in Ogg container</dt><dd><pre>&lt;source src='video.ogv' type='video/ogg; codecs="theora, vorbis"'&gt;</pre></dd><dt>Theora video and Speex audio in Ogg container</dt><dd><pre>&lt;source src='video.ogv' type='video/ogg; codecs="theora, speex"'&gt;</pre></dd><dt>Vorbis audio alone in Ogg container</dt><dd><pre>&lt;source src='audio.ogg' type='audio/ogg; codecs=vorbis'&gt;</pre></dd><dt>Speex audio alone in Ogg container</dt><dd><pre>&lt;source src='audio.spx' type='audio/ogg; codecs=speex'&gt;</pre></dd><dt>FLAC audio alone in Ogg container</dt><dd><pre>&lt;source src='audio.oga' type='audio/ogg; codecs=flac'&gt;</pre></dd><dt>Dirac video and Vorbis audio in Ogg container</dt><dd><pre>&lt;source src='video.ogv' type='video/ogg; codecs="dirac, vorbis"'&gt;</pre></dd></dl>

  </div>

  

  <p>If a <code id="the-source-element:the-source-element-4"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> <a href="/breakup/specs/core-algorithms/#nodes-are-inserted" id="the-source-element:nodes-are-inserted">element is inserted</a> as a child of a <a href="/breakup/specs/html-media/#media-element" id="the-source-element:media-element-4">media element</a> that
  has no <code id="the-source-element:attr-media-src-2"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute and whose <code id="the-source-element:dom-media-networkstate"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> has the value <code id="the-source-element:dom-media-network_empty"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code>, the user agent must invoke the <a href="/breakup/specs/html-media/#media-element" id="the-source-element:media-element-5">media
  element</a>'s <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="the-source-element:concept-media-load-algorithm">resource selection
  algorithm</a>.</p>

  <p>The IDL attributes <dfn id="dom-source-src"><code>src</code></dfn> and <dfn id="dom-source-type"><code>type</code></dfn> must <a href="/breakup/specs/core-algorithms/#reflect" id="the-source-element:reflect">reflect</a> the respective content
  attributes of the same name.</p>

  

  <div class="example">

   <p>If the author isn't sure if user agents will all be able to render the media resources
   provided, the author can listen to the <code id="the-source-element:event-error"><a href="/breakup/specs/html/#event-error">error</a></code> event on the last
   <code id="the-source-element:the-source-element-5"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> element and trigger fallback behaviour:</p>

   <pre>&lt;script&gt;
 function fallback(video) {
   // replace &lt;video&gt; with its contents
   while (video.hasChildNodes()) {
     if (video.firstChild instanceof HTMLSourceElement)
       video.removeChild(video.firstChild);
     else
       video.parentNode.insertBefore(video.firstChild, video);
   }
   video.parentNode.removeChild(video);
 }
&lt;/script&gt;
&lt;video controls autoplay&gt;
 &lt;source src='video.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'&gt;
 &lt;source src='video.ogv' type='video/ogg; codecs="theora, vorbis"'
         onerror="fallback(parentNode)"&gt;
 ...
&lt;/video&gt;</pre>

  </div></section><section><h2>The <dfn><code>track</code></dfn> element</h2>

  <dl class="element"><dt><a href="/breakup/specs/html-best-practices/#concept-element-categories" id="the-track-element:concept-element-categories">Categories</a>:</dt><dd>None.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-contexts" id="the-track-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>As a child of a <a href="/breakup/specs/html-media/#media-element" id="the-track-element:media-element">media element</a>, before any <a href="/breakup/specs/html-best-practices/#flow-content-2" id="the-track-element:flow-content-2">flow content</a>.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-content-model" id="the-track-element:concept-element-content-model">Content model</a>:</dt><dd><a href="/breakup/specs/html-best-practices/#concept-content-nothing" id="the-track-element:concept-content-nothing">Nothing</a>.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-tag-omission" id="the-track-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>No <a href="/breakup/specs/html-syntax/#syntax-end-tag" id="the-track-element:syntax-end-tag">end tag</a>.</dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-attributes" id="the-track-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-track-element:global-attributes">Global attributes</a></dd><dd><code id="the-track-element:attr-track-kind"><a href="/breakup/specs/html-media/#attr-track-kind">kind</a></code> — The type of text track</dd><dd><code id="the-track-element:attr-track-src"><a href="/breakup/specs/html-media/#attr-track-src">src</a></code> — Address of the resource</dd><dd><code id="the-track-element:attr-track-srclang"><a href="/breakup/specs/html-media/#attr-track-srclang">srclang</a></code> — Language of the text track</dd><dd><code id="the-track-element:attr-track-label"><a href="/breakup/specs/html-media/#attr-track-label">label</a></code> — User-visible label</dd><dd><code id="the-track-element:attr-track-default"><a href="/breakup/specs/html-media/#attr-track-default">default</a></code> — Enable the track if no other <a href="/breakup/specs/html-media/#text-track" id="the-track-element:text-track">text track</a> is more suitable</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#aria-role-attribute">ARIA role attribute</a> values:</dt><dd>None</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-global">Global aria-* attributes</a></dd><dt><a href="/breakup/specs/html-best-practices/#concept-element-dom" id="the-track-element:concept-element-dom">DOM interface</a>:</dt><dd>
<pre class="idl">interface <dfn id="htmltrackelement">HTMLTrackElement</dfn> : <a href="/breakup/specs/html-scripting/#htmlelement" id="the-track-element:htmlelement">HTMLElement</a> {
  attribute DOMString <a href="/breakup/specs/html-media/#dom-track-kind" id="the-track-element:dom-track-kind">kind</a>;
  attribute DOMString <a href="/breakup/specs/html-media/#dom-track-src" id="the-track-element:dom-track-src">src</a>;
  attribute DOMString <a href="/breakup/specs/html-media/#dom-track-srclang" id="the-track-element:dom-track-srclang">srclang</a>;
  attribute DOMString <a href="/breakup/specs/html-media/#dom-track-label" id="the-track-element:dom-track-label">label</a>;
  attribute boolean <a href="/breakup/specs/html-media/#dom-track-default" id="the-track-element:dom-track-default">default</a>;

  const unsigned short <a href="/breakup/specs/html-media/#dom-track-none" id="the-track-element:dom-track-none">NONE</a> = 0;
  const unsigned short <a href="/breakup/specs/html-media/#dom-track-loading" id="the-track-element:dom-track-loading">LOADING</a> = 1;
  const unsigned short <a href="/breakup/specs/html-media/#dom-track-loaded" id="the-track-element:dom-track-loaded">LOADED</a> = 2;
  const unsigned short <a href="/breakup/specs/html-media/#dom-track-error" id="the-track-element:dom-track-error">ERROR</a> = 3;
  readonly attribute unsigned short <a href="/breakup/specs/html-media/#dom-track-readystate" id="the-track-element:dom-track-readystate">readyState</a>;

  readonly attribute <a href="/breakup/specs/html-media/#texttrack" id="the-track-element:texttrack">TextTrack</a> <a href="/breakup/specs/html-media/#dom-track-track" id="the-track-element:dom-track-track">track</a>;
};</pre>
   </dd></dl>

  <p>The <code id="the-track-element:the-track-element"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element allows authors to specify explicit external timed <a href="/breakup/specs/html-media/#text-track" id="the-track-element:text-track-2">text tracks</a> for <a href="/breakup/specs/html-media/#media-element" id="the-track-element:media-element-2">media elements</a>. It
  does not <a href="/breakup/specs/html-scripting/#represents" id="the-track-element:represents">represent</a> anything on its own.</p>

  <p>The <dfn id="attr-track-kind"><code>kind</code></dfn> attribute is an <a href="/breakup/specs/core-algorithms/#enumerated-attribute" id="the-track-element:enumerated-attribute">enumerated
  attribute</a>. The following table lists the keywords defined for this attribute. The keyword
  given in the first cell of each row maps to the state given in the second cell.</p>

  <table><thead><tr><th>Keyword
     </th><th>State
     </th><th>Brief description
   </th></tr></thead><tbody><tr><td><dfn id="attr-track-kind-keyword-subtitles"><code>subtitles</code></dfn>
     </td><td><dfn id="attr-track-kind-subtitles">Subtitles</dfn>
     </td><td>
      Transcription or translation of the dialogue, suitable for when the sound is available but not understood (e.g. because the user does not understand the language of the <a href="/breakup/specs/html-media/#media-resource" id="the-track-element:media-resource">media resource</a>'s audio track).
      Overlaid on the video.
    </td></tr><tr><td><dfn id="attr-track-kind-keyword-captions"><code>captions</code></dfn>
     </td><td><dfn id="attr-track-kind-captions">Captions</dfn>
     </td><td>
      Transcription or translation of the dialogue, sound effects, relevant musical cues, and other relevant audio information, suitable for when sound is unavailable or not clearly audible (e.g. because it is muted, drowned-out by ambient noise, or because the user is deaf).
      Overlaid on the video; labeled as appropriate for the hard-of-hearing.
    </td></tr><tr><td><dfn id="attr-track-kind-keyword-descriptions"><code>descriptions</code></dfn>
     </td><td><dfn id="attr-track-kind-descriptions">Descriptions</dfn>
     </td><td>
      Textual descriptions of the video component of the <a href="/breakup/specs/html-media/#media-resource" id="the-track-element:media-resource-2">media resource</a>, intended for audio synthesis when the visual component is obscured, unavailable, or not usable (e.g. because the user is interacting with the application without a screen while driving, or because the user is blind).
      Synthesized as audio.
    </td></tr><tr><td><dfn id="attr-track-kind-keyword-chapters"><code>chapters</code></dfn>
     </td><td><dfn id="attr-track-kind-chapters">Chapters</dfn>
     </td><td>
      Chapter titles, intended to be used for navigating the <a href="/breakup/specs/html-media/#media-resource" id="the-track-element:media-resource-3">media resource</a>.
      Displayed as an interactive (potentially nested) list in the user agent's interface.
    </td></tr><tr><td><dfn id="attr-track-kind-keyword-metadata"><code>metadata</code></dfn>
     </td><td><dfn id="attr-track-kind-metadata">Metadata</dfn>
     </td><td>
      Tracks intended for use from script.
      Not displayed by the user agent.
  </td></tr></tbody></table>

  <p>The attribute may be omitted. The <i id="the-track-element:missing-value-default"><a href="/breakup/specs/core-algorithms/#missing-value-default">missing value default</a></i> is the <a href="/breakup/specs/html-media/#attr-track-kind-subtitles" id="the-track-element:attr-track-kind-subtitles">subtitles</a> state.</p>

  <p>The <dfn id="attr-track-src"><code>src</code></dfn> attribute gives the address of the text
  track data. The value must be a <a href="/breakup/specs/core-algorithms/#valid-non-empty-url-potentially-surrounded-by-spaces" id="the-track-element:valid-non-empty-url-potentially-surrounded-by-spaces">valid non-empty URL potentially surrounded by spaces</a>.
  This attribute must be present.</p>

  

  <p>If the element has a <code id="the-track-element:attr-track-src-2"><a href="/breakup/specs/html-media/#attr-track-src">src</a></code> attribute whose value is not the
  empty string and whose value, when the attribute was set, could be successfully <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="the-track-element:resolve-a-url">resolved</a> relative to the element, then the element's <dfn id="track-url">track
  URL</dfn> is the resulting <a href="/breakup/specs/core-algorithms/#absolute-url" id="the-track-element:absolute-url">absolute URL</a>. Otherwise, the element's <a href="/breakup/specs/html-media/#track-url" id="the-track-element:track-url">track
  URL</a> is the empty string.</p>

  

  <p>If the element's <a href="/breakup/specs/html-media/#track-url" id="the-track-element:track-url-2">track URL</a> identifies a WebVTT resource, and the element's <code id="the-track-element:attr-track-kind-2"><a href="/breakup/specs/html-media/#attr-track-kind">kind</a></code> attribute is not in the <a href="/breakup/specs/html-media/#attr-track-kind-metadata" id="the-track-element:attr-track-kind-metadata">metadata</a> state, then the WebVTT file must be a
  <a href="/breakup/specs/core-algorithms/#webvtt-file-using-cue-text" id="the-track-element:webvtt-file-using-cue-text">WebVTT file using cue text</a>. [[!WEBVTT]]</p>

  <p>Furthermore, if the element's <a href="/breakup/specs/html-media/#track-url" id="the-track-element:track-url-3">track URL</a> identifies a WebVTT resource, and the
  element's <code id="the-track-element:attr-track-kind-3"><a href="/breakup/specs/html-media/#attr-track-kind">kind</a></code> attribute is in the <a href="/breakup/specs/html-media/#attr-track-kind-chapters" id="the-track-element:attr-track-kind-chapters">chapters</a> state, then the WebVTT file must be both a
  <a href="/breakup/specs/core-algorithms/#webvtt-file-using-chapter-title-text" id="the-track-element:webvtt-file-using-chapter-title-text">WebVTT file using chapter title text</a> and a <a href="/breakup/specs/core-algorithms/#webvtt-file-using-only-nested-cues" id="the-track-element:webvtt-file-using-only-nested-cues">WebVTT file using only nested
  cues</a>. [[!WEBVTT]]</p>

  <p>The <dfn id="attr-track-srclang"><code>srclang</code></dfn> attribute gives the language of
  the text track data. The value must be a valid BCP 47 language tag. This attribute must be present
  if the element's <code id="the-track-element:attr-track-kind-4"><a href="/breakup/specs/html-media/#attr-track-kind">kind</a></code> attribute is in the <a href="/breakup/specs/html-media/#attr-track-kind-subtitles" id="the-track-element:attr-track-kind-subtitles-2">subtitles</a> state. [[!BCP47]]</p>

  

  <p>If the element has a <code id="the-track-element:attr-track-srclang-2"><a href="/breakup/specs/html-media/#attr-track-srclang">srclang</a></code> attribute whose value is
  not the empty string, then the element's <dfn id="track-language">track language</dfn> is the value of the attribute.
  Otherwise, the element has no <a href="/breakup/specs/html-media/#track-language" id="the-track-element:track-language">track language</a>.</p>

  

  <p>The <dfn id="attr-track-label"><code>label</code></dfn> attribute gives a user-readable
  title for the track. This title is used by user agents when listing <a href="/breakup/specs/html-media/#attr-track-kind-subtitles" id="the-track-element:attr-track-kind-subtitles-3">subtitle</a>, <a href="/breakup/specs/html-media/#attr-track-kind-captions" id="the-track-element:attr-track-kind-captions">caption</a>, and <a href="/breakup/specs/html-media/#attr-track-kind-descriptions" id="the-track-element:attr-track-kind-descriptions">audio description</a> tracks in their user interface.</p>

  <p>The value of the <code id="the-track-element:attr-track-label-2"><a href="/breakup/specs/html-media/#attr-track-label">label</a></code> attribute, if the attribute is
  present, must not be the empty string. Furthermore, there must not be two <code id="the-track-element:the-track-element-2"><a href="/breakup/specs/html-media/#the-track-element">track</a></code>
  element children of the same <a href="/breakup/specs/html-media/#media-element" id="the-track-element:media-element-3">media element</a> whose <code id="the-track-element:attr-track-kind-5"><a href="/breakup/specs/html-media/#attr-track-kind">kind</a></code> attributes are in the same state, whose <code id="the-track-element:attr-track-srclang-3"><a href="/breakup/specs/html-media/#attr-track-srclang">srclang</a></code> attributes are both missing or have values that
  represent the same language, and whose <code id="the-track-element:attr-track-label-3"><a href="/breakup/specs/html-media/#attr-track-label">label</a></code> attributes are
  again both missing or both have the same value.</p>

  

  <p>If the element has a <code id="the-track-element:attr-track-label-4"><a href="/breakup/specs/html-media/#attr-track-label">label</a></code> attribute whose value is not
  the empty string, then the element's <dfn id="track-label">track label</dfn> is the value of the attribute.
  Otherwise, the element's <a href="/breakup/specs/html-media/#track-label" id="the-track-element:track-label">track label</a> is an empty string.</p>

  

  <p>The <dfn id="attr-track-default"><code>default</code></dfn> attribute is a <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="the-track-element:boolean-attribute">boolean
  attribute</a>, which, if specified, indicates that the track is to be enabled if the user's
  preferences do not indicate that another track would be more appropriate.</p>

  <p>Each <a href="/breakup/specs/html-media/#media-element" id="the-track-element:media-element-4">media element</a> must have no more than one <code id="the-track-element:the-track-element-3"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element child
  whose <code id="the-track-element:attr-track-kind-6"><a href="/breakup/specs/html-media/#attr-track-kind">kind</a></code> attribute is in the <a href="/breakup/specs/html-media/#attr-track-kind-subtitles" id="the-track-element:attr-track-kind-subtitles-4">subtitles</a> or <a href="/breakup/specs/html-media/#attr-track-kind-captions" id="the-track-element:attr-track-kind-captions-2">captions</a> state and whose <code id="the-track-element:attr-track-default-2"><a href="/breakup/specs/html-media/#attr-track-default">default</a></code> attribute is specified.</p>

  <p>Each <a href="/breakup/specs/html-media/#media-element" id="the-track-element:media-element-5">media element</a> must have no more than one <code id="the-track-element:the-track-element-4"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element child
  whose <code id="the-track-element:attr-track-kind-7"><a href="/breakup/specs/html-media/#attr-track-kind">kind</a></code> attribute is in the <a href="/breakup/specs/html-media/#attr-track-kind-descriptions" id="the-track-element:attr-track-kind-descriptions-2">description</a> state and whose <code id="the-track-element:attr-track-default-3"><a href="/breakup/specs/html-media/#attr-track-default">default</a></code> attribute is specified.</p>

  <p>Each <a href="/breakup/specs/html-media/#media-element" id="the-track-element:media-element-6">media element</a> must have no more than one <code id="the-track-element:the-track-element-5"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element child
  whose <code id="the-track-element:attr-track-kind-8"><a href="/breakup/specs/html-media/#attr-track-kind">kind</a></code> attribute is in the <a href="/breakup/specs/html-media/#attr-track-kind-chapters" id="the-track-element:attr-track-kind-chapters-2">chapters</a> state and whose <code id="the-track-element:attr-track-default-4"><a href="/breakup/specs/html-media/#attr-track-default">default</a></code> attribute is specified.</p>

  <p class="note">There is no limit on the number of <code id="the-track-element:the-track-element-6"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> elements whose <code id="the-track-element:attr-track-kind-9"><a href="/breakup/specs/html-media/#attr-track-kind">kind</a></code> attribute is in the <a href="/breakup/specs/html-media/#attr-track-kind-metadata" id="the-track-element:attr-track-kind-metadata-2">metadata</a> state and whose <code id="the-track-element:attr-track-default-5"><a href="/breakup/specs/html-media/#attr-track-default">default</a></code> attribute is specified.</p>

  <dl class="domintro"><dt><var>track</var> . <code id="the-track-element:dom-track-readystate-2"><a href="/breakup/specs/html-media/#dom-track-readystate">readyState</a></code></dt><dd>
    <p>Returns the <a href="/breakup/specs/html-media/#text-track-readiness-state" id="the-track-element:text-track-readiness-state">text track readiness state</a>,
    represented by a number from the following list:</p>
    <dl><dt><var>track</var> . <code id="the-track-element:dom-track-none-2"><a href="/breakup/specs/html-media/#dom-track-none">NONE</a></code> (0)</dt><dd>
      <p>The <a href="/breakup/specs/html-media/#text-track-not-loaded" id="the-track-element:text-track-not-loaded">text track not loaded</a> state.</p>
     </dd><dt><var>track</var> . <code id="the-track-element:dom-track-loading-2"><a href="/breakup/specs/html-media/#dom-track-loading">LOADING</a></code> (1)</dt><dd>
      <p>The <a href="/breakup/specs/html-media/#text-track-loading" id="the-track-element:text-track-loading">text track loading</a> state.</p>
     </dd><dt><var>track</var> . <code id="the-track-element:dom-track-loaded-2"><a href="/breakup/specs/html-media/#dom-track-loaded">LOADED</a></code> (2)</dt><dd>
      <p>The <a href="/breakup/specs/html-media/#text-track-loaded" id="the-track-element:text-track-loaded">text track loaded</a> state.</p>
     </dd><dt><var>track</var> . <code id="the-track-element:dom-track-error-2"><a href="/breakup/specs/html-media/#dom-track-error">ERROR</a></code> (3)</dt><dd>
      <p>The <a href="/breakup/specs/html-media/#text-track-failed-to-load" id="the-track-element:text-track-failed-to-load">text track failed to load</a> state.</p>
     </dd></dl>
   </dd><dt><var>track</var> . <code id="the-track-element:dom-track-track-2"><a href="/breakup/specs/html-media/#dom-track-track">track</a></code></dt><dd>

    <p>Returns the <code id="the-track-element:texttrack-2"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object corresponding to the <a href="/breakup/specs/html-media/#text-track" id="the-track-element:text-track-3">text track</a> of the <code id="the-track-element:the-track-element-7"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-track-readystate"><code>readyState</code></dfn> attribute must return the
  numeric value corresponding to the <a href="/breakup/specs/html-media/#text-track-readiness-state" id="the-track-element:text-track-readiness-state-2">text track readiness state</a> of the
  <code id="the-track-element:the-track-element-8"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element's <a href="/breakup/specs/html-media/#text-track" id="the-track-element:text-track-4">text track</a>, as defined by the following list:</p>

  <dl><dt><dfn id="dom-track-none"><code>NONE</code></dfn> (numeric value 0)</dt><dd>The <a href="/breakup/specs/html-media/#text-track-not-loaded" id="the-track-element:text-track-not-loaded-2">text track not loaded</a> state.</dd><dt><dfn id="dom-track-loading"><code>LOADING</code></dfn> (numeric value 1)</dt><dd>The <a href="/breakup/specs/html-media/#text-track-loading" id="the-track-element:text-track-loading-2">text track loading</a> state.</dd><dt><dfn id="dom-track-loaded"><code>LOADED</code></dfn> (numeric value 2)</dt><dd>The <a href="/breakup/specs/html-media/#text-track-loaded" id="the-track-element:text-track-loaded-2">text track loaded</a> state.</dd><dt><dfn id="dom-track-error"><code>ERROR</code></dfn> (numeric value 3)</dt><dd>The <a href="/breakup/specs/html-media/#text-track-failed-to-load" id="the-track-element:text-track-failed-to-load-2">text track failed to load</a> state.</dd></dl>

  <p>The <dfn id="dom-track-track"><code>track</code></dfn> IDL attribute must, on getting,
  return the <code id="the-track-element:the-track-element-9"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element's <a href="/breakup/specs/html-media/#text-track" id="the-track-element:text-track-5">text track</a>'s corresponding
  <code id="the-track-element:texttrack-3"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object.</p>

  <p>The <dfn id="dom-track-src"><code>src</code></dfn>, <dfn id="dom-track-srclang"><code>srclang</code></dfn>, <dfn id="dom-track-label"><code>label</code></dfn>, and <dfn id="dom-track-default"><code>default</code></dfn> IDL attributes must <a href="/breakup/specs/core-algorithms/#reflect" id="the-track-element:reflect">reflect</a> the
  respective content attributes of the same name. The <dfn id="dom-track-kind"><code>kind</code></dfn> IDL attribute must <a href="/breakup/specs/core-algorithms/#reflect" id="the-track-element:reflect-2">reflect</a> the content
  attribute of the same name, <a href="/breakup/specs/core-algorithms/#limited-to-only-known-values" id="the-track-element:limited-to-only-known-values">limited to only known values</a>.</p>

  

  <div class="example">

   <p>This video has subtitles in several languages:</p>

   <pre>&lt;video src="brave.webm"&gt;
 &lt;track kind=subtitles src=brave.en.vtt srclang=en label="English"&gt;
 &lt;track kind=captions src=brave.en.hoh.vtt srclang=en label="English for the Hard of Hearing"&gt;
 &lt;track kind=subtitles src=brave.fr.vtt srclang=fr lang=fr label="Français"&gt;
 &lt;track kind=subtitles src=brave.de.vtt srclang=de lang=de label="Deutsch"&gt;
&lt;/video&gt;</pre>

   <p>(The <code id="the-track-element:attr-lang"><a href="/breakup/specs/html-attributes/#attr-lang">lang</a></code> attributes on the last two describe the language of
   the <code id="the-track-element:attr-track-label-5"><a href="/breakup/specs/html-media/#attr-track-label">label</a></code> attribute, not the language of the subtitles
   themselves. The language of the subtitles is given by the <code id="the-track-element:attr-track-srclang-4"><a href="/breakup/specs/html-media/#attr-track-srclang">srclang</a></code> attribute.)</p>

  </div></section><section><h2>Media elements</h2>

  <p><dfn id="media-element">Media elements</dfn> (<code id="media-elements:the-audio-element"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> and <code id="media-elements:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code>, in
  this specification) implement the following interface:</p>

  <pre class="idl">enum <dfn id="canplaytyperesult">CanPlayTypeResult</dfn> { "" /* <a href="/breakup/specs/html-media/#dom-canplaytyperesult-nil" id="media-elements:dom-canplaytyperesult-nil">empty string</a> */, "<a href="/breakup/specs/html-media/#dom-canplaytyperesult-maybe" id="media-elements:dom-canplaytyperesult-maybe">maybe</a>", "<a href="/breakup/specs/html-media/#dom-canplaytyperesult-probably" id="media-elements:dom-canplaytyperesult-probably">probably</a>" };
typedef (<a href="/breakup/specs/core-algorithms/#mediastream" id="media-elements:mediastream">MediaStream</a> or <a href="/breakup/specs/core-algorithms/#mediasource" id="media-elements:mediasource">MediaSource</a> or <a href="/breakup/specs/core-algorithms/#blob" id="media-elements:blob">Blob</a>) <dfn id="mediaprovider">MediaProvider</dfn>;
interface <dfn id="htmlmediaelement">HTMLMediaElement</dfn> : <a href="/breakup/specs/html-scripting/#htmlelement" id="media-elements:htmlelement">HTMLElement</a> {

  // error state
  readonly attribute <a href="/breakup/specs/html-media/#mediaerror" id="media-elements:mediaerror">MediaError</a>? <a href="/breakup/specs/html-media/#dom-media-error" id="media-elements:dom-media-error">error</a>;

  // network state
  attribute DOMString <a href="/breakup/specs/html-media/#dom-media-src" id="media-elements:dom-media-src">src</a>;
  attribute <a href="/breakup/specs/html-media/#mediaprovider" id="media-elements:mediaprovider">MediaProvider</a>? <a href="/breakup/specs/html-media/#dom-media-srcobject" id="media-elements:dom-media-srcobject">srcObject</a>;
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-media-currentsrc" id="media-elements:dom-media-currentsrc">currentSrc</a>;
  attribute DOMString? <a href="/breakup/specs/html-media/#dom-media-crossorigin" id="media-elements:dom-media-crossorigin">crossOrigin</a>;
  const unsigned short <a href="/breakup/specs/html-media/#dom-media-network_empty" id="media-elements:dom-media-network_empty">NETWORK_EMPTY</a> = 0;
  const unsigned short <a href="/breakup/specs/html-media/#dom-media-network_idle" id="media-elements:dom-media-network_idle">NETWORK_IDLE</a> = 1;
  const unsigned short <a href="/breakup/specs/html-media/#dom-media-network_loading" id="media-elements:dom-media-network_loading">NETWORK_LOADING</a> = 2;
  const unsigned short <a href="/breakup/specs/html-media/#dom-media-network_no_source" id="media-elements:dom-media-network_no_source">NETWORK_NO_SOURCE</a> = 3;
  readonly attribute unsigned short <a href="/breakup/specs/html-media/#dom-media-networkstate" id="media-elements:dom-media-networkstate">networkState</a>;
  attribute DOMString <a href="/breakup/specs/html-media/#dom-media-preload" id="media-elements:dom-media-preload">preload</a>;
  readonly attribute <a href="/breakup/specs/html-media/#timeranges" id="media-elements:timeranges">TimeRanges</a> <a href="/breakup/specs/html-media/#dom-media-buffered" id="media-elements:dom-media-buffered">buffered</a>;
  void <a href="/breakup/specs/html-media/#dom-media-load" id="media-elements:dom-media-load">load</a>();
  <a href="/breakup/specs/html-media/#canplaytyperesult" id="media-elements:canplaytyperesult">CanPlayTypeResult</a> <a href="/breakup/specs/html-media/#dom-navigator-canplaytype" id="media-elements:dom-navigator-canplaytype">canPlayType</a>(DOMString type);

  // ready state
  const unsigned short <a href="/breakup/specs/html-media/#dom-media-have_nothing" id="media-elements:dom-media-have_nothing">HAVE_NOTHING</a> = 0;
  const unsigned short <a href="/breakup/specs/html-media/#dom-media-have_metadata" id="media-elements:dom-media-have_metadata">HAVE_METADATA</a> = 1;
  const unsigned short <a href="/breakup/specs/html-media/#dom-media-have_current_data" id="media-elements:dom-media-have_current_data">HAVE_CURRENT_DATA</a> = 2;
  const unsigned short <a href="/breakup/specs/html-media/#dom-media-have_future_data" id="media-elements:dom-media-have_future_data">HAVE_FUTURE_DATA</a> = 3;
  const unsigned short <a href="/breakup/specs/html-media/#dom-media-have_enough_data" id="media-elements:dom-media-have_enough_data">HAVE_ENOUGH_DATA</a> = 4;
  readonly attribute unsigned short <a href="/breakup/specs/html-media/#dom-media-readystate" id="media-elements:dom-media-readystate">readyState</a>;
  readonly attribute boolean <a href="/breakup/specs/html-media/#dom-media-seeking" id="media-elements:dom-media-seeking">seeking</a>;

  // playback state
  attribute double <a href="/breakup/specs/html-media/#dom-media-currenttime" id="media-elements:dom-media-currenttime">currentTime</a>;
  void <a href="/breakup/specs/html-media/#dom-media-fastseek" id="media-elements:dom-media-fastseek">fastSeek</a>(double time);
  readonly attribute unrestricted double <a href="/breakup/specs/html-media/#dom-media-duration" id="media-elements:dom-media-duration">duration</a>;
  <a href="/breakup/specs/core-algorithms/#idl-date" id="media-elements:idl-date">Date</a> <a href="/breakup/specs/html-media/#dom-media-getstartdate" id="media-elements:dom-media-getstartdate">getStartDate</a>();
  readonly attribute boolean <a href="/breakup/specs/html-media/#dom-media-paused" id="media-elements:dom-media-paused">paused</a>;
  attribute double <a href="/breakup/specs/html-media/#dom-media-defaultplaybackrate" id="media-elements:dom-media-defaultplaybackrate">defaultPlaybackRate</a>;
  attribute double <a href="/breakup/specs/html-media/#dom-media-playbackrate" id="media-elements:dom-media-playbackrate">playbackRate</a>;
  readonly attribute <a href="/breakup/specs/html-media/#timeranges" id="media-elements:timeranges-2">TimeRanges</a> <a href="/breakup/specs/html-media/#dom-media-played" id="media-elements:dom-media-played">played</a>;
  readonly attribute <a href="/breakup/specs/html-media/#timeranges" id="media-elements:timeranges-3">TimeRanges</a> <a href="/breakup/specs/html-media/#dom-media-seekable" id="media-elements:dom-media-seekable">seekable</a>;
  readonly attribute boolean <a href="/breakup/specs/html-media/#dom-media-ended" id="media-elements:dom-media-ended">ended</a>;
  attribute boolean <a href="/breakup/specs/html-media/#dom-media-autoplay" id="media-elements:dom-media-autoplay">autoplay</a>;
  attribute boolean <a href="/breakup/specs/html-media/#dom-media-loop" id="media-elements:dom-media-loop">loop</a>;
  void <a href="/breakup/specs/html-media/#dom-media-play" id="media-elements:dom-media-play">play</a>();
  void <a href="/breakup/specs/html-media/#dom-media-pause" id="media-elements:dom-media-pause">pause</a>();

  // media controller
  attribute DOMString <a href="/breakup/specs/html-media/#dom-media-mediagroup" id="media-elements:dom-media-mediagroup">mediaGroup</a>;
  attribute <a href="/breakup/specs/html-media/#mediacontroller" id="media-elements:mediacontroller">MediaController</a>? <a href="/breakup/specs/html-media/#dom-media-controller" id="media-elements:dom-media-controller">controller</a>;

  // controls
  attribute boolean <a href="/breakup/specs/html-media/#dom-media-controls" id="media-elements:dom-media-controls">controls</a>;
  attribute double <a href="/breakup/specs/html-media/#dom-media-volume" id="media-elements:dom-media-volume">volume</a>;
  attribute boolean <a href="/breakup/specs/html-media/#dom-media-muted" id="media-elements:dom-media-muted">muted</a>;
  attribute boolean <a href="/breakup/specs/html-media/#dom-media-defaultmuted" id="media-elements:dom-media-defaultmuted">defaultMuted</a>;

  // tracks
  [SameObject] readonly attribute <a href="/breakup/specs/html-media/#audiotracklist" id="media-elements:audiotracklist">AudioTrackList</a> <a href="/breakup/specs/html-media/#dom-media-audiotracks" id="media-elements:dom-media-audiotracks">audioTracks</a>;
  [SameObject] readonly attribute <a href="/breakup/specs/html-media/#videotracklist" id="media-elements:videotracklist">VideoTrackList</a> <a href="/breakup/specs/html-media/#dom-media-videotracks" id="media-elements:dom-media-videotracks">videoTracks</a>;
  [SameObject] readonly attribute <a href="/breakup/specs/html-media/#texttracklist" id="media-elements:texttracklist">TextTrackList</a> <a href="/breakup/specs/html-media/#dom-media-texttracks" id="media-elements:dom-media-texttracks">textTracks</a>;
  <a href="/breakup/specs/html-media/#texttrack" id="media-elements:texttrack">TextTrack</a> <a href="/breakup/specs/html-media/#dom-media-addtexttrack" id="media-elements:dom-media-addtexttrack">addTextTrack</a>(<a href="/breakup/specs/html-media/#texttrackkind" id="media-elements:texttrackkind">TextTrackKind</a> kind, optional DOMString label = "", optional DOMString language = "");
};</pre>

  <p>The <dfn id="media-element-attributes">media element attributes</dfn>, <code id="media-elements:attr-media-src"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code>, <code id="media-elements:attr-media-crossorigin"><a href="/breakup/specs/html-media/#attr-media-crossorigin">crossorigin</a></code>, <code id="media-elements:attr-media-preload"><a href="/breakup/specs/html-media/#attr-media-preload">preload</a></code>, <code id="media-elements:attr-media-autoplay"><a href="/breakup/specs/html-media/#attr-media-autoplay">autoplay</a></code>,
  <code id="media-elements:attr-media-mediagroup"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code>, <code id="media-elements:attr-media-loop"><a href="/breakup/specs/html-media/#attr-media-loop">loop</a></code>,
  <code id="media-elements:attr-media-muted"><a href="/breakup/specs/html-media/#attr-media-muted">muted</a></code>, and <code id="media-elements:attr-media-controls"><a href="/breakup/specs/html-media/#attr-media-controls">controls</a></code>, apply to all <a href="/breakup/specs/html-media/#media-element" id="media-elements:media-element">media
  elements</a>. They are defined in this section.</p>

  

  

  <p><a href="/breakup/specs/html-media/#media-element" id="media-elements:media-element-2">Media elements</a> are used to present audio data, or video and
  audio data, to the user. This is referred to as <dfn id="media-data">media data</dfn> in this section, since this
  section applies equally to <a href="/breakup/specs/html-media/#media-element" id="media-elements:media-element-3">media elements</a> for audio or for
  video.

  The term <dfn id="media-resource">media resource</dfn> is used to refer to the complete set of media data, e.g. the
  complete video file, or complete audio file.

  </p>

  <p>A <a href="/breakup/specs/html-media/#media-resource" id="media-elements:media-resource">media resource</a> can have multiple audio and video tracks. For the purposes of a
  <a href="/breakup/specs/html-media/#media-element" id="media-elements:media-element-4">media element</a>, the video data of the <a href="/breakup/specs/html-media/#media-resource" id="media-elements:media-resource-2">media resource</a> is only that of the
  currently selected track (if any) as given by the element's <code id="media-elements:dom-media-videotracks-2"><a href="/breakup/specs/html-media/#dom-media-videotracks">videoTracks</a></code> attribute when the <a href="/breakup/specs/browser-dom/#event-loop" id="media-elements:event-loop">event loop</a> last
  reached <a href="/breakup/specs/browser-dom/#step1">step 1</a>, and the audio data of the <a href="/breakup/specs/html-media/#media-resource" id="media-elements:media-resource-3">media resource</a> is the result of mixing all
  the currently enabled tracks (if any) given by the element's <code id="media-elements:dom-media-audiotracks-2"><a href="/breakup/specs/html-media/#dom-media-audiotracks">audioTracks</a></code> attribute when the <a href="/breakup/specs/browser-dom/#event-loop" id="media-elements:event-loop-2">event loop</a> last
  reached <a href="/breakup/specs/browser-dom/#step1">step 1</a>.</p>

  <p class="note">Both <code id="media-elements:the-audio-element-2"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> and <code id="media-elements:the-video-element-2"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> elements can be used for both audio
  and video. The main difference between the two is simply that the <code id="media-elements:the-audio-element-3"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element has
  no playback area for visual content (such as video or captions), whereas the <code id="media-elements:the-video-element-3"><a href="/breakup/specs/html-media/#the-video-element">video</a></code>
  element does.</p>

  

  <p>Except where otherwise explicitly specified, the <a href="/breakup/specs/browser-dom/#task-source" id="media-elements:task-source">task source</a> for all the tasks
  <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-elements:queue-a-task">queued</a> in this section and its subsections is the <dfn id="media-element-event-task-source">media
  element event task source</dfn> of the <a href="/breakup/specs/html-media/#media-element" id="media-elements:media-element-5">media element</a> in question.</p>

  



  <section><h2>Error codes</h2>

  <dl class="domintro"><dt><var>media</var> . <code id="error-codes:dom-media-error"><a href="/breakup/specs/html-media/#dom-media-error">error</a></code></dt><dd>

    <p>Returns a <code id="error-codes:mediaerror"><a href="/breakup/specs/html-media/#mediaerror">MediaError</a></code> object representing the current error state of the
    element.</p>

    <p>Returns null if there is no error.</p>

   </dd></dl>

  

  <p>All <a href="/breakup/specs/html-media/#media-element" id="error-codes:media-element">media elements</a> have an associated error status, which
  records the last error the element encountered since its <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="error-codes:concept-media-load-algorithm">resource selection algorithm</a> was last invoked. The
  <dfn id="dom-media-error"><code>error</code></dfn> attribute, on getting, must return the
  <code id="error-codes:mediaerror-2"><a href="/breakup/specs/html-media/#mediaerror">MediaError</a></code> object created for this last error, or null if there has not been an
  error.</p>

  

  <pre class="idl">interface <dfn id="mediaerror">MediaError</dfn> {
  const unsigned short <a href="/breakup/specs/html-media/#dom-mediaerror-media_err_aborted" id="error-codes:dom-mediaerror-media_err_aborted">MEDIA_ERR_ABORTED</a> = 1;
  const unsigned short <a href="/breakup/specs/html-media/#dom-mediaerror-media_err_network" id="error-codes:dom-mediaerror-media_err_network">MEDIA_ERR_NETWORK</a> = 2;
  const unsigned short <a href="/breakup/specs/html-media/#dom-mediaerror-media_err_decode" id="error-codes:dom-mediaerror-media_err_decode">MEDIA_ERR_DECODE</a> = 3;
  const unsigned short <a href="/breakup/specs/html-media/#dom-mediaerror-media_err_src_not_supported" id="error-codes:dom-mediaerror-media_err_src_not_supported">MEDIA_ERR_SRC_NOT_SUPPORTED</a> = 4;
  readonly attribute unsigned short <a href="/breakup/specs/html-media/#dom-mediaerror-code" id="error-codes:dom-mediaerror-code">code</a>;
};</pre>

  <dl class="domintro"><dt><var>media</var> . <code id="error-codes:dom-media-error-2"><a href="/breakup/specs/html-media/#dom-media-error">error</a></code> . <code id="error-codes:dom-mediaerror-code-2"><a href="/breakup/specs/html-media/#dom-mediaerror-code">code</a></code></dt><dd>

    <p>Returns the current error's error code, from the list below.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-mediaerror-code"><code>code</code></dfn> attribute of a
  <code id="error-codes:mediaerror-3"><a href="/breakup/specs/html-media/#mediaerror">MediaError</a></code> object must return the code for the error, which must be one of the
  following:</p>

  

  <dl><dt><dfn id="dom-mediaerror-media_err_aborted"><code>MEDIA_ERR_ABORTED</code></dfn> (numeric value 1)</dt><dd>The fetching process for the <a href="/breakup/specs/html-media/#media-resource" id="error-codes:media-resource">media resource</a> was aborted by the user agent at the
   user's request.</dd><dt><dfn id="dom-mediaerror-media_err_network"><code>MEDIA_ERR_NETWORK</code></dfn> (numeric value 2)</dt><dd>A network error of some description caused the user agent to stop fetching the <a href="/breakup/specs/html-media/#media-resource" id="error-codes:media-resource-2">media
   resource</a>, after the resource was established to be usable.</dd><dt><dfn id="dom-mediaerror-media_err_decode"><code>MEDIA_ERR_DECODE</code></dfn> (numeric value 3)</dt><dd>An error of some description occurred while decoding the <a href="/breakup/specs/html-media/#media-resource" id="error-codes:media-resource-3">media resource</a>, after
   the resource was established to be usable.</dd><dt><dfn id="dom-mediaerror-media_err_src_not_supported"><code>MEDIA_ERR_SRC_NOT_SUPPORTED</code></dfn> (numeric value 4)</dt><dd>The <a href="/breakup/specs/html-media/#media-resource" id="error-codes:media-resource-4">media resource</a> indicated by the <code id="error-codes:attr-media-src"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code>
   attribute or <a href="/breakup/specs/html-media/#assigned-media-provider-object" id="error-codes:assigned-media-provider-object">assigned media provider object</a> was not suitable.</dd></dl></section>



  <section><h2>Location of the media resource</h2>

  <p>The <dfn id="attr-media-src"><code>src</code></dfn> content attribute on <a href="/breakup/specs/html-media/#media-element" id="location-of-the-media-resource:media-element">media elements</a> gives the address of the media resource (video, audio) to show. The
  attribute, if present, must contain a <a href="/breakup/specs/core-algorithms/#valid-non-empty-url-potentially-surrounded-by-spaces" id="location-of-the-media-resource:valid-non-empty-url-potentially-surrounded-by-spaces">valid non-empty URL potentially surrounded by
  spaces</a>.</p>

  <p>If the <code id="location-of-the-media-resource:names:-the-itemprop-attribute"><a href="http://www.w3.org/TR/microdata/#attr-itemprop">itemprop</a></code> attribute is specified on the <a href="/breakup/specs/html-media/#media-element" id="location-of-the-media-resource:media-element-2">media
  element</a>, then the <code id="location-of-the-media-resource:attr-media-src"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute must also be
  specified.</p>

  <p>The <dfn id="attr-media-crossorigin"><code>crossorigin</code></dfn> content attribute on
  <a href="/breakup/specs/html-media/#media-element" id="location-of-the-media-resource:media-element-3">media elements</a> is a <a href="/breakup/specs/core-algorithms/#cors-settings-attribute" id="location-of-the-media-resource:cors-settings-attribute">CORS settings attribute</a>.</p>

  

  <p id="concept-media-load-algorithm-at-creation">If a <a href="/breakup/specs/html-media/#media-element" id="location-of-the-media-resource:media-element-4">media element</a> is created with a
  <code id="location-of-the-media-resource:attr-media-src-2"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute, the user agent must <a href="/breakup/specs/core-algorithms/#immediately" id="location-of-the-media-resource:immediately">immediately</a> invoke the
  <a href="/breakup/specs/html-media/#media-element" id="location-of-the-media-resource:media-element-5">media element</a>'s <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="location-of-the-media-resource:concept-media-load-algorithm">resource selection
  algorithm</a>.</p>

  <p>If a <code id="location-of-the-media-resource:attr-media-src-3"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute of a <a href="/breakup/specs/html-media/#media-element" id="location-of-the-media-resource:media-element-6">media element</a> is set
  or changed, the user agent must invoke the <a href="/breakup/specs/html-media/#media-element" id="location-of-the-media-resource:media-element-7">media element</a>'s <a href="/breakup/specs/html-media/#media-element-load-algorithm" id="location-of-the-media-resource:media-element-load-algorithm">media element load
  algorithm</a>. (<em>Removing</em> the <code id="location-of-the-media-resource:attr-media-src-4"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute does
  not do this, even if there are <code id="location-of-the-media-resource:the-source-element"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> elements present.)</p>

  <p>The <dfn id="dom-media-src"><code>src</code></dfn> IDL attribute on <a href="/breakup/specs/html-media/#media-element" id="location-of-the-media-resource:media-element-8">media elements</a> must <a href="/breakup/specs/core-algorithms/#reflect" id="location-of-the-media-resource:reflect">reflect</a> the content attribute of the same
  name.</p>

  <p>The <dfn id="dom-media-crossorigin"><code>crossOrigin</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="location-of-the-media-resource:reflect-2">reflect</a> the <code id="location-of-the-media-resource:attr-media-crossorigin"><a href="/breakup/specs/html-media/#attr-media-crossorigin">crossorigin</a></code> content attribute.</p>

  
 
  <p>A <dfn id="media-provider-object">media provider object</dfn> is an object that can represent a <a href="/breakup/specs/html-media/#media-resource" id="location-of-the-media-resource:media-resource">media resource</a>,
  separate from a <a href="/breakup/specs/core-algorithms/#url" id="location-of-the-media-resource:url">URL</a>. <code id="location-of-the-media-resource:mediastream"><a href="/breakup/specs/core-algorithms/#mediastream">MediaStream</a></code> objects, <code id="location-of-the-media-resource:mediasource"><a href="/breakup/specs/core-algorithms/#mediasource">MediaSource</a></code>
  objects, <code id="location-of-the-media-resource:blob"><a href="/breakup/specs/core-algorithms/#blob">Blob</a></code> objects, and <code id="location-of-the-media-resource:file"><a href="/breakup/specs/core-algorithms/#file">File</a></code> objects are all <a href="/breakup/specs/html-media/#media-provider-object" id="location-of-the-media-resource:media-provider-object">media provider objects</a>.</p>

  

  <p>Each <a href="/breakup/specs/html-media/#media-element" id="location-of-the-media-resource:media-element-9">media element</a> can have an <dfn id="assigned-media-provider-object">assigned media provider object</dfn>, which is a
  <a href="/breakup/specs/html-media/#media-provider-object" id="location-of-the-media-resource:media-provider-object-2">media provider object</a>. When a <a href="/breakup/specs/html-media/#media-element" id="location-of-the-media-resource:media-element-10">media element</a> is created, it has no
  <a href="/breakup/specs/html-media/#assigned-media-provider-object" id="location-of-the-media-resource:assigned-media-provider-object">assigned media provider object</a>.</p>

  

  <dl class="domintro"><dt><var>media</var> . <code id="location-of-the-media-resource:dom-media-srcobject"><a href="/breakup/specs/html-media/#dom-media-srcobject">srcObject</a></code> [ = <var>source</var> ]</dt><dd>

    <p>Allows the <a href="/breakup/specs/html-media/#media-element" id="location-of-the-media-resource:media-element-11">media element</a> to be assigned a <a href="/breakup/specs/html-media/#media-provider-object" id="location-of-the-media-resource:media-provider-object-3">media provider object</a>.</p>

   </dd><dt><var>media</var> . <code id="location-of-the-media-resource:dom-media-currentsrc"><a href="/breakup/specs/html-media/#dom-media-currentsrc">currentSrc</a></code></dt><dd>

    <p>Returns the address of the current <a href="/breakup/specs/html-media/#media-resource" id="location-of-the-media-resource:media-resource-2">media resource</a>, if any.</p>

    <p>Returns the empty string when there is no <a href="/breakup/specs/html-media/#media-resource" id="location-of-the-media-resource:media-resource-3">media resource</a>, or it doesn't have an address.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-media-currentsrc"><code>currentSrc</code></dfn> IDL attribute must initially be set to
  the empty string. Its value is changed by the <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="location-of-the-media-resource:concept-media-load-algorithm-2">resource
  selection algorithm</a> defined below.</p>

  <p>The <dfn id="dom-media-srcobject"><code>srcObject</code></dfn> IDL attribute, on getting,
  must return the element's <a href="/breakup/specs/html-media/#assigned-media-provider-object" id="location-of-the-media-resource:assigned-media-provider-object-2">assigned media provider object</a>, if any, or null otherwise.
  On setting, it must set the element's <a href="/breakup/specs/html-media/#assigned-media-provider-object" id="location-of-the-media-resource:assigned-media-provider-object-3">assigned media provider object</a> to the new
  value, and then invoke the element's <a href="/breakup/specs/html-media/#media-element-load-algorithm" id="location-of-the-media-resource:media-element-load-algorithm-2">media element load algorithm</a>.</p>

  
 
  <p class="note">There are three ways to specify a <a href="/breakup/specs/html-media/#media-resource" id="location-of-the-media-resource:media-resource-4">media resource</a>: the <code id="location-of-the-media-resource:dom-media-srcobject-2"><a href="/breakup/specs/html-media/#dom-media-srcobject">srcObject</a></code> IDL attribute, the <code id="location-of-the-media-resource:attr-media-src-5"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> content attribute, and <code id="location-of-the-media-resource:the-source-element-2"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> elements. The IDL
  attribute takes priority, followed by the content attribute, followed by the elements.</p></section>



  <section><h2>MIME types</h2>

  <p>A <a href="/breakup/specs/html-media/#media-resource" id="mime-types:media-resource">media resource</a> can be described in terms of its <em>type</em>, specifically a
  <a href="/breakup/specs/core-algorithms/#mime-type" id="mime-types:mime-type">MIME type</a>, in some cases with a <code>codecs</code> parameter. (Whether the
  <code>codecs</code> parameter is allowed or not depends on the MIME type.) [[!RFC6381]]</p>

  <p>Types are usually somewhat incomplete descriptions; for example "<code>video/mpeg</code>" doesn't say anything except what the container type is, and even a
  type like "<code>video/mp4; codecs="avc1.42E01E, mp4a.40.2"</code>" doesn't
  include information like the actual bitrate (only the maximum bitrate). Thus, given a type, a user
  agent can often only know whether it <em>might</em> be able to play media of that type (with
  varying levels of confidence), or whether it definitely <em>cannot</em> play media of that
  type.</p>

  <p><dfn id="a-type-that-the-user-agent-knows-it-cannot-render">A type that the user agent knows it cannot render</dfn> is one that describes a resource
  that the user agent definitely does not support, for example because it doesn't recognise the
  container type, or it doesn't support the listed codecs.</p>

  <p>The <a href="/breakup/specs/core-algorithms/#mime-type" id="mime-types:mime-type-2">MIME type</a> "<code id="mime-types:application/octet-stream"><a data-x-internal="application/octet-stream" href="http://tools.ietf.org/html/rfc2046#section-4.5.1">application/octet-stream</a></code>" with no parameters is never
  <a href="/breakup/specs/html-media/#a-type-that-the-user-agent-knows-it-cannot-render" id="mime-types:a-type-that-the-user-agent-knows-it-cannot-render">a type that the user agent knows it cannot render</a>. User agents must treat that type
  as equivalent to the lack of any explicit <a href="/breakup/specs/core-algorithms/#content-type" id="mime-types:content-type">Content-Type metadata</a>
  when it is used to label a potential <a href="/breakup/specs/html-media/#media-resource" id="mime-types:media-resource-2">media resource</a>.</p>

  <p class="note">Only the <a href="/breakup/specs/core-algorithms/#mime-type" id="mime-types:mime-type-3">MIME type</a> "<code id="mime-types:application/octet-stream-2"><a data-x-internal="application/octet-stream" href="http://tools.ietf.org/html/rfc2046#section-4.5.1">application/octet-stream</a></code>" with no
  parameters is special-cased here; if any parameter appears with it, it will be treated just like
  any other <a href="/breakup/specs/core-algorithms/#mime-type" id="mime-types:mime-type-4">MIME type</a>. This is a deviation from the rule  that unknown <a href="/breakup/specs/core-algorithms/#mime-type" id="mime-types:mime-type-5">MIME type</a> parameters should be ignored.</p> 

  <dl class="domintro"><dt><var>media</var> . <code id="mime-types:dom-navigator-canplaytype"><a href="/breakup/specs/html-media/#dom-navigator-canplaytype">canPlayType</a></code>(<var>type</var>)</dt><dd>

    <p>Returns the empty string (a negative response), "maybe", or "probably" based on how confident
    the user agent is that it can play media resources of the given type.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-navigator-canplaytype"><code>canPlayType(<var>type</var>)</code></dfn> method must return <dfn id="dom-canplaytyperesult-nil">the
  empty string</dfn> if <var>type</var> is <a href="/breakup/specs/html-media/#a-type-that-the-user-agent-knows-it-cannot-render" id="mime-types:a-type-that-the-user-agent-knows-it-cannot-render-2">a type that the user agent knows it cannot
  render</a> or is the type "<code id="mime-types:application/octet-stream-3"><a data-x-internal="application/octet-stream" href="http://tools.ietf.org/html/rfc2046#section-4.5.1">application/octet-stream</a></code>"; it must return "<dfn id="dom-canplaytyperesult-probably"><code>probably</code></dfn>" if the user agent is confident
  that the type represents a <a href="/breakup/specs/html-media/#media-resource" id="mime-types:media-resource-3">media resource</a> that it can render if used in with this
  <code id="mime-types:the-audio-element"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> or <code id="mime-types:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element; and it must return "<dfn id="dom-canplaytyperesult-maybe"><code>maybe</code></dfn>" otherwise. Implementors are encouraged
  to return "<code id="mime-types:dom-canplaytyperesult-maybe"><a href="/breakup/specs/html-media/#dom-canplaytyperesult-maybe">maybe</a></code>" unless the type can be
  confidently established as being supported or not. Generally, a user agent should never return
  "<code id="mime-types:dom-canplaytyperesult-probably"><a href="/breakup/specs/html-media/#dom-canplaytyperesult-probably">probably</a></code>" for a type that allows the <code>codecs</code> parameter if that parameter is not present.</p>

  

  <div class="example">

   <p>This script tests to see if the user agent supports a (fictional) new format to dynamically
   decide whether to use a <code id="mime-types:the-video-element-2"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element or a plugin:</p>

   <pre>&lt;section id="video"&gt;
 &lt;p&gt;&lt;a href="playing-cats.nfv"&gt;Download video&lt;/a&gt;&lt;/p&gt;
&lt;/section&gt;
&lt;script&gt;
 var videoSection = document.getElementById('video');
 var videoElement = document.createElement('video');
 var support = videoElement.canPlayType('video/x-new-fictional-format;codecs="kittens,bunnies"');
 if (support != "probably" &amp;&amp; "New Fictional Video Plugin" in navigator.plugins) {
   // not confident of browser support
   // but we have a plugin
   // so use plugin instead
   videoElement = document.createElement("embed");
 } else if (support == "") {
   // no support from browser and no plugin
   // do nothing
   videoElement = null;
 }
 if (videoElement) {
   while (videoSection.hasChildNodes())
     videoSection.removeChild(videoSection.firstChild);
   videoElement.setAttribute("src", "playing-cats.nfv");
   videoSection.appendChild(videoElement);
 }
&lt;/script&gt;</pre>

  </div>

  <p class="note">The <code id="mime-types:attr-source-type"><a href="/breakup/specs/html-media/#attr-source-type">type</a></code> attribute of the
  <code id="mime-types:the-source-element"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> element allows the user agent to avoid downloading resources that use formats
  it cannot render.</p></section>


  <section><h2>Network states</h2>

  <dl class="domintro"><dt><var>media</var> . <code id="network-states:dom-media-networkstate"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code></dt><dd>

    <p>Returns the current state of network activity for the element, from the codes in the list
    below.</p>

   </dd></dl>

  

  <p>As <a href="/breakup/specs/html-media/#media-element" id="network-states:media-element">media elements</a> interact with the network, their current
  network activity is represented by the <dfn id="dom-media-networkstate"><code>networkState</code></dfn> attribute. On getting, it must
  return the current network state of the element, which must be one of the following values:</p>

  

  <dl><dt><dfn id="dom-media-network_empty"><code>NETWORK_EMPTY</code></dfn> (numeric value 0)</dt><dd>The element has not yet been initialised. All attributes are in their initial states.</dd><dt><dfn id="dom-media-network_idle"><code>NETWORK_IDLE</code></dfn> (numeric value 1)</dt><dd>The element's <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="network-states:concept-media-load-algorithm">resource
   selection algorithm</a> is active and has selected a <a href="/breakup/specs/html-media/#media-resource" id="network-states:media-resource">resource</a>, but it is not actually using the network at this time.</dd><dt><dfn id="dom-media-network_loading"><code>NETWORK_LOADING</code></dfn> (numeric value 2)</dt><dd>The user agent is actively trying to download data.</dd><dt><dfn id="dom-media-network_no_source"><code>NETWORK_NO_SOURCE</code></dfn> (numeric value 3)</dt><dd>The element's <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="network-states:concept-media-load-algorithm-2">resource
   selection algorithm</a> is active, but it has not yet found a <a href="/breakup/specs/html-media/#media-resource" id="network-states:media-resource-2">resource</a> to use.</dd></dl>

  

  <p>The <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="network-states:concept-media-load-algorithm-3">resource selection algorithm</a> defined
  below describes exactly when the <code id="network-states:dom-media-networkstate-2"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code>
  attribute changes value and what events fire to indicate changes in this state.</p></section>

  




  <section><h2>Loading the media resource</h2>

  <dl class="domintro"><dt><var>media</var> . <code id="loading-the-media-resource:dom-media-load"><a href="/breakup/specs/html-media/#dom-media-load">load</a></code>()</dt><dd>

    <p>Causes the element to reset and start selecting and loading a new <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource">media resource</a>
    from scratch.</p>

   </dd></dl>

  

  <p>All <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element">media elements</a> have an <dfn id="autoplaying-flag">autoplaying flag</dfn>,
  which must begin in the true state, and a <dfn id="delaying-the-load-event-flag">delaying-the-load-event flag</dfn>, which must
  begin in the false state. While the <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag">delaying-the-load-event flag</a> is true, the element
  must <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event">delay the load event</a> of its document.</p>

  <p>When the <dfn id="dom-media-load"><code>load()</code></dfn> method on a <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-2">media
  element</a> is invoked, the user agent must run the <a href="/breakup/specs/html-media/#media-element-load-algorithm" id="loading-the-media-resource:media-element-load-algorithm">media element load
  algorithm</a>.</p>

  <p>The <dfn id="media-element-load-algorithm">media element load algorithm</dfn> consists of the following steps.</p>

  <ol><li><p>Abort any already-running instance of the <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="loading-the-media-resource:concept-media-load-algorithm">resource selection algorithm</a> for this
   element.</p></li><li>

    <p>If there are any <a href="/breakup/specs/browser-dom/#concept-task" id="loading-the-media-resource:concept-task">tasks</a> from the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-3">media
    element</a>'s <a href="/breakup/specs/html-media/#media-element-event-task-source" id="loading-the-media-resource:media-element-event-task-source">media element event task source</a> in one of the <a href="/breakup/specs/browser-dom/#task-queue" id="loading-the-media-resource:task-queue">task queues</a>, then remove those tasks.</p>



    <p class="note">Basically, pending events and callbacks for the media element are discarded when
    the media element starts loading a new resource.</p>

   </li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-4">media element</a>'s <code id="loading-the-media-resource:dom-media-networkstate"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> is set to <code id="loading-the-media-resource:dom-media-network_loading"><a href="/breakup/specs/html-media/#dom-media-network_loading">NETWORK_LOADING</a></code> or <code id="loading-the-media-resource:dom-media-network_idle"><a href="/breakup/specs/html-media/#dom-media-network_idle">NETWORK_IDLE</a></code>, <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event">fire a
   simple event</a> named <code id="loading-the-media-resource:event-media-abort"><a href="/breakup/specs/html-media/#event-media-abort">abort</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-5">media
   element</a>.</p></li><li>

    <p>If the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-6">media element</a>'s <code id="loading-the-media-resource:dom-media-networkstate-2"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code>
    is not set to <code id="loading-the-media-resource:dom-media-network_empty"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code>, then run these
    substeps:</p>

    <ol><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-2">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-2">fire a simple event</a> named <code id="loading-the-media-resource:event-media-emptied"><a href="/breakup/specs/html-media/#event-media-emptied">emptied</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-7">media element</a>.</p></li><li><p>If a fetching process is in progress for the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-8">media
     element</a>, the user agent should stop it.</p></li><li><p><a href="/breakup/specs/html-media/#forget-the-media-element's-media-resource-specific-tracks" id="loading-the-media-resource:forget-the-media-element's-media-resource-specific-tracks">Forget the media element's media-resource-specific tracks</a>.</p></li><li><p>If <code id="loading-the-media-resource:dom-media-readystate"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> is not set to <code id="loading-the-media-resource:dom-media-have_nothing"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>, then set it to that state.
     
     </p></li><li><p>If the <code id="loading-the-media-resource:dom-media-paused"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute is false, then set it to
     true.</p></li><li><p>If <code id="loading-the-media-resource:dom-media-seeking"><a href="/breakup/specs/html-media/#dom-media-seeking">seeking</a></code> is true, set it to false.</p></li><li>

      <p>Set the <a href="/breakup/specs/html-media/#current-playback-position" id="loading-the-media-resource:current-playback-position">current playback position</a> to 0.</p>

      <p>Set the <a href="/breakup/specs/html-media/#official-playback-position" id="loading-the-media-resource:official-playback-position">official playback position</a> to 0.</p>

      <p>If this changed the <a href="/breakup/specs/html-media/#official-playback-position" id="loading-the-media-resource:official-playback-position-2">official playback position</a>, then <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-3">queue a task</a>
      to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-3">fire a simple event</a> named <code id="loading-the-media-resource:event-media-timeupdate"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-9">media element</a>.</p>

     </li><li><p>Set the <a href="/breakup/specs/html-media/#timeline-offset" id="loading-the-media-resource:timeline-offset">timeline offset</a> to Not-a-Number (NaN).</p></li><li>

      <p>Update the <code id="loading-the-media-resource:dom-media-duration"><a href="/breakup/specs/html-media/#dom-media-duration">duration</a></code> attribute to Not-a-Number
      (NaN).</p>

      <p class="note">The user agent <a href="/breakup/specs/html-media/#durationChange">will not</a> fire a <code id="loading-the-media-resource:event-media-durationchange"><a href="/breakup/specs/html-media/#event-media-durationchange">durationchange</a></code> event for this particular change of
      the duration.</p>

     </li></ol>

   </li><li><p>Set the <code id="loading-the-media-resource:dom-media-playbackrate"><a href="/breakup/specs/html-media/#dom-media-playbackrate">playbackRate</a></code> attribute to the value of
   the <code id="loading-the-media-resource:dom-media-defaultplaybackrate"><a href="/breakup/specs/html-media/#dom-media-defaultplaybackrate">defaultPlaybackRate</a></code> attribute.</p></li><li><p>Set the <code id="loading-the-media-resource:dom-media-error"><a href="/breakup/specs/html-media/#dom-media-error">error</a></code> attribute to null and the
   <a href="/breakup/specs/html-media/#autoplaying-flag" id="loading-the-media-resource:autoplaying-flag">autoplaying flag</a> to true.</p></li><li><p>Invoke the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-10">media element</a>'s <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="loading-the-media-resource:concept-media-load-algorithm-2">resource selection algorithm</a>.</p></li><li>

    <p class="note">Playback of any previously playing <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-2">media resource</a> for this element
    stops.</p>

   </li></ol>

  <p>The <dfn id="concept-media-load-algorithm">resource selection algorithm</dfn> for a
  <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-11">media element</a> is as follows. This algorithm is always invoked as part of a <a href="/breakup/specs/browser-dom/#concept-task" id="loading-the-media-resource:concept-task-2">task</a>, but one
  of the first steps in the algorithm is to return and continue running the remaining steps
  <a href="/breakup/specs/core-algorithms/#in-parallel" id="loading-the-media-resource:in-parallel">in parallel</a>. In addition, this algorithm interacts
  closely with the <a href="/breakup/specs/browser-dom/#event-loop" id="loading-the-media-resource:event-loop">event loop</a> mechanism; in particular, it has <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section">synchronous sections</a> (which are triggered as part of the <a href="/breakup/specs/browser-dom/#event-loop" id="loading-the-media-resource:event-loop-2">event loop</a>
  algorithm). Steps in such sections are marked with ⌛.</p>

  <ol><li><p>Set the element's <code id="loading-the-media-resource:dom-media-networkstate-3"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> attribute to
   the <code id="loading-the-media-resource:dom-media-network_no_source"><a href="/breakup/specs/html-media/#dom-media-network_no_source">NETWORK_NO_SOURCE</a></code> value.</p></li><li><p>Set the element's <a href="/breakup/specs/html-media/#show-poster-flag" id="loading-the-media-resource:show-poster-flag">show poster flag</a> to true.</p></li><li><p>Set the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-12">media element</a>'s <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag-2">delaying-the-load-event flag</a> to true
   (this <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event-2">delays the load event</a>).</p></li><li><p><a href="/breakup/specs/browser-dom/#await-a-stable-state" id="loading-the-media-resource:await-a-stable-state">Await a stable state</a>, allowing the <a href="/breakup/specs/browser-dom/#concept-task" id="loading-the-media-resource:concept-task-3">task</a> that invoked this algorithm to continue. The <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-2">synchronous
   section</a> consists of all the remaining steps of this algorithm until the algorithm says the
   <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-3">synchronous section</a> has ended. (Steps in <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-4">synchronous sections</a> are marked with ⌛.)</p></li><li>

    <p>⌛ If the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-13">media element</a>'s <a href="/breakup/specs/html-media/#blocked-on-parser" id="loading-the-media-resource:blocked-on-parser">blocked-on-parser</a> flag is false,
    then <a href="/breakup/specs/html-media/#populate-the-list-of-pending-text-tracks" id="loading-the-media-resource:populate-the-list-of-pending-text-tracks">populate the list of pending text tracks</a>.</p>

   </li><li>

    <p>⌛ If the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-14">media element</a> has an <a href="/breakup/specs/html-media/#assigned-media-provider-object" id="loading-the-media-resource:assigned-media-provider-object">assigned media provider
    object</a>, then let <var>mode</var> be <i>object</i>.</p>

    <p>⌛ Otherwise, if the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-15">media element</a> has no <a href="/breakup/specs/html-media/#assigned-media-provider-object" id="loading-the-media-resource:assigned-media-provider-object-2">assigned media provider
    object</a> but has a <code id="loading-the-media-resource:attr-media-src"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code>
    attribute, then let <var>mode</var> be <i>attribute</i>.</p>

    <p>⌛ Otherwise, if the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-16">media element</a> does not have an <a href="/breakup/specs/html-media/#assigned-media-provider-object" id="loading-the-media-resource:assigned-media-provider-object-3">assigned media provider
    object</a> and does not have a <code id="loading-the-media-resource:attr-media-src-2"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute, but does have a <code id="loading-the-media-resource:the-source-element"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> element child, then
    let <var>mode</var> be <i>children</i> and let <var>candidate</var>
    be the first such <code id="loading-the-media-resource:the-source-element-2"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> element child in <a href="/breakup/specs/core-algorithms/#tree-order" id="loading-the-media-resource:tree-order">tree order</a>.</p>

    <p>⌛ Otherwise the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-17">media element</a> has no <a href="/breakup/specs/html-media/#assigned-media-provider-object" id="loading-the-media-resource:assigned-media-provider-object-4">assigned media provider
    object</a> and has neither a <code id="loading-the-media-resource:attr-media-src-3"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute nor a <code id="loading-the-media-resource:the-source-element-3"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> element child: set the
    <code id="loading-the-media-resource:dom-media-networkstate-4"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> to <code id="loading-the-media-resource:dom-media-network_empty-2"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code>, and abort these steps; the
    <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-5">synchronous section</a> ends.</p>

   </li><li><p>⌛ Set the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-18">media element</a>'s <code id="loading-the-media-resource:dom-media-networkstate-5"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> to <code id="loading-the-media-resource:dom-media-network_loading-2"><a href="/breakup/specs/html-media/#dom-media-network_loading">NETWORK_LOADING</a></code>.</p></li><li><p>⌛ <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-4">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-4">fire a simple event</a> named <code id="loading-the-media-resource:event-media-loadstart"><a href="/breakup/specs/html-media/#event-media-loadstart">loadstart</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-19">media element</a>.</p></li><li>

    <p>Run the appropriate steps from the following list:</p>

    <dl class="switch"><dt>If <var>mode</var> is <i>object</i></dt><dd>

      <ol><li><p>⌛ Set the <code id="loading-the-media-resource:dom-media-currentsrc"><a href="/breakup/specs/html-media/#dom-media-currentsrc">currentSrc</a></code> attribute to
       the empty string.</p></li><li><p>End the <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-6">synchronous section</a>, continuing the remaining steps
       <a href="/breakup/specs/core-algorithms/#in-parallel" id="loading-the-media-resource:in-parallel-2">in parallel</a>.</p></li><li><p>Run the <a href="/breakup/specs/html-media/#concept-media-load-resource" id="loading-the-media-resource:concept-media-load-resource">resource fetch algorithm</a>
       with the <a href="/breakup/specs/html-media/#assigned-media-provider-object" id="loading-the-media-resource:assigned-media-provider-object-5">assigned media provider object</a>. If that algorithm returns without
       aborting <em>this</em> one, then the load failed.</p></li><li><p><i>Failed with media provider</i>: Reaching this step indicates that the media
       resource failed to load. <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-5">Queue a task</a> to run the <a href="/breakup/specs/html-media/#dedicated-media-source-failure-steps" id="loading-the-media-resource:dedicated-media-source-failure-steps">dedicated media source
       failure steps</a>.</p></li><li><p>Wait for the <a href="/breakup/specs/browser-dom/#concept-task" id="loading-the-media-resource:concept-task-4">task</a> queued by the previous step to have
       executed.</p></li><li><p>Abort these steps. The element won't attempt to load another resource until this
       algorithm is triggered again.</p></li></ol>

     </dd><dt>If <var>mode</var> is <i>attribute</i></dt><dd>

      <ol><li><p>⌛ If the <code id="loading-the-media-resource:attr-media-src-4"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code>
       attribute's value is the empty string, then end the <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-7">synchronous section</a>, and jump
       down to the <i>failed with attribute</i> step below.</p></li><li><p>⌛ Let <var>absolute URL</var> be the <a href="/breakup/specs/core-algorithms/#absolute-url" id="loading-the-media-resource:absolute-url">absolute URL</a> that
       would have resulted from <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="loading-the-media-resource:resolve-a-url">resolving</a> the <a href="/breakup/specs/core-algorithms/#url" id="loading-the-media-resource:url">URL</a>
       specified by the <code id="loading-the-media-resource:attr-media-src-5"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute's value relative to the
       <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-20">media element</a> when the <code id="loading-the-media-resource:attr-media-src-6"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code> attribute was last
       changed.</p> 

       </li><li><p>⌛ If <var>absolute URL</var> was obtained successfully, set the <code id="loading-the-media-resource:dom-media-currentsrc-2"><a href="/breakup/specs/html-media/#dom-media-currentsrc">currentSrc</a></code> attribute to <var>absolute
       URL</var>.</p></li><li><p>End the <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-8">synchronous section</a>, continuing the remaining steps
       <a href="/breakup/specs/core-algorithms/#in-parallel" id="loading-the-media-resource:in-parallel-3">in parallel</a>.</p></li><li><p>If <var>absolute URL</var> was obtained successfully, run the <a href="/breakup/specs/html-media/#concept-media-load-resource" id="loading-the-media-resource:concept-media-load-resource-2">resource fetch algorithm</a> with <var>absolute
       URL</var>. If that algorithm returns without aborting <em>this</em> one, then the load
       failed.</p></li><li><p><i>Failed with attribute</i>: Reaching this step indicates that the media resource
       failed to load or that the given <a href="/breakup/specs/core-algorithms/#url" id="loading-the-media-resource:url-2">URL</a> could not be <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="loading-the-media-resource:resolve-a-url-2">resolved</a>. <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-6">Queue a task</a> to run the <a href="/breakup/specs/html-media/#dedicated-media-source-failure-steps" id="loading-the-media-resource:dedicated-media-source-failure-steps-2">dedicated media source
       failure steps</a>.</p></li><li><p>Wait for the <a href="/breakup/specs/browser-dom/#concept-task" id="loading-the-media-resource:concept-task-5">task</a> queued by the previous step to have
       executed.</p></li><li><p>Abort these steps. The element won't attempt to load another resource until this
       algorithm is triggered again.</p></li></ol>

     </dd><dt>Otherwise (<var>mode</var> is <i>children</i>)</dt><dd>

      <ol><li>

        <p>⌛ Let <var>pointer</var> be a position defined by two adjacent nodes in the
        <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-21">media element</a>'s child list, treating the start of the list (before the first
        child in the list, if any) and end of the list (after the last child in the list, if any) as
        nodes in their own right. One node is the node before <var>pointer</var>, and the
        other node is the node after <var>pointer</var>. Initially, let <var>pointer</var> be the position between the <var>candidate</var> node and the
        next node, if there are any, or the end of the list, if it is the last node.</p>

        <p>As <a href="/breakup/specs/core-algorithms/#nodes-are-inserted" id="loading-the-media-resource:nodes-are-inserted">nodes are inserted</a> and <a href="/breakup/specs/core-algorithms/#nodes-are-removed" id="loading-the-media-resource:nodes-are-removed">removed</a> into the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-22">media element</a>, <var>pointer</var> must be updated as follows:</p>

        <dl><dt>If a new <a href="/breakup/specs/core-algorithms/#nodes-are-inserted" id="loading-the-media-resource:nodes-are-inserted-2">node is inserted</a> between the two nodes that define <var>pointer</var></dt><dd>Let <var>pointer</var> be the point between the node before <var>pointer</var> and the new node. In other words, insertions at <var>pointer</var> go after <var>pointer</var>.</dd><dt>If the node before <var>pointer</var> is removed</dt><dd>Let <var>pointer</var> be the point between the node after <var>pointer</var> and the node before the node after <var>pointer</var>. In
         other words, <var>pointer</var> doesn't move relative to the remaining nodes.</dd><dt>If the node after <var>pointer</var> is removed</dt><dd>Let <var>pointer</var> be the point between the node before <var>pointer</var> and the node after the node before <var>pointer</var>. Just
         as with the previous case, <var>pointer</var> doesn't move relative to the remaining
         nodes.</dd></dl>

        <p>Other changes don't affect <var>pointer</var>.</p>

       </li><li><p>⌛ <i>Process candidate</i>: If <var>candidate</var> does not have a
       <code id="loading-the-media-resource:attr-source-src"><a href="/breakup/specs/html-media/#attr-source-src">src</a></code> attribute, or if its <code id="loading-the-media-resource:attr-source-src-2"><a href="/breakup/specs/html-media/#attr-source-src">src</a></code> attribute's value is the empty string, then end the
       <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-9">synchronous section</a>, and jump down to the <i>failed with elements</i> step
       below.</p></li><li><p>⌛ Let <var>absolute URL</var> be the <a href="/breakup/specs/core-algorithms/#absolute-url" id="loading-the-media-resource:absolute-url-2">absolute URL</a> that
       would have resulted from <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="loading-the-media-resource:resolve-a-url-3">resolving</a> the <a href="/breakup/specs/core-algorithms/#url" id="loading-the-media-resource:url-3">URL</a>
       specified by <var>candidate</var>'s <code id="loading-the-media-resource:attr-source-src-3"><a href="/breakup/specs/html-media/#attr-source-src">src</a></code>
       attribute's value relative to the <var>candidate</var> when the <code id="loading-the-media-resource:attr-source-src-4"><a href="/breakup/specs/html-media/#attr-source-src">src</a></code> attribute was last changed.</p> 

       </li><li><p>⌛ If <var>absolute URL</var> was not obtained successfully, then end the
       <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-10">synchronous section</a>, and jump down to the <i>failed with elements</i> step
       below.</p></li><li><p>⌛ If <var>candidate</var> has a <code id="loading-the-media-resource:attr-source-type"><a href="/breakup/specs/html-media/#attr-source-type">type</a></code> attribute whose value, when parsed as a <a href="/breakup/specs/core-algorithms/#mime-type" id="loading-the-media-resource:mime-type">MIME
       type</a> (including any codecs described by the <code>codecs</code> parameter, for
       types that define that parameter), represents <a href="/breakup/specs/html-media/#a-type-that-the-user-agent-knows-it-cannot-render" id="loading-the-media-resource:a-type-that-the-user-agent-knows-it-cannot-render">a type that the user agent knows it cannot
       render</a>, then end the <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-11">synchronous section</a>, and jump down to the <i>failed with elements</i> step below.</p></li><li><p>⌛ Set the <code id="loading-the-media-resource:dom-media-currentsrc-3"><a href="/breakup/specs/html-media/#dom-media-currentsrc">currentSrc</a></code> attribute to <var>absolute URL</var>.</p></li><li><p>End the <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-12">synchronous section</a>, continuing the remaining steps
       <a href="/breakup/specs/core-algorithms/#in-parallel" id="loading-the-media-resource:in-parallel-4">in parallel</a>.</p></li><li><p>Run the <a href="/breakup/specs/html-media/#concept-media-load-resource" id="loading-the-media-resource:concept-media-load-resource-3">resource fetch algorithm</a> with
       <var>absolute URL</var>. If that algorithm returns without aborting <em>this</em> one,
       then the load failed.</p></li><li><p><i>Failed with elements</i>: <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-7">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-5">fire a simple
       event</a> named <code id="loading-the-media-resource:event-error"><a href="/breakup/specs/html/#event-error">error</a></code> at the <var>candidate</var> element.</p></li><li><p><a href="/breakup/specs/browser-dom/#await-a-stable-state" id="loading-the-media-resource:await-a-stable-state-2">Await a stable state</a>. The <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-13">synchronous section</a>
       consists of all the remaining steps of this algorithm until the algorithm says the
       <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-14">synchronous section</a> has ended. (Steps in <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-15">synchronous sections</a> are marked with ⌛.)</p></li><li><p>⌛ <a href="/breakup/specs/html-media/#forget-the-media-element's-media-resource-specific-tracks" id="loading-the-media-resource:forget-the-media-element's-media-resource-specific-tracks-2">Forget the media element's media-resource-specific
       tracks</a>.</p></li><li><p>⌛ <i>Find next candidate</i>: Let <var>candidate</var> be
       null.</p></li><li><p>⌛ <i>Search loop</i>: If the node after <var>pointer</var> is
       the end of the list, then jump to the <i>waiting</i> step below.</p></li><li><p>⌛ If the node after <var>pointer</var> is a <code id="loading-the-media-resource:the-source-element-4"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> element,
       let <var>candidate</var> be that element.</p></li><li><p>⌛ Advance <var>pointer</var> so that the node before <var>pointer</var> is now the node that was after <var>pointer</var>, and the node
       after <var>pointer</var> is the node after the node that used to be after <var>pointer</var>, if any.</p></li><li><p>⌛ If <var>candidate</var> is null, jump back to the <i>search
       loop</i> step. Otherwise, jump back to the <i>process candidate</i> step.</p></li><li><p>⌛ <i>Waiting</i>: Set the element's <code id="loading-the-media-resource:dom-media-networkstate-6"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> attribute to the <code id="loading-the-media-resource:dom-media-network_no_source-2"><a href="/breakup/specs/html-media/#dom-media-network_no_source">NETWORK_NO_SOURCE</a></code> value.</p></li><li><p>⌛ Set the element's <a href="/breakup/specs/html-media/#show-poster-flag" id="loading-the-media-resource:show-poster-flag-2">show poster flag</a> to true.</p></li><li><p>⌛ <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-8">Queue a task</a> to set the element's <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag-3">delaying-the-load-event
       flag</a> to false. This stops <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event-3">delaying the load
       event</a>.</p></li><li><p>End the <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-16">synchronous section</a>, continuing the remaining steps
       <a href="/breakup/specs/core-algorithms/#in-parallel" id="loading-the-media-resource:in-parallel-5">in parallel</a>.</p></li><li><p>Wait until the node after <var>pointer</var> is a node other than the end of
       the list. (This step might wait forever.)</p></li><li><p><a href="/breakup/specs/browser-dom/#await-a-stable-state" id="loading-the-media-resource:await-a-stable-state-3">Await a stable state</a>. The <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-17">synchronous section</a>
       consists of all the remaining steps of this algorithm until the algorithm says the
       <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-18">synchronous section</a> has ended. (Steps in <a href="/breakup/specs/browser-dom/#synchronous-section" id="loading-the-media-resource:synchronous-section-19">synchronous sections</a> are marked with ⌛.)</p></li><li><p>⌛ Set the element's <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag-4">delaying-the-load-event flag</a> back to true (this
       <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event-4">delays the load event</a> again, in case it hasn't been
       fired yet).</p>

       </li><li><p>⌛ Set the <code id="loading-the-media-resource:dom-media-networkstate-7"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> back to <code id="loading-the-media-resource:dom-media-network_loading-3"><a href="/breakup/specs/html-media/#dom-media-network_loading">NETWORK_LOADING</a></code>.</p></li><li><p>⌛ Jump back to the <i>find next candidate</i> step above.</p></li></ol>

     </dd></dl>

    <p>The <dfn id="dedicated-media-source-failure-steps">dedicated media source failure steps</dfn> are the following steps:</p>

    <ol><li><p>Set the <code id="loading-the-media-resource:dom-media-error-2"><a href="/breakup/specs/html-media/#dom-media-error">error</a></code> attribute to a new
     <code id="loading-the-media-resource:mediaerror"><a href="/breakup/specs/html-media/#mediaerror">MediaError</a></code> object whose <code id="loading-the-media-resource:dom-mediaerror-code"><a href="/breakup/specs/html-media/#dom-mediaerror-code">code</a></code> attribute
     is set to <code id="loading-the-media-resource:dom-mediaerror-media_err_src_not_supported"><a href="/breakup/specs/html-media/#dom-mediaerror-media_err_src_not_supported">MEDIA_ERR_SRC_NOT_SUPPORTED</a></code>.</p></li><li><p><a href="/breakup/specs/html-media/#forget-the-media-element's-media-resource-specific-tracks" id="loading-the-media-resource:forget-the-media-element's-media-resource-specific-tracks-3">Forget the media element's media-resource-specific tracks</a>.</p></li><li><p>Set the element's <code id="loading-the-media-resource:dom-media-networkstate-8"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> attribute to
     the <code id="loading-the-media-resource:dom-media-network_no_source-3"><a href="/breakup/specs/html-media/#dom-media-network_no_source">NETWORK_NO_SOURCE</a></code> value.</p></li><li><p>Set the element's <a href="/breakup/specs/html-media/#show-poster-flag" id="loading-the-media-resource:show-poster-flag-3">show poster flag</a> to true.</p></li><li><p><a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-6">Fire a simple event</a> named <code id="loading-the-media-resource:event-media-error"><a href="/breakup/specs/html-media/#event-media-error">error</a></code> at
     the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-23">media element</a>.</p></li><li><p>Set the element's <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag-5">delaying-the-load-event flag</a> to false. This stops <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event-5">delaying the load event</a>.</p></li></ol>

   </li></ol>

  <p>The <dfn id="concept-media-load-resource">resource fetch algorithm</dfn> for a <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-24">media
  element</a> and a given <a href="/breakup/specs/core-algorithms/#absolute-url" id="loading-the-media-resource:absolute-url-3">absolute URL</a> or <a href="/breakup/specs/html-media/#media-provider-object" id="loading-the-media-resource:media-provider-object">media provider object</a> is as
  follows:</p>

  <ol><li><p>If the algorithm was invoked with a <a href="/breakup/specs/core-algorithms/#url" id="loading-the-media-resource:url-4">URL</a>, then let <var>mode</var> be
   <i>remote</i>, otherwise let <var>mode</var> be <i>local</i>.</p></li><li><p>If <var>mode</var> is <i>local</i>, then let the <var>current media resource</var> be the
   resource given by the <a href="/breakup/specs/core-algorithms/#absolute-url" id="loading-the-media-resource:absolute-url-4">absolute URL</a> passed to this algorithm; otherwise, let the
   <var>current media resource</var> be the resource given by the <a href="/breakup/specs/html-media/#media-provider-object" id="loading-the-media-resource:media-provider-object-2">media provider
   object</a>. Either way, the <var>current media resource</var> is now the element's <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-3">media
   resource</a>.</p></li><li><p>Remove all <a href="/breakup/specs/html-media/#media-resource-specific-text-track" id="loading-the-media-resource:media-resource-specific-text-track">media-resource-specific text
   tracks</a> from the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-25">media element</a>'s <a href="/breakup/specs/html-media/#list-of-pending-text-tracks" id="loading-the-media-resource:list-of-pending-text-tracks">list of pending text tracks</a>, if
   any.</p>


   </li><li>

    <p>Run the appropriate steps from the following list:</p>

    <dl class="switch"><dt>If <var>mode</var> is remote</dt><dd>

      <ol><li>

        <p>Optionally, run the following substeps. This is the expected behaviour if the user agent
        intends to not attempt to fetch the resource until the user requests it explicitly (e.g. as
        a way to implement the <code id="loading-the-media-resource:attr-media-preload"><a href="/breakup/specs/html-media/#attr-media-preload">preload</a></code> attribute's <code id="loading-the-media-resource:attr-media-preload-none"><a href="/breakup/specs/html-media/#attr-media-preload-none">none</a></code> keyword).</p>

        <ol><li><p>Set the <code id="loading-the-media-resource:dom-media-networkstate-9"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> to <code id="loading-the-media-resource:dom-media-network_idle-2"><a href="/breakup/specs/html-media/#dom-media-network_idle">NETWORK_IDLE</a></code>.</p></li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-9">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-7">fire a simple event</a> named <code id="loading-the-media-resource:event-media-suspend"><a href="/breakup/specs/html-media/#event-media-suspend">suspend</a></code> at the element.</p></li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-10">Queue a task</a> to set the element's <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag-6">delaying-the-load-event flag</a>
         to false. This stops <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event-6">delaying the load
         event</a>.</p></li><li><p>Wait for the task to be run.</p></li><li><p>Wait for an implementation-defined event (e.g. the user requesting that the media
         element begin playback).</p></li><li><p>Set the element's <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag-7">delaying-the-load-event flag</a> back to true (this <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event-7">delays the load event</a> again, in case it hasn't been fired
         yet).</p>

         </li><li><p>Set the <code id="loading-the-media-resource:dom-media-networkstate-10"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> to <code id="loading-the-media-resource:dom-media-network_loading-4"><a href="/breakup/specs/html-media/#dom-media-network_loading">NETWORK_LOADING</a></code>.</p></li></ol>

       </li><li>

        <p>Perform a <a href="/breakup/specs/core-algorithms/#potentially-cors-enabled-fetch" id="loading-the-media-resource:potentially-cors-enabled-fetch">potentially CORS-enabled fetch</a> of the <var>current media
        resource</var>'s <a href="/breakup/specs/core-algorithms/#absolute-url" id="loading-the-media-resource:absolute-url-5">absolute URL</a>, with the <i>mode</i> being the state of the
        <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-26">media element</a>'s <code id="loading-the-media-resource:attr-media-crossorigin"><a href="/breakup/specs/html-media/#attr-media-crossorigin">crossorigin</a></code> content
        attribute, the <i>origin</i> being the <a href="/breakup/specs/browser-dom/#origin-2" id="loading-the-media-resource:origin-2">origin</a> of the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-27">media element</a>'s
        <a id="loading-the-media-resource:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>, and the <i>default origin behaviour</i> set to <i>taint</i>.</p>

        <p>The resource obtained in this fashion, if any, contains the <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data">media data</a>. It can
        be <a href="/breakup/specs/core-algorithms/#cors-same-origin" id="loading-the-media-resource:cors-same-origin">CORS-same-origin</a> or <a href="/breakup/specs/core-algorithms/#cors-cross-origin" id="loading-the-media-resource:cors-cross-origin">CORS-cross-origin</a>; this affects whether
        subtitles referenced in the <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-2">media data</a> are exposed in the API and, for
        <code id="loading-the-media-resource:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> elements, whether a <code id="loading-the-media-resource:the-canvas-element"><a href="/breakup/specs/html-canvas/#the-canvas-element">canvas</a></code> gets tainted when the video is drawn
        on it.</p>

        <p>The <dfn id="stall-timeout">stall timeout</dfn> is a user-agent defined length of time, which should be about
        three seconds. When a <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-28">media element</a> that is actively attempting to obtain
        <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-3">media data</a> has failed to receive any data for a duration equal to the <a href="/breakup/specs/html-media/#stall-timeout" id="loading-the-media-resource:stall-timeout">stall
        timeout</a>, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-11">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-8">fire a simple
        event</a> named <code id="loading-the-media-resource:event-media-stalled"><a href="/breakup/specs/html-media/#event-media-stalled">stalled</a></code> at the element.</p>

        <p>User agents may allow users to selectively block or slow <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-4">media data</a> downloads.
        When a <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-29">media element</a>'s download has been blocked altogether, the user agent must
        act as if it was stalled (as opposed to acting as if the connection was closed). The rate of the
        download may also be throttled automatically by the user agent, e.g. to balance the download
        with other connections sharing the same bandwidth.</p>

        <p id="resourceSuspend">User agents may decide to not download more content at any time, e.g.
        after buffering five minutes of a one hour media resource, while waiting for the user to decide
        whether to play the resource or not, while waiting for user input in an interactive resource, or
        when the user navigates away from the page. When a <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-30">media element</a>'s download has
        been suspended, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-12">queue a task</a>, to set the <code id="loading-the-media-resource:dom-media-networkstate-11"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> to <code id="loading-the-media-resource:dom-media-network_idle-3"><a href="/breakup/specs/html-media/#dom-media-network_idle">NETWORK_IDLE</a></code> and <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-9">fire a simple event</a> named
        <code id="loading-the-media-resource:event-media-suspend-2"><a href="/breakup/specs/html-media/#event-media-suspend">suspend</a></code> at the element. If and when downloading of the
        resource resumes, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-13">queue a task</a> to set the <code id="loading-the-media-resource:dom-media-networkstate-12"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> to <code id="loading-the-media-resource:dom-media-network_loading-5"><a href="/breakup/specs/html-media/#dom-media-network_loading">NETWORK_LOADING</a></code>. Between the queuing of these tasks,
        the load is suspended (so <code id="loading-the-media-resource:event-media-progress"><a href="/breakup/specs/html-media/#event-media-progress">progress</a></code> events don't fire,
        as described above).</p>

        <p class="note">The <code id="loading-the-media-resource:attr-media-preload-2"><a href="/breakup/specs/html-media/#attr-media-preload">preload</a></code> attribute provides a hint
        regarding how much buffering the author thinks is advisable, even in the absence of the <code id="loading-the-media-resource:attr-media-autoplay"><a href="/breakup/specs/html-media/#attr-media-autoplay">autoplay</a></code> attribute.</p>

        <p>When a user agent decides to completely stall a download, e.g. if it is waiting until the
        user starts playback before downloading any further content, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-14">queue a
        task</a> to set the element's <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag-8">delaying-the-load-event flag</a> to false. This stops
        <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event-8">delaying the load event</a>.</p>

        <p>The user agent may use whatever means necessary to fetch the resource (within the constraints
        put forward by this and other specifications); for example, reconnecting to the server in the
        face of network errors, using HTTP range retrieval requests, or switching to a streaming
        protocol. The user agent must consider a resource erroneous only if it has given up trying to
        fetch it.</p>

        <p>To determine the format of the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-4">media resource</a>, the user agent must use the
        <a href="https://mimesniff.spec.whatwg.org/#rules-for-sniffing-audio-and-video-specifically" id="loading-the-media-resource:content-type-sniffing:-video" data-x-internal="content-type-sniffing:-video">rules for sniffing audio and video specifically</a>.</p>

        <p>While the load is not suspended (see below), every 350ms (±200ms) or for every byte
        received, whichever is <em>least</em> frequent, <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-15">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-10">fire a simple
        event</a> named <code id="loading-the-media-resource:event-media-progress-2"><a href="/breakup/specs/html-media/#event-media-progress">progress</a></code> at the element.</p>

        <p>The <a href="/breakup/specs/browser-dom/#networking-task-source" id="loading-the-media-resource:networking-task-source">networking task source</a> <a href="/breakup/specs/browser-dom/#concept-task" id="loading-the-media-resource:concept-task-6">tasks</a> to
        process the data as it is being fetched must each <a href="/breakup/specs/core-algorithms/#immediately" id="loading-the-media-resource:immediately">immediately</a> <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-16">queue a task</a> to
        run the first appropriate steps from the <a href="/breakup/specs/html-media/#media-data-processing-steps-list" id="loading-the-media-resource:media-data-processing-steps-list">media data processing steps list</a>
        below. (A new task is used for this so that the work described below occurs relative to the
        <a href="/breakup/specs/html-media/#media-element-event-task-source" id="loading-the-media-resource:media-element-event-task-source-2">media element event task source</a> rather than the <a href="/breakup/specs/browser-dom/#networking-task-source" id="loading-the-media-resource:networking-task-source-2">networking task
        source</a>.)</p>

        <p>When the <a href="/breakup/specs/browser-dom/#networking-task-source" id="loading-the-media-resource:networking-task-source-3">networking task source</a> has <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-17">queued</a> the
        last <a href="/breakup/specs/browser-dom/#concept-task" id="loading-the-media-resource:concept-task-7">task</a> as part of <a href="/breakup/specs/core-algorithms/#fetch" id="loading-the-media-resource:fetch">fetching</a> the
        <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-5">media resource</a> (i.e. once the download has completed), if the fetching process
        completes without errors, including decoding the media data, and if all of the data is available
        to the user agent without network access, then, the user agent must move on to the <i>final step</i> below.
        This might never happen, e.g. when streaming an infinite resource such as Web radio, or if the
        resource is longer than the user agent's ability to cache data.</p>

        <p>While the user agent might still need network access to obtain parts of the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-6">media
        resource</a>, the user agent must remain on this step.</p>

        <p class="example">For example, if the user agent has discarded the first half of a video, the
        user agent will remain at this step even once the <a href="/breakup/specs/html-media/#ended-playback" id="loading-the-media-resource:ended-playback">playback has
        ended</a>, because there is always the chance the user will seek back to the start. In fact,
        in this situation, once <a href="/breakup/specs/html-media/#ended-playback" id="loading-the-media-resource:ended-playback-2">playback has ended</a>, the user agent
        will end up firing a <code id="loading-the-media-resource:event-media-suspend-3"><a href="/breakup/specs/html-media/#event-media-suspend">suspend</a></code> event, as described
        earlier.</p>

       </li></ol>

     </dd><dt>Otherwise (<var>mode</var> is <i>local</i>)</dt><dd>

      <p>The resource described by the <var>current media resource</var>, if any, contains the
      <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-5">media data</a>. It is <a href="/breakup/specs/core-algorithms/#cors-same-origin" id="loading-the-media-resource:cors-same-origin-2">CORS-same-origin</a>. </p>

      <p>If the <var>current media resource</var> is a raw data stream (e.g. from a
      <code id="loading-the-media-resource:file"><a href="/breakup/specs/core-algorithms/#file">File</a></code> object), then to determine the format of the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-7">media resource</a>,
      the user agent must use the <a href="https://mimesniff.spec.whatwg.org/#rules-for-sniffing-audio-and-video-specifically" id="loading-the-media-resource:content-type-sniffing:-video-2" data-x-internal="content-type-sniffing:-video">rules for sniffing audio and video specifically</a>.
      Otherwise, if the data stream is pre-decoded, then the format is the format given by the
      relevant specification.</p>

      <p>Whenever new data for the <var>current media resource</var> becomes available, <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-18">queue
      a task</a> to run the first appropriate steps from the <a href="/breakup/specs/html-media/#media-data-processing-steps-list" id="loading-the-media-resource:media-data-processing-steps-list-2">media data processing steps
      list</a> below.</p>

      <p>When the <var>current media resource</var> is permanently exhausted (e.g. all the bytes of
      a <code id="loading-the-media-resource:blob"><a href="/breakup/specs/core-algorithms/#blob">Blob</a></code> have been processed), if there were no decoding errors, then the user
      agent must move on to the <i>final step</i> below. This might never happen, e.g. if the
      <var>current media resource</var> is a <code id="loading-the-media-resource:mediastream"><a href="/breakup/specs/core-algorithms/#mediastream">MediaStream</a></code>.</p>

     </dd></dl>

    <p>The <dfn id="media-data-processing-steps-list">media data processing steps list</dfn> is as follows:</p>

    <dl class="switch"><dt>If the <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-6">media data</a> cannot be fetched at all, due to network errors, causing the
     user agent to give up trying to fetch the resource</dt><dt>If the <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-7">media data</a> can be fetched but is found by inspection to be in an
     unsupported format, or can otherwise not be rendered at all</dt><dd>

      <p>DNS errors, HTTP 4xx and 5xx errors (and equivalents in other protocols), and other fatal
      network errors that occur before the user agent has established whether the <var>current media resource</var> is usable, as well as the file using an unsupported
      container format, or using unsupported codecs for all the data, must cause the user agent to
      execute the following steps:</p>

      <ol><li><p>The user agent should cancel the fetching process.</p></li><li><p>Abort this subalgorithm, returning to the <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="loading-the-media-resource:concept-media-load-algorithm-3">resource selection algorithm</a>.</p>

      </li></ol>

     </dd><dt id="found-another-audio-track">If the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-8">media resource</a> is found to have an audio
     track</dt><dd>

      <ol><li><p>Create an <code id="loading-the-media-resource:audiotrack"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> object to represent the audio track.</p></li><li><p>Update the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-31">media element</a>'s <code id="loading-the-media-resource:dom-media-audiotracks"><a href="/breakup/specs/html-media/#dom-media-audiotracks">audioTracks</a></code> attribute's <code id="loading-the-media-resource:audiotracklist"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code>
       object with the new <code id="loading-the-media-resource:audiotrack-2"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> object.</p></li><li><p>Let <var>enable</var> be <i>unknown</i>.</p></li><li>

        <p>If either the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-9">media resource</a> or the address of the <var>current
        media resource</var> indicate a particular set of audio tracks to enable, or if the user
        agent has information that would facilitate the selection of specific audio tracks to
        improve the user's experience, then: if this audio track is one of the ones to enable, then
        set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var>
        to <i>false</i>.</p>

        <p class="example">This could be triggered by <cite>Media Fragments URI</cite> fragment
        identifier syntax, but it could also be triggered e.g. by the user agent selecting a 5.1
        surround sound audio track over a stereo audio track. [[!MEDIAFRAG]]</p>

       </li><li><p>If <var>enable</var> is still <i>unknown</i>, then, if the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-32">media
       element</a> does not yet have an <a href="/breakup/specs/html-media/#dom-audiotrack-enabled" id="loading-the-media-resource:dom-audiotrack-enabled">enabled</a>
       audio track, then set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var> to <i>false</i>.</p></li><li><p>If <var>enable</var> is <i>true</i>, then enable this audio track,
       otherwise, do not enable this audio track.</p></li><li><p><a href="/breakup/specs/core-algorithms/#concept-event-fire" id="loading-the-media-resource:concept-event-fire">Fire</a> a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="loading-the-media-resource:concept-events-trusted">trusted</a> event with the name <code id="loading-the-media-resource:event-media-addtrack"><a href="/breakup/specs/html-media/#event-media-addtrack">addtrack</a></code>, that does not bubble and is not cancelable,
       and that uses the <code id="loading-the-media-resource:trackevent"><a href="/breakup/specs/html-media/#trackevent">TrackEvent</a></code> interface, with the <code id="loading-the-media-resource:dom-trackevent-track"><a href="/breakup/specs/html-media/#dom-trackevent-track">track</a></code> attribute initialised to the new
       <code id="loading-the-media-resource:audiotrack-3"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> object, at this <code id="loading-the-media-resource:audiotracklist-2"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> object.</p></li></ol>

     </dd><dt id="found-another-video-track">If the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-10">media resource</a> is found to have a video
     track</dt><dd>

      <ol><li><p>Create a <code id="loading-the-media-resource:videotrack"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> object to represent the video track.</p></li><li><p>Update the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-33">media element</a>'s <code id="loading-the-media-resource:dom-media-videotracks"><a href="/breakup/specs/html-media/#dom-media-videotracks">videoTracks</a></code> attribute's <code id="loading-the-media-resource:videotracklist"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code>
       object with the new <code id="loading-the-media-resource:videotrack-2"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> object.</p></li><li><p>Let <var>enable</var> be <i>unknown</i>.</p></li><li>

        <p>If either the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-11">media resource</a> or the address of the <var>current
        media resource</var> indicate a particular set of video tracks to enable, or if the user
        agent has information that would facilitate the selection of specific video tracks to
        improve the user's experience, then: if this video track is the first such video track, then
        set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var>
        to <i>false</i>.</p>

        <p class="example">This could again be triggered by <cite>Media Fragments URI</cite>
        fragment identifier syntax.</p>

       </li><li><p>If <var>enable</var> is still <i>unknown</i>, then, if the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-34">media
       element</a> does not yet have a <a href="/breakup/specs/html-media/#dom-videotrack-selected" id="loading-the-media-resource:dom-videotrack-selected">selected</a>
       video track, then set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var> to <i>false</i>.</p></li><li><p>If <var>enable</var> is <i>true</i>, then select this track and unselect any
       previously selected video tracks, otherwise, do not select this video track. If other tracks
       are unselected, then <a href="/breakup/specs/html-media/#toggle-video-track">a <code>change</code> event will be fired.</a></p></li><li><p><a href="/breakup/specs/core-algorithms/#concept-event-fire" id="loading-the-media-resource:concept-event-fire-2">Fire</a> a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="loading-the-media-resource:concept-events-trusted-2">trusted</a> event with the name <code id="loading-the-media-resource:event-media-addtrack-2"><a href="/breakup/specs/html-media/#event-media-addtrack">addtrack</a></code>, that does not bubble and is not cancelable,
       and that uses the <code id="loading-the-media-resource:trackevent-2"><a href="/breakup/specs/html-media/#trackevent">TrackEvent</a></code> interface, with the <code id="loading-the-media-resource:dom-trackevent-track-2"><a href="/breakup/specs/html-media/#dom-trackevent-track">track</a></code> attribute initialised to the new
       <code id="loading-the-media-resource:videotrack-3"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> object, at this <code id="loading-the-media-resource:videotracklist-2"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object.</p></li></ol>

     </dd><dt id="getting-media-metadata">Once enough of the <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-8">media data</a> has been fetched to
     determine the duration of the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-12">media resource</a>, its dimensions, and other
     metadata</dt><dd>

      <p>This indicates that the resource is usable. The user agent must follow these substeps:</p>

      <ol><li>

        <p><a href="/breakup/specs/html-media/#defineTimeline" id="loading-the-media-resource:defineTimeline">Establish the media timeline</a> for the purposes of the <a href="/breakup/specs/html-media/#current-playback-position" id="loading-the-media-resource:current-playback-position-2">current playback
        position</a> and the <a href="/breakup/specs/html-media/#earliest-possible-position" id="loading-the-media-resource:earliest-possible-position">earliest possible position</a>, based on the <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-9">media data</a>.</p>

       </li><li>

        <p>Update the <a href="/breakup/specs/html-media/#timeline-offset" id="loading-the-media-resource:timeline-offset-2">timeline offset</a> to the date and time that corresponds to the zero
        time in the <a href="/breakup/specs/html-media/#media-timeline" id="loading-the-media-resource:media-timeline">media timeline</a> established in the previous step, if any. If no
        explicit time and date is given by the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-13">media resource</a>, the <a href="/breakup/specs/html-media/#timeline-offset" id="loading-the-media-resource:timeline-offset-3">timeline
        offset</a> must be set to Not-a-Number (NaN).</p>

       </li><li><p>Set the <a href="/breakup/specs/html-media/#current-playback-position" id="loading-the-media-resource:current-playback-position-3">current playback position</a> and the <a href="/breakup/specs/html-media/#official-playback-position" id="loading-the-media-resource:official-playback-position-3">official playback
       position</a> to the <a href="/breakup/specs/html-media/#earliest-possible-position" id="loading-the-media-resource:earliest-possible-position-2">earliest possible position</a>.</p></li><li>

        <p>Update the <code id="loading-the-media-resource:dom-media-duration-2"><a href="/breakup/specs/html-media/#dom-media-duration">duration</a></code> attribute with the time of
        the last frame of the resource, if known, on the <a href="/breakup/specs/html-media/#media-timeline" id="loading-the-media-resource:media-timeline-2">media timeline</a> established
        above. If it is not known (e.g. a stream that is in principle infinite), update the <code id="loading-the-media-resource:dom-media-duration-3"><a href="/breakup/specs/html-media/#dom-media-duration">duration</a></code> attribute to the value positive Infinity.</p>

        <p class="note">The user agent <a href="/breakup/specs/html-media/#durationChange">will</a> <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-19">queue a task</a>
        to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-11">fire a simple event</a> named <code id="loading-the-media-resource:event-media-durationchange-2"><a href="/breakup/specs/html-media/#event-media-durationchange">durationchange</a></code> at the element at this point.</p>

       </li><li>

        <p>For <code id="loading-the-media-resource:the-video-element-2"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> elements, set the <code id="loading-the-media-resource:dom-video-videowidth"><a href="/breakup/specs/html-media/#dom-video-videowidth">videoWidth</a></code> and <code id="loading-the-media-resource:dom-video-videoheight"><a href="/breakup/specs/html-media/#dom-video-videoheight">videoHeight</a></code> attributes, and <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-20">queue a task</a>
        to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-12">fire a simple event</a> named <code id="loading-the-media-resource:event-media-resize"><a href="/breakup/specs/html-media/#event-media-resize">resize</a></code> at
        the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-35">media element</a>.</p>

        <p class="note">Further <code id="loading-the-media-resource:event-media-resize-2"><a href="/breakup/specs/html-media/#event-media-resize">resize</a></code> events will be fired
        if the dimensions subsequently change.</p>

       </li><li>

        <p>Set the <code id="loading-the-media-resource:dom-media-readystate-2"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute to <code id="loading-the-media-resource:dom-media-have_metadata"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code>.</p>

        <p class="note">A <code id="loading-the-media-resource:event-media-loadedmetadata"><a href="/breakup/specs/html-media/#event-media-loadedmetadata">loadedmetadata</a></code> DOM event
        <a href="/breakup/specs/html-media/#fire-loadedmetadata">will be fired</a> as part of setting the <code id="loading-the-media-resource:dom-media-readystate-3"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute to a new value.</p>

        

       </li><li><p>Let <var>jumped</var> be false.</p></li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-36">media element</a>'s <a href="/breakup/specs/html-media/#default-playback-start-position" id="loading-the-media-resource:default-playback-start-position">default playback start position</a> is
       greater than zero, then <a href="/breakup/specs/html-media/#dom-media-seek" id="loading-the-media-resource:dom-media-seek">seek</a> to that time, and let <var>jumped</var> be true.</p></li><li><p>Let the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-37">media element</a>'s <a href="/breakup/specs/html-media/#default-playback-start-position" id="loading-the-media-resource:default-playback-start-position-2">default playback
       start position</a> be zero.</p></li><li><p>Let the <var>initial playback position</var> be zero.</p></li><li>

        <p>If either the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-14">media resource</a> or the address of the <var>current
        media resource</var> indicate a particular start time, then set the <var>initial playback
        position</var> to that time and, if <var>jumped</var> is still false, <a href="/breakup/specs/html-media/#dom-media-seek" id="loading-the-media-resource:dom-media-seek-2">seek</a> to that time and let <var>jumped</var> be
        true.</p>

        <p class="example">For example, with media formats that support the <cite>Media Fragments
        URI</cite> fragment identifier syntax, the fragment identifier can be used to indicate a
        start position. [[!MEDIAFRAG]]</p>

       </li><li><p>If there is no <a href="/breakup/specs/html-media/#dom-audiotrack-enabled" id="loading-the-media-resource:dom-audiotrack-enabled-2">enabled</a> audio track, then
       enable an audio track. This <a href="/breakup/specs/html-media/#toggle-audio-track">will cause a <code>change</code> event to be fired</a>.</p></li><li><p>If there is no <a href="/breakup/specs/html-media/#dom-videotrack-selected" id="loading-the-media-resource:dom-videotrack-selected-2">selected</a> video track,
       then select a video track. This <a href="/breakup/specs/html-media/#toggle-video-track">will cause a <code>change</code> event to be fired</a>.</p></li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-38">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="loading-the-media-resource:current-media-controller">current media controller</a>, then:
       if <var>jumped</var> is true and the <var>initial playback position</var>,
       relative to the <a href="/breakup/specs/html-media/#current-media-controller" id="loading-the-media-resource:current-media-controller-2">current media controller</a>'s timeline, is greater than the
       <a href="/breakup/specs/html-media/#current-media-controller" id="loading-the-media-resource:current-media-controller-3">current media controller</a>'s <a href="/breakup/specs/html-media/#media-controller-position" id="loading-the-media-resource:media-controller-position">media controller position</a>, then
       <a href="/breakup/specs/html-media/#seek-the-media-controller" id="loading-the-media-resource:seek-the-media-controller">seek the media controller</a> to the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-39">media element</a>'s <var>initial
       playback position</var>, relative to the <a href="/breakup/specs/html-media/#current-media-controller" id="loading-the-media-resource:current-media-controller-4">current media controller</a>'s timeline;
       otherwise, <a href="/breakup/specs/html-media/#dom-media-seek" id="loading-the-media-resource:dom-media-seek-3">seek</a> the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-40">media element</a> to the
       <a href="/breakup/specs/html-media/#media-controller-position" id="loading-the-media-resource:media-controller-position-2">media controller position</a>, relative to the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-41">media element</a>'s
       timeline.</p></li></ol>

      <p>Once the <code id="loading-the-media-resource:dom-media-readystate-4"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute reaches <code id="loading-the-media-resource:dom-media-have_current_data"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code>, <a href="/breakup/specs/html-media/#fire-loadeddata">after
      the <code>loadeddata</code> event has been fired</a>, set the
      element's <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag-9">delaying-the-load-event flag</a> to false. This stops <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event-9">delaying the load event</a>.</p>

      <p class="note">A user agent that is attempting to reduce network usage while still fetching
      the metadata for each <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-15">media resource</a> would also stop buffering at this point,
      following <a href="/breakup/specs/html-media/#resourceSuspend">the rules described previously</a>, which involve the
      <code id="loading-the-media-resource:dom-media-networkstate-13"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> attribute switching to the <code id="loading-the-media-resource:dom-media-network_idle-4"><a href="/breakup/specs/html-media/#dom-media-network_idle">NETWORK_IDLE</a></code> value and a <code id="loading-the-media-resource:event-media-suspend-4"><a href="/breakup/specs/html-media/#event-media-suspend">suspend</a></code> event firing.</p>

      <p class="note">The user agent is <em>required</em> to determine the duration of the
      <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-16">media resource</a> and go through this step before playing.</p> 

     </dd><dt>Once the entire <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-17">media resource</a> has been <a href="/breakup/specs/core-algorithms/#fetch" id="loading-the-media-resource:fetch-2">fetched</a>
     (but potentially before any of it has been decoded)</dt><dd>

      <p><a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-13">Fire a simple event</a> named <code id="loading-the-media-resource:event-media-progress-3"><a href="/breakup/specs/html-media/#event-media-progress">progress</a></code>
      at the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-42">media element</a>.</p>

      <p>Set the <code id="loading-the-media-resource:dom-media-networkstate-14"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> to <code id="loading-the-media-resource:dom-media-network_idle-5"><a href="/breakup/specs/html-media/#dom-media-network_idle">NETWORK_IDLE</a></code> and <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-14">fire a simple event</a> named
      <code id="loading-the-media-resource:event-media-suspend-5"><a href="/breakup/specs/html-media/#event-media-suspend">suspend</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-43">media element</a>.</p>

      <p>If the user agent ever discards any <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-10">media data</a> and then needs to resume the
      network activity to obtain it again, then it must <a href="/breakup/specs/browser-dom/#queue-a-task" id="loading-the-media-resource:queue-a-task-21">queue a task</a> to set the <code id="loading-the-media-resource:dom-media-networkstate-15"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> to <code id="loading-the-media-resource:dom-media-network_loading-6"><a href="/breakup/specs/html-media/#dom-media-network_loading">NETWORK_LOADING</a></code>.</p>

      <p class="note">If the user agent can keep the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-18">media resource</a> loaded, then the
      algorithm will continue to its <i>final step</i> below, which aborts the algorithm.</p>

     </dd><dt>If the connection is interrupted after some <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-11">media data</a> has been received,
     causing the user agent to give up trying to fetch the resource</dt><dd>

      <p>Fatal network errors that occur after the user agent has established whether the <var>current media resource</var> is usable (i.e. once the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-44">media element</a>'s
      <code id="loading-the-media-resource:dom-media-readystate-5"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute is no longer <code id="loading-the-media-resource:dom-media-have_nothing-2"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>) must cause the user agent to execute the
      following steps:</p>

      <ol><li><p>The user agent should cancel the fetching process.</p></li><li><p>Set the <code id="loading-the-media-resource:dom-media-error-3"><a href="/breakup/specs/html-media/#dom-media-error">error</a></code> attribute to a new
       <code id="loading-the-media-resource:mediaerror-2"><a href="/breakup/specs/html-media/#mediaerror">MediaError</a></code> object whose <code id="loading-the-media-resource:dom-mediaerror-code-2"><a href="/breakup/specs/html-media/#dom-mediaerror-code">code</a></code> attribute
       is set to <code id="loading-the-media-resource:dom-mediaerror-media_err_network"><a href="/breakup/specs/html-media/#dom-mediaerror-media_err_network">MEDIA_ERR_NETWORK</a></code>.</p></li><li><p>Set the element's <code id="loading-the-media-resource:dom-media-networkstate-16"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> attribute
       to the <code id="loading-the-media-resource:dom-media-network_idle-6"><a href="/breakup/specs/html-media/#dom-media-network_idle">NETWORK_IDLE</a></code> value.</p></li><li><p>Set the element's <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag-10">delaying-the-load-event flag</a> to false. This stops <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event-10">delaying the load event</a>.</p></li><li><p><a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-15">Fire a simple event</a> named <code id="loading-the-media-resource:event-media-error-2"><a href="/breakup/specs/html-media/#event-media-error">error</a></code> at
       the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-45">media element</a>.</p></li><li><p>Abort the overall <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="loading-the-media-resource:concept-media-load-algorithm-4">resource selection
       algorithm</a>.</p></li></ol>

     </dd><dt id="fatal-decode-error">If the <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-12">media data</a> is corrupted</dt><dd>

      <p>Fatal errors in decoding the <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-13">media data</a> that occur after the user agent has
      established whether the <var>current media resource</var> is usable (i.e. once the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-46">media element</a>'s
      <code id="loading-the-media-resource:dom-media-readystate-6"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute is no longer <code id="loading-the-media-resource:dom-media-have_nothing-3"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>) must cause the
      user agent to execute the following steps:</p>
        
      <ol><li><p>The user agent should cancel the fetching process.</p></li><li><p>Set the <code id="loading-the-media-resource:dom-media-error-4"><a href="/breakup/specs/html-media/#dom-media-error">error</a></code> attribute to a new
       <code id="loading-the-media-resource:mediaerror-3"><a href="/breakup/specs/html-media/#mediaerror">MediaError</a></code> object whose <code id="loading-the-media-resource:dom-mediaerror-code-3"><a href="/breakup/specs/html-media/#dom-mediaerror-code">code</a></code> attribute
       is set to <code id="loading-the-media-resource:dom-mediaerror-media_err_decode"><a href="/breakup/specs/html-media/#dom-mediaerror-media_err_decode">MEDIA_ERR_DECODE</a></code>.</p></li><li><p>Set the element's <code id="loading-the-media-resource:dom-media-networkstate-17"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> attribute
       to the <code id="loading-the-media-resource:dom-media-network_idle-7"><a href="/breakup/specs/html-media/#dom-media-network_idle">NETWORK_IDLE</a></code> value.</p></li><li><p>Set the element's <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag-11">delaying-the-load-event flag</a> to false. This stops <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event-11">delaying the load event</a>.</p></li><li><p><a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-16">Fire a simple event</a> named <code id="loading-the-media-resource:event-media-error-3"><a href="/breakup/specs/html-media/#event-media-error">error</a></code> at
       the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-47">media element</a>.</p></li><li><p>Abort the overall <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="loading-the-media-resource:concept-media-load-algorithm-5">resource selection
       algorithm</a>.</p></li></ol>

     </dd><dt>If the <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-14">media data</a> fetching process is aborted by the user</dt><dd>

      <p>The fetching process is aborted by the user, e.g. because the user
      pressed a "stop" button, the user agent must execute the following steps. These steps are not
      followed if the <code id="loading-the-media-resource:dom-media-load-2"><a href="/breakup/specs/html-media/#dom-media-load">load()</a></code> method itself is invoked while
      these steps are running, as the steps above handle that particular kind of abort.</p>

      <ol><li><p>The user agent should cancel the fetching process.</p></li><li><p>Set the <code id="loading-the-media-resource:dom-media-error-5"><a href="/breakup/specs/html-media/#dom-media-error">error</a></code> attribute to a new
       <code id="loading-the-media-resource:mediaerror-4"><a href="/breakup/specs/html-media/#mediaerror">MediaError</a></code> object whose <code id="loading-the-media-resource:dom-mediaerror-code-4"><a href="/breakup/specs/html-media/#dom-mediaerror-code">code</a></code> attribute
       is set to <code id="loading-the-media-resource:dom-mediaerror-media_err_aborted"><a href="/breakup/specs/html-media/#dom-mediaerror-media_err_aborted">MEDIA_ERR_ABORTED</a></code>.</p></li><li><p><a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-17">Fire a simple event</a> named <code id="loading-the-media-resource:event-media-abort-2"><a href="/breakup/specs/html-media/#event-media-abort">abort</a></code> at
       the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-48">media element</a>.</p></li><li>

        <p>If the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-49">media element</a>'s <code id="loading-the-media-resource:dom-media-readystate-7"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code>
        attribute has a value equal to <code id="loading-the-media-resource:dom-media-have_nothing-4"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>, set
        the element's <code id="loading-the-media-resource:dom-media-networkstate-18"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> attribute to the
        <code id="loading-the-media-resource:dom-media-network_empty-3"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code> value, set the element's
        <a href="/breakup/specs/html-media/#show-poster-flag" id="loading-the-media-resource:show-poster-flag-4">show poster flag</a> to true, and <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="loading-the-media-resource:fire-a-simple-event-18">fire a simple event</a> named <code id="loading-the-media-resource:event-media-emptied-2"><a href="/breakup/specs/html-media/#event-media-emptied">emptied</a></code> at the element.</p>

        <p>Otherwise, set the element's <code id="loading-the-media-resource:dom-media-networkstate-19"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code>
        attribute to the <code id="loading-the-media-resource:dom-media-network_idle-8"><a href="/breakup/specs/html-media/#dom-media-network_idle">NETWORK_IDLE</a></code> value.</p>

       </li><li><p>Set the element's <a href="/breakup/specs/html-media/#delaying-the-load-event-flag" id="loading-the-media-resource:delaying-the-load-event-flag-12">delaying-the-load-event flag</a> to false. This stops <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="loading-the-media-resource:delay-the-load-event-12">delaying the load event</a>.</p></li><li><p>Abort the overall <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="loading-the-media-resource:concept-media-load-algorithm-6">resource selection
       algorithm</a>.</p></li></ol>

     </dd><dt id="non-fatal-media-error">If the <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-15">media data</a> can be fetched but has non-fatal
     errors or uses, in part, codecs that are unsupported, preventing the user agent from rendering
     the content completely correctly but not preventing playback altogether</dt><dd>

      <p>The server returning data that is partially usable but cannot be optimally rendered must
      cause the user agent to render just the bits it can handle, and ignore the rest.</p>

      

     </dd><dt id="found-a-media-resource-specific-timed-track">If the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-19">media resource</a> is
     found to declare a <a href="/breakup/specs/html-media/#media-resource-specific-text-track" id="loading-the-media-resource:media-resource-specific-text-track-2">media-resource-specific text track</a> that the user agent
     supports</dt><dd>

      <p>If the <a href="/breakup/specs/html-media/#media-data" id="loading-the-media-resource:media-data-16">media data</a> is <a href="/breakup/specs/core-algorithms/#cors-same-origin" id="loading-the-media-resource:cors-same-origin-3">CORS-same-origin</a>, run the <a href="/breakup/specs/html-media/#steps-to-expose-a-media-resource-specific-text-track" id="loading-the-media-resource:steps-to-expose-a-media-resource-specific-text-track">steps to
      expose a media-resource-specific text track</a> with the relevant data.</p>

      <p class="note">Cross-origin videos do not expose their subtitles, since that would allow
      attacks such as hostile sites reading subtitles from confidential videos on a user's
      intranet.</p>

     </dd></dl>

   </li><li><p><i>Final step:</i> If the user agent ever reaches this step (which can only happen if the entire resource
   gets loaded and kept available): abort the overall <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="loading-the-media-resource:concept-media-load-algorithm-7">resource selection algorithm</a>.</p></li></ol>

  <p>When a <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-50">media element</a> is to <dfn id="forget-the-media-element's-media-resource-specific-tracks">forget the media element's media-resource-specific
  tracks</dfn>, the user agent must remove from the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-51">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="loading-the-media-resource:list-of-text-tracks">list of text
  tracks</a> all the <a href="/breakup/specs/html-media/#media-resource-specific-text-track" id="loading-the-media-resource:media-resource-specific-text-track-3">media-resource-specific
  text tracks</a>, then empty the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-52">media element</a>'s <code id="loading-the-media-resource:dom-media-audiotracks-2"><a href="/breakup/specs/html-media/#dom-media-audiotracks">audioTracks</a></code> attribute's <code id="loading-the-media-resource:audiotracklist-3"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> object,
  then empty the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-53">media element</a>'s <code id="loading-the-media-resource:dom-media-videotracks-2"><a href="/breakup/specs/html-media/#dom-media-videotracks">videoTracks</a></code>
  attribute's <code id="loading-the-media-resource:videotracklist-3"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object. No events (in particular, no <code id="loading-the-media-resource:event-media-removetrack"><a href="/breakup/specs/html-media/#event-media-removetrack">removetrack</a></code> events) are fired as part of this; the <code id="loading-the-media-resource:event-media-error-4"><a href="/breakup/specs/html-media/#event-media-error">error</a></code> and <code id="loading-the-media-resource:event-media-emptied-3"><a href="/breakup/specs/html-media/#event-media-emptied">emptied</a></code>
  events, fired by the algorithms that invoke this one, can be used instead.</p>

  

  <hr>

  <p>The <dfn id="attr-media-preload"><code>preload</code></dfn> attribute is an <a href="/breakup/specs/core-algorithms/#enumerated-attribute" id="loading-the-media-resource:enumerated-attribute">enumerated
  attribute</a>. The following table lists the keywords and states for the attribute — the
  keywords in the left column map to the states in the cell in the second column on the same row as
  the keyword. The attribute can be changed even once the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-20">media resource</a> is being
  buffered or played; the descriptions in the table below are to be interpreted with that in
  mind.</p>

  <table><thead><tr><th> Keyword
     </th><th> State
     </th><th> Brief description
   </th></tr></thead><tbody><tr><td><dfn id="attr-media-preload-none"><code>none</code></dfn>
     </td><td><dfn id="attr-media-preload-none-state">None</dfn>
     </td><td>Hints to the user agent that either the author does not expect the user to need the media resource, or that the server wants to minimise unnecessary traffic.
         This state does not provide a hint regarding how aggressively to actually download the media resource if buffering starts anyway (e.g. once the user hits "play").
    </td></tr><tr><td><dfn id="attr-media-preload-metadata"><code>metadata</code></dfn>
     </td><td><dfn id="attr-media-preload-metadata-state">Metadata</dfn>
     </td><td>Hints to the user agent that the author does not expect the user to need the media resource, but that fetching the resource metadata (dimensions, track list, duration, etc), and maybe even the first few frames, is reasonable. If the user agent precisely fetches no more than the metadata, then the <a href="/breakup/specs/html-media/#media-element" id="loading-the-media-resource:media-element-54">media element</a> will end up with its <code id="loading-the-media-resource:dom-media-readystate-8"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute set to <code id="loading-the-media-resource:dom-media-have_metadata-2"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code>; typically though, some frames will be obtained as well and it will probably be <code id="loading-the-media-resource:dom-media-have_current_data-2"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> or <code id="loading-the-media-resource:dom-media-have_future_data"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code>.
         When the media resource is playing, hints to the user agent that bandwidth is to be considered scarce, e.g. suggesting throttling the download so that the media data is obtained at the slowest possible rate that still maintains consistent playback.
    </td></tr><tr><td><dfn id="attr-media-preload-auto"><code>auto</code></dfn>
     </td><td><dfn id="attr-media-preload-auto-state">Automatic</dfn>
     </td><td>Hints to the user agent that the user agent can put the user's needs first without risk to the server, up to and including optimistically downloading the entire resource.
  </td></tr></tbody></table>

  <p>The empty string is also a valid keyword, and maps to the <a href="/breakup/specs/html-media/#attr-media-preload-auto-state" id="loading-the-media-resource:attr-media-preload-auto-state">Automatic</a> state. The attribute's <i id="loading-the-media-resource:missing-value-default"><a href="/breakup/specs/core-algorithms/#missing-value-default">missing value default</a></i> is user-agent defined, though the <a href="/breakup/specs/html-media/#attr-media-preload-metadata-state" id="loading-the-media-resource:attr-media-preload-metadata-state">Metadata</a> state is suggested as a compromise
  between reducing server load and providing an optimal user experience.</p>

  <p class="note">Authors might switch the attribute from "<code id="loading-the-media-resource:attr-media-preload-none-2"><a href="/breakup/specs/html-media/#attr-media-preload-none">none</a></code>" or "<code id="loading-the-media-resource:attr-media-preload-metadata"><a href="/breakup/specs/html-media/#attr-media-preload-metadata">metadata</a></code>" to "<code id="loading-the-media-resource:attr-media-preload-auto"><a href="/breakup/specs/html-media/#attr-media-preload-auto">auto</a></code>" dynamically once the user begins playback. For
  example, on a page with many videos this might be used to indicate that the many videos are not to
  be downloaded unless requested, but that once one <em>is</em> requested it is to be downloaded
  aggressively.</p>

  

  <p>The <code id="loading-the-media-resource:attr-media-preload-3"><a href="/breakup/specs/html-media/#attr-media-preload">preload</a></code> attribute is intended to provide a hint to
  the user agent about what the author thinks will lead to the best user experience. The attribute
  may be ignored altogether, for example based on explicit user preferences or based on the
  available connectivity.</p>

  <p>The <dfn id="dom-media-preload"><code>preload</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="loading-the-media-resource:reflect">reflect</a> the content attribute of the same name, <a href="/breakup/specs/core-algorithms/#limited-to-only-known-values" id="loading-the-media-resource:limited-to-only-known-values">limited to only known
  values</a>.</p>

  

  <p class="note">The <code id="loading-the-media-resource:attr-media-autoplay-2"><a href="/breakup/specs/html-media/#attr-media-autoplay">autoplay</a></code> attribute can override the
  <code id="loading-the-media-resource:attr-media-preload-4"><a href="/breakup/specs/html-media/#attr-media-preload">preload</a></code> attribute (since if the media plays, it naturally
  has to buffer first, regardless of the hint given by the <code id="loading-the-media-resource:attr-media-preload-5"><a href="/breakup/specs/html-media/#attr-media-preload">preload</a></code> attribute). Including both is not an error, however.</p>

  <hr>



  <dl class="domintro"><dt><var>media</var> . <code id="loading-the-media-resource:dom-media-buffered"><a href="/breakup/specs/html-media/#dom-media-buffered">buffered</a></code></dt><dd>

    <p>Returns a <code id="loading-the-media-resource:timeranges"><a href="/breakup/specs/html-media/#timeranges">TimeRanges</a></code> object that represents the ranges of the <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-21">media
    resource</a> that the user agent has buffered.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-media-buffered"><code>buffered</code></dfn> attribute must return a new
  static <a href="/breakup/specs/html-media/#normalised-timeranges-object" id="loading-the-media-resource:normalised-timeranges-object">normalised <code>TimeRanges</code> object</a> that represents the ranges of the
  <a href="/breakup/specs/html-media/#media-resource" id="loading-the-media-resource:media-resource-22">media resource</a>, if any, that the user agent has buffered, at the time the attribute
  is evaluated. Users agents must accurately determine the ranges available, even for media streams
  where this can only be determined by tedious inspection.</p>

  <p class="note">Typically this will be a single range anchored at the zero point, but if, e.g. the
  user agent uses HTTP range requests in response to seeking, then there could be multiple
  ranges.</p>

  <p>User agents may discard previously buffered data.</p>

  <p class="note">Thus, a time position included within a range of the objects return by the <code id="loading-the-media-resource:dom-media-buffered-2"><a href="/breakup/specs/html-media/#dom-media-buffered">buffered</a></code> attribute at one time can end up being not included in
  the range(s) of objects returned by the same attribute at later times.</p></section>

  



  <section><h2>Offsets into the media resource</h2>

  <dl class="domintro"><dt><var>media</var> . <code id="offsets-into-the-media-resource:dom-media-duration"><a href="/breakup/specs/html-media/#dom-media-duration">duration</a></code></dt><dd>

    <p>Returns the length of the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource">media resource</a>, in seconds, assuming that the start of
    the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-2">media resource</a> is at time zero.</p>

    <p>Returns NaN if the duration isn't available.</p>

    <p>Returns Infinity for unbounded streams.</p>

   </dd><dt><var>media</var> . <code id="offsets-into-the-media-resource:dom-media-currenttime"><a href="/breakup/specs/html-media/#dom-media-currenttime">currentTime</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the <a href="/breakup/specs/html-media/#official-playback-position" id="offsets-into-the-media-resource:official-playback-position">official playback position</a>, in seconds.</p>

    <p>Can be set, to seek to the given time.</p>

    <p>Will throw an <code id="offsets-into-the-media-resource:invalidstateerror"><a href="/breakup/specs/core-algorithms/#invalidstateerror">InvalidStateError</a></code> exception if there is no selected <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-3">media
    resource</a> or if there is a <a href="/breakup/specs/html-media/#current-media-controller" id="offsets-into-the-media-resource:current-media-controller">current media controller</a>.</p>

   </dd></dl>

  

  <p>A <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-4">media resource</a> has a <dfn id="media-timeline">media timeline</dfn> that maps times (in seconds) to
  positions in the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-5">media resource</a>. The origin of a timeline is its earliest defined
  position. The duration of a timeline is its last defined position.</p>

  <p><dfn id="defineTimeline">Establishing the media
  timeline</dfn>: If the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-6">media resource</a> somehow specifies an explicit timeline whose
  origin is not negative (i.e. gives each frame a specific time offset and gives the first frame a
  zero or positive offset), then the <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline">media timeline</a> should be that timeline. (Whether
  the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-7">media resource</a> can specify a timeline or not depends on the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-8">media resource's</a> format.) If the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-9">media resource</a> specifies an
  explicit start time <em>and date</em>, then that time and date should be considered the zero point
  in the <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-2">media timeline</a>; the <a href="/breakup/specs/html-media/#timeline-offset" id="offsets-into-the-media-resource:timeline-offset">timeline offset</a> will be the time and date,
  exposed using the <code id="offsets-into-the-media-resource:dom-media-getstartdate"><a href="/breakup/specs/html-media/#dom-media-getstartdate">getStartDate()</a></code> method.</p>

  <p>If the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-10">media resource</a> has a discontinuous timeline, the user agent must extend the
  timeline used at the start of the resource across the entire resource, so that the <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-3">media
  timeline</a> of the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-11">media resource</a> increases linearly starting from the
  <a href="/breakup/specs/html-media/#earliest-possible-position" id="offsets-into-the-media-resource:earliest-possible-position">earliest possible position</a> (as defined below), even if the underlying <a href="/breakup/specs/html-media/#media-data" id="offsets-into-the-media-resource:media-data">media
  data</a> has out-of-order or even overlapping time codes.</p>

  <p class="example">For example, if two clips have been concatenated into one video file, but the
  video format exposes the original times for the two clips, the video data might expose a timeline
  that goes, say, 00:15..00:29 and then 00:05..00:38. However, the user agent would not expose those
  times; it would instead expose the times as 00:15..00:29 and 00:29..01:02, as a single video.</p>

  <p>In the rare case of a <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-12">media resource</a> that does not have an explicit timeline, the
  zero time on the <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-4">media timeline</a> should correspond to the first frame of the
  <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-13">media resource</a>. In the even rarer case of a <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-14">media resource</a> with no
  explicit timings of any kind, not even frame durations, the user agent must itself determine the
  time for each frame in a user-agent-defined manner.
  <a href="/breakup/specs/html/#fingerprinting-vector" id="offsets-into-the-media-resource:fingerprinting-vector" class="fingerprint" title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src="img/fingerprint.png" width="46" height="64"></a>
  </p>

  <p class="note">An example of a file format with no explicit timeline but with explicit frame
  durations is the Animated GIF format. An example of a file format with no explicit timings at all
  is the JPEG-push format (<code id="offsets-into-the-media-resource:multipart/x-mixed-replace"><a href="#multipart/x-mixed-replace">multipart/x-mixed-replace</a></code> with JPEG frames, often
  used as the format for MJPEG streams).</p>

  <p>If, in the case of a resource with no timing information, the user agent will nonetheless be
  able to seek to an earlier point than the first frame originally provided by the server, then the
  zero time should correspond to the earliest seekable time of the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-15">media resource</a>;
  otherwise, it should correspond to the first frame received from the server (the point in the
  <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-16">media resource</a> at which the user agent began receiving the stream).</p>

  <p class="note">At the time of writing, there is no known format that lacks explicit frame time
  offsets yet still supports seeking to a frame before the first frame sent by the server.</p>

  <div class="example">

   <p>Consider a stream from a TV broadcaster, which begins streaming on a sunny Friday afternoon in
   October, and always sends connecting user agents the media data on the same media timeline, with
   its zero time set to the start of this stream. Months later, user agents connecting to this
   stream will find that the first frame they receive has a time with millions of seconds. The <code id="offsets-into-the-media-resource:dom-media-getstartdate-2"><a href="/breakup/specs/html-media/#dom-media-getstartdate">getStartDate()</a></code> method would always return the date that the
   broadcast started; this would allow controllers to display real times in their scrubber (e.g.
   "2:30pm") rather than a time relative to when the broadcast began ("8 months, 4 hours, 12
   minutes, and 23 seconds").</p>

   <p>Consider a stream that carries a video with several concatenated fragments, broadcast by a
   server that does not allow user agents to request specific times but instead just streams the
   video data in a predetermined order, with the first frame delivered always being identified as
   the frame with time zero. If a user agent connects to this stream and receives fragments defined
   as covering timestamps 2010-03-20 23:15:00 UTC to 2010-03-21 00:05:00 UTC and 2010-02-12 14:25:00
   UTC to 2010-02-12 14:35:00 UTC, it would expose this with a <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-5">media timeline</a> starting
   at 0s and extending to 3,600s (one hour). Assuming the streaming server disconnected at the end
   of the second clip, the <code id="offsets-into-the-media-resource:dom-media-duration-2"><a href="/breakup/specs/html-media/#dom-media-duration">duration</a></code> attribute would then
   return 3,600. The <code id="offsets-into-the-media-resource:dom-media-getstartdate-3"><a href="/breakup/specs/html-media/#dom-media-getstartdate">getStartDate()</a></code> method would return a
   <code id="offsets-into-the-media-resource:idl-date"><a href="/breakup/specs/core-algorithms/#idl-date">Date</a></code> object with a time corresponding to 2010-03-20 23:15:00 UTC. However, if a
   different user agent connected five minutes later, <em>it</em> would (presumably) receive
   fragments covering timestamps 2010-03-20 23:20:00 UTC to 2010-03-21 00:05:00 UTC and 2010-02-12
   14:25:00 UTC to 2010-02-12 14:35:00 UTC, and would expose this with a <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-6">media timeline</a>
   starting at 0s and extending to 3,300s (fifty five minutes). In this case, the <code id="offsets-into-the-media-resource:dom-media-getstartdate-4"><a href="/breakup/specs/html-media/#dom-media-getstartdate">getStartDate()</a></code> method would return a <code id="offsets-into-the-media-resource:idl-date-2"><a href="/breakup/specs/core-algorithms/#idl-date">Date</a></code> object
   with a time corresponding to 2010-03-20 23:20:00 UTC.</p>

   <p>In both of these examples, the <code id="offsets-into-the-media-resource:dom-media-seekable"><a href="/breakup/specs/html-media/#dom-media-seekable">seekable</a></code> attribute
   would give the ranges that the controller would want to actually display in its UI; typically, if
   the servers don't support seeking to arbitrary times, this would be the range of time from the
   moment the user agent connected to the stream up to the latest frame that the user agent has
   obtained; however, if the user agent starts discarding earlier information, the actual range
   might be shorter.</p>

  </div>

  <p>In any case, the user agent must ensure that the <a href="/breakup/specs/html-media/#earliest-possible-position" id="offsets-into-the-media-resource:earliest-possible-position-2">earliest possible position</a> (as
  defined below) using the established <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-7">media timeline</a>, is greater than or equal to
  zero.</p>

  <p>The <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-8">media timeline</a> also has an associated clock. Which clock is used is user-agent
  defined, and may be <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-17">media resource</a>-dependent, but it should approximate the user's
  wall clock.</p>

  <p class="note">All the <a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element">media elements</a> that share <a href="/breakup/specs/html-media/#current-media-controller" id="offsets-into-the-media-resource:current-media-controller-2">current
  media controller</a> use the same clock for their <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-9">media timeline</a>.</p>

  <p><a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-2">Media elements</a> have a <dfn id="current-playback-position">current playback position</dfn>,
  which must initially (i.e. in the absence of <a href="/breakup/specs/html-media/#media-data" id="offsets-into-the-media-resource:media-data-2">media data</a>) be zero seconds. The
  <a href="/breakup/specs/html-media/#current-playback-position" id="offsets-into-the-media-resource:current-playback-position">current playback position</a> is a time on the <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-10">media timeline</a>.</p>

  <p><a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-3">Media elements</a> also have an <dfn id="official-playback-position">official playback
  position</dfn>, which must initially be set to zero seconds. The <a href="/breakup/specs/html-media/#official-playback-position" id="offsets-into-the-media-resource:official-playback-position-2">official playback
  position</a> is an approximation of the <a href="/breakup/specs/html-media/#current-playback-position" id="offsets-into-the-media-resource:current-playback-position-2">current playback position</a> that is kept
  stable while scripts are running.</p>

  <p><a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-4">Media elements</a> also have a <dfn id="default-playback-start-position">default playback start
  position</dfn>, which must initially be set to zero seconds. This time is used to allow the
  element to be seeked even before the media is loaded.</p>

  <p>Each <a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-5">media element</a> has a <dfn id="show-poster-flag">show poster flag</dfn>. When a <a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-6">media
  element</a> is created, this flag must be set to true. This flag is used to control when the
  user agent is to show a poster frame for a <code id="offsets-into-the-media-resource:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element instead of showing the video
  contents.</p>

  <p>The <dfn id="dom-media-currenttime"><code>currentTime</code></dfn> attribute must, on
  getting, return the <a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-7">media element</a>'s <a href="/breakup/specs/html-media/#default-playback-start-position" id="offsets-into-the-media-resource:default-playback-start-position">default playback start position</a>,
  unless that is zero, in which case it must return the element's <a href="/breakup/specs/html-media/#official-playback-position" id="offsets-into-the-media-resource:official-playback-position-3">official playback
  position</a>. The returned value must be expressed in seconds. On setting, if the <a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-8">media
  element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="offsets-into-the-media-resource:current-media-controller-3">current media controller</a>, then the user agent must throw an
  <code id="offsets-into-the-media-resource:invalidstateerror-2"><a href="/breakup/specs/core-algorithms/#invalidstateerror">InvalidStateError</a></code> exception; otherwise, if the <a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-9">media element</a>'s <code id="offsets-into-the-media-resource:dom-media-readystate"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> is <code id="offsets-into-the-media-resource:dom-media-have_nothing"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>, then it must set the <a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-10">media
  element</a>'s <a href="/breakup/specs/html-media/#default-playback-start-position" id="offsets-into-the-media-resource:default-playback-start-position-2">default playback start position</a> to the new value; otherwise, it must
  set the <a href="/breakup/specs/html-media/#official-playback-position" id="offsets-into-the-media-resource:official-playback-position-4">official playback position</a> to the new value and then <a href="/breakup/specs/html-media/#dom-media-seek" id="offsets-into-the-media-resource:dom-media-seek">seek</a> to the new value. The new value must be interpreted as being in
  seconds.</p>

  <p>If the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-18">media resource</a> is a streaming resource, then the user agent might be unable
  to obtain certain parts of the resource after it has expired from its buffer. Similarly, some
  <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-19">media resources</a> might have a <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-11">media timeline</a> that
  doesn't start at zero. The <dfn id="earliest-possible-position">earliest possible position</dfn> is the earliest position in the
  stream or resource that the user agent can ever obtain again. It is also a time on the <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-12">media
  timeline</a>.</p>

  <p class="note">The <a href="/breakup/specs/html-media/#earliest-possible-position" id="offsets-into-the-media-resource:earliest-possible-position-3">earliest possible position</a> is not explicitly exposed in the API;
  it corresponds to the start time of the first range in the <code id="offsets-into-the-media-resource:dom-media-seekable-2"><a href="/breakup/specs/html-media/#dom-media-seekable">seekable</a></code> attribute's <code id="offsets-into-the-media-resource:timeranges"><a href="/breakup/specs/html-media/#timeranges">TimeRanges</a></code> object, if any, or
  the <a href="/breakup/specs/html-media/#current-playback-position" id="offsets-into-the-media-resource:current-playback-position-3">current playback position</a> otherwise.</p>

  <p>When the <a href="/breakup/specs/html-media/#earliest-possible-position" id="offsets-into-the-media-resource:earliest-possible-position-4">earliest possible position</a> changes, then: if the <a href="/breakup/specs/html-media/#current-playback-position" id="offsets-into-the-media-resource:current-playback-position-4">current playback
  position</a> is before the <a href="/breakup/specs/html-media/#earliest-possible-position" id="offsets-into-the-media-resource:earliest-possible-position-5">earliest possible position</a>, the user agent must <a href="/breakup/specs/html-media/#dom-media-seek" id="offsets-into-the-media-resource:dom-media-seek-2">seek</a> to the <a href="/breakup/specs/html-media/#earliest-possible-position" id="offsets-into-the-media-resource:earliest-possible-position-6">earliest possible position</a>; otherwise, if
  the user agent has not fired a <code id="offsets-into-the-media-resource:event-media-timeupdate"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> event at the
  element in the past 15 to 250ms and is not still running event handlers for such an event, then
  the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="offsets-into-the-media-resource:queue-a-task">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="offsets-into-the-media-resource:fire-a-simple-event">fire a simple event</a> named <code id="offsets-into-the-media-resource:event-media-timeupdate-2"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> at the element.</p>

  <p class="note">Because of the above requirement and the requirement in the <a href="/breakup/specs/html-media/#concept-media-load-resource" id="offsets-into-the-media-resource:concept-media-load-resource">resource fetch algorithm</a> that kicks in <a href="/breakup/specs/html-media/#getting-media-metadata">when the metadata of the clip becomes known</a>, the <a href="/breakup/specs/html-media/#current-playback-position" id="offsets-into-the-media-resource:current-playback-position-5">current
  playback position</a> can never be less than the <a href="/breakup/specs/html-media/#earliest-possible-position" id="offsets-into-the-media-resource:earliest-possible-position-7">earliest possible position</a>.</p>

  
  

  <p>If at any time the user agent learns that an audio or video track has ended and all <a href="/breakup/specs/html-media/#media-data" id="offsets-into-the-media-resource:media-data-3">media
  data</a> relating to that track corresponds to parts of the <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-13">media timeline</a> that
  are <em>before</em> the <a href="/breakup/specs/html-media/#earliest-possible-position" id="offsets-into-the-media-resource:earliest-possible-position-8">earliest possible position</a>, the user agent may <a href="/breakup/specs/browser-dom/#queue-a-task" id="offsets-into-the-media-resource:queue-a-task-2">queue a
  task</a> to first remove the track from the <code id="offsets-into-the-media-resource:dom-media-audiotracks"><a href="/breakup/specs/html-media/#dom-media-audiotracks">audioTracks</a></code>
  attribute's <code id="offsets-into-the-media-resource:audiotracklist"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> object or the <code id="offsets-into-the-media-resource:dom-media-videotracks"><a href="/breakup/specs/html-media/#dom-media-videotracks">videoTracks</a></code> attribute's <code id="offsets-into-the-media-resource:videotracklist"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object as
  appropriate and then <a href="/breakup/specs/core-algorithms/#concept-event-fire" id="offsets-into-the-media-resource:concept-event-fire">fire</a> a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="offsets-into-the-media-resource:concept-events-trusted">trusted</a> event with the name <code id="offsets-into-the-media-resource:event-media-removetrack"><a href="/breakup/specs/html-media/#event-media-removetrack">removetrack</a></code>, that does not bubble and is not cancelable, and that
  uses the <code id="offsets-into-the-media-resource:trackevent"><a href="/breakup/specs/html-media/#trackevent">TrackEvent</a></code> interface, with the <code id="offsets-into-the-media-resource:dom-trackevent-track"><a href="/breakup/specs/html-media/#dom-trackevent-track">track</a></code> attribute initialised to the <code id="offsets-into-the-media-resource:audiotrack"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> or
  <code id="offsets-into-the-media-resource:videotrack"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> object representing the track, at the <a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-11">media element</a>'s
  aforementioned <code id="offsets-into-the-media-resource:audiotracklist-2"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> or <code id="offsets-into-the-media-resource:videotracklist-2"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object.</p>

  <p>The <dfn id="dom-media-duration"><code>duration</code></dfn> attribute must return the time
  of the end of the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-20">media resource</a>, in seconds, on the <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-14">media timeline</a>. If
  no <a href="/breakup/specs/html-media/#media-data" id="offsets-into-the-media-resource:media-data-4">media data</a> is available, then the attributes must return the Not-a-Number (NaN)
  value. If the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-21">media resource</a> is not known to be bounded (e.g. streaming radio, or a
  live event with no announced end time), then the attribute must return the positive Infinity
  value.</p>

  <p>The user agent must determine the duration of the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-22">media resource</a> before playing
  any part of the <a href="/breakup/specs/html-media/#media-data" id="offsets-into-the-media-resource:media-data-5">media data</a> and before setting <code id="offsets-into-the-media-resource:dom-media-readystate-2"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> to a value equal to or greater than <code id="offsets-into-the-media-resource:dom-media-have_metadata"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code>, even if doing so requires fetching multiple
  parts of the resource.</p>

  <p id="durationChange">When the length of the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-23">media resource</a> changes to a known value
  (e.g. from being unknown to known, or from a previously established length to a new length) the
  user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="offsets-into-the-media-resource:queue-a-task-3">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="offsets-into-the-media-resource:fire-a-simple-event-2">fire a simple event</a> named <code id="offsets-into-the-media-resource:event-media-durationchange"><a href="/breakup/specs/html-media/#event-media-durationchange">durationchange</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-12">media element</a>. (The
  event is not fired when the duration is reset as part of loading a new media resource.) If the
  duration is changed such that the <a href="/breakup/specs/html-media/#current-playback-position" id="offsets-into-the-media-resource:current-playback-position-6">current playback position</a> ends up being greater
  than the time of the end of the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-24">media resource</a>, then the user agent must also <a href="/breakup/specs/html-media/#dom-media-seek" id="offsets-into-the-media-resource:dom-media-seek-3">seek</a> to the time of the end of the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-25">media resource</a>.</p>

  <p class="example">If an "infinite" stream ends for some reason, then the duration would change
  from positive Infinity to the time of the last frame or sample in the stream, and the <code id="offsets-into-the-media-resource:event-media-durationchange-2"><a href="/breakup/specs/html-media/#event-media-durationchange">durationchange</a></code> event would be fired. Similarly, if the
  user agent initially estimated the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-26">media resource</a>'s duration instead of determining
  it precisely, and later revises the estimate based on new information, then the duration would
  change and the <code id="offsets-into-the-media-resource:event-media-durationchange-3"><a href="/breakup/specs/html-media/#event-media-durationchange">durationchange</a></code> event would be
  fired.</p>

  <p>Some video files also have an explicit date and time corresponding to the zero time in the
  <a href="/breakup/specs/html-media/#media-timeline" id="offsets-into-the-media-resource:media-timeline-15">media timeline</a>, known as the <dfn id="timeline-offset">timeline offset</dfn>. Initially, the
  <a href="/breakup/specs/html-media/#timeline-offset" id="offsets-into-the-media-resource:timeline-offset-2">timeline offset</a> must be set to Not-a-Number (NaN).</p>

  <p>The <dfn id="dom-media-getstartdate"><code>getStartDate()</code></dfn> method must return <a href="/breakup/specs/core-algorithms/#create-a-date-object" id="offsets-into-the-media-resource:create-a-date-object">a new <code>Date</code> object</a> representing the current
  <a href="/breakup/specs/html-media/#timeline-offset" id="offsets-into-the-media-resource:timeline-offset-3">timeline offset</a>.</p>

  

  <hr>

  <p>The <dfn id="attr-media-loop"><code>loop</code></dfn> attribute is a <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="offsets-into-the-media-resource:boolean-attribute">boolean
  attribute</a> that, if specified, indicates that the <a href="/breakup/specs/html-media/#media-element" id="offsets-into-the-media-resource:media-element-13">media element</a> is to seek back
  to the start of the <a href="/breakup/specs/html-media/#media-resource" id="offsets-into-the-media-resource:media-resource-27">media resource</a> upon reaching the end.</p>

  <p>The <code id="offsets-into-the-media-resource:attr-media-loop"><a href="/breakup/specs/html-media/#attr-media-loop">loop</a></code> attribute has no effect while the element has a
  <a href="/breakup/specs/html-media/#current-media-controller" id="offsets-into-the-media-resource:current-media-controller-4">current media controller</a>.</p>

  

  <p>The <dfn id="dom-media-loop"><code>loop</code></dfn> IDL attribute must <a href="/breakup/specs/core-algorithms/#reflect" id="offsets-into-the-media-resource:reflect">reflect</a>
  the content attribute of the same name.</p></section>

  



  <section><h2>Ready states</h2>

  <dl class="domintro"><dt><var>media</var> . <code id="ready-states:dom-media-readystate"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code></dt><dd>

    <p>Returns a value that expresses the current state of the element with respect to rendering the
    <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position">current playback position</a>, from the codes in the list below.</p>

   </dd></dl>

  

  <p><a href="/breakup/specs/html-media/#media-element" id="ready-states:media-element">Media elements</a> have a <i>ready state</i>, which describes to
  what degree they are ready to be rendered at the <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-2">current playback position</a>. The
  possible values are as follows; the ready state of a media element at any particular time is the
  greatest value describing the state of the element:</p>

  

  <dl><dt><dfn id="dom-media-have_nothing"><code>HAVE_NOTHING</code></dfn> (numeric value 0)</dt><dd><p>No information regarding the <a href="/breakup/specs/html-media/#media-resource" id="ready-states:media-resource">media resource</a> is available. No data for the
   <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-3">current playback position</a> is available. <a href="/breakup/specs/html-media/#media-element" id="ready-states:media-element-2">Media
   elements</a> whose <code id="ready-states:dom-media-networkstate"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> attribute are set
   to <code id="ready-states:dom-media-network_empty"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code> are always in the <code id="ready-states:dom-media-have_nothing"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code> state.</p></dd><dt><dfn id="dom-media-have_metadata"><code>HAVE_METADATA</code></dfn> (numeric value 1)</dt><dd><p>Enough of the resource has been obtained that the duration of the resource is available.
   In the case of a <code id="ready-states:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element, the dimensions of the video are also available. The
   API will no longer throw an exception when seeking. No <a href="/breakup/specs/html-media/#media-data" id="ready-states:media-data">media data</a> is available for
   the immediate <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-4">current playback position</a>.</p></dd><dt><dfn id="dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></dfn> (numeric value 2)</dt><dd><p>Data for the immediate <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-5">current playback position</a> is available, but either not
   enough data is available that the user agent could successfully advance the <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-6">current
   playback position</a> in the <a href="/breakup/specs/html-media/#direction-of-playback" id="ready-states:direction-of-playback">direction of playback</a> at all without immediately
   reverting to the <code id="ready-states:dom-media-have_metadata"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> state, or there is no
   more data to obtain in the <a href="/breakup/specs/html-media/#direction-of-playback" id="ready-states:direction-of-playback-2">direction of playback</a>. For example, in video this
   corresponds to the user agent having data from the current frame, but not the next frame, when
   the <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-7">current playback position</a> is at the end of the current frame; and to when <a href="/breakup/specs/html-media/#ended-playback" id="ready-states:ended-playback">playback has ended</a>.</p></dd><dt><dfn id="dom-media-have_future_data"><code>HAVE_FUTURE_DATA</code></dfn> (numeric value 3)</dt><dd><p>Data for the immediate <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-8">current playback position</a> is available, as well as
   enough data for the user agent to advance the <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-9">current playback position</a> in the
   <a href="/breakup/specs/html-media/#direction-of-playback" id="ready-states:direction-of-playback-3">direction of playback</a> at least a little without immediately reverting to the <code id="ready-states:dom-media-have_metadata-2"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> state, and <a href="/breakup/specs/html-media/#the-text-tracks-are-ready" id="ready-states:the-text-tracks-are-ready">the text tracks are
   ready</a>. For example, in video this corresponds to the user agent having data for at least
   the current frame and the next frame when the <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-10">current playback position</a> is at the
   instant in time between the two frames, or to the user agent having the video data for the
   current frame and audio data to keep playing at least a little when the <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-11">current playback
   position</a> is in the middle of a frame. The user agent cannot be in this state if <a href="/breakup/specs/html-media/#ended-playback" id="ready-states:ended-playback-2">playback has ended</a>, as the <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-12">current playback position</a>
   can never advance in this case.</p></dd><dt><dfn id="dom-media-have_enough_data"><code>HAVE_ENOUGH_DATA</code></dfn> (numeric value 4)</dt><dd>

   <p>All the conditions described for the <code id="ready-states:dom-media-have_future_data"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code> state are met, and, in addition,
    either of the following conditions is also true:</p>

    <ul><li>The user agent estimates that data is being fetched at a rate where the <a href="/breakup/specs/html-media/#current-playback-position" id="ready-states:current-playback-position-13">current
     playback position</a>, if it were to advance at the <a href="/breakup/specs/html-media/#effective-playback-rate" id="ready-states:effective-playback-rate">effective playback rate</a>,
     would not overtake the available data before playback reaches the end of the <a href="/breakup/specs/html-media/#media-resource" id="ready-states:media-resource-2">media
     resource</a>.</li><li>The user agent has entered a state where waiting longer will not result in further data
     being obtained, and therefore nothing would be gained by delaying playback any further. (For
     example, the buffer might be full.)</li></ul>

   </dd></dl>

  <p class="note">In practice, the difference between <code id="ready-states:dom-media-have_metadata-3"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> and <code id="ready-states:dom-media-have_current_data"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> is negligible. Really the only time
  the difference is relevant is when painting a <code id="ready-states:the-video-element-2"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element onto a
  <code id="ready-states:the-canvas-element"><a href="/breakup/specs/html-canvas/#the-canvas-element">canvas</a></code>, where it distinguishes the case where something will be drawn (<code id="ready-states:dom-media-have_current_data-2"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> or greater) from the case where
  nothing is drawn (<code id="ready-states:dom-media-have_metadata-4"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> or less). Similarly,
  the difference between <code id="ready-states:dom-media-have_current_data-3"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> (only
  the current frame) and <code id="ready-states:dom-media-have_future_data-2"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code> (at least
  this frame and the next) can be negligible (in the extreme, only one frame). The only time that
  distinction really matters is when a page provides an interface for "frame-by-frame"
  navigation.</p>

  

  <p>When the ready state of a <a href="/breakup/specs/html-media/#media-element" id="ready-states:media-element-3">media element</a> whose <code id="ready-states:dom-media-networkstate-2"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> is not <code id="ready-states:dom-media-network_empty-2"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code> changes, the user agent must follow the steps
  given below:</p>

  <ol><li>

    <p>Apply the first applicable set of substeps from the following list:</p>


    <dl class="switch"><dt>If the previous ready state was <code id="ready-states:dom-media-have_nothing-2"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>,
     and the new ready state is <code id="ready-states:dom-media-have_metadata-5"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code></dt><dd id="fire-loadedmetadata">

      <p><a href="/breakup/specs/browser-dom/#queue-a-task" id="ready-states:queue-a-task">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="ready-states:fire-a-simple-event">fire a simple event</a> named <code id="ready-states:event-media-loadedmetadata"><a href="/breakup/specs/html-media/#event-media-loadedmetadata">loadedmetadata</a></code> at the element.</p>

      <p class="note">Before this task is run, as part of the <a href="/breakup/specs/browser-dom/#event-loop" id="ready-states:event-loop">event loop</a> mechanism, the
      rendering will have been updated to resize the <code id="ready-states:the-video-element-3"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element if appropriate.</p>

     </dd><dt id="handling-first-frame-available">If the previous ready state was <code id="ready-states:dom-media-have_metadata-6"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> and the new ready state is <code id="ready-states:dom-media-have_current_data-4"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> or greater</dt><dd>

      <p id="fire-loadeddata">If this is the first time this occurs for this <a href="/breakup/specs/html-media/#media-element" id="ready-states:media-element-4">media
      element</a> since the <code id="ready-states:dom-media-load"><a href="/breakup/specs/html-media/#dom-media-load">load()</a></code> algorithm was last
      invoked, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="ready-states:queue-a-task-2">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="ready-states:fire-a-simple-event-2">fire a simple event</a>
      named <code id="ready-states:event-media-loadeddata"><a href="/breakup/specs/html-media/#event-media-loadeddata">loadeddata</a></code> at the element.</p>

      <p>If the new ready state is <code id="ready-states:dom-media-have_future_data-3"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code>
      or <code id="ready-states:dom-media-have_enough_data"><a href="/breakup/specs/html-media/#dom-media-have_enough_data">HAVE_ENOUGH_DATA</a></code>, then the relevant steps
      below must then be run also.</p>

     </dd><dt>If the previous ready state was <code id="ready-states:dom-media-have_future_data-4"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code> or more, and the new ready state is
     <code id="ready-states:dom-media-have_current_data-5"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> or less</dt><dd>

      <p id="fire-waiting-when-waiting">If the <a href="/breakup/specs/html-media/#media-element" id="ready-states:media-element-5">media element</a> was <a href="/breakup/specs/html-media/#potentially-playing" id="ready-states:potentially-playing">potentially
      playing</a> before its <code id="ready-states:dom-media-readystate-2"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute
      changed to a value lower than <code id="ready-states:dom-media-have_future_data-5"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code>, and the element has not
      <a href="/breakup/specs/html-media/#ended-playback" id="ready-states:ended-playback-3">ended playback</a>, and playback has not <a href="/breakup/specs/html-media/#stopped-due-to-errors" id="ready-states:stopped-due-to-errors">stopped due to errors</a>,
      <a href="/breakup/specs/html-media/#paused-for-user-interaction" id="ready-states:paused-for-user-interaction">paused for user interaction</a>, or <a href="/breakup/specs/html-media/#paused-for-in-band-content" id="ready-states:paused-for-in-band-content">paused for in-band content</a>, the user
      agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="ready-states:queue-a-task-3">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="ready-states:fire-a-simple-event-3">fire a simple event</a> named <code id="ready-states:event-media-timeupdate"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> at the element, and <a href="/breakup/specs/browser-dom/#queue-a-task" id="ready-states:queue-a-task-4">queue a task</a>
      to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="ready-states:fire-a-simple-event-4">fire a simple event</a> named <code id="ready-states:event-media-waiting"><a href="/breakup/specs/html-media/#event-media-waiting">waiting</a></code> at
      the element.</p>

     </dd><dt>If the previous ready state was <code id="ready-states:dom-media-have_current_data-6"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> or less, and the new ready state
     is <code id="ready-states:dom-media-have_future_data-6"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code></dt><dd>

      <p>The user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="ready-states:queue-a-task-5">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="ready-states:fire-a-simple-event-5">fire a simple event</a> named
      <code id="ready-states:event-media-canplay"><a href="/breakup/specs/html-media/#event-media-canplay">canplay</a></code> at the element.</p>

      <p>If the element's <code id="ready-states:dom-media-paused"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute is false, the user
      agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="ready-states:queue-a-task-6">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="ready-states:fire-a-simple-event-6">fire a simple event</a> named <code id="ready-states:event-media-playing"><a href="/breakup/specs/html-media/#event-media-playing">playing</a></code> at the element.</p>

     </dd><dt>If the new ready state is <code id="ready-states:dom-media-have_enough_data-2"><a href="/breakup/specs/html-media/#dom-media-have_enough_data">HAVE_ENOUGH_DATA</a></code></dt><dd>

      <p>If the previous ready state was <code id="ready-states:dom-media-have_current_data-7"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> or less, the user agent must
      <a href="/breakup/specs/browser-dom/#queue-a-task" id="ready-states:queue-a-task-7">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="ready-states:fire-a-simple-event-7">fire a simple event</a> named <code id="ready-states:event-media-canplay-2"><a href="/breakup/specs/html-media/#event-media-canplay">canplay</a></code> at the element, and, if the element's <code id="ready-states:dom-media-paused-2"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute is false, <a href="/breakup/specs/browser-dom/#queue-a-task" id="ready-states:queue-a-task-8">queue a task</a> to
      <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="ready-states:fire-a-simple-event-8">fire a simple event</a> named <code id="ready-states:event-media-playing-2"><a href="/breakup/specs/html-media/#event-media-playing">playing</a></code>
      at the element.</p>

      <p>If the <a href="/breakup/specs/html-media/#autoplaying-flag" id="ready-states:autoplaying-flag">autoplaying flag</a> is true, and the <code id="ready-states:dom-media-paused-3"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute is true, and the <a href="/breakup/specs/html-media/#media-element" id="ready-states:media-element-6">media element</a>
      has an <code id="ready-states:attr-media-autoplay"><a href="/breakup/specs/html-media/#attr-media-autoplay">autoplay</a></code> attribute specified, and the
      <a href="/breakup/specs/html-media/#media-element" id="ready-states:media-element-7">media element</a>'s <a id="ready-states:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="/breakup/specs/browser-dom/#active-sandboxing-flag-set" id="ready-states:active-sandboxing-flag-set">active sandboxing flag set</a>
      does not have the <a href="/breakup/specs/browser-dom/#sandboxed-automatic-features-browsing-context-flag" id="ready-states:sandboxed-automatic-features-browsing-context-flag">sandboxed automatic features browsing context flag</a> set, then
      the user agent may also run the following substeps:</p>

      <ol><li>Set the <code id="ready-states:dom-media-paused-4"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute to false.</li><li>If the element's <a href="/breakup/specs/html-media/#show-poster-flag" id="ready-states:show-poster-flag">show poster flag</a> is true, set it to false and run the
       <i id="ready-states:time-marches-on"><a href="/breakup/specs/html-media/#time-marches-on">time marches on</a></i> steps.</li><li><a href="/breakup/specs/browser-dom/#queue-a-task" id="ready-states:queue-a-task-9">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="ready-states:fire-a-simple-event-9">fire a simple event</a> named <code id="ready-states:event-media-play"><a href="/breakup/specs/html-media/#event-media-play">play</a></code> at the element.</li><li><a href="/breakup/specs/browser-dom/#queue-a-task" id="ready-states:queue-a-task-10">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="ready-states:fire-a-simple-event-10">fire a simple event</a> named <code id="ready-states:event-media-playing-3"><a href="/breakup/specs/html-media/#event-media-playing">playing</a></code> at the element.</li></ol>

      <p class="note">User agents do not need to support autoplay, and it is suggested that user
      agents honor user preferences on the matter. Authors are urged to use the <code id="ready-states:attr-media-autoplay-2"><a href="/breakup/specs/html-media/#attr-media-autoplay">autoplay</a></code> attribute rather than using script to force the
      video to play, so as to allow the user to override the behaviour if so desired.</p>

      <p>In any case, the user agent must finally <a href="/breakup/specs/browser-dom/#queue-a-task" id="ready-states:queue-a-task-11">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="ready-states:fire-a-simple-event-11">fire a simple
      event</a> named <code id="ready-states:event-media-canplaythrough"><a href="/breakup/specs/html-media/#event-media-canplaythrough">canplaythrough</a></code> at the element.</p>

     </dd></dl>

   </li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="ready-states:media-element-8">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="ready-states:current-media-controller">current media controller</a>, then
   <a href="/breakup/specs/html-media/#report-the-controller-state" id="ready-states:report-the-controller-state">report the controller state</a> for the <a href="/breakup/specs/html-media/#media-element" id="ready-states:media-element-9">media element</a>'s <a href="/breakup/specs/html-media/#current-media-controller" id="ready-states:current-media-controller-2">current media
   controller</a>.</p></li></ol>

  

  <p class="note">It is possible for the ready state of a media element to jump between these states
  discontinuously. For example, the state of a media element can jump straight from <code id="ready-states:dom-media-have_metadata-7"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> to <code id="ready-states:dom-media-have_enough_data-3"><a href="/breakup/specs/html-media/#dom-media-have_enough_data">HAVE_ENOUGH_DATA</a></code> without passing through the <code id="ready-states:dom-media-have_current_data-8"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> and <code id="ready-states:dom-media-have_future_data-7"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code> states.</p>

  

  <p>The <dfn id="dom-media-readystate"><code>readyState</code></dfn> IDL attribute must, on
  getting, return the value described above that describes the current ready state of the
  <a href="/breakup/specs/html-media/#media-element" id="ready-states:media-element-10">media element</a>.</p>

  

  <p>The <dfn id="attr-media-autoplay"><code>autoplay</code></dfn> attribute is a <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="ready-states:boolean-attribute">boolean
  attribute</a>. When present, the user agent (as described in the algorithm
  described herein) will automatically begin playback of the <a href="/breakup/specs/html-media/#media-resource" id="ready-states:media-resource-3">media resource</a> as
  soon as it can do so without stopping.</p>

  <p class="note">Authors are urged to use the <code id="ready-states:attr-media-autoplay-3"><a href="/breakup/specs/html-media/#attr-media-autoplay">autoplay</a></code>
  attribute rather than using script to trigger automatic playback, as this allows the user to
  override the automatic playback when it is not desired, e.g. when using a screen reader. Authors
  are also encouraged to consider not using the automatic playback behaviour at all, and instead to
  let the user agent wait for the user to start playback explicitly.</p>

  

  <p>The <dfn id="dom-media-autoplay"><code>autoplay</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="ready-states:reflect">reflect</a> the content attribute of the same name.</p></section>

  



  <section><h2>Playing the media resource</h2>

  <dl class="domintro"><dt><var>media</var> . <code id="playing-the-media-resource:dom-media-paused"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code></dt><dd>

    <p>Returns true if playback is paused; false otherwise.</p>

   </dd><dt><var>media</var> . <code id="playing-the-media-resource:dom-media-ended"><a href="/breakup/specs/html-media/#dom-media-ended">ended</a></code></dt><dd>

    <p>Returns true if playback has reached the end of the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource">media resource</a>.</p>

   </dd><dt><var>media</var> . <code id="playing-the-media-resource:dom-media-defaultplaybackrate"><a href="/breakup/specs/html-media/#dom-media-defaultplaybackrate">defaultPlaybackRate</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the default rate of playback, for when the user is not fast-forwarding or reversing
    through the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-2">media resource</a>.</p>

    <p>Can be set, to change the default rate of playback.</p>

    <p>The default rate has no direct effect on playback, but if the user switches to a fast-forward
    mode, when they return to the normal playback mode, it is expected that the rate of playback
    will be returned to the default rate of playback.</p>

    <p>When the element has a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller">current media controller</a>, the <code id="playing-the-media-resource:dom-media-defaultplaybackrate-2"><a href="/breakup/specs/html-media/#dom-media-defaultplaybackrate">defaultPlaybackRate</a></code> attribute is ignored and the
    <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-2">current media controller</a>'s <code id="playing-the-media-resource:dom-mediacontroller-defaultplaybackrate"><a href="/breakup/specs/html-media/#dom-mediacontroller-defaultplaybackrate">defaultPlaybackRate</a></code> is used instead.</p>

   </dd><dt><var>media</var> . <code id="playing-the-media-resource:dom-media-playbackrate"><a href="/breakup/specs/html-media/#dom-media-playbackrate">playbackRate</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the current rate playback, where 1.0 is normal speed.</p>

    <p>Can be set, to change the rate of playback.</p>

    <p>When the element has a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-3">current media controller</a>, the <code id="playing-the-media-resource:dom-media-playbackrate-2"><a href="/breakup/specs/html-media/#dom-media-playbackrate">playbackRate</a></code> attribute is ignored and the <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-4">current
    media controller</a>'s <code id="playing-the-media-resource:dom-mediacontroller-playbackrate"><a href="/breakup/specs/html-media/#dom-mediacontroller-playbackrate">playbackRate</a></code> is
    used instead.</p>

   </dd><dt><var>media</var> . <code id="playing-the-media-resource:dom-media-played"><a href="/breakup/specs/html-media/#dom-media-played">played</a></code></dt><dd>

    <p>Returns a <code id="playing-the-media-resource:timeranges"><a href="/breakup/specs/html-media/#timeranges">TimeRanges</a></code> object that represents the ranges of the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-3">media
    resource</a> that the user agent has played.</p>

   </dd><dt><var>media</var> . <code id="playing-the-media-resource:dom-media-play"><a href="/breakup/specs/html-media/#dom-media-play">play</a></code>()</dt><dd>

    <p>Sets the <code id="playing-the-media-resource:dom-media-paused-2"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute to false, loading the
    <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-4">media resource</a> and beginning playback if necessary. If the playback had ended, will
    restart it from the start.</p>

   </dd><dt><var>media</var> . <code id="playing-the-media-resource:dom-media-pause"><a href="/breakup/specs/html-media/#dom-media-pause">pause</a></code>()</dt><dd>

    <p>Sets the <code id="playing-the-media-resource:dom-media-paused-3"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute to true, loading the
    <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-5">media resource</a> if necessary.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-media-paused"><code>paused</code></dfn> attribute represents whether the
  <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element">media element</a> is paused or not. The attribute must initially be true.</p>

  <p>A <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-2">media element</a> is a <dfn id="blocked-media-element">blocked media element</dfn> if its <code id="playing-the-media-resource:dom-media-readystate"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute is in the <code id="playing-the-media-resource:dom-media-have_nothing"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code> state, the <code id="playing-the-media-resource:dom-media-have_metadata"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> state, or the <code id="playing-the-media-resource:dom-media-have_current_data"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> state, or if the element has
  <a href="/breakup/specs/html-media/#paused-for-user-interaction" id="playing-the-media-resource:paused-for-user-interaction">paused for user interaction</a> or <a href="/breakup/specs/html-media/#paused-for-in-band-content" id="playing-the-media-resource:paused-for-in-band-content">paused for in-band content</a>.</p>

  <p>A <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-3">media element</a> is said to be <dfn id="potentially-playing">potentially playing</dfn> when its <code id="playing-the-media-resource:dom-media-paused-4"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute is false, the element has not <a href="/breakup/specs/html-media/#ended-playback" id="playing-the-media-resource:ended-playback">ended
  playback</a>, playback has not <a href="/breakup/specs/html-media/#stopped-due-to-errors" id="playing-the-media-resource:stopped-due-to-errors">stopped due to errors</a>, the element either has no
  <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-5">current media controller</a> or has a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-6">current media controller</a> but is not
  <a href="/breakup/specs/html-media/#blocked-on-its-media-controller" id="playing-the-media-resource:blocked-on-its-media-controller">blocked on its media controller</a>, and the element is not a <a href="/breakup/specs/html-media/#blocked-media-element" id="playing-the-media-resource:blocked-media-element">blocked media
  element</a>.</p>

  <p class="note">A <code id="playing-the-media-resource:event-media-waiting"><a href="/breakup/specs/html-media/#event-media-waiting">waiting</a></code> DOM event <a href="/breakup/specs/html-media/#fire-waiting-when-waiting">can be fired</a> as a result of an element that is
  <a href="/breakup/specs/html-media/#potentially-playing" id="playing-the-media-resource:potentially-playing">potentially playing</a> stopping playback due to its <code id="playing-the-media-resource:dom-media-readystate-2"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute changing to a value lower than <code id="playing-the-media-resource:dom-media-have_future_data"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code>.</p>

  <p>A <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-4">media element</a> is said to have <dfn id="ended-playback">ended playback</dfn> when:</p>

  <ul><li>The element's <code id="playing-the-media-resource:dom-media-readystate-3"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute is <code id="playing-the-media-resource:dom-media-have_metadata-2"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> or greater, and

   </li><li>

    <p>Either:

    </p><ul><li>The <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position">current playback position</a> is the end of the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-6">media resource</a>,
     and

     </li><li>The <a href="/breakup/specs/html-media/#direction-of-playback" id="playing-the-media-resource:direction-of-playback">direction of playback</a> is forwards, and

     </li><li>Either the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-5">media element</a> does not have a <code id="playing-the-media-resource:attr-media-loop"><a href="/breakup/specs/html-media/#attr-media-loop">loop</a></code> attribute specified, or the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-6">media element</a> has
     a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-7">current media controller</a>.

    </li></ul>

    <p>Or:

    </p><ul><li>The <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-2">current playback position</a> is the <a href="/breakup/specs/html-media/#earliest-possible-position" id="playing-the-media-resource:earliest-possible-position">earliest possible position</a>,
     and

     </li><li>The <a href="/breakup/specs/html-media/#direction-of-playback" id="playing-the-media-resource:direction-of-playback-2">direction of playback</a> is backwards.

    </li></ul>

   </li></ul>

  <p>The <dfn id="dom-media-ended"><code>ended</code></dfn> attribute must return true if, the
  last time the <a href="/breakup/specs/browser-dom/#event-loop" id="playing-the-media-resource:event-loop">event loop</a> reached <a href="/breakup/specs/browser-dom/#step1">step 1</a>, the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-7">media element</a> had
  <a href="/breakup/specs/html-media/#ended-playback" id="playing-the-media-resource:ended-playback-2">ended playback</a> and the <a href="/breakup/specs/html-media/#direction-of-playback" id="playing-the-media-resource:direction-of-playback-3">direction of playback</a> was forwards, and false
  otherwise.</p>

  <p>A <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-8">media element</a> is said to have <dfn id="stopped-due-to-errors">stopped due to errors</dfn> when the
  element's <code id="playing-the-media-resource:dom-media-readystate-4"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute is <code id="playing-the-media-resource:dom-media-have_metadata-3"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> or greater, and the user agent <a href="/breakup/specs/html-media/#non-fatal-media-error">encounters a non-fatal error</a> during the processing of the
  <a href="/breakup/specs/html-media/#media-data" id="playing-the-media-resource:media-data">media data</a>, and due to that error, is not able to play the content at the
  <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-3">current playback position</a>.</p>

  <p>A <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-9">media element</a> is said to have <dfn id="paused-for-user-interaction">paused for user interaction</dfn> when its
  <code id="playing-the-media-resource:dom-media-paused-5"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute is false, the <code id="playing-the-media-resource:dom-media-readystate-5"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute is either <code id="playing-the-media-resource:dom-media-have_future_data-2"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code> or <code id="playing-the-media-resource:dom-media-have_enough_data"><a href="/breakup/specs/html-media/#dom-media-have_enough_data">HAVE_ENOUGH_DATA</a></code> and the user agent has reached a point
  in the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-7">media resource</a> where the user has to make a selection for the resource to
  continue. If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-10">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-8">current media controller</a> when this
  happens, then the user agent must <a href="/breakup/specs/html-media/#report-the-controller-state" id="playing-the-media-resource:report-the-controller-state">report the controller state</a> for the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-11">media
  element</a>'s <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-9">current media controller</a>. If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-12">media element</a> has a
  <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-10">current media controller</a> when the user makes a selection, allowing playback to
  resume, the user agent must similarly <a href="/breakup/specs/html-media/#report-the-controller-state" id="playing-the-media-resource:report-the-controller-state-2">report the controller state</a> for the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-13">media
  element</a>'s <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-11">current media controller</a>.</p>

  <p>It is possible for a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-14">media element</a> to have both <a href="/breakup/specs/html-media/#ended-playback" id="playing-the-media-resource:ended-playback-3">ended playback</a> and
  <a href="/breakup/specs/html-media/#paused-for-user-interaction" id="playing-the-media-resource:paused-for-user-interaction-2">paused for user interaction</a> at the same time.</p>

  <p>When a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-15">media element</a> that is <a href="/breakup/specs/html-media/#potentially-playing" id="playing-the-media-resource:potentially-playing-2">potentially playing</a> stops playing
  because it has <a href="/breakup/specs/html-media/#paused-for-user-interaction" id="playing-the-media-resource:paused-for-user-interaction-3">paused for user interaction</a>, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task">queue a
  task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event">fire a simple event</a> named <code id="playing-the-media-resource:event-media-timeupdate"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> at the element.</p>

  <p>A <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-16">media element</a> is said to have <dfn id="paused-for-in-band-content">paused for in-band content</dfn> when its
  <code id="playing-the-media-resource:dom-media-paused-6"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute is false, the <code id="playing-the-media-resource:dom-media-readystate-6"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute is either <code id="playing-the-media-resource:dom-media-have_future_data-3"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code> or <code id="playing-the-media-resource:dom-media-have_enough_data-2"><a href="/breakup/specs/html-media/#dom-media-have_enough_data">HAVE_ENOUGH_DATA</a></code> and the user agent has suspended
  playback of the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-8">media resource</a> in order to play content that is temporally anchored
  to the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-9">media resource</a> and has a non-zero length, or to play content that is
  temporally anchored to a segment of the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-10">media resource</a> but has a length longer than
  that segment. If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-17">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-12">current media controller</a> when
  this happens, then the user agent must <a href="/breakup/specs/html-media/#report-the-controller-state" id="playing-the-media-resource:report-the-controller-state-3">report the controller state</a> for the
  <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-18">media element</a>'s <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-13">current media controller</a>. If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-19">media
  element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-14">current media controller</a> when the user agent unsuspends
  playback, the user agent must similarly <a href="/breakup/specs/html-media/#report-the-controller-state" id="playing-the-media-resource:report-the-controller-state-4">report the controller state</a> for the
  <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-20">media element</a>'s <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-15">current media controller</a>.</p>

  <p class="example">One example of when a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-21">media element</a> would be <a href="/breakup/specs/html-media/#paused-for-in-band-content" id="playing-the-media-resource:paused-for-in-band-content-2">paused for
  in-band content</a> is when the user agent is playing <a href="/breakup/specs/html-media/#attr-track-kind-descriptions" id="playing-the-media-resource:attr-track-kind-descriptions">audio descriptions</a> from an external WebVTT file, and
  the synthesized speech generated for a cue is longer than the time between the <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="playing-the-media-resource:text-track-cue-start-time">text track
  cue start time</a> and the <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="playing-the-media-resource:text-track-cue-end-time">text track cue end time</a>.</p>

  <hr>

  <p id="reaches-the-end">When the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-4">current playback position</a> reaches the end of the
  <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-11">media resource</a> when the <a href="/breakup/specs/html-media/#direction-of-playback" id="playing-the-media-resource:direction-of-playback-4">direction of playback</a> is forwards, then the user
  agent must follow these steps:</p>

  <ol><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-22">media element</a> has a <code id="playing-the-media-resource:attr-media-loop-2"><a href="/breakup/specs/html-media/#attr-media-loop">loop</a></code>
   attribute specified and does not have a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-16">current media controller</a>, then <a href="/breakup/specs/html-media/#dom-media-seek" id="playing-the-media-resource:dom-media-seek">seek</a> to the <a href="/breakup/specs/html-media/#earliest-possible-position" id="playing-the-media-resource:earliest-possible-position-2">earliest possible position</a> of the
   <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-12">media resource</a> and abort these steps.</p></li><li><p>As defined above, the <code id="playing-the-media-resource:dom-media-ended-2"><a href="/breakup/specs/html-media/#dom-media-ended">ended</a></code> IDL attribute starts
   returning true once the <a href="/breakup/specs/browser-dom/#event-loop" id="playing-the-media-resource:event-loop-2">event loop</a> returns to <a href="/breakup/specs/browser-dom/#step1">step 1</a>.</p></li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-2">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-2">fire a simple event</a> named <code id="playing-the-media-resource:event-media-timeupdate-2"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-23">media element</a>.</p></li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-3">Queue a task</a> that, if the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-24">media element</a> does not have a
   <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-17">current media controller</a>, and the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-25">media element</a> has still <a href="/breakup/specs/html-media/#ended-playback" id="playing-the-media-resource:ended-playback-4">ended
   playback</a>, and the <a href="/breakup/specs/html-media/#direction-of-playback" id="playing-the-media-resource:direction-of-playback-5">direction of playback</a> is still forwards, and <a href="/breakup/specs/html-media/#dom-media-paused" id="playing-the-media-resource:dom-media-paused-7">paused</a> is false, changes <a href="/breakup/specs/html-media/#dom-media-paused" id="playing-the-media-resource:dom-media-paused-8">paused</a> to true and <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-3">fires a
   simple event</a> named <code id="playing-the-media-resource:event-media-pause"><a href="/breakup/specs/html-media/#event-media-pause">pause</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-26">media
   element</a>.</p></li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-4">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-4">fire a simple event</a> named <code id="playing-the-media-resource:event-media-ended"><a href="/breakup/specs/html-media/#event-media-ended">ended</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-27">media element</a>.</p></li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-28">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-18">current media controller</a>, then
   <a href="/breakup/specs/html-media/#report-the-controller-state" id="playing-the-media-resource:report-the-controller-state-5">report the controller state</a> for the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-29">media element</a>'s <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-19">current media
   controller</a>.</p></li></ol>

  <p>When the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-5">current playback position</a> reaches the <a href="/breakup/specs/html-media/#earliest-possible-position" id="playing-the-media-resource:earliest-possible-position-3">earliest possible
  position</a> of the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-13">media resource</a> when the <a href="/breakup/specs/html-media/#direction-of-playback" id="playing-the-media-resource:direction-of-playback-6">direction of playback</a> is
  backwards, then the user agent must only <a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-5">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-5">fire a simple
  event</a> named <code id="playing-the-media-resource:event-media-timeupdate-3"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> at the element.</p>

  <p class="note">The word "reaches" here does not imply that the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-6">current playback
  position</a> needs to have changed during normal playback; it could be via <a href="/breakup/specs/html-media/#dom-media-seek" id="playing-the-media-resource:dom-media-seek-2">seeking</a>, for instance.</p>

  <hr>

  <p>The <dfn id="dom-media-defaultplaybackrate"><code>defaultPlaybackRate</code></dfn> attribute
  gives the desired speed at which the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-14">media resource</a> is to play, as a multiple of its
  intrinsic speed. The attribute is mutable: on getting it must return the last value it was set to,
  or 1.0 if it hasn't yet been set; on setting the attribute must be set to the new value.</p>

  <p class="note">The <code id="playing-the-media-resource:dom-media-defaultplaybackrate-3"><a href="/breakup/specs/html-media/#dom-media-defaultplaybackrate">defaultPlaybackRate</a></code> is used
  by the user agent when it <a href="/breakup/specs/html-media/#expose-a-user-interface-to-the-user" id="playing-the-media-resource:expose-a-user-interface-to-the-user">exposes a user
  interface to the user</a>.</p>

  <p>The <dfn id="dom-media-playbackrate"><code>playbackRate</code></dfn> attribute gives the
  <a href="/breakup/specs/html-media/#effective-playback-rate" id="playing-the-media-resource:effective-playback-rate">effective playback rate</a> (assuming there is no <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-20">current media controller</a>
  overriding it), which is the speed at which the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-15">media resource</a> plays, as a multiple
  of its intrinsic speed. If it is not equal to the <code id="playing-the-media-resource:dom-media-defaultplaybackrate-4"><a href="/breakup/specs/html-media/#dom-media-defaultplaybackrate">defaultPlaybackRate</a></code>, then the implication is that the
  user is using a feature such as fast forward or slow motion playback. The attribute is mutable: on
  getting it must return the last value it was set to, or 1.0 if it hasn't yet been set; on setting
  the attribute must be set to the new value, and the playback will change speed (if the element is
  <a href="/breakup/specs/html-media/#potentially-playing" id="playing-the-media-resource:potentially-playing-3">potentially playing</a> and there is no <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-21">current media controller</a>).</p>

  <p id="rateUpdate">When the <code id="playing-the-media-resource:dom-media-defaultplaybackrate-5"><a href="/breakup/specs/html-media/#dom-media-defaultplaybackrate">defaultPlaybackRate</a></code>
  or <code id="playing-the-media-resource:dom-media-playbackrate-3"><a href="/breakup/specs/html-media/#dom-media-playbackrate">playbackRate</a></code> attributes change value (either by
  being set by script or by being changed directly by the user agent, e.g. in response to user
  control) the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-6">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-6">fire a simple event</a> named
  <code id="playing-the-media-resource:event-media-ratechange"><a href="/breakup/specs/html-media/#event-media-ratechange">ratechange</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-30">media element</a>.</p>

  <p class="note">The <code id="playing-the-media-resource:dom-media-defaultplaybackrate-6"><a href="/breakup/specs/html-media/#dom-media-defaultplaybackrate">defaultPlaybackRate</a></code> and
  <code id="playing-the-media-resource:dom-media-playbackrate-4"><a href="/breakup/specs/html-media/#dom-media-playbackrate">playbackRate</a></code> attributes have no effect when the
  <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-31">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-22">current media controller</a>; the namesake attributes on
  the <code id="playing-the-media-resource:mediacontroller"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object are used instead in that situation.</p>

  <hr>

  <p>The <dfn id="dom-media-played"><code>played</code></dfn> attribute must return a new static
  <a href="/breakup/specs/html-media/#normalised-timeranges-object" id="playing-the-media-resource:normalised-timeranges-object">normalised <code>TimeRanges</code> object</a> that represents the ranges of points on the
  <a href="/breakup/specs/html-media/#media-timeline" id="playing-the-media-resource:media-timeline">media timeline</a> of the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-16">media resource</a> reached through the usual monotonic
  increase of the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-7">current playback position</a> during normal playback, if any, at the time
  the attribute is evaluated.</p>

  <hr>

  <p>When the <dfn id="dom-media-play"><code>play()</code></dfn> method on a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-32">media
  element</a> is invoked, the user agent must run the following steps.</p>

  <ol><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-33">media element</a>'s <code id="playing-the-media-resource:dom-media-networkstate"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> attribute has the value <code id="playing-the-media-resource:dom-media-network_empty"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code>, invoke the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-34">media element</a>'s
   <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="playing-the-media-resource:concept-media-load-algorithm">resource selection algorithm</a>.</p></li><li>

    <p>If the <a href="/breakup/specs/html-media/#ended-playback" id="playing-the-media-resource:ended-playback-5">playback has ended</a> and the <a href="/breakup/specs/html-media/#direction-of-playback" id="playing-the-media-resource:direction-of-playback-7">direction of
    playback</a> is forwards, and the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-35">media element</a> does not have a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-23">current
    media controller</a>, <a href="/breakup/specs/html-media/#dom-media-seek" id="playing-the-media-resource:dom-media-seek-3">seek</a> to the <a href="/breakup/specs/html-media/#earliest-possible-position" id="playing-the-media-resource:earliest-possible-position-4">earliest possible
    position</a> of the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-17">media resource</a>.</p>

    <p class="note">This <a href="/breakup/specs/html-media/#seekUpdate">will cause</a> the user agent to <a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-7">queue a
    task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-7">fire a simple event</a> named <code id="playing-the-media-resource:event-media-timeupdate-4"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-36">media element</a>.</p>
    

   </li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-37">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-24">current media controller</a>, then
   <a href="/breakup/specs/html-media/#bring-the-media-element-up-to-speed-with-its-new-media-controller" id="playing-the-media-resource:bring-the-media-element-up-to-speed-with-its-new-media-controller">bring the media element up to speed with its new media controller</a>.</p>

   </li><li>

    <p>If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-38">media element</a>'s <code id="playing-the-media-resource:dom-media-paused-9"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute is
    true, run the following substeps:</p>

    <ol><li><p>Change the value of <code id="playing-the-media-resource:dom-media-paused-10"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> to false.</p></li><li><p>If the <a href="/breakup/specs/html-media/#show-poster-flag" id="playing-the-media-resource:show-poster-flag">show poster flag</a> is true, set the element's <a href="/breakup/specs/html-media/#show-poster-flag" id="playing-the-media-resource:show-poster-flag-2">show poster
     flag</a> to false and run the <i id="playing-the-media-resource:time-marches-on"><a href="/breakup/specs/html-media/#time-marches-on">time marches on</a></i> steps.</p></li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-8">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-8">fire a simple event</a> named <code id="playing-the-media-resource:event-media-play"><a href="/breakup/specs/html-media/#event-media-play">play</a></code> at the element.</p></li><li>

      <p>If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-39">media element</a>'s <code id="playing-the-media-resource:dom-media-readystate-7"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code>
      attribute has the value <code id="playing-the-media-resource:dom-media-have_nothing-2"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>, <code id="playing-the-media-resource:dom-media-have_metadata-4"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code>, or <code id="playing-the-media-resource:dom-media-have_current_data-2"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code>, <a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-9">queue a task</a> to
      <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-9">fire a simple event</a> named <code id="playing-the-media-resource:event-media-waiting-2"><a href="/breakup/specs/html-media/#event-media-waiting">waiting</a></code> at the
      element.</p>

      <p>Otherwise, the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-40">media element</a>'s <code id="playing-the-media-resource:dom-media-readystate-8"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute has the value <code id="playing-the-media-resource:dom-media-have_future_data-4"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code> or <code id="playing-the-media-resource:dom-media-have_enough_data-3"><a href="/breakup/specs/html-media/#dom-media-have_enough_data">HAVE_ENOUGH_DATA</a></code>: <a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-10">queue a task</a> to
      <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-10">fire a simple event</a> named <code id="playing-the-media-resource:event-media-playing"><a href="/breakup/specs/html-media/#event-media-playing">playing</a></code> at the
      element.</p>

     </li></ol>

   </li><li><p>Set the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-41">media element</a>'s <a href="/breakup/specs/html-media/#autoplaying-flag" id="playing-the-media-resource:autoplaying-flag">autoplaying flag</a> to false.</p></li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-42">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-25">current media controller</a>, then
   <a href="/breakup/specs/html-media/#report-the-controller-state" id="playing-the-media-resource:report-the-controller-state-6">report the controller state</a> for the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-43">media element</a>'s <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-26">current media
   controller</a>.</p></li></ol>

  <hr>

  <p>When the <dfn id="dom-media-pause"><code>pause()</code></dfn> method is invoked, and when
  the user agent is required to pause the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-44">media element</a>, the user agent must run the
  following steps:</p>

  <ol><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-45">media element</a>'s <code id="playing-the-media-resource:dom-media-networkstate-2"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> attribute has the value <code id="playing-the-media-resource:dom-media-network_empty-2"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code>, invoke the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-46">media element</a>'s
   <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="playing-the-media-resource:concept-media-load-algorithm-2">resource selection algorithm</a>.</p></li><li><p>Run the <a href="/breakup/specs/html-media/#internal-pause-steps" id="playing-the-media-resource:internal-pause-steps">internal pause steps</a> for the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-47">media element</a>.</p></li></ol>

  <p>The <dfn id="internal-pause-steps">internal pause steps</dfn> for a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-48">media element</a> are as follows:</p>

  <ol><li><p>Set the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-49">media element</a>'s <a href="/breakup/specs/html-media/#autoplaying-flag" id="playing-the-media-resource:autoplaying-flag-2">autoplaying flag</a> to false.</p></li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-50">media element</a>'s <code id="playing-the-media-resource:dom-media-paused-11"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute
   is false, run the following steps:</p>

    <ol><li><p>Change the value of <code id="playing-the-media-resource:dom-media-paused-12"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> to true.</p></li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-11">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-11">fire a simple
     event</a> named <code id="playing-the-media-resource:event-media-timeupdate-5"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> at the
     element.</p></li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-12">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-12">fire a simple
     event</a> named <code id="playing-the-media-resource:event-media-pause-2"><a href="/breakup/specs/html-media/#event-media-pause">pause</a></code>
     at the element.</p></li><li><p>Set the <a href="/breakup/specs/html-media/#official-playback-position" id="playing-the-media-resource:official-playback-position">official playback position</a> to the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-8">current playback
     position</a>.</p></li></ol>

   </li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-51">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-27">current media controller</a>, then
   <a href="/breakup/specs/html-media/#report-the-controller-state" id="playing-the-media-resource:report-the-controller-state-7">report the controller state</a> for the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-52">media element</a>'s <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-28">current media
   controller</a>.</p></li></ol>

  <hr>

  <p>The <dfn id="effective-playback-rate">effective playback rate</dfn> is not necessarily the element's <code id="playing-the-media-resource:dom-media-playbackrate-5"><a href="/breakup/specs/html-media/#dom-media-playbackrate">playbackRate</a></code>. When a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-53">media element</a> has a
  <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-29">current media controller</a>, its <a href="/breakup/specs/html-media/#effective-playback-rate" id="playing-the-media-resource:effective-playback-rate-2">effective playback rate</a> is the
  <code id="playing-the-media-resource:mediacontroller-2"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-playback-rate" id="playing-the-media-resource:media-controller-playback-rate">media controller playback rate</a>. Otherwise, the
  <a href="/breakup/specs/html-media/#effective-playback-rate" id="playing-the-media-resource:effective-playback-rate-3">effective playback rate</a> is just the element's <code id="playing-the-media-resource:dom-media-playbackrate-6"><a href="/breakup/specs/html-media/#dom-media-playbackrate">playbackRate</a></code>. Thus, the <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-30">current media
  controller</a> overrides the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-54">media element</a>.</p>

  <p>If the <a href="/breakup/specs/html-media/#effective-playback-rate" id="playing-the-media-resource:effective-playback-rate-4">effective playback rate</a> is positive or zero, then the <dfn id="direction-of-playback">direction of
  playback</dfn> is forwards. Otherwise, it is backwards.</p>

  <p id="media-playback">When a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-55">media element</a> is <a href="/breakup/specs/html-media/#potentially-playing" id="playing-the-media-resource:potentially-playing-4">potentially playing</a> and
  its <code id="playing-the-media-resource:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> is a <a href="/breakup/specs/browser-dom/#fully-active" id="playing-the-media-resource:fully-active">fully active</a> <code id="playing-the-media-resource:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, its <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-9">current
  playback position</a> must increase monotonically at <a href="/breakup/specs/html-media/#effective-playback-rate" id="playing-the-media-resource:effective-playback-rate-5">effective playback rate</a> units
  of media time per unit time of the <a href="/breakup/specs/html-media/#media-timeline" id="playing-the-media-resource:media-timeline-2">media timeline</a>'s clock. (This specification always
  refers to this as an <i>increase</i>, but that increase could actually be a <em>de</em>crease if
  the <a href="/breakup/specs/html-media/#effective-playback-rate" id="playing-the-media-resource:effective-playback-rate-6">effective playback rate</a> is negative.)</p>

  <p class="note">The <a href="/breakup/specs/html-media/#effective-playback-rate" id="playing-the-media-resource:effective-playback-rate-7">effective playback rate</a> can be 0.0, in which case the
  <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-10">current playback position</a> doesn't move, despite playback not being paused (<code id="playing-the-media-resource:dom-media-paused-13"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> doesn't become true, and the <code id="playing-the-media-resource:event-media-pause-3"><a href="/breakup/specs/html-media/#event-media-pause">pause</a></code> event doesn't fire).</p>

  <p class="note">This specification doesn't define how the user agent achieves the appropriate
  playback rate — depending on the protocol and media available, it is plausible that the user
  agent could negotiate with the server to have the server provide the media data at the appropriate
  rate, so that (except for the period between when the rate is changed and when the server updates
  the stream's playback rate) the client doesn't actually have to drop or interpolate any
  frames.</p>

  <p>Any time the user agent <a href="/breakup/specs/browser-dom/#await-a-stable-state" id="playing-the-media-resource:await-a-stable-state">provides a stable state</a>,
  the <a href="/breakup/specs/html-media/#official-playback-position" id="playing-the-media-resource:official-playback-position-2">official playback position</a> must be set to the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-11">current playback
  position</a>.</p> 

  <p>While the <a href="/breakup/specs/html-media/#direction-of-playback" id="playing-the-media-resource:direction-of-playback-8">direction of playback</a> is backwards, any corresponding audio must be
  <a href="/breakup/specs/html-media/#concept-media-muted" id="playing-the-media-resource:concept-media-muted">muted</a>. While the <a href="/breakup/specs/html-media/#effective-playback-rate" id="playing-the-media-resource:effective-playback-rate-8">effective playback rate</a> is
  so low or so high that the user agent cannot play audio usefully, the corresponding audio must
  also be <a href="/breakup/specs/html-media/#concept-media-muted" id="playing-the-media-resource:concept-media-muted-2">muted</a>. If the <a href="/breakup/specs/html-media/#effective-playback-rate" id="playing-the-media-resource:effective-playback-rate-9">effective playback
  rate</a> is not 1.0, the user agent may apply pitch adjustments to the audio as necessary to
  render it faithfully.</p>

  <p><a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-56">Media elements</a> that are <a href="/breakup/specs/html-media/#potentially-playing" id="playing-the-media-resource:potentially-playing-5">potentially playing</a>
  while not <a href="/breakup/specs/core-algorithms/#in-a-document" id="playing-the-media-resource:in-a-document">in a <code>Document</code></a> must not play any video, but should play any
  audio component. Media elements must not stop playing just because all references to them have
  been removed; only once a media element is in a state where no further audio could ever be played
  by that element may the element be garbage collected.</p>

  <p class="note">It is possible for an element to which no explicit references exist to play audio,
  even if such an element is not still actively playing: for instance, it could have a <a href="/breakup/specs/html-media/#current-media-controller" id="playing-the-media-resource:current-media-controller-31">current
  media controller</a> that still has references and can still be unpaused, or it could be
  unpaused but stalled waiting for content to buffer, or it could be still buffering, but with a
  <code id="playing-the-media-resource:event-media-suspend"><a href="/breakup/specs/html-media/#event-media-suspend">suspend</a></code> event listener that begins playback. Even a
  media element whose <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-18">media resource</a> has no audio tracks could eventually play audio
  again if it had an event listener that changes the <a href="/breakup/specs/html-media/#media-resource" id="playing-the-media-resource:media-resource-19">media resource</a>.</p>

  <hr>

  <p>Each <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-57">media element</a> has a <dfn id="list-of-newly-introduced-cues">list of newly introduced cues</dfn>, which must be
  initially empty. Whenever a <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue">text track cue</a> is added to the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="playing-the-media-resource:text-track-list-of-cues">list of cues</a> of a <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track">text track</a> that is in the <a href="/breakup/specs/html-media/#list-of-text-tracks" id="playing-the-media-resource:list-of-text-tracks">list of text
  tracks</a> for a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-58">media element</a>, that <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-2">cue</a> must
  be added to the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-59">media element</a>'s <a href="/breakup/specs/html-media/#list-of-newly-introduced-cues" id="playing-the-media-resource:list-of-newly-introduced-cues">list of newly introduced cues</a>. Whenever
  a <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-2">text track</a> is added to the <a href="/breakup/specs/html-media/#list-of-text-tracks" id="playing-the-media-resource:list-of-text-tracks-2">list of text tracks</a> for a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-60">media
  element</a>, all of the <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-3">cues</a> in that <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-3">text
  track</a>'s <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="playing-the-media-resource:text-track-list-of-cues-2">list of cues</a> must be added to the
  <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-61">media element</a>'s <a href="/breakup/specs/html-media/#list-of-newly-introduced-cues" id="playing-the-media-resource:list-of-newly-introduced-cues-2">list of newly introduced cues</a>. When a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-62">media
  element</a>'s <a href="/breakup/specs/html-media/#list-of-newly-introduced-cues" id="playing-the-media-resource:list-of-newly-introduced-cues-3">list of newly introduced cues</a> has new cues added while the
  <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-63">media element</a>'s <a href="/breakup/specs/html-media/#show-poster-flag" id="playing-the-media-resource:show-poster-flag-3">show poster flag</a> is not set, then the user agent must
  run the <i id="playing-the-media-resource:time-marches-on-2"><a href="/breakup/specs/html-media/#time-marches-on">time marches on</a></i> steps.</p>

  <p>When a <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-4">text track cue</a> is removed from the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="playing-the-media-resource:text-track-list-of-cues-3">list of cues</a> of a <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-4">text track</a> that is in the <a href="/breakup/specs/html-media/#list-of-text-tracks" id="playing-the-media-resource:list-of-text-tracks-3">list of text
  tracks</a> for a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-64">media element</a>, and whenever a <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-5">text track</a> is removed
  from the <a href="/breakup/specs/html-media/#list-of-text-tracks" id="playing-the-media-resource:list-of-text-tracks-4">list of text tracks</a> of a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-65">media element</a>, if the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-66">media
  element</a>'s <a href="/breakup/specs/html-media/#show-poster-flag" id="playing-the-media-resource:show-poster-flag-4">show poster flag</a> is not set, then the user agent must run the
  <i id="playing-the-media-resource:time-marches-on-3"><a href="/breakup/specs/html-media/#time-marches-on">time marches on</a></i> steps.</p>

  <p>When the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-12">current playback position</a> of a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-67">media element</a> changes (e.g.
  due to playback or seeking), the user agent must run the <i id="playing-the-media-resource:time-marches-on-4"><a href="/breakup/specs/html-media/#time-marches-on">time marches on</a></i> steps. If the
  <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-13">current playback position</a> changes while the steps are running, then the user agent
  must wait for the steps to complete, and then must immediately rerun the steps. (These steps are
  thus run as often as possible or needed — if one iteration takes a long time, this can cause
  certain <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-5">cues</a> to be skipped over as the user agent rushes ahead
  to "catch up".)</p>

  <p>The <dfn id="time-marches-on"><i>time marches on</i></dfn> steps are as follows:</p>

  <ol><li><p>Let <var>current cues</var> be a list of <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-6">cues</a>, initialised to contain all the <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-7">cues</a> of all
   the <a href="/breakup/specs/html-media/#text-track-hidden" id="playing-the-media-resource:text-track-hidden">hidden</a> or <a href="/breakup/specs/html-media/#text-track-showing" id="playing-the-media-resource:text-track-showing">showing</a> <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-6">text tracks</a> of the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-68">media
   element</a> (not the <a href="/breakup/specs/html-media/#text-track-disabled" id="playing-the-media-resource:text-track-disabled">disabled</a> ones) whose <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="playing-the-media-resource:text-track-cue-start-time-2">start times</a> are less than or equal to the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-14">current
   playback position</a> and whose <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="playing-the-media-resource:text-track-cue-end-time-2">end times</a> are
   greater than the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-15">current playback position</a>.</p></li><li><p>Let <var>other cues</var> be a list of <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-8">cues</a>,
   initialised to contain all the <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-9">cues</a> of <a href="/breakup/specs/html-media/#text-track-hidden" id="playing-the-media-resource:text-track-hidden-2">hidden</a> and <a href="/breakup/specs/html-media/#text-track-showing" id="playing-the-media-resource:text-track-showing-2">showing</a> <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-7">text tracks</a> of the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-69">media element</a> that are not present in <var>current cues</var>.</p></li><li><p>Let <var>last time</var> be the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-16">current playback position</a> at the
   time this algorithm was last run for this <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-70">media element</a>, if this is not the first
   time it has run.</p></li><li><p>If the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-17">current playback position</a> has, since the last time this algorithm was
   run, only changed through its usual monotonic increase during normal playback, then let <var>missed cues</var> be the list of <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-10">cues</a> in <var>other cues</var> whose <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="playing-the-media-resource:text-track-cue-start-time-3">start times</a> are
   greater than or equal to <var>last time</var> and whose <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="playing-the-media-resource:text-track-cue-end-time-3">end times</a> are less than or equal to the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-18">current playback position</a>.
   Otherwise, let <var>missed cues</var> be an empty list.</p></li><li><p>Remove all the <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-11">cues</a> in <var>missed cues</var>
   that are also in the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-71">media element</a>'s <a href="/breakup/specs/html-media/#list-of-newly-introduced-cues" id="playing-the-media-resource:list-of-newly-introduced-cues-4">list of newly introduced cues</a>, and
   then empty the element's <a href="/breakup/specs/html-media/#list-of-newly-introduced-cues" id="playing-the-media-resource:list-of-newly-introduced-cues-5">list of newly introduced cues</a>.</p></li><li><p>If the time was reached through the usual monotonic increase of the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-19">current playback
   position</a> during normal playback, and if the user agent has not fired a <code id="playing-the-media-resource:event-media-timeupdate-6"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> event at the element in the past 15 to 250ms and
   is not still running event handlers for such an event, then the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-13">queue a
   task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-13">fire a simple event</a> named <code id="playing-the-media-resource:event-media-timeupdate-7"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> at the element. (In the other cases, such as
   explicit seeks, relevant events get fired as part of the overall process of changing the
   <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-20">current playback position</a>.)</p>

   <p class="note">The event thus is not to be fired faster than about 66Hz or slower than 4Hz
   (assuming the event handlers don't take longer than 250ms to run). User agents are encouraged to
   vary the frequency of the event based on the system load and the average cost of processing the
   event each time, so that the UI updates are not any more frequent than the user agent can
   comfortably handle while decoding the video.</p></li><li><p>If all of the <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-12">cues</a> in <var>current cues</var>
   have their <a href="/breakup/specs/html-media/#text-track-cue-active-flag" id="playing-the-media-resource:text-track-cue-active-flag">text track cue active flag</a> set, none of the <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-13">cues</a> in <var>other cues</var> have their <a href="/breakup/specs/html-media/#text-track-cue-active-flag" id="playing-the-media-resource:text-track-cue-active-flag-2">text track cue active
   flag</a> set, and <var>missed cues</var> is empty, then abort these steps.</p></li><li>

    <p>If the time was reached through the usual monotonic increase of the <a href="/breakup/specs/html-media/#current-playback-position" id="playing-the-media-resource:current-playback-position-21">current playback
    position</a> during normal playback, and there are <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-14">cues</a>
    in <var>other cues</var> that have their <a href="/breakup/specs/html-media/#text-track-cue-pause-on-exit-flag" id="playing-the-media-resource:text-track-cue-pause-on-exit-flag">text track cue pause-on-exit flag</a>
    set and that either have their <a href="/breakup/specs/html-media/#text-track-cue-active-flag" id="playing-the-media-resource:text-track-cue-active-flag-3">text track cue active flag</a> set or are also in <var>missed cues</var>, then <a href="/breakup/specs/core-algorithms/#immediately" id="playing-the-media-resource:immediately">immediately</a> <a href="/breakup/specs/html-media/#dom-media-pause" id="playing-the-media-resource:dom-media-pause-2">pause</a> the
    <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-72">media element</a>. </p>

    <p class="note">In the other cases, such as explicit seeks, playback is not paused by going past
    the end time of a <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-15">cue</a>, even if that <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-16">cue</a> has its <a href="/breakup/specs/html-media/#text-track-cue-pause-on-exit-flag" id="playing-the-media-resource:text-track-cue-pause-on-exit-flag-2">text track cue pause-on-exit flag</a> set.</p>

   </li><li>

    <p>Let <var>events</var> be a list of <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task">tasks</a>,
    initially empty. Each <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-2">task</a> in this list will be associated
    with a <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-8">text track</a>, a <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-17">text track cue</a>, and a time, which are used to
    sort the list before the <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-3">tasks</a> are queued.</p>

    <p>Let <var>affected tracks</var> be a list of <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-9">text
    tracks</a>, initially empty.</p>

    <p>When the steps below say to <dfn id="prepare-an-event">prepare an event</dfn> named <var>event</var> for a
    <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-18">text track cue</a> <var>target</var> with a time <var>time</var>, the
    user agent must run these substeps:</p>

    <ol><li><p>Let <var>track</var> be the <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-10">text track</a> with which the <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-19">text
     track cue</a> <var>target</var> is associated.</p></li><li><p>Create a <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-4">task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-14">fire a simple event</a>
     named <var>event</var> at <var>target</var>.</p></li><li><p>Add the newly created <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-5">task</a> to <var>events</var>, associated with the time <var>time</var>, the <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-11">text
     track</a> <var>track</var>, and the <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-20">text track cue</a> <var>target</var>.</p></li><li><p>Add <var>track</var> to <var>affected tracks</var>.</p></li></ol>

   </li><li><p>For each <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-21">text track cue</a> in <var>missed
   cues</var>, <a href="/breakup/specs/html-media/#prepare-an-event" id="playing-the-media-resource:prepare-an-event">prepare an event</a> named <code id="playing-the-media-resource:event-media-enter"><a href="/breakup/specs/html-media/#event-media-enter">enter</a></code> for the
   <code id="playing-the-media-resource:texttrackcue"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> object with the <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="playing-the-media-resource:text-track-cue-start-time-4">text track cue start time</a>.</p></li><li><p>For each <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-22">text track cue</a> in <var>other
   cues</var> that either has its <a href="/breakup/specs/html-media/#text-track-cue-active-flag" id="playing-the-media-resource:text-track-cue-active-flag-4">text track cue active flag</a> set or is in <var>missed cues</var>, <a href="/breakup/specs/html-media/#prepare-an-event" id="playing-the-media-resource:prepare-an-event-2">prepare an event</a> named <code id="playing-the-media-resource:event-media-exit"><a href="/breakup/specs/html-media/#event-media-exit">exit</a></code> for the <code id="playing-the-media-resource:texttrackcue-2"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> object with the later of the
   <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="playing-the-media-resource:text-track-cue-end-time-4">text track cue end time</a> and the <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="playing-the-media-resource:text-track-cue-start-time-5">text track cue start time</a>.</p></li><li><p>For each <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-23">text track cue</a> in <var>current
   cues</var> that does not have its <a href="/breakup/specs/html-media/#text-track-cue-active-flag" id="playing-the-media-resource:text-track-cue-active-flag-5">text track cue active flag</a> set, <a href="/breakup/specs/html-media/#prepare-an-event" id="playing-the-media-resource:prepare-an-event-3">prepare an
   event</a> named <code id="playing-the-media-resource:event-media-enter-2"><a href="/breakup/specs/html-media/#event-media-enter">enter</a></code> for the <code id="playing-the-media-resource:texttrackcue-3"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code>
   object with the <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="playing-the-media-resource:text-track-cue-start-time-6">text track cue start time</a>.</p></li><li>

    <p>Sort the <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-6">tasks</a> in <var>events</var> in ascending
    time order (<a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-7">tasks</a> with earlier times first).</p>

    <p>Further sort <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-8">tasks</a> in <var>events</var> that have
    the same time by the relative <a href="/breakup/specs/html-media/#text-track-cue-order" id="playing-the-media-resource:text-track-cue-order">text track cue order</a> of the <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-24">text track cues</a> associated with these <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-9">tasks</a>.</p>

    <p>Finally, sort <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-10">tasks</a> in <var>events</var> that have
    the same time and same <a href="/breakup/specs/html-media/#text-track-cue-order" id="playing-the-media-resource:text-track-cue-order-2">text track cue order</a> by placing <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-11">tasks</a> that fire <code id="playing-the-media-resource:event-media-enter-3"><a href="/breakup/specs/html-media/#event-media-enter">enter</a></code> events before
    those that fire <code id="playing-the-media-resource:event-media-exit-2"><a href="/breakup/specs/html-media/#event-media-exit">exit</a></code> events.</p>

   </li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-14">Queue</a> each <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-12">task</a> in
   <var>events</var>, in list order.</p></li><li><p>Sort <var>affected tracks</var> in the same order as the <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-12">text tracks</a> appear in the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-73">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="playing-the-media-resource:list-of-text-tracks-5">list of text
   tracks</a>, and remove duplicates.</p>

   </li><li><p>For each <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-13">text track</a> in <var>affected tracks</var>, in the list
   order, <a href="/breakup/specs/browser-dom/#queue-a-task" id="playing-the-media-resource:queue-a-task-15">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-15">fire a simple event</a> named <code id="playing-the-media-resource:event-media-cuechange"><a href="/breakup/specs/html-media/#event-media-cuechange">cuechange</a></code> at the <code id="playing-the-media-resource:texttrack"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object, and, if the
   <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-14">text track</a> has a corresponding <code id="playing-the-media-resource:the-track-element"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element, to then <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="playing-the-media-resource:fire-a-simple-event-16">fire a
   simple event</a> named <code id="playing-the-media-resource:event-media-cuechange-2"><a href="/breakup/specs/html-media/#event-media-cuechange">cuechange</a></code> at the
   <code id="playing-the-media-resource:the-track-element-2"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element as well.</p></li><li><p>Set the <a href="/breakup/specs/html-media/#text-track-cue-active-flag" id="playing-the-media-resource:text-track-cue-active-flag-6">text track cue active flag</a> of all the <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-25">cues</a> in the <var>current cues</var>, and unset the <a href="/breakup/specs/html-media/#text-track-cue-active-flag" id="playing-the-media-resource:text-track-cue-active-flag-7">text track cue
   active flag</a> of all the <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-26">cues</a> in the <var>other
   cues</var>.</p></li><li><p>Run the <a href="/breakup/specs/html-media/#rules-for-updating-the-text-track-rendering" id="playing-the-media-resource:rules-for-updating-the-text-track-rendering">rules for updating the text track rendering</a> of each of the <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-15">text tracks</a> in <var>affected tracks</var> that are <a href="/breakup/specs/html-media/#text-track-showing" id="playing-the-media-resource:text-track-showing-3">showing</a>. For example, for <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-16">text tracks</a>
   based on WebVTT, the <a href="/breakup/specs/core-algorithms/#rules-for-updating-the-display-of-webvtt-text-tracks" id="playing-the-media-resource:rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating the display of WebVTT text tracks</a>. [[!WEBVTT]] </p></li></ol>

  <p>For the purposes of the algorithm above, a <a href="/breakup/specs/html-media/#text-track-cue" id="playing-the-media-resource:text-track-cue-27">text track cue</a> is considered to be part
  of a <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-17">text track</a> only if it is listed in the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="playing-the-media-resource:text-track-list-of-cues-4">text track list of cues</a>, not
  merely if it is associated with the <a href="/breakup/specs/html-media/#text-track" id="playing-the-media-resource:text-track-18">text track</a>.</p>

  <p class="note">If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-74">media element</a>'s <a id="playing-the-media-resource:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> stops being a
  <a href="/breakup/specs/browser-dom/#fully-active" id="playing-the-media-resource:fully-active-2">fully active</a> document, then the playback will <a href="/breakup/specs/html-media/#media-playback">stop</a>
  until the document is active again.</p>

  <p>When a <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-75">media element</a> is <a href="/breakup/specs/core-algorithms/#remove-an-element-from-a-document" id="playing-the-media-resource:remove-an-element-from-a-document">removed
  from a <code>Document</code></a>, the user agent must run the following steps:</p>

  <ol><li><p><a href="/breakup/specs/browser-dom/#await-a-stable-state" id="playing-the-media-resource:await-a-stable-state-2">Await a stable state</a>, allowing the <a href="/breakup/specs/browser-dom/#concept-task" id="playing-the-media-resource:concept-task-13">task</a> that removed the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-76">media element</a> from the
   <code id="playing-the-media-resource:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code> to continue. The <a href="/breakup/specs/browser-dom/#synchronous-section" id="playing-the-media-resource:synchronous-section">synchronous section</a> consists of all the
   remaining steps of this algorithm. (Steps in the <a href="/breakup/specs/browser-dom/#synchronous-section" id="playing-the-media-resource:synchronous-section-2">synchronous section</a> are marked with
   ⌛.)</p></li><li><p>⌛ If the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-77">media element</a> is <a href="/breakup/specs/core-algorithms/#in-a-document" id="playing-the-media-resource:in-a-document-2">in a <code>Document</code></a>,
   abort these steps.</p></li><li><p>⌛ Run the <a href="/breakup/specs/html-media/#internal-pause-steps" id="playing-the-media-resource:internal-pause-steps-2">internal pause steps</a> for the <a href="/breakup/specs/html-media/#media-element" id="playing-the-media-resource:media-element-78">media element</a>.</p>

  </li></ol></section>

  



  <section><h2>Seeking</h2>

  <dl class="domintro"><dt><var>media</var> . <code id="seeking:dom-media-seeking"><a href="/breakup/specs/html-media/#dom-media-seeking">seeking</a></code></dt><dd>

    <p>Returns true if the user agent is currently seeking.</p>

   </dd><dt><var>media</var> . <code id="seeking:dom-media-seekable"><a href="/breakup/specs/html-media/#dom-media-seekable">seekable</a></code></dt><dd>

    <p>Returns a <code id="seeking:timeranges"><a href="/breakup/specs/html-media/#timeranges">TimeRanges</a></code> object that represents the ranges of the <a href="/breakup/specs/html-media/#media-resource" id="seeking:media-resource">media
    resource</a> to which it is possible for the user agent to seek.</p>

   </dd><dt><var>media</var> . <code id="seeking:dom-media-fastseek"><a href="/breakup/specs/html-media/#dom-media-fastseek">fastSeek</a></code>( <var>time</var> )</dt><dd>

    <p>Seeks to near the given <var>time</var> as fast as possible, trading precision for
    speed. (To seek to a precise time, use the <code id="seeking:dom-media-currenttime"><a href="/breakup/specs/html-media/#dom-media-currenttime">currentTime</a></code> attribute.)</p>

    <p>This does nothing if the media resource has not been loaded.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-media-seeking"><code>seeking</code></dfn> attribute must initially have the
  value false.</p>

  <p>The <dfn id="dom-media-fastseek"><code>fastSeek()</code></dfn> method must <a href="/breakup/specs/html-media/#dom-media-seek" id="seeking:dom-media-seek">seek</a> to the time given by the method's argument, with the
  <i>approximate-for-speed</i> flag set.</p>

  <p>When the user agent is required to <dfn id="dom-media-seek">seek</dfn> to a particular <var>new playback position</var> in the <a href="/breakup/specs/html-media/#media-resource" id="seeking:media-resource-2">media resource</a>, optionally with the
  <i>approximate-for-speed</i> flag set, it means that the user agent must run the following steps.
  This algorithm interacts closely with the <a href="/breakup/specs/browser-dom/#event-loop" id="seeking:event-loop">event loop</a> mechanism; in particular, it has
  a <a href="/breakup/specs/browser-dom/#synchronous-section" id="seeking:synchronous-section">synchronous section</a> (which is triggered as part of the <a href="/breakup/specs/browser-dom/#event-loop" id="seeking:event-loop-2">event loop</a>
  algorithm). Steps in that section are marked with ⌛.</p>

  <ol><li><p>Set the <a href="/breakup/specs/html-media/#media-element" id="seeking:media-element">media element</a>'s <a href="/breakup/specs/html-media/#show-poster-flag" id="seeking:show-poster-flag">show poster flag</a> to false.</p></li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="seeking:media-element-2">media element</a>'s <code id="seeking:dom-media-readystate"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code>
   is <code id="seeking:dom-media-have_nothing"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>, abort these steps.</p></li><li><p>If the element's <code id="seeking:dom-media-seeking-2"><a href="/breakup/specs/html-media/#dom-media-seeking">seeking</a></code> IDL attribute is true,
   then another instance of this algorithm is already running. Abort that other instance of the
   algorithm without waiting for the step that it is running to complete.</p></li><li><p>Set the <code id="seeking:dom-media-seeking-3"><a href="/breakup/specs/html-media/#dom-media-seeking">seeking</a></code> IDL attribute to true.</p></li><li><p>If the seek was in response to a DOM method call or setting of an IDL attribute, then
   continue the script. The remainder of these steps must be run <a href="/breakup/specs/core-algorithms/#in-parallel" id="seeking:in-parallel">in parallel</a>. With the exception
   of the steps marked with ⌛, they could be aborted at any time by another instance of this
   algorithm being invoked.</p></li><li><p>If the <var>new playback position</var> is later than the end of the <a href="/breakup/specs/html-media/#media-resource" id="seeking:media-resource-3">media
   resource</a>, then let it be the end of the <a href="/breakup/specs/html-media/#media-resource" id="seeking:media-resource-4">media resource</a> instead.</p></li><li><p>If the <var>new playback position</var> is less than the <a href="/breakup/specs/html-media/#earliest-possible-position" id="seeking:earliest-possible-position">earliest possible
   position</a>, let it be that position instead.</p></li><li><p>If the (possibly now changed) <var>new playback position</var> is not in one of
   the ranges given in the <code id="seeking:dom-media-seekable-2"><a href="/breakup/specs/html-media/#dom-media-seekable">seekable</a></code> attribute, then let it
   be the position in one of the ranges given in the <code id="seeking:dom-media-seekable-3"><a href="/breakup/specs/html-media/#dom-media-seekable">seekable</a></code> attribute that is the nearest to the <var>new
   playback position</var>. If two positions both satisfy that constraint (i.e. the <var>new playback position</var> is exactly in the middle between two ranges in the <code id="seeking:dom-media-seekable-4"><a href="/breakup/specs/html-media/#dom-media-seekable">seekable</a></code> attribute) then use the position that is closest to
   the <a href="/breakup/specs/html-media/#current-playback-position" id="seeking:current-playback-position">current playback position</a>. If there are no ranges given in the <code id="seeking:dom-media-seekable-5"><a href="/breakup/specs/html-media/#dom-media-seekable">seekable</a></code> attribute then set the <code id="seeking:dom-media-seeking-4"><a href="/breakup/specs/html-media/#dom-media-seeking">seeking</a></code> IDL attribute to false and abort these steps.</p></li><li>

    <p>If the <i>approximate-for-speed</i> flag is set, adjust the <var>new playback
    position</var> to a value that will allow for playback to resume promptly. If <var>new
    playback position</var> before this step is before <a href="/breakup/specs/html-media/#current-playback-position" id="seeking:current-playback-position-2">current playback position</a>, then
    the adjusted <var>new playback position</var> must also be before the <a href="/breakup/specs/html-media/#current-playback-position" id="seeking:current-playback-position-3">current
    playback position</a>. Similarly, if the <var>new playback position</var> before
    this step is after <a href="/breakup/specs/html-media/#current-playback-position" id="seeking:current-playback-position-4">current playback position</a>, then the adjusted <var>new
    playback position</var> must also be after the <a href="/breakup/specs/html-media/#current-playback-position" id="seeking:current-playback-position-5">current playback position</a>.</p>

    <p class="example">For example, the user agent could snap to a nearby key frame, so that it
    doesn't have to spend time decoding then discarding intermediate frames before resuming
    playback.</p>

    </li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="seeking:queue-a-task">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="seeking:fire-a-simple-event">fire a simple event</a> named <code id="seeking:event-media-seeking"><a href="/breakup/specs/html-media/#event-media-seeking">seeking</a></code> at the element.</p></li><li>

    <p>Set the <a href="/breakup/specs/html-media/#current-playback-position" id="seeking:current-playback-position-6">current playback position</a> to the <var>new playback
    position</var>.</p>

    <p class="note">If the <a href="/breakup/specs/html-media/#media-element" id="seeking:media-element-3">media element</a> was <a href="/breakup/specs/html-media/#potentially-playing" id="seeking:potentially-playing">potentially playing</a>
    immediately before it started seeking, but seeking caused its <code id="seeking:dom-media-readystate-2"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute to change to a value lower than <code id="seeking:dom-media-have_future_data"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code>, then a <code id="seeking:event-media-waiting"><a href="/breakup/specs/html-media/#event-media-waiting">waiting</a></code> event <a href="/breakup/specs/html-media/#fire-waiting-when-waiting">will be
    fired</a> at the element.</p> 
    

    <p class="note">This step sets the <a href="/breakup/specs/html-media/#current-playback-position" id="seeking:current-playback-position-7">current playback position</a>, and thus can
    immediately trigger other conditions, such as the rules regarding when playback "<a href="/breakup/specs/html-media/#reaches-the-end">reaches the end of the media resource</a>" (part of the logic that
    handles looping), even before the user agent is actually able to render the media data for that
    position (as determined in the next step).</p>

    <p class="note">The <code id="seeking:dom-media-currenttime-2"><a href="/breakup/specs/html-media/#dom-media-currenttime">currentTime</a></code> attribute returns
    the <a href="/breakup/specs/html-media/#official-playback-position" id="seeking:official-playback-position">official playback position</a>, not the <a href="/breakup/specs/html-media/#current-playback-position" id="seeking:current-playback-position-8">current playback position</a>, and
    therefore gets updated before script execution, separate from this algorithm.</p>

   </li><li><p>Wait until the user agent has established whether or not the <a href="/breakup/specs/html-media/#media-data" id="seeking:media-data">media data</a> for
   the <var>new playback position</var> is available, and, if it is, until it has decoded
   enough data to play back that position.</p>
   
   </li><li><p><a href="/breakup/specs/browser-dom/#await-a-stable-state" id="seeking:await-a-stable-state">Await a stable state</a>. The <a href="/breakup/specs/browser-dom/#synchronous-section" id="seeking:synchronous-section-2">synchronous section</a> consists of all
   the remaining steps of this algorithm. (Steps in the <a href="/breakup/specs/browser-dom/#synchronous-section" id="seeking:synchronous-section-3">synchronous section</a> are marked
   with ⌛.)</p></li><li><p>⌛ Set the <code id="seeking:dom-media-seeking-5"><a href="/breakup/specs/html-media/#dom-media-seeking">seeking</a></code> IDL attribute to
   false.</p></li><li><p>⌛ Run the <a href="/breakup/specs/html-media/#time-marches-on" id="seeking:time-marches-on">time marches on</a> steps.</p></li><li id="seekUpdate"><p>⌛ <a href="/breakup/specs/browser-dom/#queue-a-task" id="seeking:queue-a-task-2">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="seeking:fire-a-simple-event-2">fire a simple event</a>
   named <code id="seeking:event-media-timeupdate"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> at the element.</p></li><li><p>⌛ <a href="/breakup/specs/browser-dom/#queue-a-task" id="seeking:queue-a-task-3">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="seeking:fire-a-simple-event-3">fire a simple event</a> named <code id="seeking:event-media-seeked"><a href="/breakup/specs/html-media/#event-media-seeked">seeked</a></code> at the element.</p></li></ol>

  <hr>

  <p>The <dfn id="dom-media-seekable"><code>seekable</code></dfn> attribute must return a new
  static <a href="/breakup/specs/html-media/#normalised-timeranges-object" id="seeking:normalised-timeranges-object">normalised <code>TimeRanges</code> object</a> that represents the ranges of the
  <a href="/breakup/specs/html-media/#media-resource" id="seeking:media-resource-5">media resource</a>, if any, that the user agent is able to seek to, at the time the
  attribute is evaluated.</p>

  <p class="note">If the user agent can seek to anywhere in the <a href="/breakup/specs/html-media/#media-resource" id="seeking:media-resource-6">media resource</a>, e.g.
  because it is a simple movie file and the user agent and the server support HTTP Range requests,
  then the attribute would return an object with one range, whose start is the time of the first
  frame (the <a href="/breakup/specs/html-media/#earliest-possible-position" id="seeking:earliest-possible-position-2">earliest possible position</a>, typically zero), and whose end is the same as
  the time of the first frame plus the <code id="seeking:dom-media-duration"><a href="/breakup/specs/html-media/#dom-media-duration">duration</a></code> attribute's
  value (which would equal the time of the last frame, and might be positive Infinity).</p>

  <p class="note">The range might be continuously changing, e.g. if the user agent is buffering a
  sliding window on an infinite stream. This is the behaviour seen with DVRs viewing live TV, for
  instance.</p>

  <p>User agents should adopt adopt a very liberal and optimistic view of what is seekable. User
  agents should also buffer recent content where possible to enable seeking to be fast.</p>

  <p class="example">For instance, consider a large video file served on an HTTP server without
  support for HTTP Range requests. A browser <em>could</em> implement this by only buffering the
  current frame and data obtained for subsequent frames, never allow seeking, except for seeking to
  the very start by restarting the playback. However, this would be a poor implementation. A high
  quality implementation would buffer the last few minutes of content (or more, if sufficient
  storage space is available), allowing the user to jump back and rewatch something surprising
  without any latency, and would in addition allow arbitrary seeking by reloading the file from the
  start if necessary, which would be slower but still more convenient than having to literally
  restart the video and watch it all the way through just to get to an earlier unbuffered spot.</p>

  <p><a href="/breakup/specs/html-media/#media-resource" id="seeking:media-resource-7">Media resources</a> might be internally scripted or
  interactive. Thus, a <a href="/breakup/specs/html-media/#media-element" id="seeking:media-element-4">media element</a> could play in a non-linear fashion. If this
  happens, the user agent must act as if the algorithm for <a href="/breakup/specs/html-media/#dom-media-seek" id="seeking:dom-media-seek-2">seeking</a> was used whenever the <a href="/breakup/specs/html-media/#current-playback-position" id="seeking:current-playback-position-9">current playback position</a>
  changes in a discontinuous fashion (so that the relevant events fire). If the <a href="/breakup/specs/html-media/#media-element" id="seeking:media-element-5">media
  element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="seeking:current-media-controller">current media controller</a>, then the user agent must <a href="/breakup/specs/html-media/#seek-the-media-controller" id="seeking:seek-the-media-controller">seek
  the media controller</a> appropriately instead.</p></section>

  


  <section><h2>Media resources with multiple media tracks</h2>

  <p>A <a href="/breakup/specs/html-media/#media-resource" id="media-resources-with-multiple-media-tracks:media-resource">media resource</a> can have multiple embedded audio and video tracks. For example,
  in addition to the primary video and audio tracks, a <a href="/breakup/specs/html-media/#media-resource" id="media-resources-with-multiple-media-tracks:media-resource-2">media resource</a> could have
  foreign-language dubbed dialogues, director's commentaries, audio descriptions, alternative
  angles, or sign-language overlays.</p>

  <dl class="domintro"><dt><var>media</var> . <code id="media-resources-with-multiple-media-tracks:dom-media-audiotracks"><a href="/breakup/specs/html-media/#dom-media-audiotracks">audioTracks</a></code></dt><dd>

    <p>Returns an <code id="media-resources-with-multiple-media-tracks:audiotracklist"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> object representing the audio tracks available in the
    <a href="/breakup/specs/html-media/#media-resource" id="media-resources-with-multiple-media-tracks:media-resource-3">media resource</a>.</p>

   </dd><dt><var>media</var> . <code id="media-resources-with-multiple-media-tracks:dom-media-videotracks"><a href="/breakup/specs/html-media/#dom-media-videotracks">videoTracks</a></code></dt><dd>

    <p>Returns a <code id="media-resources-with-multiple-media-tracks:videotracklist"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object representing the video tracks available in the
    <a href="/breakup/specs/html-media/#media-resource" id="media-resources-with-multiple-media-tracks:media-resource-4">media resource</a>.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-media-audiotracks"><code>audioTracks</code></dfn> attribute of a
  <a href="/breakup/specs/html-media/#media-element" id="media-resources-with-multiple-media-tracks:media-element">media element</a> must return a <a href="/breakup/specs/core-algorithms/#live" id="media-resources-with-multiple-media-tracks:live">live</a> <code id="media-resources-with-multiple-media-tracks:audiotracklist-2"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> object
  representing the audio tracks available in the <a href="/breakup/specs/html-media/#media-element" id="media-resources-with-multiple-media-tracks:media-element-2">media element</a>'s <a href="/breakup/specs/html-media/#media-resource" id="media-resources-with-multiple-media-tracks:media-resource-5">media
  resource</a>.</p>

  <p>The <dfn id="dom-media-videotracks"><code>videoTracks</code></dfn> attribute of a
  <a href="/breakup/specs/html-media/#media-element" id="media-resources-with-multiple-media-tracks:media-element-3">media element</a> must return a <a href="/breakup/specs/core-algorithms/#live" id="media-resources-with-multiple-media-tracks:live-2">live</a> <code id="media-resources-with-multiple-media-tracks:videotracklist-2"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object
  representing the video tracks available in the <a href="/breakup/specs/html-media/#media-element" id="media-resources-with-multiple-media-tracks:media-element-4">media element</a>'s <a href="/breakup/specs/html-media/#media-resource" id="media-resources-with-multiple-media-tracks:media-resource-6">media
  resource</a>.</p>

  <p class="note">There are only ever one <code id="media-resources-with-multiple-media-tracks:audiotracklist-3"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> object and one
  <code id="media-resources-with-multiple-media-tracks:videotracklist-3"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object per <a href="/breakup/specs/html-media/#media-element" id="media-resources-with-multiple-media-tracks:media-element-5">media element</a>, even if another <a href="/breakup/specs/html-media/#media-resource" id="media-resources-with-multiple-media-tracks:media-resource-7">media
  resource</a> is loaded into the element: the objects are reused. (The <code id="media-resources-with-multiple-media-tracks:audiotrack"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code>
  and <code id="media-resources-with-multiple-media-tracks:videotrack"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> objects are not, though.)</p>

  

  <div class="example">

   <p>In this example, a script defines a function that takes a URL to a video and a reference to an
   element where the video is to be placed. That function then tries to load the video, and, once it
   is loaded, checks to see if there is a sign-language track available. If there is, it also
   displays that track. Both tracks are just placed in the given container; it's assumed that styles
   have been applied to make this work in a pretty way!</p>

   <pre>&lt;script&gt;
 function loadVideo(url, container) {
   var controller = new MediaController();
   var video = document.createElement('video');
   video.src = url;
   video.autoplay = true;
   video.controls = true;
   video.controller = controller;
   container.appendChild(video);
   video.onloadedmetadata = function (event) {
     for (var i = 0; i &lt; video.videoTracks.length; i += 1) {
       if (video.videoTracks[i].kind == 'sign') {
         var sign = document.createElement('video');
         sign.src = url + '#track=' + video.videoTracks[i].id; 
         sign.autoplay = true;
         sign.controller = controller;
         container.appendChild(sign);
         return;
       }
     }
   };
 }
&lt;/script&gt;</pre>

  </div>


  <section><h2><code id="audiotracklist-and-videotracklist-objects:audiotracklist"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> and <code id="audiotracklist-and-videotracklist-objects:videotracklist"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> objects</h2>

  <p>The <code id="audiotracklist-and-videotracklist-objects:audiotracklist-2"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> and <code id="audiotracklist-and-videotracklist-objects:videotracklist-2"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> interfaces are used by
  attributes defined in the previous section.</p>

  <pre class="idl">interface <dfn id="audiotracklist">AudioTrackList</dfn> : <a href="/breakup/specs/core-algorithms/#eventtarget" id="audiotracklist-and-videotracklist-objects:eventtarget">EventTarget</a> {
  readonly attribute unsigned long <a href="/breakup/specs/html-media/#dom-audiotracklist-length" id="audiotracklist-and-videotracklist-objects:dom-audiotracklist-length">length</a>;
  getter <a href="/breakup/specs/html-media/#audiotrack" id="audiotracklist-and-videotracklist-objects:audiotrack">AudioTrack</a> (unsigned long index);
  <a href="/breakup/specs/html-media/#audiotrack" id="audiotracklist-and-videotracklist-objects:audiotrack-2">AudioTrack</a>? <a href="/breakup/specs/html-media/#dom-audiotracklist-gettrackbyid" id="audiotracklist-and-videotracklist-objects:dom-audiotracklist-gettrackbyid">getTrackById</a>(DOMString id);

  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="audiotracklist-and-videotracklist-objects:eventhandler">EventHandler</a> <a href="/breakup/specs/html-media/#handler-tracklist-onchange" id="audiotracklist-and-videotracklist-objects:handler-tracklist-onchange">onchange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="audiotracklist-and-videotracklist-objects:eventhandler-2">EventHandler</a> <a href="/breakup/specs/html-media/#handler-tracklist-onaddtrack" id="audiotracklist-and-videotracklist-objects:handler-tracklist-onaddtrack">onaddtrack</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="audiotracklist-and-videotracklist-objects:eventhandler-3">EventHandler</a> <a href="/breakup/specs/html-media/#handler-tracklist-onremovetrack" id="audiotracklist-and-videotracklist-objects:handler-tracklist-onremovetrack">onremovetrack</a>;
};

interface <dfn id="audiotrack">AudioTrack</dfn> {
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-audiotrack-id" id="audiotracklist-and-videotracklist-objects:dom-audiotrack-id">id</a>;
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-audiotrack-kind" id="audiotracklist-and-videotracklist-objects:dom-audiotrack-kind">kind</a>;
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-audiotrack-label" id="audiotracklist-and-videotracklist-objects:dom-audiotrack-label">label</a>;
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-audiotrack-language" id="audiotracklist-and-videotracklist-objects:dom-audiotrack-language">language</a>;
  attribute boolean <a href="/breakup/specs/html-media/#dom-audiotrack-enabled" id="audiotracklist-and-videotracklist-objects:dom-audiotrack-enabled">enabled</a>;
};

interface <dfn id="videotracklist">VideoTrackList</dfn> : <a href="/breakup/specs/core-algorithms/#eventtarget" id="audiotracklist-and-videotracklist-objects:eventtarget-2">EventTarget</a> {
  readonly attribute unsigned long <a href="/breakup/specs/html-media/#dom-videotracklist-length" id="audiotracklist-and-videotracklist-objects:dom-videotracklist-length">length</a>;
  getter <a href="/breakup/specs/html-media/#videotrack" id="audiotracklist-and-videotracklist-objects:videotrack">VideoTrack</a> (unsigned long index);
  <a href="/breakup/specs/html-media/#videotrack" id="audiotracklist-and-videotracklist-objects:videotrack-2">VideoTrack</a>? <a href="/breakup/specs/html-media/#dom-videotracklist-gettrackbyid" id="audiotracklist-and-videotracklist-objects:dom-videotracklist-gettrackbyid">getTrackById</a>(DOMString id);
  readonly attribute long <a href="/breakup/specs/html-media/#dom-videotracklist-selectedindex" id="audiotracklist-and-videotracklist-objects:dom-videotracklist-selectedindex">selectedIndex</a>;

  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="audiotracklist-and-videotracklist-objects:eventhandler-4">EventHandler</a> <a href="/breakup/specs/html-media/#handler-tracklist-onchange" id="audiotracklist-and-videotracklist-objects:handler-tracklist-onchange-2">onchange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="audiotracklist-and-videotracklist-objects:eventhandler-5">EventHandler</a> <a href="/breakup/specs/html-media/#handler-tracklist-onaddtrack" id="audiotracklist-and-videotracklist-objects:handler-tracklist-onaddtrack-2">onaddtrack</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="audiotracklist-and-videotracklist-objects:eventhandler-6">EventHandler</a> <a href="/breakup/specs/html-media/#handler-tracklist-onremovetrack" id="audiotracklist-and-videotracklist-objects:handler-tracklist-onremovetrack-2">onremovetrack</a>;
};

interface <dfn id="videotrack">VideoTrack</dfn> {
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-videotrack-id" id="audiotracklist-and-videotracklist-objects:dom-videotrack-id">id</a>;
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-videotrack-kind" id="audiotracklist-and-videotracklist-objects:dom-videotrack-kind">kind</a>;
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-videotrack-label" id="audiotracklist-and-videotracklist-objects:dom-videotrack-label">label</a>;
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-videotrack-language" id="audiotracklist-and-videotracklist-objects:dom-videotrack-language">language</a>;
  attribute boolean <a href="/breakup/specs/html-media/#dom-videotrack-selected" id="audiotracklist-and-videotracklist-objects:dom-videotrack-selected">selected</a>;
};</pre>

  <dl class="domintro"><dt><var>media</var> . <code id="audiotracklist-and-videotracklist-objects:dom-media-audiotracks"><a href="/breakup/specs/html-media/#dom-media-audiotracks">audioTracks</a></code> . <code id="audiotracklist-and-videotracklist-objects:dom-audiotracklist-length-2"><a href="/breakup/specs/html-media/#dom-audiotracklist-length">length</a></code></dt><dt><var>media</var> . <code id="audiotracklist-and-videotracklist-objects:dom-media-videotracks"><a href="/breakup/specs/html-media/#dom-media-videotracks">videoTracks</a></code> . <code id="audiotracklist-and-videotracklist-objects:dom-videotracklist-length-2"><a href="/breakup/specs/html-media/#dom-videotracklist-length">length</a></code></dt><dd>

    <p>Returns the number of tracks in the list.</p>

   </dd><dt><var>audioTrack</var> = <var>media</var> . <code id="audiotracklist-and-videotracklist-objects:dom-media-audiotracks-2"><a href="/breakup/specs/html-media/#dom-media-audiotracks">audioTracks</a></code>[<var>index</var>]</dt><dt><var>videoTrack</var> = <var>media</var> . <code id="audiotracklist-and-videotracklist-objects:dom-media-videotracks-2"><a href="/breakup/specs/html-media/#dom-media-videotracks">videoTracks</a></code>[<var>index</var>]</dt><dd>

    <p>Returns the specified <code id="audiotracklist-and-videotracklist-objects:audiotrack-3"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> or <code id="audiotracklist-and-videotracklist-objects:videotrack-3"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> object.</p>

   </dd><dt><var>audioTrack</var> = <var>media</var> . <code id="audiotracklist-and-videotracklist-objects:dom-media-audiotracks-3"><a href="/breakup/specs/html-media/#dom-media-audiotracks">audioTracks</a></code> . <code id="audiotracklist-and-videotracklist-objects:dom-audiotracklist-gettrackbyid-2"><a href="/breakup/specs/html-media/#dom-audiotracklist-gettrackbyid">getTrackById</a></code>( <var>id</var> )</dt><dt><var>videoTrack</var> = <var>media</var> . <code id="audiotracklist-and-videotracklist-objects:dom-media-videotracks-3"><a href="/breakup/specs/html-media/#dom-media-videotracks">videoTracks</a></code> . <code id="audiotracklist-and-videotracklist-objects:dom-videotracklist-gettrackbyid-2"><a href="/breakup/specs/html-media/#dom-videotracklist-gettrackbyid">getTrackById</a></code>( <var>id</var> )</dt><dd>

    <p>Returns the <code id="audiotracklist-and-videotracklist-objects:audiotrack-4"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> or <code id="audiotracklist-and-videotracklist-objects:videotrack-4"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> object with the given identifier, or null if no track has that identifier.</p>

   </dd><dt><var>audioTrack</var> . <code id="audiotracklist-and-videotracklist-objects:dom-audiotrack-id-2"><a href="/breakup/specs/html-media/#dom-audiotrack-id">id</a></code></dt><dt><var>videoTrack</var> . <code id="audiotracklist-and-videotracklist-objects:dom-videotrack-id-2"><a href="/breakup/specs/html-media/#dom-videotrack-id">id</a></code></dt><dd>

    <p>Returns the ID of the given track. This is the ID that can be used with a fragment identifier
    if the format supports the <cite>Media Fragments URI</cite> syntax, and that can be used with
    the <code>getTrackById()</code> method. [[!MEDIAFRAG]]</p>

   </dd><dt><var>audioTrack</var> . <code id="audiotracklist-and-videotracklist-objects:dom-audiotrack-kind-2"><a href="/breakup/specs/html-media/#dom-audiotrack-kind">kind</a></code></dt><dt><var>videoTrack</var> . <code id="audiotracklist-and-videotracklist-objects:dom-videotrack-kind-2"><a href="/breakup/specs/html-media/#dom-videotrack-kind">kind</a></code></dt><dd>

    <p>Returns the category the given track falls into. The <a href="/breakup/specs/html-media/#dom-TrackList-getKind-categories">possible track categories</a> are given below.</p>

   </dd><dt><var>audioTrack</var> . <code id="audiotracklist-and-videotracklist-objects:dom-audiotrack-label-2"><a href="/breakup/specs/html-media/#dom-audiotrack-label">label</a></code></dt><dt><var>videoTrack</var> . <code id="audiotracklist-and-videotracklist-objects:dom-videotrack-label-2"><a href="/breakup/specs/html-media/#dom-videotrack-label">label</a></code></dt><dd>

    <p>Returns the label of the given track, if known, or the empty string otherwise.</p>

   </dd><dt><var>audioTrack</var> . <code id="audiotracklist-and-videotracklist-objects:dom-audiotrack-language-2"><a href="/breakup/specs/html-media/#dom-audiotrack-language">language</a></code></dt><dt><var>videoTrack</var> . <code id="audiotracklist-and-videotracklist-objects:dom-videotrack-language-2"><a href="/breakup/specs/html-media/#dom-videotrack-language">language</a></code></dt><dd>

    <p>Returns the language of the given track, if known, or the empty string otherwise.</p>

   </dd><dt><var>audioTrack</var> . <code id="audiotracklist-and-videotracklist-objects:dom-audiotrack-enabled-2"><a href="/breakup/specs/html-media/#dom-audiotrack-enabled">enabled</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns true if the given track is active, and false otherwise.</p>

    <p>Can be set, to change whether the track is enabled or not. If multiple audio tracks are
    enabled simultaneously, they are mixed.</p>

   </dd><dt><var>media</var> . <code id="audiotracklist-and-videotracklist-objects:dom-media-videotracks-4"><a href="/breakup/specs/html-media/#dom-media-videotracks">videoTracks</a></code> . <code id="audiotracklist-and-videotracklist-objects:dom-videotracklist-selectedindex-2"><a href="/breakup/specs/html-media/#dom-videotracklist-selectedindex">selectedIndex</a></code></dt><dd>

    <p>Returns the index of the currently selected track, if any, or −1 otherwise.</p>

   </dd><dt><var>videoTrack</var> . <code id="audiotracklist-and-videotracklist-objects:dom-videotrack-selected-2"><a href="/breakup/specs/html-media/#dom-videotrack-selected">selected</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns true if the given track is active, and false otherwise.</p>

    <p>Can be set, to change whether the track is selected or not. Either zero or one video track is
    selected; selecting a new track while a previous one is selected will unselect the previous
    one.</p>

   </dd></dl>

  

  <p>An <code id="audiotracklist-and-videotracklist-objects:audiotracklist-3"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> object represents a dynamic list of zero or more audio tracks,
  of which zero or more can be enabled at a time. Each audio track is represented by an
  <code id="audiotracklist-and-videotracklist-objects:audiotrack-5"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> object.</p>

  <p>A <code id="audiotracklist-and-videotracklist-objects:videotracklist-3"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object represents a dynamic list of zero or more video tracks, of
  which zero or one can be selected at a time. Each video track is represented by a
  <code id="audiotracklist-and-videotracklist-objects:videotrack-5"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> object.</p>

  <p>Tracks in <code id="audiotracklist-and-videotracklist-objects:audiotracklist-4"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> and <code id="audiotracklist-and-videotracklist-objects:videotracklist-4"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> objects must be
  consistently ordered. If the <a href="/breakup/specs/html-media/#media-resource" id="audiotracklist-and-videotracklist-objects:media-resource">media resource</a> is in a format that defines an order,
  then that order must be used; otherwise, the order must be the relative order in which the tracks
  are declared in the <a href="/breakup/specs/html-media/#media-resource" id="audiotracklist-and-videotracklist-objects:media-resource-2">media resource</a>. The order used is called the <i>natural order</i>
  of the list.</p>

  <p class="note">Each track in one of these objects thus has an index; the first has the index
  0, and each subsequent track is numbered one higher than the previous one. If a <a href="/breakup/specs/html-media/#media-resource" id="audiotracklist-and-videotracklist-objects:media-resource-3">media
  resource</a> dynamically adds or removes audio or video tracks, then the indices of the tracks
  will change dynamically. If the <a href="/breakup/specs/html-media/#media-resource" id="audiotracklist-and-videotracklist-objects:media-resource-4">media resource</a> changes entirely, then all the
  previous tracks will be removed and replaced with new tracks.</p>

  <p>The <dfn id="dom-audiotracklist-length"><code>AudioTrackList.length</code></dfn> and <dfn id="dom-videotracklist-length"><code>VideoTrackList.length</code></dfn> attributes must return
  the number of tracks represented by their objects at the time of getting.</p>

  <p>The <a href="/breakup/specs/core-algorithms/#supported-property-indices" id="audiotracklist-and-videotracklist-objects:supported-property-indices">supported property indices</a> of <code id="audiotracklist-and-videotracklist-objects:audiotracklist-5"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> and
  <code id="audiotracklist-and-videotracklist-objects:videotracklist-5"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> objects at any instant are the numbers from zero to the number of
  tracks represented by the respective object minus one, if any tracks are represented. If an
  <code id="audiotracklist-and-videotracklist-objects:audiotracklist-6"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> or <code id="audiotracklist-and-videotracklist-objects:videotracklist-6"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object represents no tracks, it has no
  <a href="/breakup/specs/core-algorithms/#supported-property-indices" id="audiotracklist-and-videotracklist-objects:supported-property-indices-2">supported property indices</a>.</p>

  <p>To <a href="/breakup/specs/core-algorithms/#determine-the-value-of-an-indexed-property" id="audiotracklist-and-videotracklist-objects:determine-the-value-of-an-indexed-property">determine the value of an indexed property</a> for a given index <var>index</var> in an <code id="audiotracklist-and-videotracklist-objects:audiotracklist-7"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> or <code id="audiotracklist-and-videotracklist-objects:videotracklist-7"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object <var>list</var>, the user agent must return the <code id="audiotracklist-and-videotracklist-objects:audiotrack-6"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> or
  <code id="audiotracklist-and-videotracklist-objects:videotrack-6"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> object that represents the <var>index</var>th track in <var>list</var>.</p>

  <p>The <dfn id="dom-audiotracklist-gettrackbyid"><code>AudioTrackList.getTrackById(<var>id</var>)</code></dfn> and <dfn id="dom-videotracklist-gettrackbyid"><code>VideoTrackList.getTrackById(<var>id</var>)</code></dfn> methods must return the first <code id="audiotracklist-and-videotracklist-objects:audiotrack-7"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> or
  <code id="audiotracklist-and-videotracklist-objects:videotrack-7"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> object (respectively) in the <code id="audiotracklist-and-videotracklist-objects:audiotracklist-8"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> or
  <code id="audiotracklist-and-videotracklist-objects:videotracklist-8"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object (respectively) whose identifier is equal to the value of the
  <var>id</var> argument (in the natural order of the list, as defined above). When no
  tracks match the given argument, the methods must return null.</p>

  <p>The <code id="audiotracklist-and-videotracklist-objects:audiotrack-8"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> and <code id="audiotracklist-and-videotracklist-objects:videotrack-8"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> objects represent specific tracks of a
  <a href="/breakup/specs/html-media/#media-resource" id="audiotracklist-and-videotracklist-objects:media-resource-5">media resource</a>. Each track can have an identifier, category, label, and language.
  These aspects of a track are permanent for the lifetime of the track; even if a track is removed
  from a <a href="/breakup/specs/html-media/#media-resource" id="audiotracklist-and-videotracklist-objects:media-resource-6">media resource</a>'s <code id="audiotracklist-and-videotracklist-objects:audiotracklist-9"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> or <code id="audiotracklist-and-videotracklist-objects:videotracklist-9"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code>
  objects, those aspects do not change.</p>

  <p>In addition, <code id="audiotracklist-and-videotracklist-objects:audiotrack-9"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> objects can each be enabled or disabled; this is the audio
  track's <i>enabled state</i>. When an <code id="audiotracklist-and-videotracklist-objects:audiotrack-10"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> is created, its <i>enabled state</i>
  must be set to false (disabled). The <a href="/breakup/specs/html-media/#concept-media-load-resource" id="audiotracklist-and-videotracklist-objects:concept-media-load-resource">resource fetch
  algorithm</a> can override this.</p>

  <p>Similarly, a single <code id="audiotracklist-and-videotracklist-objects:videotrack-9"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> object per <code id="audiotracklist-and-videotracklist-objects:videotracklist-10"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object can
  be selected, this is the video track's <i>selection state</i>. When a <code id="audiotracklist-and-videotracklist-objects:videotrack-10"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> is
  created, its <i>selection state</i> must be set to false (not selected). The <a href="/breakup/specs/html-media/#concept-media-load-resource" id="audiotracklist-and-videotracklist-objects:concept-media-load-resource-2">resource fetch algorithm</a> can override this.</p>

  <p>The <dfn id="dom-audiotrack-id"><code>AudioTrack.id</code></dfn> and <dfn id="dom-videotrack-id"><code>VideoTrack.id</code></dfn> attributes must return the identifier
  of the track, if it has one, or the empty string otherwise. If the <a href="/breakup/specs/html-media/#media-resource" id="audiotracklist-and-videotracklist-objects:media-resource-7">media resource</a> is
  in a format that supports the <cite>Media Fragments URI</cite> fragment identifier syntax, the
  identifier returned for a particular track must be the same identifier that would enable the track
  if used as the name of a track in the track dimension of such a fragment identifier. [[!MEDIAFRAG]] [[!INBAND]]</p>

  <p class="example">For example, in Ogg files, this would be the Name header field of the track. [[!OGGSKELETONHEADERS]]</p>

  <p>The <dfn id="dom-audiotrack-kind"><code>AudioTrack.kind</code></dfn> and <dfn id="dom-videotrack-kind"><code>VideoTrack.kind</code></dfn> attributes must return the category
  of the track, if it has one, or the empty string otherwise.</p>

  <p>The category of a track is the string given in the first column of the table below that is the
  most appropriate for the track based on the definitions in the table's second and third columns,
  as determined by the metadata included in the track in the <a href="/breakup/specs/html-media/#media-resource" id="audiotracklist-and-videotracklist-objects:media-resource-8">media resource</a>. The cell
  in the third column of a row says what the category given in the cell in the first column of that
  row applies to; a category is only appropriate for an audio track if it applies to audio tracks,
  and a category is only appropriate for video tracks if it applies to video tracks. Categories must
  only be returned for <code id="audiotracklist-and-videotracklist-objects:audiotrack-11"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> objects if they are appropriate for audio, and must
  only be returned for <code id="audiotracklist-and-videotracklist-objects:videotrack-11"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> objects if they are appropriate for video.</p>

  <p>For Ogg files, the Role header field of the track gives the relevant metadata. For DASH media
  resources, the <code>Role</code> element conveys the information. For WebM, only the
  <code>FlagDefault</code> element currently maps to a value. The <cite>Sourcing In-band
  Media Resource Tracks from Media Containers into HTML</cite> specification has further details.
  [[!OGGSKELETONHEADERS]] [[!DASH]] [[!WEBMCG]] [[!INBAND]]</p>

  

  <table id="dom-TrackList-getKind-categories"><caption>Return values for <code id="audiotracklist-and-videotracklist-objects:dom-audiotrack-kind-3"><a href="/breakup/specs/html-media/#dom-audiotrack-kind">AudioTrack.kind</a></code> and <code id="audiotracklist-and-videotracklist-objects:dom-videotrack-kind-3"><a href="/breakup/specs/html-media/#dom-videotrack-kind">VideoTrack.kind</a></code></caption><thead><tr><th>Category
     </th><th>Definition
     </th><th>Applies to...</th><th>Examples
   </th></tr></thead><tbody><tr><td>"<dfn id="value-track-kind-alternate"><code>alternative</code></dfn>"
     </td><td>A possible alternative to the main track, e.g. a different take of a song (audio), or a different angle (video).
     </td><td>Audio and video.
     </td><td>Ogg: "audio/alternate" or "video/alternate"; DASH: "alternate" without "main" and "commentary" roles, and, for audio, without the "dub" role (other roles ignored).

    </td></tr><tr><td>"<dfn id="value-track-kind-caption"><code>captions</code></dfn>"
     </td><td>A version of the main video track with captions burnt in. (For legacy content; new content would use text tracks.)
     </td><td>Video only.
     </td><td>DASH: "caption" and "main" roles together (other roles ignored).

    </td></tr><tr><td>"<dfn id="value-track-kind-descriptions"><code>descriptions</code></dfn>"
     </td><td>An audio description of a video track.
     </td><td>Audio only.
     </td><td>Ogg: "audio/audiodesc".

    </td></tr><tr><td>"<dfn id="value-track-kind-main"><code>main</code></dfn>"
     </td><td>The primary audio or video track.
     </td><td>Audio and video.
     </td><td>Ogg: "audio/main" or "video/main"; WebM: the "FlagDefault" element is set; DASH: "main" role without "caption", "subtitle", and "dub" roles (other roles ignored).

    </td></tr><tr><td>"<dfn id="value-track-kind-main-desc"><code>main-desc</code></dfn>"
     </td><td>The primary audio track, mixed with audio descriptions.
     </td><td>Audio only.
     </td><td>AC3 audio in MPEG-2 TS: bsmod=2 and full_svc=1. 

    </td></tr><tr><td>"<dfn id="value-track-kind-sign"><code>sign</code></dfn>"
     </td><td>A sign-language interpretation of an audio track.
     </td><td>Video only.
     </td><td>Ogg: "video/sign".

    </td></tr><tr><td>"<dfn id="value-track-kind-subtitle"><code>subtitles</code></dfn>"
     </td><td>A version of the main video track with subtitles burnt in. (For legacy content; new content would use text tracks.)
     </td><td>Video only.
     </td><td>DASH: "subtitle" and "main" roles together (other roles ignored).

    </td></tr><tr><td>"<dfn id="value-track-kind-translation"><code>translation</code></dfn>"
     </td><td>A translated version of the main audio track.
     </td><td>Audio only.
     </td><td>Ogg: "audio/dub". DASH: "dub" and "main" roles together (other roles ignored).

    </td></tr><tr><td>"<dfn id="value-track-kind-commentary"><code>commentary</code></dfn>"
     </td><td>Commentary on the primary audio or video track, e.g. a director's commentary.
     </td><td>Audio and video.
     </td><td>DASH: "commentary" role without "main" role (other roles ignored).

    </td></tr><tr><td>"<dfn id="value-track-kind-none"><code></code></dfn>" (empty string)
     </td><td>No explicit kind, or the kind given by the track's metadata is not recognised by the user agent.
     </td><td>Audio and video.
     </td><td>

  </td></tr></tbody></table>

  

  <p>The <dfn id="dom-audiotrack-label"><code>AudioTrack.label</code></dfn> and <dfn id="dom-videotrack-label"><code>VideoTrack.label</code></dfn> attributes must return the label
  of the track, if it has one, or the empty string otherwise. [[!INBAND]]</p>

  <p>The <dfn id="dom-audiotrack-language"><code>AudioTrack.language</code></dfn> and <dfn id="dom-videotrack-language"><code>VideoTrack.language</code></dfn> attributes must return the
  BCP 47 language tag of the language of the track, if it has one, or the empty string otherwise. If
  the user agent is not able to express that language as a BCP 47 language tag (for example because
  the language information in the <a href="/breakup/specs/html-media/#media-resource" id="audiotracklist-and-videotracklist-objects:media-resource-9">media resource</a>'s format is a free-form string without
  a defined interpretation), then the method must return the empty string, as if the track had no
  language. [[!INBAND]]</p>

  <p>The <dfn id="dom-audiotrack-enabled"><code>AudioTrack.enabled</code></dfn> attribute, on
  getting, must return true if the track is currently enabled, and false otherwise. On setting, it
  must enable the track if the new value is true, and disable it otherwise. (If the track is no
  longer in an <code id="audiotracklist-and-videotracklist-objects:audiotracklist-10"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> object, then the track being enabled or disabled has no
  effect beyond changing the value of the attribute on the <code id="audiotracklist-and-videotracklist-objects:audiotrack-12"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code> object.)</p>

  <p id="toggle-audio-track">Whenever an audio track in an <code id="audiotracklist-and-videotracklist-objects:audiotracklist-11"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> that was
  disabled is enabled, and whenever one that was enabled is disabled, the user agent must
  <a href="/breakup/specs/browser-dom/#queue-a-task" id="audiotracklist-and-videotracklist-objects:queue-a-task">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="audiotracklist-and-videotracklist-objects:fire-a-simple-event">fire a simple event</a> named <code id="audiotracklist-and-videotracklist-objects:event-media-change"><a href="/breakup/specs/html-media/#event-media-change">change</a></code> at the <code id="audiotracklist-and-videotracklist-objects:audiotracklist-12"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> object.</p>

  <p>An audio track that has no data for a particular position on the <a href="/breakup/specs/html-media/#media-timeline" id="audiotracklist-and-videotracklist-objects:media-timeline">media timeline</a>,
  or that does not exist at that position, must be interpreted as being silent at that point on the
  timeline.</p>

  <p>The <dfn id="dom-videotracklist-selectedindex"><code>VideoTrackList.selectedIndex</code></dfn> attribute
  must return the index of the currently selected track, if any. If the <code id="audiotracklist-and-videotracklist-objects:videotracklist-11"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code>
  object does not currently represent any tracks, or if none of the tracks are selected, it must
  instead return −1.</p>

  <p>The <dfn id="dom-videotrack-selected"><code>VideoTrack.selected</code></dfn> attribute, on
  getting, must return true if the track is currently selected, and false otherwise. On setting, it
  must select the track if the new value is true, and unselect it otherwise. If the track is in a
  <code id="audiotracklist-and-videotracklist-objects:videotracklist-12"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code>, then all the other <code id="audiotracklist-and-videotracklist-objects:videotrack-12"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> objects in that list must
  be unselected. (If the track is no longer in a <code id="audiotracklist-and-videotracklist-objects:videotracklist-13"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object, then the track
  being selected or unselected has no effect beyond changing the value of the attribute on the
  <code id="audiotracklist-and-videotracklist-objects:videotrack-13"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code> object.)</p>

  <p id="toggle-video-track">Whenever a track in a <code id="audiotracklist-and-videotracklist-objects:videotracklist-14"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> that was previously
  not selected is selected, and whenever the selected track in a <code id="audiotracklist-and-videotracklist-objects:videotracklist-15"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> is
  unselected without a new track being selected in its stead, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="audiotracklist-and-videotracklist-objects:queue-a-task-2">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="audiotracklist-and-videotracklist-objects:fire-a-simple-event-2">fire a simple
  event</a> named <code id="audiotracklist-and-videotracklist-objects:event-media-change-2"><a href="/breakup/specs/html-media/#event-media-change">change</a></code> at the
  <code id="audiotracklist-and-videotracklist-objects:videotracklist-16"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code> object. This <a href="/breakup/specs/browser-dom/#concept-task" id="audiotracklist-and-videotracklist-objects:concept-task">task</a> must be <a href="/breakup/specs/browser-dom/#queue-a-task" id="audiotracklist-and-videotracklist-objects:queue-a-task-3">queued</a> before the <a href="/breakup/specs/browser-dom/#concept-task" id="audiotracklist-and-videotracklist-objects:concept-task-2">task</a> that fires
  the <code id="audiotracklist-and-videotracklist-objects:event-media-resize"><a href="/breakup/specs/html-media/#event-media-resize">resize</a></code> event, if any.</p>

  <p>A video track that has no data for a particular position on the <a href="/breakup/specs/html-media/#media-timeline" id="audiotracklist-and-videotracklist-objects:media-timeline-2">media timeline</a>
  must be interpreted as being fully transparent black at that point on the timeline, with the same
  dimensions as the last frame before that position, or, if the position is before all the data for
  that track, the same dimensions as the first frame for that track. A track that does not exist at
  all at the current position must be treated as if it existed but had no data.</p>

  <p class="example">For instance, if a video has a track that is only introduced after one hour of
  playback, and the user selects that track then goes back to the start, then the user agent will
  act as if that track started at the start of the <a href="/breakup/specs/html-media/#media-resource" id="audiotracklist-and-videotracklist-objects:media-resource-10">media resource</a> but was simply
  transparent until one hour in.</p>

  <hr>

  <p>The following are the <a href="/breakup/specs/browser-dom/#event-handlers" id="audiotracklist-and-videotracklist-objects:event-handlers">event handlers</a> (and their corresponding <a href="/breakup/specs/browser-dom/#event-handler-event-type" id="audiotracklist-and-videotracklist-objects:event-handler-event-type">event handler event types</a>) that must be supported, as <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="audiotracklist-and-videotracklist-objects:event-handler-idl-attributes">event handler IDL attributes</a>,
  by all objects implementing the <code id="audiotracklist-and-videotracklist-objects:audiotracklist-13"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code> and <code id="audiotracklist-and-videotracklist-objects:videotracklist-17"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code>
  interfaces:</p>

  <table><thead><tr><th><a href="/breakup/specs/browser-dom/#event-handlers" id="audiotracklist-and-videotracklist-objects:event-handlers-2">Event handler</a> </th><th><a href="/breakup/specs/browser-dom/#event-handler-event-type" id="audiotracklist-and-videotracklist-objects:event-handler-event-type-2">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-tracklist-onchange"><code>onchange</code></dfn> </td><td> <code id="audiotracklist-and-videotracklist-objects:event-media-change-3"><a href="/breakup/specs/html-media/#event-media-change">change</a></code>
    </td></tr><tr><td><dfn id="handler-tracklist-onaddtrack"><code>onaddtrack</code></dfn> </td><td> <code id="audiotracklist-and-videotracklist-objects:event-media-addtrack"><a href="/breakup/specs/html-media/#event-media-addtrack">addtrack</a></code>
    </td></tr><tr><td><dfn id="handler-tracklist-onremovetrack"><code>onremovetrack</code></dfn> </td><td> <code id="audiotracklist-and-videotracklist-objects:event-media-removetrack"><a href="/breakup/specs/html-media/#event-media-removetrack">removetrack</a></code>
  </td></tr></tbody></table></section>

  

  


  <section><h2>Selecting specific audio and video tracks declaratively</h2>

  <p>The <code id="selecting-specific-audio-and-video-tracks-declaratively:dom-media-audiotracks"><a href="/breakup/specs/html-media/#dom-media-audiotracks">audioTracks</a></code> and <code id="selecting-specific-audio-and-video-tracks-declaratively:dom-media-videotracks"><a href="/breakup/specs/html-media/#dom-media-videotracks">videoTracks</a></code> attributes allow scripts to select which track
  should play, but it is also possible to select specific tracks declaratively, by specifying
  particular tracks in the fragment identifier of the <a href="/breakup/specs/core-algorithms/#url" id="selecting-specific-audio-and-video-tracks-declaratively:url">URL</a> of the <a href="/breakup/specs/html-media/#media-resource" id="selecting-specific-audio-and-video-tracks-declaratively:media-resource">media
  resource</a>. The format of the fragment identifier depends on the <a href="/breakup/specs/core-algorithms/#mime-type" id="selecting-specific-audio-and-video-tracks-declaratively:mime-type">MIME type</a> of
  the <a href="/breakup/specs/html-media/#media-resource" id="selecting-specific-audio-and-video-tracks-declaratively:media-resource-2">media resource</a>. [[!RFC2046]] [[!URL]]</p>

  <div class="example">

   <p>In this example, a video that uses a format that supports the <cite>Media Fragments URI</cite>
   fragment identifier syntax is embedded in such a way that the alternative angles labeled
   "Alternative" are enabled instead of the default video track. [[!MEDIAFRAG]]</p>

   <pre>&lt;video src="myvideo#track=Alternative"&gt;&lt;/video&gt;</pre>

  </div></section></section>


  <section><h2>Synchronising multiple media elements</h2>

  <section><h2>Introduction</h2>

  <p>Each <a href="/breakup/specs/html-media/#media-element" id="introduction-4:media-element">media element</a> can have a <code id="introduction-4:mediacontroller"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>. A
  <code id="introduction-4:mediacontroller-2"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is an object that coordinates the playback of multiple <a href="/breakup/specs/html-media/#media-element" id="introduction-4:media-element-2">media elements</a>, for instance so that a sign-language interpreter
  track can be overlaid on a video track, with the two being kept synchronised.</p>

  <p>By default, a <a href="/breakup/specs/html-media/#media-element" id="introduction-4:media-element-3">media element</a> has no <code id="introduction-4:mediacontroller-3"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>. An implicit
  <code id="introduction-4:mediacontroller-4"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> can be assigned using the <code id="introduction-4:attr-media-mediagroup"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> content attribute. An explicit
  <code id="introduction-4:mediacontroller-5"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> can be assigned directly using the <code id="introduction-4:dom-media-controller"><a href="/breakup/specs/html-media/#dom-media-controller">controller</a></code> IDL attribute.</p>

  <p><a href="/breakup/specs/html-media/#media-element" id="introduction-4:media-element-4">Media elements</a> with a <code id="introduction-4:mediacontroller-6"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> are said
  to be <i>slaved</i> to their controller. The <code id="introduction-4:mediacontroller-7"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> modifies the playback
  rate and the playback volume of each of the <a href="/breakup/specs/html-media/#media-element" id="introduction-4:media-element-5">media elements</a>
  slaved to it, and ensures that when any of its slaved <a href="/breakup/specs/html-media/#media-element" id="introduction-4:media-element-6">media
  elements</a> unexpectedly stall, the others are stopped at the same time.</p>

  <p>When a <a href="/breakup/specs/html-media/#media-element" id="introduction-4:media-element-7">media element</a> is slaved to a <code id="introduction-4:mediacontroller-8"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>, its playback
  rate is fixed to that of the other tracks in the same <code id="introduction-4:mediacontroller-9"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>, and any
  looping is disabled.</p></section>




  <section><h2>Media controllers</h2>

  <pre class="idl">enum <dfn id="mediacontrollerplaybackstate">MediaControllerPlaybackState</dfn> { "<a href="/breakup/specs/html-media/#dom-mediacontroller-waiting" id="media-controllers:dom-mediacontroller-waiting">waiting</a>", "<a href="/breakup/specs/html-media/#dom-mediacontroller-playing" id="media-controllers:dom-mediacontroller-playing">playing</a>", "<a href="/breakup/specs/html-media/#dom-mediacontroller-ended" id="media-controllers:dom-mediacontroller-ended">ended</a>" };
[<a href="/breakup/specs/html-media/#dom-mediacontroller" id="media-controllers:dom-mediacontroller">Constructor</a>]
interface <dfn id="mediacontroller">MediaController</dfn> : <a href="/breakup/specs/core-algorithms/#eventtarget" id="media-controllers:eventtarget">EventTarget</a> {
  readonly attribute unsigned short <a href="/breakup/specs/html-media/#dom-mediacontroller-readystate" id="media-controllers:dom-mediacontroller-readystate">readyState</a>; // uses <a href="/breakup/specs/html-media/#htmlmediaelement" id="media-controllers:htmlmediaelement">HTMLMediaElement</a>.<a href="/breakup/specs/html-media/#dom-media-readystate" id="media-controllers:dom-media-readystate">readyState</a>'s values

  readonly attribute <a href="/breakup/specs/html-media/#timeranges" id="media-controllers:timeranges">TimeRanges</a> <a href="/breakup/specs/html-media/#dom-mediacontroller-buffered" id="media-controllers:dom-mediacontroller-buffered">buffered</a>;
  readonly attribute <a href="/breakup/specs/html-media/#timeranges" id="media-controllers:timeranges-2">TimeRanges</a> <a href="/breakup/specs/html-media/#dom-mediacontroller-seekable" id="media-controllers:dom-mediacontroller-seekable">seekable</a>;
  readonly attribute unrestricted double <a href="/breakup/specs/html-media/#dom-mediacontroller-duration" id="media-controllers:dom-mediacontroller-duration">duration</a>;
  attribute double <a href="/breakup/specs/html-media/#dom-mediacontroller-currenttime" id="media-controllers:dom-mediacontroller-currenttime">currentTime</a>;

  readonly attribute boolean <a href="/breakup/specs/html-media/#dom-mediacontroller-paused" id="media-controllers:dom-mediacontroller-paused">paused</a>;
  readonly attribute <a href="/breakup/specs/html-media/#mediacontrollerplaybackstate" id="media-controllers:mediacontrollerplaybackstate">MediaControllerPlaybackState</a> <a href="/breakup/specs/html-media/#dom-mediacontroller-playbackstate" id="media-controllers:dom-mediacontroller-playbackstate">playbackState</a>;
  readonly attribute <a href="/breakup/specs/html-media/#timeranges" id="media-controllers:timeranges-3">TimeRanges</a> <a href="/breakup/specs/html-media/#dom-mediacontroller-played" id="media-controllers:dom-mediacontroller-played">played</a>;
  void <a href="/breakup/specs/html-media/#dom-mediacontroller-pause" id="media-controllers:dom-mediacontroller-pause">pause</a>();
  void <a href="/breakup/specs/html-media/#dom-mediacontroller-unpause" id="media-controllers:dom-mediacontroller-unpause">unpause</a>();
  void <a href="/breakup/specs/html-media/#dom-mediacontroller-play" id="media-controllers:dom-mediacontroller-play">play</a>(); // calls play() on all media elements as well

  attribute double <a href="/breakup/specs/html-media/#dom-mediacontroller-defaultplaybackrate" id="media-controllers:dom-mediacontroller-defaultplaybackrate">defaultPlaybackRate</a>;
  attribute double <a href="/breakup/specs/html-media/#dom-mediacontroller-playbackrate" id="media-controllers:dom-mediacontroller-playbackrate">playbackRate</a>;

  attribute double <a href="/breakup/specs/html-media/#dom-mediacontroller-volume" id="media-controllers:dom-mediacontroller-volume">volume</a>;
  attribute boolean <a href="/breakup/specs/html-media/#dom-mediacontroller-muted" id="media-controllers:dom-mediacontroller-muted">muted</a>;

  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-onemptied" id="media-controllers:handler-mediacontroller-onemptied">onemptied</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-2">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-onloadedmetadata" id="media-controllers:handler-mediacontroller-onloadedmetadata">onloadedmetadata</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-3">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-onloadeddata" id="media-controllers:handler-mediacontroller-onloadeddata">onloadeddata</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-4">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-oncanplay" id="media-controllers:handler-mediacontroller-oncanplay">oncanplay</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-5">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-oncanplaythrough" id="media-controllers:handler-mediacontroller-oncanplaythrough">oncanplaythrough</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-6">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-onplaying" id="media-controllers:handler-mediacontroller-onplaying">onplaying</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-7">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-onended" id="media-controllers:handler-mediacontroller-onended">onended</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-8">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-onwaiting" id="media-controllers:handler-mediacontroller-onwaiting">onwaiting</a>;

  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-9">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-ondurationchange" id="media-controllers:handler-mediacontroller-ondurationchange">ondurationchange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-10">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-ontimeupdate" id="media-controllers:handler-mediacontroller-ontimeupdate">ontimeupdate</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-11">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-onplay" id="media-controllers:handler-mediacontroller-onplay">onplay</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-12">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-onpause" id="media-controllers:handler-mediacontroller-onpause">onpause</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-13">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-onratechange" id="media-controllers:handler-mediacontroller-onratechange">onratechange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="media-controllers:eventhandler-14">EventHandler</a> <a href="/breakup/specs/html-media/#handler-mediacontroller-onvolumechange" id="media-controllers:handler-mediacontroller-onvolumechange">onvolumechange</a>;
};</pre>

  <dl class="domintro"><dt><var>controller</var> = new <code id="media-controllers:dom-mediacontroller-2"><a href="/breakup/specs/html-media/#dom-mediacontroller">MediaController</a></code>()</dt><dd>

    <p>Returns a new <code id="media-controllers:mediacontroller"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object.</p>

   </dd><dt><var>media</var> . <code id="media-controllers:dom-media-controller"><a href="/breakup/specs/html-media/#dom-media-controller">controller</a></code> [ = <var>controller</var> ]</dt><dd>

    <p>Returns the current <code id="media-controllers:mediacontroller-2"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> for the <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element">media element</a>, if any;
    returns null otherwise.</p>

    <p>Can be set, to set an explicit <code id="media-controllers:mediacontroller-3"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>. Doing so removes the <code id="media-controllers:attr-media-mediagroup"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> attribute, if any.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-readystate-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-readystate">readyState</a></code></dt><dd>

    <p>Returns the state that the <code id="media-controllers:mediacontroller-4"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> was in the last time it fired events
    as a result of <a href="/breakup/specs/html-media/#report-the-controller-state" id="media-controllers:report-the-controller-state">reporting the controller state</a>.
    The values of this attribute are the same as for the <code id="media-controllers:dom-media-readystate-2"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute of <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-2">media
    elements</a>.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-buffered-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-buffered">buffered</a></code></dt><dd>

    <p>Returns a <code id="media-controllers:timeranges-4"><a href="/breakup/specs/html-media/#timeranges">TimeRanges</a></code> object that represents the intersection of the time ranges
    for which the user agent has all relevant media data for all the slaved <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-3">media elements</a>.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-seekable-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-seekable">seekable</a></code></dt><dd>

    <p>Returns a <code id="media-controllers:timeranges-5"><a href="/breakup/specs/html-media/#timeranges">TimeRanges</a></code> object that represents the intersection of the time ranges
    into which the user agent can seek for all the slaved <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-4">media
    elements</a>.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-duration-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-duration">duration</a></code></dt><dd>

    <p>Returns the difference between the earliest playable moment and the latest playable moment
    (not considering whether the data in question is actually buffered or directly seekable, but not
    including time in the future for infinite streams). Will return zero if there is no media.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-currenttime-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-currenttime">currentTime</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the <a href="/breakup/specs/html-media/#current-playback-position" id="media-controllers:current-playback-position">current playback position</a>, in seconds, as a position between zero
    time and the current <code id="media-controllers:dom-mediacontroller-duration-3"><a href="/breakup/specs/html-media/#dom-mediacontroller-duration">duration</a></code>.</p>

    <p>Can be set, to seek to the given time.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-paused-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-paused">paused</a></code></dt><dd>

    <p>Returns true if playback is paused; false otherwise. When this attribute is true, any
    <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-5">media element</a> slaved to this controller will be stopped.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-playbackstate-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-playbackstate">playbackState</a></code></dt><dd>

    <p>Returns the state that the <code id="media-controllers:mediacontroller-5"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> was in the last time it fired events
    as a result of <a href="/breakup/specs/html-media/#report-the-controller-state" id="media-controllers:report-the-controller-state-2">reporting the controller state</a>.
    The value of this attribute is either "<code id="media-controllers:dom-mediacontroller-playing-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-playing">playing</a></code>", indicating that the media is actively
    playing, "<code id="media-controllers:dom-mediacontroller-ended-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-ended">ended</a></code>", indicating that the media is
    not playing because playback has reached the end of all the <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements">slaved media elements</a>,
    or "<code id="media-controllers:dom-mediacontroller-waiting-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-waiting">waiting</a></code>", indicating that the media is not
    playing for some other reason (e.g. the <code id="media-controllers:mediacontroller-6"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is paused).</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-pause-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-pause">pause</a></code>()</dt><dd>

    <p>Sets the <code id="media-controllers:dom-mediacontroller-paused-3"><a href="/breakup/specs/html-media/#dom-mediacontroller-paused">paused</a></code> attribute to true.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-unpause-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-unpause">unpause</a></code>()</dt><dd>

    <p>Sets the <code id="media-controllers:dom-mediacontroller-paused-4"><a href="/breakup/specs/html-media/#dom-mediacontroller-paused">paused</a></code> attribute to false.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-play-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-play">play</a></code>()</dt><dd>

    <p>Sets the <code id="media-controllers:dom-mediacontroller-paused-5"><a href="/breakup/specs/html-media/#dom-mediacontroller-paused">paused</a></code> attribute to false and
    invokes the <code id="media-controllers:dom-media-play"><a href="/breakup/specs/html-media/#dom-media-play">play()</a></code> method of each <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-2">slaved media element</a>.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-played-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-played">played</a></code></dt><dd>

    <p>Returns a <code id="media-controllers:timeranges-6"><a href="/breakup/specs/html-media/#timeranges">TimeRanges</a></code> object that represents the union of the time ranges in all
    the slaved <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-6">media elements</a> that have been played.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-defaultplaybackrate-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-defaultplaybackrate">defaultPlaybackRate</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the default rate of playback.</p>

    <p>Can be set, to change the default rate of playback.</p>

    <p>This default rate has no direct effect on playback, but if the user switches to a
    fast-forward mode, when they return to the normal playback mode, it is expected that rate of
    playback (<code id="media-controllers:dom-mediacontroller-playbackrate-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-playbackrate">playbackRate</a></code>) will be returned
    to this default rate.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-playbackrate-3"><a href="/breakup/specs/html-media/#dom-mediacontroller-playbackrate">playbackRate</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the current rate of playback.</p>

    <p>Can be set, to change the rate of playback.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-volume-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-volume">volume</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the current playback volume multiplier, as a number in the range 0.0 to 1.0, where
    0.0 is the quietest and 1.0 the loudest.</p>

    <p>Can be set, to change the volume multiplier.</p>

    <p>Throws an <code id="media-controllers:indexsizeerror"><a href="/breakup/specs/core-algorithms/#indexsizeerror">IndexSizeError</a></code> exception if the new value is not in the range 0.0 .. 1.0.</p>

   </dd><dt><var>controller</var> . <code id="media-controllers:dom-mediacontroller-muted-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-muted">muted</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns true if all audio is muted (regardless of other attributes either on the controller
    or on any <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-7">media elements</a> slaved to this controller), and
    false otherwise.</p>

    <p>Can be set, to change whether the audio is muted or not.</p>

   </dd></dl>

  

  <p>A <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-8">media element</a> can have a <dfn id="current-media-controller">current media controller</dfn>, which is a
  <code id="media-controllers:mediacontroller-7"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object. When a <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-9">media element</a> is created without a <code id="media-controllers:attr-media-mediagroup-2"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> attribute, it does not have a <a href="/breakup/specs/html-media/#current-media-controller" id="media-controllers:current-media-controller">current media
  controller</a>. (If it is created <em>with</em> such an attribute, then that attribute
  initialises the <a href="/breakup/specs/html-media/#current-media-controller" id="media-controllers:current-media-controller-2">current media controller</a>, as defined below.)</p>

  <p>The <dfn id="slaved-media-elements">slaved media elements</dfn> of a <code id="media-controllers:mediacontroller-8"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> are the <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-10">media elements</a> whose <a href="/breakup/specs/html-media/#current-media-controller" id="media-controllers:current-media-controller-3">current media controller</a> is that
  <code id="media-controllers:mediacontroller-9"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>. All the <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-3">slaved media elements</a> of a
  <code id="media-controllers:mediacontroller-10"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> must use the same clock for their definition of their <a href="/breakup/specs/html-media/#media-timeline" id="media-controllers:media-timeline">media
  timeline</a>'s unit time. When the user agent is required to act on each <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-4">slaved media element</a> in turn, they must be processed in the order that they
  were last associated with the <code id="media-controllers:mediacontroller-11"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>.</p>

  <hr>

  <p>The <dfn id="dom-media-controller"><code>controller</code></dfn> attribute on a <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-11">media
  element</a>, on getting, must return the element's <a href="/breakup/specs/html-media/#current-media-controller" id="media-controllers:current-media-controller-4">current media controller</a>, if
  any, or null otherwise. On setting, the user agent must run the following steps:</p>

  <ol><li><p>Let <var>m</var> be the <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-12">media element</a> in question.</p></li><li><p>Let <var>old controller</var> be <var>m</var>'s <a href="/breakup/specs/html-media/#current-media-controller" id="media-controllers:current-media-controller-5">current media
   controller</a>, if it currently has one, and null otherwise.</p></li><li><p>Let <var>new controller</var> be null.</p></li><li><p>Let <var>m</var> have no <a href="/breakup/specs/html-media/#current-media-controller" id="media-controllers:current-media-controller-6">current media controller</a>, if it currently
   has one.</p></li><li><p>Remove the element's <code id="media-controllers:attr-media-mediagroup-3"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> content
   attribute, if any.</p></li><li><p>If the new value is null, then jump to the <i>update controllers</i> step below.</p></li><li><p>Let <var>m</var>'s <a href="/breakup/specs/html-media/#current-media-controller" id="media-controllers:current-media-controller-7">current media controller</a> be the new
   value.</p></li><li><p>Let <var>new controller</var> be <var>m</var>'s <a href="/breakup/specs/html-media/#current-media-controller" id="media-controllers:current-media-controller-8">current media
   controller</a>.</p></li><li><p><a href="/breakup/specs/html-media/#bring-the-media-element-up-to-speed-with-its-new-media-controller" id="media-controllers:bring-the-media-element-up-to-speed-with-its-new-media-controller">Bring the media element up to speed with its new media controller</a>.</p></li><li><p><i>Update controllers</i>: If <var>old controller</var> and <var>new
   controller</var> are the same (whether both null or both the same controller) then abort these
   steps.</p></li><li><p>If <var>old controller</var> is not null and still has one or more <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-5">slaved
   media elements</a>, then <a href="/breakup/specs/html-media/#report-the-controller-state" id="media-controllers:report-the-controller-state-3">report the controller state</a> for <var>old
   controller</var>.</p></li><li><p>If <var>new controller</var> is not null, then <a href="/breakup/specs/html-media/#report-the-controller-state" id="media-controllers:report-the-controller-state-4">report the controller
   state</a> for <var>new controller</var>.</p></li></ol>

  <hr>

  <p>The <dfn id="dom-mediacontroller"><code>MediaController()</code></dfn> constructor, when
  invoked, must return a newly created <code id="media-controllers:mediacontroller-12"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object.</p>

  <hr>

  <p>The <dfn id="dom-mediacontroller-readystate"><code>readyState</code></dfn> attribute must
  return the value to which it was most recently set. When the <code id="media-controllers:mediacontroller-13"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object
  is created, the attribute must be set to the value 0 (<code id="media-controllers:dom-media-have_nothing"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>). The value is updated by the <a href="/breakup/specs/html-media/#report-the-controller-state" id="media-controllers:report-the-controller-state-5">report the
  controller state</a> algorithm below.</p>

  <p>The <dfn id="dom-mediacontroller-seekable"><code>seekable</code></dfn> attribute must return
  a new static <a href="/breakup/specs/html-media/#normalised-timeranges-object" id="media-controllers:normalised-timeranges-object">normalised <code>TimeRanges</code> object</a> that represents the
  intersection of the ranges of the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource">media resources</a> of the
  <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-6">slaved media elements</a> that the user agent is able to seek to, at the time the
  attribute is evaluated.</p>

  <p>The <dfn id="dom-mediacontroller-buffered"><code>buffered</code></dfn> attribute must return
  a new static <a href="/breakup/specs/html-media/#normalised-timeranges-object" id="media-controllers:normalised-timeranges-object-2">normalised <code>TimeRanges</code> object</a> that represents the
  intersection of the ranges of the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-2">media resources</a> of the
  <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-7">slaved media elements</a> that the user agent has buffered, at the time the attribute is
  evaluated. Users agents must accurately determine the ranges available, even for media streams
  where this can only be determined by tedious inspection.</p>

  <p>The <dfn id="dom-mediacontroller-duration"><code>duration</code></dfn> attribute must return
  the <a href="/breakup/specs/html-media/#media-controller-duration" id="media-controllers:media-controller-duration">media controller duration</a>.</p>

  <p>Every 15 to 250ms, or whenever the <code id="media-controllers:mediacontroller-14"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-duration" id="media-controllers:media-controller-duration-2">media controller
  duration</a> changes, whichever happens least often, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task">queue a
  task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event">fire a simple event</a> named <code id="media-controllers:event-mediacontroller-durationchange"><a href="/breakup/specs/html-media/#event-mediacontroller-durationchange">durationchange</a></code> at the
  <code id="media-controllers:mediacontroller-15"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>. If the <code id="media-controllers:mediacontroller-16"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-duration" id="media-controllers:media-controller-duration-3">media controller
  duration</a> decreases such that the <a href="/breakup/specs/html-media/#media-controller-position" id="media-controllers:media-controller-position">media controller position</a> is greater than the
  <a href="/breakup/specs/html-media/#media-controller-duration" id="media-controllers:media-controller-duration-4">media controller duration</a>, the user agent must <a href="/breakup/specs/core-algorithms/#immediately" id="media-controllers:immediately">immediately</a> <a href="/breakup/specs/html-media/#seek-the-media-controller" id="media-controllers:seek-the-media-controller">seek the media
  controller</a> to <a href="/breakup/specs/html-media/#media-controller-duration" id="media-controllers:media-controller-duration-5">media controller duration</a>.</p>

  <p>The <dfn id="dom-mediacontroller-currenttime"><code>currentTime</code></dfn> attribute must
  return the <a href="/breakup/specs/html-media/#media-controller-position" id="media-controllers:media-controller-position-2">media controller position</a> on getting, and on setting must <a href="/breakup/specs/html-media/#seek-the-media-controller" id="media-controllers:seek-the-media-controller-2">seek the
  media controller</a> to the new value.</p>

  <p>Every 15 to 250ms, or whenever the <code id="media-controllers:mediacontroller-17"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-position" id="media-controllers:media-controller-position-3">media controller
  position</a> changes, whichever happens least often, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task-2">queue a
  task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event-2">fire a simple event</a> named <code id="media-controllers:event-mediacontroller-timeupdate"><a href="/breakup/specs/html-media/#event-mediacontroller-timeupdate">timeupdate</a></code> at the
  <code id="media-controllers:mediacontroller-18"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>.</p>

  <hr>

  <p>When a <code id="media-controllers:mediacontroller-19"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is created it is a <dfn id="playing-media-controller">playing media controller</dfn>. It
  can be changed into a <dfn id="paused-media-controller">paused media controller</dfn> and back either via the user agent's user
  interface (when the element is <a href="/breakup/specs/html-media/#expose-a-user-interface-to-the-user" id="media-controllers:expose-a-user-interface-to-the-user">exposing a user
  interface to the user</a>) or by script using the APIs defined in this section (see below).</p>

  <p>The <dfn id="dom-mediacontroller-paused"><code>paused</code></dfn> attribute must return
  true if the <code id="media-controllers:mediacontroller-20"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object is a <a href="/breakup/specs/html-media/#paused-media-controller" id="media-controllers:paused-media-controller">paused media controller</a>, and
  false otherwise.</p>

  <p>When the <dfn id="dom-mediacontroller-pause"><code>pause()</code></dfn> method is invoked,
  if the <code id="media-controllers:mediacontroller-21"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is a <a href="/breakup/specs/html-media/#playing-media-controller" id="media-controllers:playing-media-controller">playing media controller</a> then the user agent
  must change the <code id="media-controllers:mediacontroller-22"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> into a <a href="/breakup/specs/html-media/#paused-media-controller" id="media-controllers:paused-media-controller-2">paused media controller</a>,
  <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task-3">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event-3">fire a simple event</a> named <code id="media-controllers:event-mediacontroller-pause"><a href="/breakup/specs/html-media/#event-mediacontroller-pause">pause</a></code> at the <code id="media-controllers:mediacontroller-23"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>, and then
  <a href="/breakup/specs/html-media/#report-the-controller-state" id="media-controllers:report-the-controller-state-6">report the controller state</a> of the <code id="media-controllers:mediacontroller-24"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>.</p>

  <p>When the <dfn id="dom-mediacontroller-unpause"><code>unpause()</code></dfn> method is
  invoked, if the <code id="media-controllers:mediacontroller-25"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is a <a href="/breakup/specs/html-media/#paused-media-controller" id="media-controllers:paused-media-controller-3">paused media controller</a>, the user
  agent must change the <code id="media-controllers:mediacontroller-26"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> into a <a href="/breakup/specs/html-media/#playing-media-controller" id="media-controllers:playing-media-controller-2">playing media controller</a>,
  <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task-4">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event-4">fire a simple event</a> named <code id="media-controllers:event-mediacontroller-play"><a href="/breakup/specs/html-media/#event-mediacontroller-play">play</a></code> at the <code id="media-controllers:mediacontroller-27"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>, and then
  <a href="/breakup/specs/html-media/#report-the-controller-state" id="media-controllers:report-the-controller-state-7">report the controller state</a> of the <code id="media-controllers:mediacontroller-28"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>.</p>

  <p>When the <dfn id="dom-mediacontroller-play"><code>play()</code></dfn> method is invoked, the
  user agent must invoke the <code id="media-controllers:dom-media-play-2"><a href="/breakup/specs/html-media/#dom-media-play">play()</a></code> method of each <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-8">slaved media element</a> in turn, and then invoke the <code id="media-controllers:dom-mediacontroller-unpause-3"><a href="/breakup/specs/html-media/#dom-mediacontroller-unpause">unpause</a></code> method of the <code id="media-controllers:mediacontroller-29"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>.</p>

  <p>The <dfn id="dom-mediacontroller-playbackstate"><code>playbackState</code></dfn> attribute
  must return the value to which it was most recently set. When the <code id="media-controllers:mediacontroller-30"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>
  object is created, the attribute must be set to the value "<code id="media-controllers:dom-mediacontroller-waiting-3"><a href="/breakup/specs/html-media/#dom-mediacontroller-waiting">waiting</a></code>". The value is updated by the <a href="/breakup/specs/html-media/#report-the-controller-state" id="media-controllers:report-the-controller-state-8">report the
  controller state</a> algorithm below.</p>

  <p>The <dfn id="dom-mediacontroller-played"><code>played</code></dfn> attribute must return a
  new static <a href="/breakup/specs/html-media/#normalised-timeranges-object" id="media-controllers:normalised-timeranges-object-3">normalised <code>TimeRanges</code> object</a> that represents the union of the
  ranges of points on the <a href="/breakup/specs/html-media/#media-timeline" id="media-controllers:media-timeline-2">media timelines</a> of the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-3">media resources</a> of the <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-9">slaved media elements</a> that the
  user agent has so far reached through the usual monotonic increase of their <a href="/breakup/specs/html-media/#current-playback-position" id="media-controllers:current-playback-position-2">current playback positions</a> during normal playback, at the time the
  attribute is evaluated.</p>

  <hr>

  <p>A <code id="media-controllers:mediacontroller-31"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> has a <dfn id="media-controller-default-playback-rate">media controller default playback rate</dfn> and a
  <dfn id="media-controller-playback-rate">media controller playback rate</dfn>, which must both be set to 1.0 when the
  <code id="media-controllers:mediacontroller-32"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object is created.</p>

  <p>The <dfn id="dom-mediacontroller-defaultplaybackrate"><code>defaultPlaybackRate</code></dfn>
  attribute, on getting, must return the <code id="media-controllers:mediacontroller-33"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-default-playback-rate" id="media-controllers:media-controller-default-playback-rate">media controller
  default playback rate</a>, and on setting, must set the <code id="media-controllers:mediacontroller-34"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s
  <a href="/breakup/specs/html-media/#media-controller-default-playback-rate" id="media-controllers:media-controller-default-playback-rate-2">media controller default playback rate</a> to the new value, then <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task-5">queue a
  task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event-5">fire a simple event</a> named <code id="media-controllers:event-mediacontroller-ratechange"><a href="/breakup/specs/html-media/#event-mediacontroller-ratechange">ratechange</a></code> at the
  <code id="media-controllers:mediacontroller-35"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>.</p>

  <p>The <dfn id="dom-mediacontroller-playbackrate"><code>playbackRate</code></dfn> attribute, on
  getting, must return the <code id="media-controllers:mediacontroller-36"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-playback-rate" id="media-controllers:media-controller-playback-rate">media controller playback
  rate</a>, and on setting, must set the <code id="media-controllers:mediacontroller-37"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-playback-rate" id="media-controllers:media-controller-playback-rate-2">media controller
  playback rate</a> to the new value, then <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task-6">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event-6">fire a simple
  event</a> named <code id="media-controllers:event-mediacontroller-ratechange-2"><a href="/breakup/specs/html-media/#event-mediacontroller-ratechange">ratechange</a></code> at the
  <code id="media-controllers:mediacontroller-38"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>.</p>

  <hr>

  <p>A <code id="media-controllers:mediacontroller-39"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> has a <dfn id="media-controller-volume-multiplier">media controller volume multiplier</dfn>, which must
  be set to 1.0 when the <code id="media-controllers:mediacontroller-40"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object is created, and a <dfn id="media-controller-mute-override">media controller
  mute override</dfn>, much must initially be false.</p>

  <p>The <dfn id="dom-mediacontroller-volume"><code>volume</code></dfn> attribute, on getting,
  must return the <code id="media-controllers:mediacontroller-41"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-volume-multiplier" id="media-controllers:media-controller-volume-multiplier">media controller volume multiplier</a>,
  and on setting, if the new value is in the range 0.0 to 1.0 inclusive, must set the
  <code id="media-controllers:mediacontroller-42"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-volume-multiplier" id="media-controllers:media-controller-volume-multiplier-2">media controller volume multiplier</a> to the new value
  and <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task-7">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event-7">fire a simple event</a> named <code id="media-controllers:event-mediacontroller-volumechange"><a href="/breakup/specs/html-media/#event-mediacontroller-volumechange">volumechange</a></code> at the
  <code id="media-controllers:mediacontroller-43"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>. If the new value is outside the range 0.0 to 1.0 inclusive, then, on
  setting, an <code id="media-controllers:indexsizeerror-2"><a href="/breakup/specs/core-algorithms/#indexsizeerror">IndexSizeError</a></code> exception must be thrown instead.</p>

  <p>The <dfn id="dom-mediacontroller-muted"><code>muted</code></dfn> attribute, on getting, must
  return the <code id="media-controllers:mediacontroller-44"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-mute-override" id="media-controllers:media-controller-mute-override">media controller mute override</a>, and on
  setting, must set the <code id="media-controllers:mediacontroller-45"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-mute-override" id="media-controllers:media-controller-mute-override-2">media controller mute override</a>
  to the new value and <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task-8">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event-8">fire a simple event</a> named <code id="media-controllers:event-mediacontroller-volumechange-2"><a href="/breakup/specs/html-media/#event-mediacontroller-volumechange">volumechange</a></code> at the
  <code id="media-controllers:mediacontroller-46"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>.</p>

  <hr>

  <p>The <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-4">media resources</a> of all the <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-10">slaved media
  elements</a> of a <code id="media-controllers:mediacontroller-47"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> have a defined temporal relationship which
  provides relative offsets between the zero time of each such <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-5">media resource</a>: for
  <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-6">media resources</a> with a <a href="/breakup/specs/html-media/#timeline-offset" id="media-controllers:timeline-offset">timeline offset</a>, their
  relative offsets are the difference between their <a href="/breakup/specs/html-media/#timeline-offset" id="media-controllers:timeline-offset-2">timeline offset</a>; the zero times of
  all the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-7">media resources</a> without a <a href="/breakup/specs/html-media/#timeline-offset" id="media-controllers:timeline-offset-3">timeline offset</a>
  are not offset from each other (i.e. the origins of their timelines are cotemporal); and finally,
  the zero time of the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-8">media resource</a> with the earliest <a href="/breakup/specs/html-media/#timeline-offset" id="media-controllers:timeline-offset-4">timeline offset</a>
  (if any) is not offset from the zero times of the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-9">media
  resources</a> without a <a href="/breakup/specs/html-media/#timeline-offset" id="media-controllers:timeline-offset-5">timeline offset</a> (i.e. the origins of <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-10">media resources</a> without a <a href="/breakup/specs/html-media/#timeline-offset" id="media-controllers:timeline-offset-6">timeline offset</a> are further cotemporal
  with the earliest defined point on the timeline of the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-11">media resource</a> with the
  earliest <a href="/breakup/specs/html-media/#timeline-offset" id="media-controllers:timeline-offset-7">timeline offset</a>).</p>

  <p>The <dfn id="media-resource-end-position">media resource end position</dfn> of a <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-12">media resource</a> in a <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-13">media
  element</a> is defined as follows: if the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-13">media resource</a> has a finite and known
  duration, the <a href="/breakup/specs/html-media/#media-resource-end-position" id="media-controllers:media-resource-end-position">media resource end position</a> is the duration of the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-14">media
  resource</a>'s timeline (the last defined position on that timeline); otherwise, the
  <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-15">media resource</a>'s duration is infinite or unknown, and the <a href="/breakup/specs/html-media/#media-resource-end-position" id="media-controllers:media-resource-end-position-2">media resource end
  position</a> is the time of the last frame of <a href="/breakup/specs/html-media/#media-data" id="media-controllers:media-data">media data</a> currently available for
  that <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-16">media resource</a>.</p>

  <p>Each <code id="media-controllers:mediacontroller-48"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> also has its own defined timeline. On this timeline, all the
  <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-17">media resources</a> of all the <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-11">slaved media elements</a>
  of the <code id="media-controllers:mediacontroller-49"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> are temporally aligned according to their defined offsets. The
  <dfn id="media-controller-duration">media controller duration</dfn> of that <code id="media-controllers:mediacontroller-50"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is the time from the
  earliest <a href="/breakup/specs/html-media/#earliest-possible-position" id="media-controllers:earliest-possible-position">earliest possible position</a>, relative to this <code id="media-controllers:mediacontroller-51"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>
  timeline, of any of the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-18">media resources</a> of the <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-12">slaved
  media elements</a> of the <code id="media-controllers:mediacontroller-52"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>, to the time of the latest <a href="/breakup/specs/html-media/#media-resource-end-position" id="media-controllers:media-resource-end-position-3">media
  resource end position</a> of the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-19">media resources</a> of the
  <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-13">slaved media elements</a> of the <code id="media-controllers:mediacontroller-53"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>, again relative to this
  <code id="media-controllers:mediacontroller-54"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> timeline.</p>

  <p>Each <code id="media-controllers:mediacontroller-55"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> has a <dfn id="media-controller-position">media controller position</dfn>. This is the time
  on the <code id="media-controllers:mediacontroller-56"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s timeline at which the user agent is trying to play the
  <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-14">slaved media elements</a>. When a <code id="media-controllers:mediacontroller-57"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is created, its
  <a href="/breakup/specs/html-media/#media-controller-position" id="media-controllers:media-controller-position-4">media controller position</a> is initially zero.</p>

  <p>When the user agent is to <dfn id="bring-the-media-element-up-to-speed-with-its-new-media-controller">bring a media element up to speed with its new media controller</dfn>, it must <a href="/breakup/specs/html-media/#dom-media-seek" id="media-controllers:dom-media-seek">seek</a> that <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-14">media element</a> to the
  <code id="media-controllers:mediacontroller-58"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-position" id="media-controllers:media-controller-position-5">media controller position</a> relative to the <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-15">media
  element</a>'s timeline.</p>

  <p>When the user agent is to <dfn id="seek-the-media-controller">seek the media controller</dfn> to a particular <var>new playback position</var>, it must follow these steps:</p>

  <ol><li><p>If the <var>new playback position</var> is less than zero, then set it to
   zero.</p></li><li><p>If the <var>new playback position</var> is greater than the <a href="/breakup/specs/html-media/#media-controller-duration" id="media-controllers:media-controller-duration-6">media
   controller duration</a>, then set it to the <a href="/breakup/specs/html-media/#media-controller-duration" id="media-controllers:media-controller-duration-7">media controller duration</a>.</p></li><li><p>Set the <a href="/breakup/specs/html-media/#media-controller-position" id="media-controllers:media-controller-position-6">media controller position</a> to the <var>new playback
   position</var>.</p></li><li><p><a href="/breakup/specs/html-media/#dom-media-seek" id="media-controllers:dom-media-seek-2">Seek</a> each <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-15">slaved
   media element</a> to the <var>new playback position</var> relative to the <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-16">media
   element</a> timeline.</p></li></ol>

  <p>A <code id="media-controllers:mediacontroller-59"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is a <dfn id="restrained-media-controller">restrained media controller</dfn> if the
  <code id="media-controllers:mediacontroller-60"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is a <a href="/breakup/specs/html-media/#playing-media-controller" id="media-controllers:playing-media-controller-3">playing media controller</a>, but either at least one
  of its <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-16">slaved media elements</a> whose <a href="/breakup/specs/html-media/#autoplaying-flag" id="media-controllers:autoplaying-flag">autoplaying flag</a> is true still has
  its <code id="media-controllers:dom-media-paused"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute set to true, or, all of its
  <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-17">slaved media elements</a> have their <code id="media-controllers:dom-media-paused-2"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code>
  attribute set to true.</p>

  <p>A <code id="media-controllers:mediacontroller-61"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is a <dfn id="blocked-media-controller">blocked media controller</dfn> if the
  <code id="media-controllers:mediacontroller-62"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is a <a href="/breakup/specs/html-media/#paused-media-controller" id="media-controllers:paused-media-controller-4">paused media controller</a>, or if any of its
  <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-18">slaved media elements</a> are <a href="/breakup/specs/html-media/#blocked-media-element" id="media-controllers:blocked-media-element">blocked media
  elements</a>, or if any of its <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-19">slaved media elements</a> whose <a href="/breakup/specs/html-media/#autoplaying-flag" id="media-controllers:autoplaying-flag-2">autoplaying
  flag</a> is true still have their <code id="media-controllers:dom-media-paused-3"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute set to
  true, or if all of its <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-20">slaved media elements</a> have their <code id="media-controllers:dom-media-paused-4"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute set to true.</p>

  <p>A <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-17">media element</a> is <dfn id="blocked-on-its-media-controller">blocked on its media controller</dfn> if the
  <code id="media-controllers:mediacontroller-63"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is a <a href="/breakup/specs/html-media/#blocked-media-controller" id="media-controllers:blocked-media-controller">blocked media controller</a>, or if its <a href="/breakup/specs/html-media/#media-controller-position" id="media-controllers:media-controller-position-7">media
  controller position</a> is either before the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-20">media resource</a>'s <a href="/breakup/specs/html-media/#earliest-possible-position" id="media-controllers:earliest-possible-position-2">earliest
  possible position</a> relative to the <code id="media-controllers:mediacontroller-64"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s timeline or after the end
  of the <a href="/breakup/specs/html-media/#media-resource" id="media-controllers:media-resource-21">media resource</a> relative to the <code id="media-controllers:mediacontroller-65"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s timeline.</p>

  <p id="controller-playback">When a <code id="media-controllers:mediacontroller-66"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is not a <a href="/breakup/specs/html-media/#blocked-media-controller" id="media-controllers:blocked-media-controller-2">blocked media
  controller</a> and it has at least one <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-21">slaved media
  element</a> whose <code id="media-controllers:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> is a <a href="/breakup/specs/browser-dom/#fully-active" id="media-controllers:fully-active">fully active</a> <code id="media-controllers:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code>,
  the <code id="media-controllers:mediacontroller-67"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-position" id="media-controllers:media-controller-position-8">media controller position</a> must increase
  monotonically at <a href="/breakup/specs/html-media/#media-controller-playback-rate" id="media-controllers:media-controller-playback-rate-3">media controller playback rate</a> units of time on the
  <code id="media-controllers:mediacontroller-68"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s timeline per unit time of the clock used by its <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-22">slaved media
  elements</a>.</p>

  <p>When the zero point on the timeline of a <code id="media-controllers:mediacontroller-69"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> moves relative to the
  timelines of the <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-23">slaved media elements</a> by a time difference <var>ΔT</var>, the <code id="media-controllers:mediacontroller-70"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#media-controller-position" id="media-controllers:media-controller-position-9">media controller
  position</a> must be decremented by <var>ΔT</var>.</p>

  <p class="note">In some situations, e.g. when playing back a live stream without buffering
  anything, the <a href="/breakup/specs/html-media/#media-controller-position" id="media-controllers:media-controller-position-10">media controller position</a> would increase monotonically as described
  above at the same rate as the <var>ΔT</var> described in the previous paragraph
  decreases it, with the end result that for all intents and purposes, the <a href="/breakup/specs/html-media/#media-controller-position" id="media-controllers:media-controller-position-11">media controller
  position</a> would appear to remain constant (probably with the value 0).</p>

  <hr>

  <p>A <code id="media-controllers:mediacontroller-71"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> has a <dfn id="most-recently-reported-readiness-state">most recently reported readiness state</dfn>, which
  is a number from 0 to 4 derived from the numbers used for the <a href="/breakup/specs/html-media/#media-element" id="media-controllers:media-element-18">media element</a> <code id="media-controllers:dom-media-readystate-3"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> attribute, and a <dfn id="most-recently-reported-playback-state">most recently reported
  playback state</dfn>, which is either <i>playing</i>, <i>waiting</i>, or <i>ended</i>.</p>

  <p>When a <code id="media-controllers:mediacontroller-72"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is created, its <a href="/breakup/specs/html-media/#most-recently-reported-readiness-state" id="media-controllers:most-recently-reported-readiness-state">most recently reported readiness
  state</a> must be set to 0, and its <a href="/breakup/specs/html-media/#most-recently-reported-playback-state" id="media-controllers:most-recently-reported-playback-state">most recently reported playback state</a> must be
  set to <i>waiting</i>.</p>

  <p>When a user agent is required to <dfn id="report-the-controller-state">report the controller state</dfn> for a
  <code id="media-controllers:mediacontroller-73"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>, the user agent must run the following steps:</p>

  <ol><li>

    <p>If the <code id="media-controllers:mediacontroller-74"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> has no <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-24">slaved media elements</a>, let <var>new readiness state</var> be 0.</p>

    <p>Otherwise, let it have the lowest value of the <code id="media-controllers:dom-media-readystate-4"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> IDL attributes of all of its <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-25">slaved media
    elements</a>.</p>

   </li><li>

    <p>If the <code id="media-controllers:mediacontroller-75"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#most-recently-reported-readiness-state" id="media-controllers:most-recently-reported-readiness-state-2">most recently reported readiness state</a> is
    less than the <var>new readiness state</var>, then run these substeps:</p>

    <ol><li><p>Let <var>next state</var> be the <code id="media-controllers:mediacontroller-76"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#most-recently-reported-readiness-state" id="media-controllers:most-recently-reported-readiness-state-3">most
     recently reported readiness state</a>.</p></li><li><p><i>Loop</i>: Increment <var>next state</var> by one.</p></li><li>

      <p><a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task-9">Queue a task</a> to run the following steps:</p>

      <ol><li><p>Set the <code id="media-controllers:mediacontroller-77"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <code id="media-controllers:dom-mediacontroller-readystate-3"><a href="/breakup/specs/html-media/#dom-mediacontroller-readystate">readyState</a></code> attribute to the value <var>next state</var>.</p></li><li><p><a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event-9">Fire a simple event</a> at the <code id="media-controllers:mediacontroller-78"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object, whose
       name is the event name corresponding to the value of <var>next state</var> given in
       the table below.</p></li></ol>

     </li><li><p>If <var>next state</var> is less than <var>new readiness state</var>,
     then return to the step labeled <i>loop</i>.</p></li></ol>

    <p>Otherwise, if the <code id="media-controllers:mediacontroller-79"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#most-recently-reported-readiness-state" id="media-controllers:most-recently-reported-readiness-state-4">most recently reported readiness
    state</a> is greater than <var>new readiness state</var> then <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task-10">queue a
    task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event-10">fire a simple event</a> at the <code id="media-controllers:mediacontroller-80"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object,
    whose name is the event name corresponding to the value of <var>new readiness
    state</var> given in the table below.</p>

    <table><thead><tr><th>Value of <var>new readiness state</var>
       </th><th>Event name

     </th></tr></thead><tbody><tr><td> 0
       </td><td> <code id="media-controllers:event-mediacontroller-emptied"><a href="/breakup/specs/html-media/#event-mediacontroller-emptied">emptied</a></code>

      </td></tr><tr><td> 1
       </td><td> <code id="media-controllers:event-mediacontroller-loadedmetadata"><a href="/breakup/specs/html-media/#event-mediacontroller-loadedmetadata">loadedmetadata</a></code>

      </td></tr><tr><td> 2
       </td><td> <code id="media-controllers:event-mediacontroller-loadeddata"><a href="/breakup/specs/html-media/#event-mediacontroller-loadeddata">loadeddata</a></code>

      </td></tr><tr><td> 3
       </td><td> <code id="media-controllers:event-mediacontroller-canplay"><a href="/breakup/specs/html-media/#event-mediacontroller-canplay">canplay</a></code>

      </td></tr><tr><td> 4
       </td><td> <code id="media-controllers:event-mediacontroller-canplaythrough"><a href="/breakup/specs/html-media/#event-mediacontroller-canplaythrough">canplaythrough</a></code>

    </td></tr></tbody></table>

   </li><li><p>Let the <code id="media-controllers:mediacontroller-81"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#most-recently-reported-readiness-state" id="media-controllers:most-recently-reported-readiness-state-5">most recently reported readiness state</a>
   be <var>new readiness state</var>.</p></li><li>

    <p>Initialise <var>new playback state</var> by setting it to the state given for the
    first matching condition from the following list:</p>

    <dl class="switch"><dt>If the <code id="media-controllers:mediacontroller-82"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> has no <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-26">slaved media elements</a></dt><dd>Let <var>new playback state</var> be <i>waiting</i>.</dd><dt>If all of the <code id="media-controllers:mediacontroller-83"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-27">slaved media elements</a> have
     <a href="/breakup/specs/html-media/#ended-playback" id="media-controllers:ended-playback">ended playback</a> and the <a href="/breakup/specs/html-media/#media-controller-playback-rate" id="media-controllers:media-controller-playback-rate-4">media controller playback rate</a> is positive or
     zero</dt><dd>Let <var>new playback state</var> be <i>ended</i>.</dd><dt>If the <code id="media-controllers:mediacontroller-84"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is a <a href="/breakup/specs/html-media/#blocked-media-controller" id="media-controllers:blocked-media-controller-3">blocked media controller</a></dt><dd>Let <var>new playback state</var> be <i>waiting</i>.</dd><dt>Otherwise</dt><dd>Let <var>new playback state</var> be <i>playing</i>.</dd></dl>

   </li><li><p>If the <code id="media-controllers:mediacontroller-85"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#most-recently-reported-playback-state" id="media-controllers:most-recently-reported-playback-state-2">most recently reported playback state</a>
   is not equal to <var>new playback state</var> and the <var>new playback
   state</var> is <i>ended</i>, then <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task-11">queue a task</a> that, if the
   <code id="media-controllers:mediacontroller-86"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object is a <a href="/breakup/specs/html-media/#playing-media-controller" id="media-controllers:playing-media-controller-4">playing media controller</a>, and all of the
   <code id="media-controllers:mediacontroller-87"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#slaved-media-elements" id="media-controllers:slaved-media-elements-28">slaved media elements</a> have still <a href="/breakup/specs/html-media/#ended-playback" id="media-controllers:ended-playback-2">ended
   playback</a>, and the <a href="/breakup/specs/html-media/#media-controller-playback-rate" id="media-controllers:media-controller-playback-rate-5">media controller playback rate</a> is still positive or zero,
   changes the <code id="media-controllers:mediacontroller-88"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object to a <a href="/breakup/specs/html-media/#paused-media-controller" id="media-controllers:paused-media-controller-5">paused media controller</a> and
   then <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event-11">fires a simple event</a> named <code id="media-controllers:event-mediacontroller-pause-2"><a href="/breakup/specs/html-media/#event-mediacontroller-pause">pause</a></code> at the <code id="media-controllers:mediacontroller-89"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>
   object.</p></li><li>

    <p>If the <code id="media-controllers:mediacontroller-90"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#most-recently-reported-playback-state" id="media-controllers:most-recently-reported-playback-state-3">most recently reported playback state</a> is
    not equal to <var>new playback state</var> then <a href="/breakup/specs/browser-dom/#queue-a-task" id="media-controllers:queue-a-task-12">queue a task</a> to run the
    following steps:</p>

    <ol><li><p>Set the <code id="media-controllers:mediacontroller-91"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <code id="media-controllers:dom-mediacontroller-playbackstate-3"><a href="/breakup/specs/html-media/#dom-mediacontroller-playbackstate">playbackState</a></code> attribute to the value given in
     the second column of the row of the following table whose first column contains the <var>new playback state</var>.</p></li><li><p><a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="media-controllers:fire-a-simple-event-12">Fire a simple event</a> at the <code id="media-controllers:mediacontroller-92"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object, whose name
     is the value given in the third column of the row of the following table whose first column
     contains the <var>new playback state</var>.</p></li></ol>

    <table><thead><tr><th>New playback state
       </th><th>New value for <code id="media-controllers:dom-mediacontroller-playbackstate-4"><a href="/breakup/specs/html-media/#dom-mediacontroller-playbackstate">playbackState</a></code>
       </th><th>Event name
     </th></tr></thead><tbody><tr><td><i>playing</i>
       </td><td>"<dfn id="dom-mediacontroller-playing"><code>playing</code></dfn>"
       </td><td><code id="media-controllers:event-mediacontroller-playing"><a href="/breakup/specs/html-media/#event-mediacontroller-playing">playing</a></code>
      </td></tr><tr><td><i>waiting</i>
       </td><td>"<dfn id="dom-mediacontroller-waiting"><code>waiting</code></dfn>"
       </td><td><code id="media-controllers:event-mediacontroller-waiting"><a href="/breakup/specs/html-media/#event-mediacontroller-waiting">waiting</a></code>
      </td></tr><tr><td><i>ended</i>
       </td><td>"<dfn id="dom-mediacontroller-ended"><code>ended</code></dfn>"
       </td><td><code id="media-controllers:event-mediacontroller-ended"><a href="/breakup/specs/html-media/#event-mediacontroller-ended">ended</a></code>
    </td></tr></tbody></table>

   </li><li><p>Let the <code id="media-controllers:mediacontroller-93"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#most-recently-reported-playback-state" id="media-controllers:most-recently-reported-playback-state-4">most recently reported playback state</a>
   be <var>new playback state</var>.</p></li></ol>

  <hr>

  <p>The following are the <a href="/breakup/specs/browser-dom/#event-handlers" id="media-controllers:event-handlers">event handlers</a> (and their corresponding <a href="/breakup/specs/browser-dom/#event-handler-event-type" id="media-controllers:event-handler-event-type">event handler event types</a>) that must be supported, as <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="media-controllers:event-handler-idl-attributes">event handler IDL attributes</a>,
  by all objects implementing the <code id="media-controllers:mediacontroller-94"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> interface:</p>

  <table><thead><tr><th><a href="/breakup/specs/browser-dom/#event-handlers" id="media-controllers:event-handlers-2">Event handler</a> </th><th><a href="/breakup/specs/browser-dom/#event-handler-event-type" id="media-controllers:event-handler-event-type-2">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-mediacontroller-onemptied"><code>onemptied</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-emptied-2"><a href="/breakup/specs/html-media/#event-mediacontroller-emptied">emptied</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-onloadedmetadata"><code>onloadedmetadata</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-loadedmetadata-2"><a href="/breakup/specs/html-media/#event-mediacontroller-loadedmetadata">loadedmetadata</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-onloadeddata"><code>onloadeddata</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-loadeddata-2"><a href="/breakup/specs/html-media/#event-mediacontroller-loadeddata">loadeddata</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-oncanplay"><code>oncanplay</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-canplay-2"><a href="/breakup/specs/html-media/#event-mediacontroller-canplay">canplay</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-oncanplaythrough"><code>oncanplaythrough</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-canplaythrough-2"><a href="/breakup/specs/html-media/#event-mediacontroller-canplaythrough">canplaythrough</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-onplaying"><code>onplaying</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-playing-2"><a href="/breakup/specs/html-media/#event-mediacontroller-playing">playing</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-onended"><code>onended</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-ended-2"><a href="/breakup/specs/html-media/#event-mediacontroller-ended">ended</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-onwaiting"><code>onwaiting</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-waiting-2"><a href="/breakup/specs/html-media/#event-mediacontroller-waiting">waiting</a></code>
   </td></tr></tbody><tbody><tr><td><dfn id="handler-mediacontroller-ondurationchange"><code>ondurationchange</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-durationchange-2"><a href="/breakup/specs/html-media/#event-mediacontroller-durationchange">durationchange</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-ontimeupdate"><code>ontimeupdate</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-timeupdate-2"><a href="/breakup/specs/html-media/#event-mediacontroller-timeupdate">timeupdate</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-onplay"><code>onplay</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-play-2"><a href="/breakup/specs/html-media/#event-mediacontroller-play">play</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-onpause"><code>onpause</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-pause-3"><a href="/breakup/specs/html-media/#event-mediacontroller-pause">pause</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-onratechange"><code>onratechange</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-ratechange-3"><a href="/breakup/specs/html-media/#event-mediacontroller-ratechange">ratechange</a></code>
    </td></tr><tr><td><dfn id="handler-mediacontroller-onvolumechange"><code>onvolumechange</code></dfn> </td><td> <code id="media-controllers:event-mediacontroller-volumechange-3"><a href="/breakup/specs/html-media/#event-mediacontroller-volumechange">volumechange</a></code>
  </td></tr></tbody></table>

  <hr>

  <p>The <a href="/breakup/specs/browser-dom/#task-source" id="media-controllers:task-source">task source</a> for the <a href="/breakup/specs/browser-dom/#concept-task" id="media-controllers:concept-task">tasks</a> listed in this
  section is the <a href="/breakup/specs/browser-dom/#dom-manipulation-task-source" id="media-controllers:dom-manipulation-task-source">DOM manipulation task source</a>.</p></section>

  


  <section><h2>Assigning a media controller declaratively</h2>

  <p>The <dfn id="attr-media-mediagroup"><code>mediagroup</code></dfn> content attribute on <a href="/breakup/specs/html-media/#media-element" id="assigning-a-media-controller-declaratively:media-element">media elements</a> can be used to link multiple <a href="/breakup/specs/html-media/#media-element" id="assigning-a-media-controller-declaratively:media-element-2">media elements</a> together by implicitly creating a <code id="assigning-a-media-controller-declaratively:mediacontroller"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>. The
  value is text; <a href="/breakup/specs/html-media/#media-element" id="assigning-a-media-controller-declaratively:media-element-3">media elements</a> with the same value are
  automatically linked by the user agent.</p>

  

  <p>When a <a href="/breakup/specs/html-media/#media-element" id="assigning-a-media-controller-declaratively:media-element-4">media element</a> is created with a <code id="assigning-a-media-controller-declaratively:attr-media-mediagroup"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> attribute, and when a <a href="/breakup/specs/html-media/#media-element" id="assigning-a-media-controller-declaratively:media-element-5">media element</a>'s
  <code id="assigning-a-media-controller-declaratively:attr-media-mediagroup-2"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> attribute is set, changed, or removed, the
  user agent must run the following steps:</p>

  <ol><li><p>Let <var>m</var> be the <a href="/breakup/specs/html-media/#media-element" id="assigning-a-media-controller-declaratively:media-element-6">media element</a> in question.</p></li><li><p>Let <var>old controller</var> be <var>m</var>'s <a href="/breakup/specs/html-media/#current-media-controller" id="assigning-a-media-controller-declaratively:current-media-controller">current media
   controller</a>, if it currently has one, and null otherwise.</p></li><li><p>Let <var>new controller</var> be null.</p></li><li><p>Let <var>m</var> have no <a href="/breakup/specs/html-media/#current-media-controller" id="assigning-a-media-controller-declaratively:current-media-controller-2">current media controller</a>, if it currently
   has one.</p></li><li><p>If <var>m</var>'s <code id="assigning-a-media-controller-declaratively:attr-media-mediagroup-3"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> attribute
   is being removed, then jump to the <i>update controllers</i> step below.</p></li><li>

    <p>If there is another <a href="/breakup/specs/html-media/#media-element" id="assigning-a-media-controller-declaratively:media-element-7">media element</a> whose <code id="assigning-a-media-controller-declaratively:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> is the same as
    <var>m</var>'s <a id="assigning-a-media-controller-declaratively:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> (even if one or both of these elements are not
    actually <a href="/breakup/specs/core-algorithms/#in-a-document" id="assigning-a-media-controller-declaratively:in-a-document"><em>in</em> the <code>Document</code></a>), and which
    also has a <code id="assigning-a-media-controller-declaratively:attr-media-mediagroup-4"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> attribute, and whose <code id="assigning-a-media-controller-declaratively:attr-media-mediagroup-5"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> attribute has the same value as the new value of
    <var>m</var>'s <code id="assigning-a-media-controller-declaratively:attr-media-mediagroup-6"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> attribute, then
    let <var>controller</var> be that <a href="/breakup/specs/html-media/#media-element" id="assigning-a-media-controller-declaratively:media-element-8">media element</a>'s <a href="/breakup/specs/html-media/#current-media-controller" id="assigning-a-media-controller-declaratively:current-media-controller-3">current media
    controller</a>.</p>

    <p>Otherwise, let <var>controller</var> be a newly created
    <code id="assigning-a-media-controller-declaratively:mediacontroller-2"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>.</p>

   </li><li><p>Let <var>m</var>'s <a href="/breakup/specs/html-media/#current-media-controller" id="assigning-a-media-controller-declaratively:current-media-controller-4">current media controller</a> be <var>controller</var>.</p></li><li><p>Let <var>new controller</var> be <var>m</var>'s <a href="/breakup/specs/html-media/#current-media-controller" id="assigning-a-media-controller-declaratively:current-media-controller-5">current media
   controller</a>.</p></li><li><p><a href="/breakup/specs/html-media/#bring-the-media-element-up-to-speed-with-its-new-media-controller" id="assigning-a-media-controller-declaratively:bring-the-media-element-up-to-speed-with-its-new-media-controller">Bring the media element up to speed with its new media
   controller</a>.</p></li><li><p><i>Update controllers</i>: If <var>old
   controller</var> and <var>new controller</var> are the
   same (whether both null or both the same controller) then abort
   these steps.</p></li><li><p>If <var>old controller</var> is not null and still has one or more <a href="/breakup/specs/html-media/#slaved-media-elements" id="assigning-a-media-controller-declaratively:slaved-media-elements">slaved
   media elements</a>, then <a href="/breakup/specs/html-media/#report-the-controller-state" id="assigning-a-media-controller-declaratively:report-the-controller-state">report the controller state</a> for <var>old
   controller</var>.</p></li><li><p>If <var>new controller</var> is not null, then <a href="/breakup/specs/html-media/#report-the-controller-state" id="assigning-a-media-controller-declaratively:report-the-controller-state-2">report the controller
   state</a> for <var>new controller</var>.</p></li></ol>

  <p>The <dfn id="dom-media-mediagroup"><code>mediaGroup</code></dfn> IDL attribute on <a href="/breakup/specs/html-media/#media-element" id="assigning-a-media-controller-declaratively:media-element-9">media elements</a> must <a href="/breakup/specs/core-algorithms/#reflect" id="assigning-a-media-controller-declaratively:reflect">reflect</a> the <code id="assigning-a-media-controller-declaratively:attr-media-mediagroup-7"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> content attribute.</p>

  

  <div class="example">

   <p>Multiple <a href="/breakup/specs/html-media/#media-element" id="assigning-a-media-controller-declaratively:media-element-10">media elements</a> referencing the same <a href="/breakup/specs/html-media/#media-resource" id="assigning-a-media-controller-declaratively:media-resource">media
   resource</a> will share a single network request. This can be used to efficiently play two
   (video) tracks from the same <a href="/breakup/specs/html-media/#media-resource" id="assigning-a-media-controller-declaratively:media-resource-2">media resource</a> in two different places on the screen.
   Used with the <code id="assigning-a-media-controller-declaratively:attr-media-mediagroup-8"><a href="/breakup/specs/html-media/#attr-media-mediagroup">mediagroup</a></code> attribute, these elements can
   also be kept synchronised.</p>

   <p>In this example, a sign-languge interpreter track from a movie file is overlaid on the primary
   video track of that same video file using two <code id="assigning-a-media-controller-declaratively:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> elements, some CSS, and an
   implicit <code id="assigning-a-media-controller-declaratively:mediacontroller-3"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>:</p>

   <pre>&lt;article&gt;
 &lt;style scoped&gt;
  div { margin: 1em auto; position: relative; width: 400px; height: 300px; }
  video { position; absolute; bottom: 0; right: 0; }
  video:first-child { width: 100%; height: 100%; }
  video:last-child { width: 30%; }
 &lt;/style&gt;
 &lt;div&gt;
  &lt;video src="movie.vid#track=Video&amp;amp;track=English" autoplay controls mediagroup=movie&gt;&lt;/video&gt;
  &lt;video src="movie.vid#track=sign" autoplay mediagroup=movie&gt;&lt;/video&gt;
 &lt;/div&gt;
&lt;/article&gt;</pre>

  </div></section></section>






  <section><h2>Timed text tracks</h2>

  <section><h2>Text track model</h2>

  <p>A <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element">media element</a> can have a group of associated <dfn id="text-track">text
  tracks</dfn>, known as the <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-2">media element</a>'s <dfn id="list-of-text-tracks">list of text tracks</dfn>. The <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track">text tracks</a> are sorted as follows:</p>

  <ol class="brief"><li>The <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-2">text tracks</a> corresponding to <code id="text-track-model:the-track-element"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element
   children of the <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-3">media element</a>, in <a href="/breakup/specs/core-algorithms/#tree-order" id="text-track-model:tree-order">tree order</a>.</li><li>Any <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-3">text tracks</a> added using the <code id="text-track-model:dom-media-addtexttrack"><a href="/breakup/specs/html-media/#dom-media-addtexttrack">addTextTrack()</a></code> method, in the order they were added, oldest
   first.</li><li>Any <a href="/breakup/specs/html-media/#media-resource-specific-text-track" id="text-track-model:media-resource-specific-text-track">media-resource-specific text
   tracks</a> (<a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-4">text tracks</a> corresponding to data in the
   <a href="/breakup/specs/html-media/#media-resource" id="text-track-model:media-resource">media resource</a>), in the order defined by the <a href="/breakup/specs/html-media/#media-resource" id="text-track-model:media-resource-2">media resource</a>'s format
   specification.</li></ol>

  <p>A <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-5">text track</a> consists of:</p>

  <dl><dt><dfn id="text-track-kind">The kind of text track</dfn>

   </dt><dd>

    <p>This decides how the track is handled by the user agent. The kind is represented by a string.
    The possible strings are:</p>

    <ul class="brief"><li><dfn id="dom-texttrack-kind-subtitles"><code>subtitles</code></dfn>
     </li><li><dfn id="dom-texttrack-kind-captions"><code>captions</code></dfn>
     </li><li><dfn id="dom-texttrack-kind-descriptions"><code>descriptions</code></dfn>
     </li><li><dfn id="dom-texttrack-kind-chapters"><code>chapters</code></dfn>
     </li><li><dfn id="dom-texttrack-kind-metadata"><code>metadata</code></dfn>
    </li></ul>

    <p>The <a href="/breakup/specs/html-media/#text-track-kind" id="text-track-model:text-track-kind">kind of track</a> can change dynamically, in the case of
    a <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-6">text track</a> corresponding to a <code id="text-track-model:the-track-element-2"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element.</p>

   </dd><dt><dfn id="text-track-label">A label</dfn>

   </dt><dd>

    <p>This is a human-readable string intended to identify the track for the user.</p>

    <p>The <a href="/breakup/specs/html-media/#text-track-label" id="text-track-model:text-track-label">label of a track</a> can change dynamically, in the
    case of a <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-7">text track</a> corresponding to a <code id="text-track-model:the-track-element-3"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element.</p>

    <p>When a <a href="/breakup/specs/html-media/#text-track-label" id="text-track-model:text-track-label-2">text track label</a> is the empty string, the user agent should automatically
    generate an appropriate label from the text track's other properties (e.g. the kind of text
    track and the text track's language) for use in its user interface. This automatically-generated
    label is not exposed in the API.</p>

   </dd><dt><dfn id="text-track-in-band-metadata-track-dispatch-type">An in-band metadata track dispatch type</dfn>

   </dt><dd>

    <p>This is a string extracted from the <a href="/breakup/specs/html-media/#media-resource" id="text-track-model:media-resource-3">media resource</a> specifically for in-band
    metadata tracks to enable such tracks to be dispatched to different scripts in the document.</p>

    <p class="example">For example, a traditional TV station broadcast streamed on the Web and
    augmented with Web-specific interactive features could include text tracks with metadata for ad
    targeting, trivia game data during game shows, player states during sports games, recipe
    information during food programs, and so forth. As each program starts and ends, new tracks
    might be added or removed from the stream, and as each one is added, the user agent could bind
    them to dedicated script modules using the value of this attribute.</p>

    <p>Other than for in-band metadata text tracks, the <a href="/breakup/specs/html-media/#text-track-in-band-metadata-track-dispatch-type" id="text-track-model:text-track-in-band-metadata-track-dispatch-type">in-band metadata track dispatch type</a> is the empty string. How this
    value is populated for different media formats is described in <a href="/breakup/specs/html-media/#steps-to-expose-a-media-resource-specific-text-track" id="text-track-model:steps-to-expose-a-media-resource-specific-text-track">steps to expose a
    media-resource-specific text track</a>.</p>

   </dd><dt><dfn id="text-track-language">A language</dfn>

   </dt><dd>

    <p>This is a string (a BCP 47 language tag) representing the language of the text track's cues.
    [[!BCP47]]</p>

    <p>The <a href="/breakup/specs/html-media/#text-track-language" id="text-track-model:text-track-language">language of a text track</a> can change dynamically,
    in the case of a <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-8">text track</a> corresponding to a <code id="text-track-model:the-track-element-4"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element.</p>

   </dd><dt><dfn id="text-track-readiness-state">A readiness state</dfn>

   </dt><dd>

    <p>One of the following:</p>

    <dl><dt><dfn id="text-track-not-loaded">Not loaded</dfn>

     </dt><dd>

      <p>Indicates that the text track's cues have not been obtained.</p>

     </dd><dt><dfn id="text-track-loading">Loading</dfn>

     </dt><dd>

      <p>Indicates that the text track is loading and there have been no fatal errors encountered so
      far. Further cues might still be added to the track by the parser.</p>

     </dd><dt><dfn id="text-track-loaded">Loaded</dfn>

     </dt><dd>

      <p>Indicates that the text track has been loaded with no fatal errors.</p>

     </dd><dt><dfn id="text-track-failed-to-load">Failed to load</dfn>

     </dt><dd>

      <p>Indicates that the text track was enabled, but when the user agent attempted to obtain it,
      this failed in some way (e.g. <a href="/breakup/specs/core-algorithms/#url" id="text-track-model:url">URL</a> could not be <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="text-track-model:resolve-a-url">resolved</a>, network error, unknown text track format). Some or all of the cues are
      likely missing and will not be obtained.</p>

     </dd></dl>

    <p>The <a href="/breakup/specs/html-media/#text-track-readiness-state" id="text-track-model:text-track-readiness-state">readiness state</a> of a <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-9">text
    track</a> changes dynamically as the track is obtained.</p>

   </dd><dt><dfn id="text-track-mode">A mode</dfn>

   </dt><dd>

    <p>One of the following:</p>

    <dl><dt><dfn id="text-track-disabled">Disabled</dfn>

     </dt><dd>

      <p>Indicates that the text track is not active. Other than for the purposes of exposing the
      track in the DOM, the user agent is ignoring the text track. No cues are active, no events are
      fired, and the user agent will not attempt to obtain the track's cues.</p>

     </dd><dt><dfn id="text-track-hidden">Hidden</dfn>

     </dt><dd>

      <p>Indicates that the text track is active, but that the user agent is not actively displaying
      the cues. If no attempt has yet been made to obtain the track's cues, the user agent will
      perform such an attempt momentarily. The user agent is maintaining a list of which cues are
      active, and events are being fired accordingly.</p>

     </dd><dt><dfn id="text-track-showing">Showing</dfn>

     </dt><dd>

      <p>Indicates that the text track is active. If no attempt has yet been made to obtain the
      track's cues, the user agent will perform such an attempt momentarily. The user agent is
      maintaining a list of which cues are active, and events are being fired accordingly. In
      addition, for text tracks whose <a href="/breakup/specs/html-media/#text-track-kind" id="text-track-model:text-track-kind-2">kind</a> is <code id="text-track-model:dom-texttrack-kind-subtitles"><a href="/breakup/specs/html-media/#dom-texttrack-kind-subtitles">subtitles</a></code> or <code id="text-track-model:dom-texttrack-kind-captions"><a href="/breakup/specs/html-media/#dom-texttrack-kind-captions">captions</a></code>, the cues are being overlaid on the video
      as appropriate; for text tracks whose <a href="/breakup/specs/html-media/#text-track-kind" id="text-track-model:text-track-kind-3">kind</a> is <code id="text-track-model:dom-texttrack-kind-descriptions"><a href="/breakup/specs/html-media/#dom-texttrack-kind-descriptions">descriptions</a></code>, the user agent is making the
      cues available to the user in a non-visual fashion; and for text tracks whose <a href="/breakup/specs/html-media/#text-track-kind" id="text-track-model:text-track-kind-4">kind</a> is <code id="text-track-model:dom-texttrack-kind-chapters"><a href="/breakup/specs/html-media/#dom-texttrack-kind-chapters">chapters</a></code>, the user agent is making available to
      the user a mechanism by which the user can navigate to any point in the <a href="/breakup/specs/html-media/#media-resource" id="text-track-model:media-resource-4">media
      resource</a> by selecting a cue.</p>

     </dd></dl>

   </dd><dt><dfn id="text-track-list-of-cues">A list of zero or more cues</dfn>

   </dt><dd>

    <p>A list of <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue">text track cues</a>, along with <dfn id="rules-for-updating-the-text-track-rendering">rules for
    updating the text track rendering</dfn>. For example, for WebVTT, the <a href="/breakup/specs/core-algorithms/#rules-for-updating-the-display-of-webvtt-text-tracks" id="text-track-model:rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating
    the display of WebVTT text tracks</a>. [[!WEBVTT]] </p>

    <p>The <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-model:text-track-list-of-cues">list of cues of a text track</a> can change
    dynamically, either because the <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-10">text track</a> has <a href="/breakup/specs/html-media/#text-track-not-loaded" id="text-track-model:text-track-not-loaded">not yet been loaded</a> or is still <a href="/breakup/specs/html-media/#text-track-loading" id="text-track-model:text-track-loading">loading</a>,
    or due to DOM manipulation.</p>

   </dd></dl>

  <p>Each <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-11">text track</a> has a corresponding <code id="text-track-model:texttrack"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object.</p>

  <hr>

  <p>Each <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-4">media element</a> has a <dfn id="list-of-pending-text-tracks">list of pending text tracks</dfn>, which must
  initially be empty, a <dfn id="blocked-on-parser">blocked-on-parser</dfn> flag, which must initially be false, and a
  <dfn id="did-perform-automatic-track-selection">did-perform-automatic-track-selection</dfn> flag, which must also initially be false.</p>

  <p>When the user agent is required to <dfn id="populate-the-list-of-pending-text-tracks">populate the list of pending text tracks</dfn> of a
  <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-5">media element</a>, the user agent must add to the element's <a href="/breakup/specs/html-media/#list-of-pending-text-tracks" id="text-track-model:list-of-pending-text-tracks">list of pending text
  tracks</a> each <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-12">text track</a> in the element's <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-model:list-of-text-tracks">list of text tracks</a> whose
  <a href="/breakup/specs/html-media/#text-track-mode" id="text-track-model:text-track-mode">text track mode</a> is not <a href="/breakup/specs/html-media/#text-track-disabled" id="text-track-model:text-track-disabled">disabled</a> and whose
  <a href="/breakup/specs/html-media/#text-track-readiness-state" id="text-track-model:text-track-readiness-state-2">text track readiness state</a> is  <a href="/breakup/specs/html-media/#text-track-loading" id="text-track-model:text-track-loading-2">loading</a>.</p>

  <p>Whenever a <code id="text-track-model:the-track-element-5"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element's parent node changes, the user agent must remove the
  corresponding <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-13">text track</a> from any <a href="/breakup/specs/html-media/#list-of-pending-text-tracks" id="text-track-model:list-of-pending-text-tracks-2">list of pending text tracks</a> that it is
  in.</p>

  <p>Whenever a <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-14">text track</a>'s <a href="/breakup/specs/html-media/#text-track-readiness-state" id="text-track-model:text-track-readiness-state-3">text track readiness state</a> changes to either
  <a href="/breakup/specs/html-media/#text-track-loaded" id="text-track-model:text-track-loaded">loaded</a> or <a href="/breakup/specs/html-media/#text-track-failed-to-load" id="text-track-model:text-track-failed-to-load">failed to
  load</a>, the user agent must remove it from any <a href="/breakup/specs/html-media/#list-of-pending-text-tracks" id="text-track-model:list-of-pending-text-tracks-3">list of pending text tracks</a> that
  it is in.</p>

  <p>When a <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-6">media element</a> is created by an <a href="/breakup/specs/html-syntax/#html-parser" id="text-track-model:html-parser">HTML parser</a> or <a href="/breakup/specs/xhtml-syntax/#xml-parser" id="text-track-model:xml-parser">XML
  parser</a>, the user agent must set the element's <a href="/breakup/specs/html-media/#blocked-on-parser" id="text-track-model:blocked-on-parser">blocked-on-parser</a> flag to true.
  When a <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-7">media element</a> is popped off the <a href="/breakup/specs/html-syntax/#stack-of-open-elements" id="text-track-model:stack-of-open-elements">stack of open elements</a> of an
  <a href="/breakup/specs/html-syntax/#html-parser" id="text-track-model:html-parser-2">HTML parser</a> or <a href="/breakup/specs/xhtml-syntax/#xml-parser" id="text-track-model:xml-parser-2">XML parser</a>, the user agent must <a href="/breakup/specs/html-media/#honor-user-preferences-for-automatic-text-track-selection" id="text-track-model:honor-user-preferences-for-automatic-text-track-selection">honor user
  preferences for automatic text track selection</a>, <a href="/breakup/specs/html-media/#populate-the-list-of-pending-text-tracks" id="text-track-model:populate-the-list-of-pending-text-tracks">populate the list of pending text
  tracks</a>, and set the element's <a href="/breakup/specs/html-media/#blocked-on-parser" id="text-track-model:blocked-on-parser-2">blocked-on-parser</a> flag to false.</p>

  <p>The <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-15">text tracks</a> of a <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-8">media element</a> are <dfn id="the-text-tracks-are-ready">ready</dfn> when both the element's <a href="/breakup/specs/html-media/#list-of-pending-text-tracks" id="text-track-model:list-of-pending-text-tracks-4">list of pending text
  tracks</a> is empty and the element's <a href="/breakup/specs/html-media/#blocked-on-parser" id="text-track-model:blocked-on-parser-3">blocked-on-parser</a> flag is false.</p>

  <p>Each <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-9">media element</a> has a <dfn id="pending-text-track-change-notification-flag">pending text track change notification flag</dfn>,
  which must initially be unset.</p>

  <p>Whenever a <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-16">text track</a> that is in a <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-10">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-model:list-of-text-tracks-2">list of text
  tracks</a> has its <a href="/breakup/specs/html-media/#text-track-mode" id="text-track-model:text-track-mode-2">text track mode</a> change value, the user agent must run the
  following steps for the <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-11">media element</a>:</p>

  <ol><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-12">media element</a>'s <a href="/breakup/specs/html-media/#pending-text-track-change-notification-flag" id="text-track-model:pending-text-track-change-notification-flag">pending text track change notification
   flag</a> is set, abort these steps.</p></li><li><p>Set the <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-13">media element</a>'s <a href="/breakup/specs/html-media/#pending-text-track-change-notification-flag" id="text-track-model:pending-text-track-change-notification-flag-2">pending text track change notification
   flag</a>.</p></li><li>

    <p><a href="/breakup/specs/browser-dom/#queue-a-task" id="text-track-model:queue-a-task">Queue a task</a> that runs the following substeps:</p>

    <ol><li><p>Unset the <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-14">media element</a>'s <a href="/breakup/specs/html-media/#pending-text-track-change-notification-flag" id="text-track-model:pending-text-track-change-notification-flag-3">pending text track change notification
     flag</a>.</p></li><li><p><a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="text-track-model:fire-a-simple-event">Fire a simple event</a> named <code id="text-track-model:event-media-change"><a href="/breakup/specs/html-media/#event-media-change">change</a></code> at
     the <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-15">media element</a>'s <code id="text-track-model:dom-media-texttracks"><a href="/breakup/specs/html-media/#dom-media-texttracks">textTracks</a></code>
     attribute's <code id="text-track-model:texttracklist"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object.</p></li></ol>

   </li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-16">media element</a>'s <a href="/breakup/specs/html-media/#show-poster-flag" id="text-track-model:show-poster-flag">show poster flag</a> is not set, run the
   <i id="text-track-model:time-marches-on"><a href="/breakup/specs/html-media/#time-marches-on">time marches on</a></i> steps.</p></li></ol>

  <p>The <a href="/breakup/specs/browser-dom/#task-source" id="text-track-model:task-source">task source</a> for the <a href="/breakup/specs/browser-dom/#concept-task" id="text-track-model:concept-task">tasks</a> listed in this
  section is the <a href="/breakup/specs/browser-dom/#dom-manipulation-task-source" id="text-track-model:dom-manipulation-task-source">DOM manipulation task source</a>.</p>

  <hr>

  <p>A <dfn id="text-track-cue">text track cue</dfn> is the unit of time-sensitive data in a <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-17">text track</a>,
  corresponding for instance for subtitles and captions to the text that appears at a particular
  time and disappears at another time.</p>

  <p>Each <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-2">text track cue</a> consists of:</p>

  <dl><dt><dfn id="text-track-cue-identifier">An identifier</dfn>
   </dt><dd>
    <p>An arbitrary string.</p>
   </dd><dt><dfn id="text-track-cue-start-time">A start time</dfn>
   </dt><dd>
    <p>The time, in seconds and fractions of a second, that describes the beginning of the range of
    the <a href="/breakup/specs/html-media/#media-data" id="text-track-model:media-data">media data</a> to which the cue applies.</p>
   </dd><dt><dfn id="text-track-cue-end-time">An end time</dfn>
   </dt><dd>
    <p>The time, in seconds and fractions of a second, that describes the end of the range of the
    <a href="/breakup/specs/html-media/#media-data" id="text-track-model:media-data-2">media data</a> to which the cue applies.</p>
   </dd><dt><dfn id="text-track-cue-pause-on-exit-flag">A pause-on-exit flag</dfn>
   </dt><dd>
    <p>A boolean indicating whether playback of the <a href="/breakup/specs/html-media/#media-resource" id="text-track-model:media-resource-5">media resource</a> is to pause when the
    end of the range to which the cue applies is reached.</p>
   </dd><dt>Some additional format-specific data</dt><dd>
    <p>Additional fields, as needed for the format, including the actual data of the cue. For example, WebVTT has a <a href="/breakup/specs/core-algorithms/#text-track-cue-writing-direction" id="text-track-model:text-track-cue-writing-direction">text track cue
    writing direction</a> and so forth. [[!WEBVTT]]</p>
   </dd><dt><dfn id="text-track-cue-data">The data of the cue</dfn></dt><dd>
  <p>The raw data of the cue, and <dfn id="rules-for-rendering-the-cue-in-isolation">rules for rendering the cue in isolation</dfn>.</p>
  <p>The precise nature of this data is defined by the format. For example, WebVTT uses text.</p>
</dd><dt><dfn id="text-track-rules-for-extracting-the-chapter-title">Rules for extracting the chapter title</dfn>
   </dt><dd>
    <p>An algorithm which, when applied to the cue, returns a string that can be used in user
    interfaces that use the cue as a chapter title.</p>
   </dd></dl>

  <p class="note">The <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="text-track-model:text-track-cue-start-time">text track cue start time</a> and <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="text-track-model:text-track-cue-end-time">text track cue end
  time</a> can be negative. (The <a href="/breakup/specs/html-media/#current-playback-position" id="text-track-model:current-playback-position">current playback position</a> can never be negative,
  though, so cues entirely before time zero cannot be active.)</p>

  <p>Each <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-3">text track cue</a> has a corresponding <code id="text-track-model:texttrackcue"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> object (or more
  specifically, an object that inherits from <code id="text-track-model:texttrackcue-2"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> — for example, WebVTT
  cues use the <code id="text-track-model:vttcue"><a href="/breakup/specs/core-algorithms/#vttcue">VTTCue</a></code> interface). A <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-4">text track cue</a>'s in-memory
  representation can be dynamically changed through this <code id="text-track-model:texttrackcue-3"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> API. [[!WEBVTT]]</p>

  <p>A <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-5">text track cue</a> is associated with <a href="/breakup/specs/html-media/#rules-for-updating-the-text-track-rendering" id="text-track-model:rules-for-updating-the-text-track-rendering">rules for updating the text track
  rendering</a>, as defined by the specification for the specific kind of <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-6">text track
  cue</a>. These rules are used specifically when the object representing the cue is added to a
  <code id="text-track-model:texttrack-2"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object using the <code id="text-track-model:dom-texttrack-addcue"><a href="/breakup/specs/html-media/#dom-texttrack-addcue">addCue()</a></code>
  method.</p>

  <p>In addition, each <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-7">text track cue</a> has two pieces of dynamic information:</p>

  <dl><dt>The <dfn id="text-track-cue-active-flag">active flag</dfn>
   </dt><dd>

    <p>This flag must be initially unset. The flag is used to ensure events are fired appropriately
    when the cue becomes active or inactive, and to make sure the right cues are rendered.</p>

    <p>The user agent must synchronously unset this flag whenever the <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-8">text track cue</a> is
    removed from its <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-18">text track</a>'s <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-model:text-track-list-of-cues-2">text track list of cues</a>; whenever the
    <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-19">text track</a> itself is removed from its <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-17">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-model:list-of-text-tracks-3">list of
    text tracks</a> or has its <a href="/breakup/specs/html-media/#text-track-mode" id="text-track-model:text-track-mode-3">text track mode</a> changed to <a href="/breakup/specs/html-media/#text-track-disabled" id="text-track-model:text-track-disabled-2">disabled</a>; and whenever the <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-18">media element</a>'s <code id="text-track-model:dom-media-readystate"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> is changed back to <code id="text-track-model:dom-media-have_nothing"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>. When the flag is unset in this way for one
    or more cues in <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-20">text tracks</a> that were <a href="/breakup/specs/html-media/#text-track-showing" id="text-track-model:text-track-showing">showing</a> prior to the relevant incident, the user agent must, after having unset
    the flag for all the affected cues, apply the <a href="/breakup/specs/html-media/#rules-for-updating-the-text-track-rendering" id="text-track-model:rules-for-updating-the-text-track-rendering-2">rules for updating the text track
    rendering</a> of those <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-21">text tracks</a>. For example, for <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-22">text tracks</a> based on WebVTT, the <a href="/breakup/specs/core-algorithms/#rules-for-updating-the-display-of-webvtt-text-tracks" id="text-track-model:rules-for-updating-the-display-of-webvtt-text-tracks-2">rules for updating the display
    of WebVTT text tracks</a>. [[!WEBVTT]]</p> </dd><dt>The <dfn id="text-track-cue-display-state">display state</dfn>
   </dt><dd>

    <p>This is used as part of the rendering model, to keep cues in a consistent position. It must
    initially be empty. Whenever the <a href="/breakup/specs/html-media/#text-track-cue-active-flag" id="text-track-model:text-track-cue-active-flag">text track cue active flag</a> is unset, the user
    agent must empty the <a href="/breakup/specs/html-media/#text-track-cue-display-state" id="text-track-model:text-track-cue-display-state">text track cue display state</a>.</p>

   </dd></dl>

  <p>The <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-9">text track cues</a> of a <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-19">media element</a>'s
  <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-23">text tracks</a> are ordered relative to each other in the <dfn id="text-track-cue-order">text
  track cue order</dfn>, which is determined as follows: first group the <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-10">cues</a> by their <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-24">text track</a>, with the groups being sorted in the same order
  as their <a href="/breakup/specs/html-media/#text-track" id="text-track-model:text-track-25">text tracks</a> appear in the <a href="/breakup/specs/html-media/#media-element" id="text-track-model:media-element-20">media element</a>'s
  <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-model:list-of-text-tracks-4">list of text tracks</a>; then, within each group, <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-11">cues</a> must be sorted by their <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="text-track-model:text-track-cue-start-time-2">start
  time</a>, earliest first; then, any <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-12">cues</a> with the same
  <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="text-track-model:text-track-cue-start-time-3">start time</a> must be sorted by their <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="text-track-model:text-track-cue-end-time-2">end time</a>, latest first; and finally, any <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-model:text-track-cue-13">cues</a> with identical <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="text-track-model:text-track-cue-end-time-3">end
  times</a> must be sorted in the order they were last added to their respective <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-model:text-track-list-of-cues-3">text track
  list of cues</a>, oldest first (so e.g. for cues from a WebVTT file, that would initially be
  the order in which the cues were listed in the file). [[!WEBVTT]]</p></section>


  <section><h2>Sourcing in-band text tracks</h2>

  <p>A <dfn id="media-resource-specific-text-track">media-resource-specific text track</dfn> is a <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track">text track</a> that corresponds
  to data found in the <a href="/breakup/specs/html-media/#media-resource" id="sourcing-in-band-text-tracks:media-resource">media resource</a>.</p>


  

  <p>Rules for processing and rendering such data are defined by the relevant specifications, e.g.
  the specification of the video format if the <a href="/breakup/specs/html-media/#media-resource" id="sourcing-in-band-text-tracks:media-resource-2">media resource</a> is a video. Details for
  some legacy formats can be found in the <cite>Sourcing In-band Media Resource Tracks from Media
  Containers into HTML</cite> specification. [[!INBAND]]</p>

  <p>When a <a href="/breakup/specs/html-media/#media-resource" id="sourcing-in-band-text-tracks:media-resource-3">media resource</a> contains data that the user agent recognises and supports as
  being equivalent to a <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track-2">text track</a>, the user agent <a href="/breakup/specs/html-media/#found-a-media-resource-specific-timed-track">runs</a> the <dfn id="steps-to-expose-a-media-resource-specific-text-track">steps to expose a
  media-resource-specific text track</dfn> with the relevant data, as follows.</p>

  

  <ol><li><p>Associate the relevant data with a new <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track-3">text track</a> and its corresponding new
   <code id="sourcing-in-band-text-tracks:texttrack"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object. The <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track-4">text track</a> is a <a href="/breakup/specs/html-media/#media-resource-specific-text-track" id="sourcing-in-band-text-tracks:media-resource-specific-text-track">media-resource-specific
   text track</a>.</p></li><li><p>Set the new <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track-5">text track</a>'s <a href="/breakup/specs/html-media/#text-track-kind" id="sourcing-in-band-text-tracks:text-track-kind">kind</a>, <a href="/breakup/specs/html-media/#text-track-label" id="sourcing-in-band-text-tracks:text-track-label">label</a>, and <a href="/breakup/specs/html-media/#text-track-language" id="sourcing-in-band-text-tracks:text-track-language">language</a>
   based on the semantics of the relevant data, as defined by the relevant specification. If there
   is no label in that data, then the <a href="/breakup/specs/html-media/#text-track-label" id="sourcing-in-band-text-tracks:text-track-label-2">label</a> must be set to the
   empty string.</p></li><li><p>Associate the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="sourcing-in-band-text-tracks:text-track-list-of-cues">text track list of cues</a> with the <a href="/breakup/specs/html-media/#rules-for-updating-the-text-track-rendering" id="sourcing-in-band-text-tracks:rules-for-updating-the-text-track-rendering">rules for updating the
   text track rendering</a> appropriate for the format in question.</p>

   </li><li>

    <p>If the new <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track-6">text track</a>'s <a href="/breakup/specs/html-media/#text-track-kind" id="sourcing-in-band-text-tracks:text-track-kind-2">kind</a> is <code id="sourcing-in-band-text-tracks:dom-texttrack-kind-metadata"><a href="/breakup/specs/html-media/#dom-texttrack-kind-metadata">metadata</a></code>, then set the <a href="/breakup/specs/html-media/#text-track-in-band-metadata-track-dispatch-type" id="sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type">text track in-band
    metadata track dispatch type</a> as follows, based on the type of the <a href="/breakup/specs/html-media/#media-resource" id="sourcing-in-band-text-tracks:media-resource-4">media
    resource</a>:</p>

    <dl class="switch"><dt>If the <a href="/breakup/specs/html-media/#media-resource" id="sourcing-in-band-text-tracks:media-resource-5">media resource</a> is an Ogg file</dt><dd>The <a href="/breakup/specs/html-media/#text-track-in-band-metadata-track-dispatch-type" id="sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-2">text track in-band metadata track dispatch type</a> must be set to the value
     of the Name header field. [[!OGGSKELETONHEADERS]]</dd><dt>If the <a href="/breakup/specs/html-media/#media-resource" id="sourcing-in-band-text-tracks:media-resource-6">media resource</a> is a WebM file</dt><dd>The <a href="/breakup/specs/html-media/#text-track-in-band-metadata-track-dispatch-type" id="sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-3">text track in-band metadata track dispatch type</a> must be set to the value
     of the <code>CodecID</code> element. [[!WEBMCG]]</dd><dt>If the <a href="/breakup/specs/html-media/#media-resource" id="sourcing-in-band-text-tracks:media-resource-7">media resource</a> is an MPEG-2 file</dt><dd>Let <var>stream type</var> be the value of the "stream_type" field describing the
     text track's type in the file's program map section, interpreted as an 8-bit unsigned integer.
     Let <var>length</var> be the value of the "ES_info_length" field for the track in the
     same part of the program map section, interpreted as an integer as defined by the MPEG-2
     specification. Let <var>descriptor bytes</var> be the <var>length</var> bytes
     following the "ES_info_length" field. The <a href="/breakup/specs/html-media/#text-track-in-band-metadata-track-dispatch-type" id="sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-4">text track in-band metadata track dispatch
     type</a> must be set to the concatenation of the <var>stream type</var> byte and
     the zero or more <var>descriptor bytes</var> bytes, expressed in hexadecimal using
     <a href="/breakup/specs/core-algorithms/#uppercase-ascii-hex-digits" id="sourcing-in-band-text-tracks:uppercase-ascii-hex-digits">uppercase ASCII hex digits</a>. [[!MPEG2]]

     </dd><dt>If the <a href="/breakup/specs/html-media/#media-resource" id="sourcing-in-band-text-tracks:media-resource-8">media resource</a> is an MPEG-4 file</dt><dd>Let the
     first <code>stsd</code> box of the
     first <code>stbl</code> box of the
     first <code>minf</code> box of the
     first <code>mdia</code> box of the
     <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track-7">text track</a>'s <code>trak</code> box in the
     first <code>moov</code> box
     of the file be the <i>stsd box</i>, if any.

     If the file has no <i>stsd box</i>, or if the <i>stsd box</i> has neither a <code>mett</code> box nor a <code>metx</code> box, then the <a href="/breakup/specs/html-media/#text-track-in-band-metadata-track-dispatch-type" id="sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-5">text track
     in-band metadata track dispatch type</a> must be set to the empty string.

     Otherwise, if the <i>stsd box</i> has a <code>mett</code> box then the <a href="/breakup/specs/html-media/#text-track-in-band-metadata-track-dispatch-type" id="sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-6">text
     track in-band metadata track dispatch type</a> must be set to the concatenation of the
     string "<code>mett</code>", a U+0020 SPACE character, and the value of the first <code>mime_format</code> field of the first <code>mett</code> box of the <i>stsd
     box</i>, or the empty string if that field is absent in that box.

     Otherwise, if the <i>stsd box</i> has no <code>mett</code> box but has a <code>metx</code> box then the <a href="/breakup/specs/html-media/#text-track-in-band-metadata-track-dispatch-type" id="sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-7">text track in-band metadata track dispatch type</a>
     must be set to the concatenation of the string "<code>metx</code>", a U+0020 SPACE
     character, and the value of the first <code>namespace</code> field of the first <code>metx</code> box of the <i>stsd box</i>, or the empty string if that field is absent in
     that box.

     [[!MPEG4]]

     </dd></dl>

   </li><li><p>Populate the new <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track-8">text track</a>'s <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="sourcing-in-band-text-tracks:text-track-list-of-cues-2">list of
   cues</a> with the cues parsed so far, following the <a href="/breakup/specs/html-media/#guidelines-for-exposing-cues-in-various-formats-as-text-track-cues" id="sourcing-in-band-text-tracks:guidelines-for-exposing-cues-in-various-formats-as-text-track-cues">guidelines for exposing
   cues</a>, and begin updating it dynamically as necessary.</p></li><li><p>Set the new <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track-9">text track</a>'s <a href="/breakup/specs/html-media/#text-track-readiness-state" id="sourcing-in-band-text-tracks:text-track-readiness-state">readiness
   state</a> to <a href="/breakup/specs/html-media/#text-track-loaded" id="sourcing-in-band-text-tracks:text-track-loaded">loaded</a>.</p></li><li><p>Set the new <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track-10">text track</a>'s <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-in-band-text-tracks:text-track-mode">mode</a> to the
   mode consistent with the user's preferences and the requirements of the relevant specification
   for the data.</p>

    <p class="note">For instance, if there are no other active subtitles, and this is a forced
    subtitle track (a subtitle track giving subtitles in the audio track's primary language, but
    only for audio that is actually in another language), then those subtitles might be activated
    here.</p>

   </li><li><p>Add the new <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track-11">text track</a> to the <a href="/breakup/specs/html-media/#media-element" id="sourcing-in-band-text-tracks:media-element">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="sourcing-in-band-text-tracks:list-of-text-tracks">list of text
   tracks</a>.</p></li><li><p><a href="/breakup/specs/core-algorithms/#concept-event-fire" id="sourcing-in-band-text-tracks:concept-event-fire">Fire</a> a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="sourcing-in-band-text-tracks:concept-events-trusted">trusted</a> event with the name <code id="sourcing-in-band-text-tracks:event-media-addtrack"><a href="/breakup/specs/html-media/#event-media-addtrack">addtrack</a></code>, that does not bubble and is not cancelable, and that uses
   the <code id="sourcing-in-band-text-tracks:trackevent"><a href="/breakup/specs/html-media/#trackevent">TrackEvent</a></code> interface, with the <code id="sourcing-in-band-text-tracks:dom-trackevent-track"><a href="/breakup/specs/html-media/#dom-trackevent-track">track</a></code>
   attribute initialised to the <a href="/breakup/specs/html-media/#text-track" id="sourcing-in-band-text-tracks:text-track-12">text track</a>'s <code id="sourcing-in-band-text-tracks:texttrack-2"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object, at the
   <a href="/breakup/specs/html-media/#media-element" id="sourcing-in-band-text-tracks:media-element-2">media element</a>'s <code id="sourcing-in-band-text-tracks:dom-media-texttracks"><a href="/breakup/specs/html-media/#dom-media-texttracks">textTracks</a></code> attribute's
   <code id="sourcing-in-band-text-tracks:texttracklist"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object.</p></li></ol></section>

  

  

  



  

  <section><h2>Sourcing out-of-band text tracks</h2>

  <p>When a <code id="sourcing-out-of-band-text-tracks:the-track-element"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element is created, it must be associated with a new <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track">text
  track</a> (with its value set as defined below) and its corresponding new
  <code id="sourcing-out-of-band-text-tracks:texttrack"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object.</p>

  <p>The <a href="/breakup/specs/html-media/#text-track-kind" id="sourcing-out-of-band-text-tracks:text-track-kind">text track kind</a> is determined from the state of the element's <code id="sourcing-out-of-band-text-tracks:attr-track-kind"><a href="/breakup/specs/html-media/#attr-track-kind">kind</a></code> attribute according to the following table; for a state given
  in a cell of the first column, the <a href="/breakup/specs/html-media/#text-track-kind" id="sourcing-out-of-band-text-tracks:text-track-kind-2">kind</a> is the string given
  in the second column:</p>

  <table><thead><tr><th>State
     </th><th>String
   </th></tr></thead><tbody><tr><td><a href="/breakup/specs/html-media/#attr-track-kind-subtitles" id="sourcing-out-of-band-text-tracks:attr-track-kind-subtitles">Subtitles</a>
     </td><td><code id="sourcing-out-of-band-text-tracks:dom-texttrack-kind-subtitles"><a href="/breakup/specs/html-media/#dom-texttrack-kind-subtitles">subtitles</a></code>
    </td></tr><tr><td><a href="/breakup/specs/html-media/#attr-track-kind-captions" id="sourcing-out-of-band-text-tracks:attr-track-kind-captions">Captions</a>
     </td><td><code id="sourcing-out-of-band-text-tracks:dom-texttrack-kind-captions"><a href="/breakup/specs/html-media/#dom-texttrack-kind-captions">captions</a></code>
    </td></tr><tr><td><a href="/breakup/specs/html-media/#attr-track-kind-descriptions" id="sourcing-out-of-band-text-tracks:attr-track-kind-descriptions">Descriptions</a>
     </td><td><code id="sourcing-out-of-band-text-tracks:dom-texttrack-kind-descriptions"><a href="/breakup/specs/html-media/#dom-texttrack-kind-descriptions">descriptions</a></code>
    </td></tr><tr><td><a href="/breakup/specs/html-media/#attr-track-kind-chapters" id="sourcing-out-of-band-text-tracks:attr-track-kind-chapters">Chapters</a>
     </td><td><code id="sourcing-out-of-band-text-tracks:dom-texttrack-kind-chapters"><a href="/breakup/specs/html-media/#dom-texttrack-kind-chapters">chapters</a></code>
    </td></tr><tr><td><a href="/breakup/specs/html-media/#attr-track-kind-metadata" id="sourcing-out-of-band-text-tracks:attr-track-kind-metadata">Metadata</a>
     </td><td><code id="sourcing-out-of-band-text-tracks:dom-texttrack-kind-metadata"><a href="/breakup/specs/html-media/#dom-texttrack-kind-metadata">metadata</a></code>
  </td></tr></tbody></table>

  <p>The <a href="/breakup/specs/html-media/#text-track-label" id="sourcing-out-of-band-text-tracks:text-track-label">text track label</a> is the element's <a href="/breakup/specs/html-media/#track-label" id="sourcing-out-of-band-text-tracks:track-label">track label</a>.</p>

  <p>The <a href="/breakup/specs/html-media/#text-track-language" id="sourcing-out-of-band-text-tracks:text-track-language">text track language</a> is the element's <a href="/breakup/specs/html-media/#track-language" id="sourcing-out-of-band-text-tracks:track-language">track language</a>, if any, or
  the empty string otherwise.</p>

  <p>As the <code id="sourcing-out-of-band-text-tracks:attr-track-kind-2"><a href="/breakup/specs/html-media/#attr-track-kind">kind</a></code>, <code id="sourcing-out-of-band-text-tracks:attr-track-label"><a href="/breakup/specs/html-media/#attr-track-label">label</a></code>,
  and <code id="sourcing-out-of-band-text-tracks:attr-track-srclang"><a href="/breakup/specs/html-media/#attr-track-srclang">srclang</a></code> attributes are set, changed, or removed, the
  <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-2">text track</a> must update accordingly, as per the definitions above.</p>

  <p class="note">Changes to the <a href="/breakup/specs/html-media/#track-url" id="sourcing-out-of-band-text-tracks:track-url">track URL</a> are handled in the algorithm below.</p>

  <p>The <a href="/breakup/specs/html-media/#text-track-readiness-state" id="sourcing-out-of-band-text-tracks:text-track-readiness-state">text track readiness state</a> is initially <a href="/breakup/specs/html-media/#text-track-not-loaded" id="sourcing-out-of-band-text-tracks:text-track-not-loaded">not loaded</a>, and the <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode">text track mode</a> is initially <a href="/breakup/specs/html-media/#text-track-disabled" id="sourcing-out-of-band-text-tracks:text-track-disabled">disabled</a>.</p>

  <p>The <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="sourcing-out-of-band-text-tracks:text-track-list-of-cues">text track list of cues</a> is initially empty. It is dynamically modified when
  the referenced file is parsed. Associated with the list are the <a href="/breakup/specs/html-media/#rules-for-updating-the-text-track-rendering" id="sourcing-out-of-band-text-tracks:rules-for-updating-the-text-track-rendering">rules for updating the text
  track rendering</a> appropriate for the format in question; for WebVTT, this is the <a href="/breakup/specs/core-algorithms/#rules-for-updating-the-display-of-webvtt-text-tracks" id="sourcing-out-of-band-text-tracks:rules-for-updating-the-display-of-webvtt-text-tracks">rules
  for updating the display of WebVTT text tracks</a>. [[!WEBVTT]]</p>

  <p>When a <code id="sourcing-out-of-band-text-tracks:the-track-element-2"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element's parent element changes and the new parent is a <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element">media
  element</a>, then the user agent must add the <code id="sourcing-out-of-band-text-tracks:the-track-element-3"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element's corresponding
  <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-3">text track</a> to the <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-2">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="sourcing-out-of-band-text-tracks:list-of-text-tracks">list of text tracks</a>, and
  then <a href="/breakup/specs/browser-dom/#queue-a-task" id="sourcing-out-of-band-text-tracks:queue-a-task">queue a task</a> to <a href="/breakup/specs/core-algorithms/#concept-event-fire" id="sourcing-out-of-band-text-tracks:concept-event-fire">fire</a> a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="sourcing-out-of-band-text-tracks:concept-events-trusted">trusted</a> event with the name <code id="sourcing-out-of-band-text-tracks:event-media-addtrack"><a href="/breakup/specs/html-media/#event-media-addtrack">addtrack</a></code>, that does not bubble and is not cancelable, and that uses
  the <code id="sourcing-out-of-band-text-tracks:trackevent"><a href="/breakup/specs/html-media/#trackevent">TrackEvent</a></code> interface, with the <code id="sourcing-out-of-band-text-tracks:dom-trackevent-track"><a href="/breakup/specs/html-media/#dom-trackevent-track">track</a></code>
  attribute initialised to the <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-4">text track</a>'s <code id="sourcing-out-of-band-text-tracks:texttrack-2"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object, at the
  <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-3">media element</a>'s <code id="sourcing-out-of-band-text-tracks:dom-media-texttracks"><a href="/breakup/specs/html-media/#dom-media-texttracks">textTracks</a></code> attribute's
  <code id="sourcing-out-of-band-text-tracks:texttracklist"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object.</p>

  <p>When a <code id="sourcing-out-of-band-text-tracks:the-track-element-4"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element's parent element changes and the old parent was a <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-4">media
  element</a>, then the user agent must remove the <code id="sourcing-out-of-band-text-tracks:the-track-element-5"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element's corresponding
  <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-5">text track</a> from the <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-5">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="sourcing-out-of-band-text-tracks:list-of-text-tracks-2">list of text tracks</a>,
  and then <a href="/breakup/specs/browser-dom/#queue-a-task" id="sourcing-out-of-band-text-tracks:queue-a-task-2">queue a task</a> to <a href="/breakup/specs/core-algorithms/#concept-event-fire" id="sourcing-out-of-band-text-tracks:concept-event-fire-2">fire</a> a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="sourcing-out-of-band-text-tracks:concept-events-trusted-2">trusted</a> event with the name <code id="sourcing-out-of-band-text-tracks:event-media-removetrack"><a href="/breakup/specs/html-media/#event-media-removetrack">removetrack</a></code>, that does not bubble and is not cancelable, and that
  uses the <code id="sourcing-out-of-band-text-tracks:trackevent-2"><a href="/breakup/specs/html-media/#trackevent">TrackEvent</a></code> interface, with the <code id="sourcing-out-of-band-text-tracks:dom-trackevent-track-2"><a href="/breakup/specs/html-media/#dom-trackevent-track">track</a></code> attribute initialised to the <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-6">text track</a>'s
  <code id="sourcing-out-of-band-text-tracks:texttrack-3"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object, at the <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-6">media element</a>'s <code id="sourcing-out-of-band-text-tracks:dom-media-texttracks-2"><a href="/breakup/specs/html-media/#dom-media-texttracks">textTracks</a></code> attribute's <code id="sourcing-out-of-band-text-tracks:texttracklist-2"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object.</p>
  

  <hr>

  <p>When a <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-7">text track</a> corresponding to a <code id="sourcing-out-of-band-text-tracks:the-track-element-6"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element is added to a
  <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-7">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="sourcing-out-of-band-text-tracks:list-of-text-tracks-3">list of text tracks</a>, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="sourcing-out-of-band-text-tracks:queue-a-task-3">queue a
  task</a> to run the following steps for the <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-8">media element</a>:</p>

  <ol><li><p>If the element's <a href="/breakup/specs/html-media/#blocked-on-parser" id="sourcing-out-of-band-text-tracks:blocked-on-parser">blocked-on-parser</a> flag is true, abort these steps.</p></li><li><p>If the element's <a href="/breakup/specs/html-media/#did-perform-automatic-track-selection" id="sourcing-out-of-band-text-tracks:did-perform-automatic-track-selection">did-perform-automatic-track-selection</a> flag is true, abort
   these steps.</p></li><li><p><a href="/breakup/specs/html-media/#honor-user-preferences-for-automatic-text-track-selection" id="sourcing-out-of-band-text-tracks:honor-user-preferences-for-automatic-text-track-selection">Honor user preferences for automatic text track selection</a> for this
   element.</p></li></ol>

  <p>When the user agent is required to <dfn id="honor-user-preferences-for-automatic-text-track-selection">honor user preferences for automatic text track
  selection</dfn> for a <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-9">media element</a>, the user agent must run the following steps:</p>

  <ol><li><p><a href="/breakup/specs/html-media/#perform-automatic-text-track-selection" id="sourcing-out-of-band-text-tracks:perform-automatic-text-track-selection">Perform automatic text track selection</a> for <code id="sourcing-out-of-band-text-tracks:dom-texttrack-kind-subtitles-2"><a href="/breakup/specs/html-media/#dom-texttrack-kind-subtitles">subtitles</a></code> and <code id="sourcing-out-of-band-text-tracks:dom-texttrack-kind-captions-2"><a href="/breakup/specs/html-media/#dom-texttrack-kind-captions">captions</a></code>.</p></li><li><p><a href="/breakup/specs/html-media/#perform-automatic-text-track-selection" id="sourcing-out-of-band-text-tracks:perform-automatic-text-track-selection-2">Perform automatic text track selection</a> for <code id="sourcing-out-of-band-text-tracks:dom-texttrack-kind-descriptions-2"><a href="/breakup/specs/html-media/#dom-texttrack-kind-descriptions">descriptions</a></code>.</p></li><li><p><a href="/breakup/specs/html-media/#perform-automatic-text-track-selection" id="sourcing-out-of-band-text-tracks:perform-automatic-text-track-selection-3">Perform automatic text track selection</a> for <code id="sourcing-out-of-band-text-tracks:dom-texttrack-kind-chapters-2"><a href="/breakup/specs/html-media/#dom-texttrack-kind-chapters">chapters</a></code>.</p></li><li><p>If there are any <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-8">text tracks</a> in the <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-10">media
   element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="sourcing-out-of-band-text-tracks:list-of-text-tracks-4">list of text tracks</a> whose <a href="/breakup/specs/html-media/#text-track-kind" id="sourcing-out-of-band-text-tracks:text-track-kind-3">text track kind</a> is <code id="sourcing-out-of-band-text-tracks:dom-texttrack-kind-metadata-2"><a href="/breakup/specs/html-media/#dom-texttrack-kind-metadata">metadata</a></code> that correspond to <code id="sourcing-out-of-band-text-tracks:the-track-element-7"><a href="/breakup/specs/html-media/#the-track-element">track</a></code>
   elements with a <code id="sourcing-out-of-band-text-tracks:attr-track-default"><a href="/breakup/specs/html-media/#attr-track-default">default</a></code> attribute set whose <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode-2">text
   track mode</a> is set to <a href="/breakup/specs/html-media/#text-track-disabled" id="sourcing-out-of-band-text-tracks:text-track-disabled-2">disabled</a>, then set the
   <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode-3">text track mode</a> of all such tracks to <a href="/breakup/specs/html-media/#text-track-hidden" id="sourcing-out-of-band-text-tracks:text-track-hidden">hidden</a></p></li><li><p>Set the element's <a href="/breakup/specs/html-media/#did-perform-automatic-track-selection" id="sourcing-out-of-band-text-tracks:did-perform-automatic-track-selection-2">did-perform-automatic-track-selection</a> flag to
   true.</p></li></ol>

  <p>When the steps above say to <dfn id="perform-automatic-text-track-selection">perform automatic text track selection</dfn> for one or more
  <a href="/breakup/specs/html-media/#text-track-kind" id="sourcing-out-of-band-text-tracks:text-track-kind-4">text track kinds</a>, it means to run the following steps:</p>

  <ol><li><p>Let <var>candidates</var> be a list consisting of the <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-9">text tracks</a> in the <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-11">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="sourcing-out-of-band-text-tracks:list-of-text-tracks-5">list of text tracks</a>
   whose <a href="/breakup/specs/html-media/#text-track-kind" id="sourcing-out-of-band-text-tracks:text-track-kind-5">text track kind</a> is one of the kinds that were passed to the algorithm, if any,
   in the order given in the <a href="/breakup/specs/html-media/#list-of-text-tracks" id="sourcing-out-of-band-text-tracks:list-of-text-tracks-6">list of text tracks</a>.</p></li><li><p>If <var>candidates</var> is empty, then abort these steps.</p></li><li><p>If any of the <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-10">text tracks</a> in <var>candidates</var> have a <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode-4">text track mode</a> set to <a href="/breakup/specs/html-media/#text-track-showing" id="sourcing-out-of-band-text-tracks:text-track-showing">showing</a>, abort these steps.</p></li><li>

    <p>If the user has expressed an interest in having a track from <var>candidates</var>
    enabled based on its <a href="/breakup/specs/html-media/#text-track-kind" id="sourcing-out-of-band-text-tracks:text-track-kind-6">text track kind</a>, <a href="/breakup/specs/html-media/#text-track-language" id="sourcing-out-of-band-text-tracks:text-track-language-2">text track language</a>, and
    <a href="/breakup/specs/html-media/#text-track-label" id="sourcing-out-of-band-text-tracks:text-track-label-2">text track label</a>, then set its <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode-5">text track mode</a> to <a href="/breakup/specs/html-media/#text-track-showing" id="sourcing-out-of-band-text-tracks:text-track-showing-2">showing</a>.</p> 

    <p class="note">For example, the user could have set a browser preference to the effect of "I
    want French captions whenever possible", or "If there is a subtitle track with 'Commentary' in
    the title, enable it", or "If there are audio description tracks available, enable one, ideally
    in Swiss German, but failing that in Standard Swiss German or Standard German".</p>

    <p>Otherwise, if there are any <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-11">text tracks</a> in <var>candidates</var> that correspond to <code id="sourcing-out-of-band-text-tracks:the-track-element-8"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> elements with a <code id="sourcing-out-of-band-text-tracks:attr-track-default-2"><a href="/breakup/specs/html-media/#attr-track-default">default</a></code> attribute set whose <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode-6">text track mode</a> is
    set to <a href="/breakup/specs/html-media/#text-track-disabled" id="sourcing-out-of-band-text-tracks:text-track-disabled-3">disabled</a>, then set the <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode-7">text track
    mode</a> of the first such track to <a href="/breakup/specs/html-media/#text-track-showing" id="sourcing-out-of-band-text-tracks:text-track-showing-3">showing</a>.</p>

   </li></ol>

  <p>When a <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-12">text track</a> corresponding to a <code id="sourcing-out-of-band-text-tracks:the-track-element-9"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element experiences any of
  the following circumstances, the user agent must <a href="/breakup/specs/html-media/#start-the-track-processing-model" id="sourcing-out-of-band-text-tracks:start-the-track-processing-model">start the <code>track</code> processing
  model</a> for that <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-13">text track</a> and its <code id="sourcing-out-of-band-text-tracks:the-track-element-10"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element:

  </p><ul><li>The <code id="sourcing-out-of-band-text-tracks:the-track-element-11"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element is created.</li><li>The <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-14">text track</a> has its <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode-8">text track mode</a> changed.</li><li>The <code id="sourcing-out-of-band-text-tracks:the-track-element-12"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element's parent element changes and the new parent is a <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-12">media
   element</a>.</li></ul>

  <p>When a user agent is to <dfn id="start-the-track-processing-model">start the <code>track</code> processing model</dfn> for a
  <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-15">text track</a> and its <code id="sourcing-out-of-band-text-tracks:the-track-element-13"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element, it must run the following algorithm.
  This algorithm interacts closely with the <a href="/breakup/specs/browser-dom/#event-loop" id="sourcing-out-of-band-text-tracks:event-loop">event loop</a> mechanism; in particular, it has
  a <a href="/breakup/specs/browser-dom/#synchronous-section" id="sourcing-out-of-band-text-tracks:synchronous-section">synchronous section</a> (which is triggered as part of the <a href="/breakup/specs/browser-dom/#event-loop" id="sourcing-out-of-band-text-tracks:event-loop-2">event loop</a>
  algorithm). The steps in that section are marked with ⌛.</p>

  <ol><li><p>If another occurrence of this algorithm is already running for this <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-16">text
   track</a> and its <code id="sourcing-out-of-band-text-tracks:the-track-element-14"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element, abort these steps, letting that other algorithm
   take care of this element.</p></li><li><p>If the <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-17">text track</a>'s <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode-9">text track mode</a> is not set to one of <a href="/breakup/specs/html-media/#text-track-hidden" id="sourcing-out-of-band-text-tracks:text-track-hidden-2">hidden</a> or <a href="/breakup/specs/html-media/#text-track-showing" id="sourcing-out-of-band-text-tracks:text-track-showing-4">showing</a>, abort
   these steps.</p></li><li><p>If the <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-18">text track</a>'s <code id="sourcing-out-of-band-text-tracks:the-track-element-15"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element does not have a <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-13">media
   element</a> as a parent, abort these steps.</p></li><li><p>Run the remainder of these steps <a href="/breakup/specs/core-algorithms/#in-parallel" id="sourcing-out-of-band-text-tracks:in-parallel">in parallel</a>, allowing whatever caused these steps to
   run to continue.</p></li><li><p><i>Top</i>: <a href="/breakup/specs/browser-dom/#await-a-stable-state" id="sourcing-out-of-band-text-tracks:await-a-stable-state">Await a stable state</a>. The <a href="/breakup/specs/browser-dom/#synchronous-section" id="sourcing-out-of-band-text-tracks:synchronous-section-2">synchronous section</a>
   consists of the following steps. (The steps in the <a href="/breakup/specs/browser-dom/#synchronous-section" id="sourcing-out-of-band-text-tracks:synchronous-section-3">synchronous section</a> are marked
   with ⌛.)</p></li><li><p>⌛ Set the <a href="/breakup/specs/html-media/#text-track-readiness-state" id="sourcing-out-of-band-text-tracks:text-track-readiness-state-2">text track readiness state</a> to <a href="/breakup/specs/html-media/#text-track-loading" id="sourcing-out-of-band-text-tracks:text-track-loading">loading</a>.</p></li><li><p>⌛ Let <var>URL</var> be the <a href="/breakup/specs/html-media/#track-url" id="sourcing-out-of-band-text-tracks:track-url-2">track URL</a> of the
   <code id="sourcing-out-of-band-text-tracks:the-track-element-16"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element.</p></li><li><p>⌛ If the <code id="sourcing-out-of-band-text-tracks:the-track-element-17"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element's parent is a <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-14">media element</a> then
   let <var>CORS mode</var> be the state of the parent <a href="/breakup/specs/html-media/#media-element" id="sourcing-out-of-band-text-tracks:media-element-15">media element</a>'s <code id="sourcing-out-of-band-text-tracks:attr-media-crossorigin"><a href="/breakup/specs/html-media/#attr-media-crossorigin">crossorigin</a></code> content attribute. Otherwise, let <var>CORS mode</var> be <a href="/breakup/specs/core-algorithms/#attr-crossorigin-none" id="sourcing-out-of-band-text-tracks:attr-crossorigin-none">No CORS</a>.</p></li><li><p>End the <a href="/breakup/specs/browser-dom/#synchronous-section" id="sourcing-out-of-band-text-tracks:synchronous-section-4">synchronous section</a>, continuing the remaining steps
   <a href="/breakup/specs/core-algorithms/#in-parallel" id="sourcing-out-of-band-text-tracks:in-parallel-2">in parallel</a>.</p></li><li>

    <p>If <var>URL</var> is not the empty string, perform a <a href="/breakup/specs/core-algorithms/#potentially-cors-enabled-fetch" id="sourcing-out-of-band-text-tracks:potentially-cors-enabled-fetch">potentially CORS-enabled
    fetch</a> of <var>URL</var>, with the <i>mode</i> being <var>CORS mode</var>, the <i>origin</i> being the <a href="/breakup/specs/browser-dom/#origin-2" id="sourcing-out-of-band-text-tracks:origin-2">origin</a> of the
    <code id="sourcing-out-of-band-text-tracks:the-track-element-18"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element's <a id="sourcing-out-of-band-text-tracks:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>, and the <i>default origin behaviour</i> set
    to <i>fail</i>.</p>

    <p>The resource obtained in this fashion, if any, contains the text track data. If any data is
    obtained, it is by definition <a href="/breakup/specs/core-algorithms/#cors-same-origin" id="sourcing-out-of-band-text-tracks:cors-same-origin">CORS-same-origin</a> (cross-origin resources that are not
    suitably CORS-enabled do not get this far).</p>

    <p>The <a href="/breakup/specs/browser-dom/#concept-task" id="sourcing-out-of-band-text-tracks:concept-task">tasks</a> <a href="/breakup/specs/browser-dom/#queue-a-task" id="sourcing-out-of-band-text-tracks:queue-a-task-4">queued</a> by the
    <a href="/breakup/specs/core-algorithms/#fetch" id="sourcing-out-of-band-text-tracks:fetch">fetching algorithm</a> on the <a href="/breakup/specs/browser-dom/#networking-task-source" id="sourcing-out-of-band-text-tracks:networking-task-source">networking task source</a> to
    process the data as it is being fetched must determine the  type of the resource. If the
     type of the resource is not a supported text track format, the load will fail, as
    described below. Otherwise, the resource's data must be passed to the appropriate parser (e.g.
    the <a href="/breakup/specs/core-algorithms/#webvtt-parser" id="sourcing-out-of-band-text-tracks:webvtt-parser">WebVTT parser</a>) as it is received, with the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="sourcing-out-of-band-text-tracks:text-track-list-of-cues-2">text track list of cues</a> being used for
    that parser's output. [[!WEBVTT]]</p>

    <p class="note">The appropriate parser will incrementally update the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="sourcing-out-of-band-text-tracks:text-track-list-of-cues-3">text track list of
    cues</a> during these <a href="/breakup/specs/browser-dom/#networking-task-source" id="sourcing-out-of-band-text-tracks:networking-task-source-2">networking task
    source</a> <a href="/breakup/specs/browser-dom/#concept-task" id="sourcing-out-of-band-text-tracks:concept-task-2">tasks</a>, as each such task is
    run with whatever data has been received from the network).</p>

    <p class="critical">This specification does not currently say whether or how to check the MIME
    types of text tracks, or whether or how to perform file type sniffing using the actual file
    data. Implementors differ in their intentions on this matter and it is therefore unclear what
    the right solution is. In the absence of any requirement here, the HTTP specification's strict
    requirement to follow the Content-Type header prevails ("Content-Type specifies the media type
    of the underlying data." ... "If and only if the media type is not given by a Content-Type
    field, the recipient MAY attempt to guess the media type via inspection of its content
    and/or the name extension(s) of the URI used to identify the resource.").</p>

    <p>If the <a href="/breakup/specs/core-algorithms/#fetch" id="sourcing-out-of-band-text-tracks:fetch-2">fetching algorithm</a> fails for any reason (network error,
    the server returns an error code, a cross-origin check fails, etc), or if <var>URL</var> is the empty string, then <a href="/breakup/specs/browser-dom/#queue-a-task" id="sourcing-out-of-band-text-tracks:queue-a-task-5">queue a task</a> to first change the
    <a href="/breakup/specs/html-media/#text-track-readiness-state" id="sourcing-out-of-band-text-tracks:text-track-readiness-state-3">text track readiness state</a> to <a href="/breakup/specs/html-media/#text-track-failed-to-load" id="sourcing-out-of-band-text-tracks:text-track-failed-to-load">failed to
    load</a> and then <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="sourcing-out-of-band-text-tracks:fire-a-simple-event">fire a simple event</a> named <code id="sourcing-out-of-band-text-tracks:event-error"><a href="/breakup/specs/html/#event-error">error</a></code> at the <code id="sourcing-out-of-band-text-tracks:the-track-element-19"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element. This <a href="/breakup/specs/browser-dom/#concept-task" id="sourcing-out-of-band-text-tracks:concept-task-3">task</a> must use the <a href="/breakup/specs/browser-dom/#dom-manipulation-task-source" id="sourcing-out-of-band-text-tracks:dom-manipulation-task-source">DOM manipulation task source</a>. </p>

    <p>If the <a href="/breakup/specs/core-algorithms/#fetch" id="sourcing-out-of-band-text-tracks:fetch-3">fetching algorithm</a> does not fail, but the 
    type of the resource is not a supported text track format, or the file was not successfully
    processed (e.g. the format in question is an XML format and the file contained a well-formedness
    error that the XML specification requires be detected and reported to the application), then the
    <a href="/breakup/specs/browser-dom/#concept-task" id="sourcing-out-of-band-text-tracks:concept-task-4">task</a> that is <a href="/breakup/specs/browser-dom/#queue-a-task" id="sourcing-out-of-band-text-tracks:queue-a-task-6">queued</a> by the
    <a href="/breakup/specs/browser-dom/#networking-task-source" id="sourcing-out-of-band-text-tracks:networking-task-source-3">networking task source</a> in which the aforementioned problem is found must change the
    <a href="/breakup/specs/html-media/#text-track-readiness-state" id="sourcing-out-of-band-text-tracks:text-track-readiness-state-4">text track readiness state</a> to <a href="/breakup/specs/html-media/#text-track-failed-to-load" id="sourcing-out-of-band-text-tracks:text-track-failed-to-load-2">failed to
    load</a> and <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="sourcing-out-of-band-text-tracks:fire-a-simple-event-2">fire a simple event</a> named <code id="sourcing-out-of-band-text-tracks:event-error-2"><a href="/breakup/specs/html/#event-error">error</a></code>
    at the <code id="sourcing-out-of-band-text-tracks:the-track-element-20"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element.</p>

    <p>If the <a href="/breakup/specs/core-algorithms/#fetch" id="sourcing-out-of-band-text-tracks:fetch-4">fetching algorithm</a> does not fail, and the file was
    successfully processed, then the final <a href="/breakup/specs/browser-dom/#concept-task" id="sourcing-out-of-band-text-tracks:concept-task-5">task</a> that is <a href="/breakup/specs/browser-dom/#queue-a-task" id="sourcing-out-of-band-text-tracks:queue-a-task-7">queued</a> by the <a href="/breakup/specs/browser-dom/#networking-task-source" id="sourcing-out-of-band-text-tracks:networking-task-source-4">networking task source</a>, after it has
    finished parsing the data, must change the <a href="/breakup/specs/html-media/#text-track-readiness-state" id="sourcing-out-of-band-text-tracks:text-track-readiness-state-5">text track readiness state</a> to <a href="/breakup/specs/html-media/#text-track-loaded" id="sourcing-out-of-band-text-tracks:text-track-loaded">loaded</a>, and <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="sourcing-out-of-band-text-tracks:fire-a-simple-event-3">fire a simple event</a> named <code id="sourcing-out-of-band-text-tracks:event-load"><a href="/breakup/specs/html/#event-load">load</a></code> at the <code id="sourcing-out-of-band-text-tracks:the-track-element-21"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element.</p>

    <p>If, while the <a href="/breakup/specs/core-algorithms/#fetch" id="sourcing-out-of-band-text-tracks:fetch-5">fetching algorithm</a> is active, either:</p>

    <ul><li>the <a href="/breakup/specs/html-media/#track-url" id="sourcing-out-of-band-text-tracks:track-url-3">track URL</a> changes so that it is no longer equal to <var>URL</var>, while the <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode-10">text track mode</a> is set to <a href="/breakup/specs/html-media/#text-track-hidden" id="sourcing-out-of-band-text-tracks:text-track-hidden-3">hidden</a> or <a href="/breakup/specs/html-media/#text-track-showing" id="sourcing-out-of-band-text-tracks:text-track-showing-5">showing</a>; or</li><li>the <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode-11">text track mode</a> changes to <a href="/breakup/specs/html-media/#text-track-hidden" id="sourcing-out-of-band-text-tracks:text-track-hidden-4">hidden</a>
     or <a href="/breakup/specs/html-media/#text-track-showing" id="sourcing-out-of-band-text-tracks:text-track-showing-6">showing</a>, while the <a href="/breakup/specs/html-media/#track-url" id="sourcing-out-of-band-text-tracks:track-url-4">track URL</a> is not
     equal to <var>URL</var></li></ul>

    <p>...then the user agent must abort the <a href="/breakup/specs/core-algorithms/#fetch" id="sourcing-out-of-band-text-tracks:fetch-6">fetching algorithm</a>,
    discarding any pending <a href="/breakup/specs/browser-dom/#concept-task" id="sourcing-out-of-band-text-tracks:concept-task-6">tasks</a> generated by that algorithm (and
    in particular, not adding any cues to the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="sourcing-out-of-band-text-tracks:text-track-list-of-cues-4">text track list of cues</a> after the moment
    the URL changed), and then <a href="/breakup/specs/browser-dom/#queue-a-task" id="sourcing-out-of-band-text-tracks:queue-a-task-8">queue a task</a> that first changes the <a href="/breakup/specs/html-media/#text-track-readiness-state" id="sourcing-out-of-band-text-tracks:text-track-readiness-state-6">text track
    readiness state</a> to <a href="/breakup/specs/html-media/#text-track-failed-to-load" id="sourcing-out-of-band-text-tracks:text-track-failed-to-load-3">failed to load</a> and
    then <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="sourcing-out-of-band-text-tracks:fire-a-simple-event-4">fires a simple event</a> named <code id="sourcing-out-of-band-text-tracks:event-error-3"><a href="/breakup/specs/html/#event-error">error</a></code> at the <code id="sourcing-out-of-band-text-tracks:the-track-element-22"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element. This <a href="/breakup/specs/browser-dom/#concept-task" id="sourcing-out-of-band-text-tracks:concept-task-7">task</a> must use the <a href="/breakup/specs/browser-dom/#dom-manipulation-task-source" id="sourcing-out-of-band-text-tracks:dom-manipulation-task-source-2">DOM manipulation task source</a>. </p>

   </li><li><p>Wait until the <a href="/breakup/specs/html-media/#text-track-readiness-state" id="sourcing-out-of-band-text-tracks:text-track-readiness-state-7">text track readiness state</a> is no longer set to <a href="/breakup/specs/html-media/#text-track-loading" id="sourcing-out-of-band-text-tracks:text-track-loading-2">loading</a>.</p></li><li><p>Wait until the <a href="/breakup/specs/html-media/#track-url" id="sourcing-out-of-band-text-tracks:track-url-5">track URL</a> is no longer equal to <var>URL</var>, at
   the same time as the <a href="/breakup/specs/html-media/#text-track-mode" id="sourcing-out-of-band-text-tracks:text-track-mode-12">text track mode</a> is set to <a href="/breakup/specs/html-media/#text-track-hidden" id="sourcing-out-of-band-text-tracks:text-track-hidden-5">hidden</a> or <a href="/breakup/specs/html-media/#text-track-showing" id="sourcing-out-of-band-text-tracks:text-track-showing-7">showing</a>.</p></li><li><p>Jump to the step labeled <i>top</i>.</p></li></ol>

  <p>Whenever a <code id="sourcing-out-of-band-text-tracks:the-track-element-23"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element has its <code id="sourcing-out-of-band-text-tracks:attr-track-src"><a href="/breakup/specs/html-media/#attr-track-src">src</a></code> attribute
  set, changed, or removed, the user agent must <a href="/breakup/specs/core-algorithms/#immediately" id="sourcing-out-of-band-text-tracks:immediately">immediately</a> empty the element's <a href="/breakup/specs/html-media/#text-track" id="sourcing-out-of-band-text-tracks:text-track-19">text
  track</a>'s <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="sourcing-out-of-band-text-tracks:text-track-list-of-cues-5">text track list of cues</a>. (This also causes the algorithm above to stop
  adding cues from the resource being obtained using the previously given URL, if any.)</p></section>

  


  

  <section><h2><dfn>Guidelines for exposing cues</dfn> in various formats as <a href="/breakup/specs/html-media/#text-track-cue" id="guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue">text track cues</a></h2>

  <p>How a specific format's text track cues are to be interpreted for the purposes of processing by
  an HTML user agent is defined by that format. In the absence of such a specification, this section
  provides some constraints within which implementations can attempt to consistently expose such
  formats.</p>

  <p>To support the <a href="/breakup/specs/html-media/#text-track" id="guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track">text track</a> model of HTML, each unit of timed data is converted to a
  <a href="/breakup/specs/html-media/#text-track-cue" id="guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-2">text track cue</a>. Where the mapping of the format's features to the aspects of a
  <a href="/breakup/specs/html-media/#text-track-cue" id="guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-3">text track cue</a> as defined in this specification are not defined, implementations must
  ensure that the mapping is consistent with the definitions of the aspects of a <a href="/breakup/specs/html-media/#text-track-cue" id="guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-4">text track
  cue</a> as defined above, as well as with the following constraints:</p>

  <dl><dt>The <a href="/breakup/specs/html-media/#text-track-cue-identifier" id="guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-identifier">text track cue identifier</a>
   </dt><dd>
    <p>Should be set to the empty string if the format has no obvious analogue to a per-cue
    identifier.</p>
   </dd><dt>The <a href="/breakup/specs/html-media/#text-track-cue-pause-on-exit-flag" id="guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-pause-on-exit-flag">text track cue pause-on-exit flag</a>
   </dt><dd>
    <p>Should be set to false.</p>
   </dd></dl><p>For <a href="/breakup/specs/html-media/#media-resource-specific-text-track">media-resource-specific text tracks</a> 
of <a href="/breakup/specs/html-media/#text-track-kind">kind</a> <code><a href="/breakup/specs/html-media/#dom-texttrack-kind-metadata">metadata</a></code>, 
<a href="/breakup/specs/html-media/#text-track-cue">text track cues</a> are exposed using the <code><a href="/breakup/specs/html-media/#datacue" style="">DataCue</a></code> object 
unless there is a more appropriate <code><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> interface available. 
For example, if the <a href="/breakup/specs/html-media/#media-resource-specific-text-track">media-resource-specific text track</a> format is [[WebVTT]], 
then <code>VTTCue</code> is more appropriate.</p>
</section>

  


  <section><h2>Text track API</h2>

  <pre class="idl">interface <dfn id="texttracklist">TextTrackList</dfn> : <a href="/breakup/specs/core-algorithms/#eventtarget" id="text-track-api:eventtarget">EventTarget</a> {
  readonly attribute unsigned long <a href="/breakup/specs/html-media/#dom-texttracklist-length" id="text-track-api:dom-texttracklist-length">length</a>;
  getter <a href="/breakup/specs/html-media/#texttrack" id="text-track-api:texttrack">TextTrack</a> (unsigned long index);
  <a href="/breakup/specs/html-media/#texttrack" id="text-track-api:texttrack-2">TextTrack</a>? <a href="/breakup/specs/html-media/#dom-texttracklist-gettrackbyid" id="text-track-api:dom-texttracklist-gettrackbyid">getTrackById</a>(DOMString id);

  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="text-track-api:eventhandler">EventHandler</a> <a href="/breakup/specs/html-media/#handler-texttracklist-onchange" id="text-track-api:handler-texttracklist-onchange">onchange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="text-track-api:eventhandler-2">EventHandler</a> <a href="/breakup/specs/html-media/#handler-texttracklist-onaddtrack" id="text-track-api:handler-texttracklist-onaddtrack">onaddtrack</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="text-track-api:eventhandler-3">EventHandler</a> <a href="/breakup/specs/html-media/#handler-texttracklist-onremovetrack" id="text-track-api:handler-texttracklist-onremovetrack">onremovetrack</a>;
};</pre>

  <dl class="domintro"><dt><var>media</var> . <code id="text-track-api:dom-media-texttracks"><a href="/breakup/specs/html-media/#dom-media-texttracks">textTracks</a></code> . <code>length</code></dt><dd>
    <p>Returns the number of <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track">text tracks</a> associated with the <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element">media element</a> (e.g. from <code id="text-track-api:the-track-element"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> elements). This is the number of <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-2">text tracks</a> in the <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-2">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-api:list-of-text-tracks">list of text tracks</a>.</p>
   </dd><dt><var>media</var> . <code id="text-track-api:dom-media-texttracks-2"><a href="/breakup/specs/html-media/#dom-media-texttracks">textTracks[</a></code> <var>n</var> <code>]</code></dt><dd>
    <p>Returns the <code id="text-track-api:texttrack-3"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object representing the <var>n</var>th <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-3">text track</a> in the <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-3">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-api:list-of-text-tracks-2">list of text tracks</a>.</p>
   </dd><dt><var>textTrack</var> = <var>media</var> . <code id="text-track-api:dom-media-texttracks-3"><a href="/breakup/specs/html-media/#dom-media-texttracks">textTracks</a></code> . <code id="text-track-api:dom-texttracklist-gettrackbyid-2"><a href="/breakup/specs/html-media/#dom-texttracklist-gettrackbyid">getTrackById</a></code>( <var>id</var> )</dt><dd>

    <p>Returns the <code id="text-track-api:texttrack-4"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object with the given identifier, or null if no track has that identifier.</p>

   </dd></dl>

  

  <p>A <code id="text-track-api:texttracklist"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object represents a dynamically updating list of <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-4">text tracks</a> in a given order.</p>

  <p>The <dfn id="dom-media-texttracks"><code>textTracks</code></dfn> attribute of <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-4">media elements</a> must return a <code id="text-track-api:texttracklist-2"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object
  representing the <code id="text-track-api:texttrack-5"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> objects of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-5">text tracks</a>
  in the <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-5">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-api:list-of-text-tracks-3">list of text tracks</a>, in the same order as in the
  <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-api:list-of-text-tracks-4">list of text tracks</a>.</p>

  <p>The <dfn id="dom-texttracklist-length"><code>length</code></dfn> attribute of a
  <code id="text-track-api:texttracklist-3"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object must return the number of <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-6">text
  tracks</a> in the list represented by the <code id="text-track-api:texttracklist-4"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object.</p>

  <p>The <a href="/breakup/specs/core-algorithms/#supported-property-indices" id="text-track-api:supported-property-indices">supported property indices</a> of a <code id="text-track-api:texttracklist-5"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object at any
  instant are the numbers from zero to the number of <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-7">text tracks</a> in
  the list represented by the <code id="text-track-api:texttracklist-6"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object minus one, if any. If there are no
  <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-8">text tracks</a> in the list, there are no <a href="/breakup/specs/core-algorithms/#supported-property-indices" id="text-track-api:supported-property-indices-2">supported property
  indices</a>.</p>

  <p>To <a href="/breakup/specs/core-algorithms/#determine-the-value-of-an-indexed-property" id="text-track-api:determine-the-value-of-an-indexed-property">determine the value of an indexed property</a> of a <code id="text-track-api:texttracklist-7"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code>
  object for a given index <var>index</var>, the user agent must return the <var>index</var>th <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-9">text track</a> in the list represented by the
  <code id="text-track-api:texttracklist-8"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object.</p>

  <p>The <dfn id="dom-texttracklist-gettrackbyid"><code>getTrackById(<var>id</var>)</code></dfn> method must return the first <code id="text-track-api:texttrack-6"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> in the
  <code id="text-track-api:texttracklist-9"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> object whose <code id="text-track-api:dom-texttrack-id"><a href="/breakup/specs/html-media/#dom-texttrack-id">id</a></code> IDL attribute
  would return a value equal to the value of the <var>id</var> argument. When no tracks
  match the given argument, the method must return null.</p>

  

  <hr>

  <pre class="idl">enum <dfn id="texttrackmode">TextTrackMode</dfn> { "<a href="/breakup/specs/html-media/#dom-texttrack-disabled" id="text-track-api:dom-texttrack-disabled">disabled</a>",  "<a href="/breakup/specs/html-media/#dom-texttrack-hidden" id="text-track-api:dom-texttrack-hidden">hidden</a>",  "<a href="/breakup/specs/html-media/#dom-texttrack-showing" id="text-track-api:dom-texttrack-showing">showing</a>" };
enum <dfn id="texttrackkind">TextTrackKind</dfn> { "<a href="/breakup/specs/html-media/#dom-texttrack-kind-subtitles" id="text-track-api:dom-texttrack-kind-subtitles">subtitles</a>",  "<a href="/breakup/specs/html-media/#dom-texttrack-kind-captions" id="text-track-api:dom-texttrack-kind-captions">captions</a>",  "<a href="/breakup/specs/html-media/#dom-texttrack-kind-descriptions" id="text-track-api:dom-texttrack-kind-descriptions">descriptions</a>",  "<a href="/breakup/specs/html-media/#dom-texttrack-kind-chapters" id="text-track-api:dom-texttrack-kind-chapters">chapters</a>",  "<a href="/breakup/specs/html-media/#dom-texttrack-kind-metadata" id="text-track-api:dom-texttrack-kind-metadata">metadata</a>" };
interface <dfn id="texttrack">TextTrack</dfn> : <a href="/breakup/specs/core-algorithms/#eventtarget" id="text-track-api:eventtarget-2">EventTarget</a> {
  readonly attribute <a href="/breakup/specs/html-media/#texttrackkind" id="text-track-api:texttrackkind">TextTrackKind</a> <a href="/breakup/specs/html-media/#dom-texttrack-kind" id="text-track-api:dom-texttrack-kind">kind</a>;
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-texttrack-label" id="text-track-api:dom-texttrack-label">label</a>;
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-texttrack-language" id="text-track-api:dom-texttrack-language">language</a>;

  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-texttrack-id" id="text-track-api:dom-texttrack-id-2">id</a>;
  readonly attribute DOMString <a href="/breakup/specs/html-media/#dom-texttrack-inbandmetadatatrackdispatchtype" id="text-track-api:dom-texttrack-inbandmetadatatrackdispatchtype">inBandMetadataTrackDispatchType</a>;

  attribute <a href="/breakup/specs/html-media/#texttrackmode" id="text-track-api:texttrackmode">TextTrackMode</a> <a href="/breakup/specs/html-media/#dom-texttrack-mode" id="text-track-api:dom-texttrack-mode">mode</a>;

  readonly attribute <a href="/breakup/specs/html-media/#texttrackcuelist" id="text-track-api:texttrackcuelist">TextTrackCueList</a>? <a href="/breakup/specs/html-media/#dom-texttrack-cues" id="text-track-api:dom-texttrack-cues">cues</a>;
  readonly attribute <a href="/breakup/specs/html-media/#texttrackcuelist" id="text-track-api:texttrackcuelist-2">TextTrackCueList</a>? <a href="/breakup/specs/html-media/#dom-texttrack-activecues" id="text-track-api:dom-texttrack-activecues">activeCues</a>;

  void <a href="/breakup/specs/html-media/#dom-texttrack-addcue" id="text-track-api:dom-texttrack-addcue">addCue</a>(<a href="/breakup/specs/html-media/#texttrackcue" id="text-track-api:texttrackcue">TextTrackCue</a> cue);
  void <a href="/breakup/specs/html-media/#dom-texttrack-removecue" id="text-track-api:dom-texttrack-removecue">removeCue</a>(<a href="/breakup/specs/html-media/#texttrackcue" id="text-track-api:texttrackcue-2">TextTrackCue</a> cue);

  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="text-track-api:eventhandler-4">EventHandler</a> <a href="/breakup/specs/html-media/#handler-texttrack-oncuechange" id="text-track-api:handler-texttrack-oncuechange">oncuechange</a>;
};</pre>

  <dl class="domintro"><dt><var>textTrack</var> = <var>media</var> . <code id="text-track-api:dom-media-addtexttrack"><a href="/breakup/specs/html-media/#dom-media-addtexttrack">addTextTrack</a></code>( <var>kind</var> [, <var>label</var> [, <var>language</var> ] ] )</dt><dd>

    <p>Creates and returns a new <code id="text-track-api:texttrack-7"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object, which is also added to the
    <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-6">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-api:list-of-text-tracks-5">list of text tracks</a>.</p>

   </dd><dt><var>textTrack</var> . <code id="text-track-api:dom-texttrack-kind-2"><a href="/breakup/specs/html-media/#dom-texttrack-kind">kind</a></code></dt><dd>

    <p>Returns the <a href="/breakup/specs/html-media/#text-track-kind" id="text-track-api:text-track-kind">text track kind</a> string.</p>

   </dd><dt><var>textTrack</var> . <code id="text-track-api:dom-texttrack-label-2"><a href="/breakup/specs/html-media/#dom-texttrack-label">label</a></code></dt><dd>

    <p>Returns the <a href="/breakup/specs/html-media/#text-track-label" id="text-track-api:text-track-label">text track label</a>, if there is one, or the empty string otherwise
    (indicating that a custom label probably needs to be generated from the other attributes of the
    object if the object is exposed to the user).</p>

   </dd><dt><var>textTrack</var> . <code id="text-track-api:dom-texttrack-language-2"><a href="/breakup/specs/html-media/#dom-texttrack-language">language</a></code></dt><dd>
    <p>Returns the <a href="/breakup/specs/html-media/#text-track-language" id="text-track-api:text-track-language">text track language</a> string.</p>
   </dd><dt><var>textTrack</var> . <code id="text-track-api:dom-texttrack-id-3"><a href="/breakup/specs/html-media/#dom-texttrack-id">id</a></code></dt><dd>

    <p>Returns the ID of the given track.</p>

    <p>For in-band tracks, this is the ID that can be used with a fragment identifier if the format
    supports the <cite>Media Fragments URI</cite> syntax, and that can be used with the <code id="text-track-api:dom-texttracklist-gettrackbyid-3"><a href="/breakup/specs/html-media/#dom-texttracklist-gettrackbyid">getTrackById()</a></code> method. [[!MEDIAFRAG]]</p>

    <p>For <code id="text-track-api:texttrack-8"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> objects corresponding to <code id="text-track-api:the-track-element-2"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> elements, this is the
    ID of the <code id="text-track-api:the-track-element-3"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> element.</p>

   </dd><dt><var>textTrack</var> . <code id="text-track-api:dom-texttrack-inbandmetadatatrackdispatchtype-2"><a href="/breakup/specs/html-media/#dom-texttrack-inbandmetadatatrackdispatchtype">inBandMetadataTrackDispatchType</a></code></dt><dd>

    <p>Returns the <a href="/breakup/specs/html-media/#text-track-in-band-metadata-track-dispatch-type" id="text-track-api:text-track-in-band-metadata-track-dispatch-type">text track in-band metadata track dispatch type</a> string.</p>

   </dd><dt><var>textTrack</var> . <code id="text-track-api:dom-texttrack-mode-2"><a href="/breakup/specs/html-media/#dom-texttrack-mode">mode</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the <a href="/breakup/specs/html-media/#text-track-mode" id="text-track-api:text-track-mode">text track mode</a>, represented by a string from the following
    list:</p>

    <dl><dt>"<code id="text-track-api:dom-texttrack-disabled-2"><a href="/breakup/specs/html-media/#dom-texttrack-disabled">disabled</a></code>"</dt><dd>
      <p>The <a href="/breakup/specs/html-media/#text-track-disabled" id="text-track-api:text-track-disabled">text track disabled</a> mode.</p>
     </dd><dt>"<code id="text-track-api:dom-texttrack-hidden-2"><a href="/breakup/specs/html-media/#dom-texttrack-hidden">hidden</a></code>"</dt><dd>
      <p>The <a href="/breakup/specs/html-media/#text-track-hidden" id="text-track-api:text-track-hidden">text track hidden</a> mode.</p>
     </dd><dt>"<code id="text-track-api:dom-texttrack-showing-2"><a href="/breakup/specs/html-media/#dom-texttrack-showing">showing</a></code>"</dt><dd>
      <p>The <a href="/breakup/specs/html-media/#text-track-showing" id="text-track-api:text-track-showing">text track showing</a> mode.</p>
     </dd></dl>

    <p>Can be set, to change the mode.</p>

   </dd><dt><var>textTrack</var> . <code id="text-track-api:dom-texttrack-cues-2"><a href="/breakup/specs/html-media/#dom-texttrack-cues">cues</a></code></dt><dd>
    <p>Returns the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues">text track list of cues</a>, as a <code id="text-track-api:texttrackcuelist-3"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object.</p>
   </dd><dt><var>textTrack</var> . <code id="text-track-api:dom-texttrack-activecues-2"><a href="/breakup/specs/html-media/#dom-texttrack-activecues">activeCues</a></code></dt><dd>

    <p>Returns the <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue">text track cues</a> from the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-2">text track
    list of cues</a> that are currently active (i.e. that start before the <a href="/breakup/specs/html-media/#current-playback-position" id="text-track-api:current-playback-position">current playback
    position</a> and end after it), as a <code id="text-track-api:texttrackcuelist-4"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object.</p>

   </dd><dt><var>textTrack</var> . <code id="text-track-api:dom-texttrack-addcue-2"><a href="/breakup/specs/html-media/#dom-texttrack-addcue">addCue</a></code>( <var>cue</var> )</dt><dd>
    <p>Adds the given cue to <var>textTrack</var>'s <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-3">text track list of cues</a>.</p>
   </dd><dt><var>textTrack</var> . <code id="text-track-api:dom-texttrack-removecue-2"><a href="/breakup/specs/html-media/#dom-texttrack-removecue">removeCue</a></code>( <var>cue</var> )</dt><dd>
    <p>Removes the given cue from <var>textTrack</var>'s <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-4">text track list of cues</a>.</p>
   </dd></dl>

  

  <p>The <dfn id="dom-media-addtexttrack"><code>addTextTrack(<var>kind</var>, <var>label</var>, <var>language</var>)</code></dfn> method of <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-7">media elements</a>, when invoked, must run the following steps:</p>

  <ol><li>

    <p>Create a new <code id="text-track-api:texttrack-9"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object.</p>

   </li><li>

    <p>Create a new <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-10">text track</a> corresponding to the new object, and set its <a href="/breakup/specs/html-media/#text-track-kind" id="text-track-api:text-track-kind-2">text
    track kind</a> to <var>kind</var>, its <a href="/breakup/specs/html-media/#text-track-label" id="text-track-api:text-track-label-2">text track label</a> to <var>label</var>, its <a href="/breakup/specs/html-media/#text-track-language" id="text-track-api:text-track-language-2">text track language</a> to <var>language</var>, its
    <a href="/breakup/specs/html-media/#text-track-readiness-state" id="text-track-api:text-track-readiness-state">text track readiness state</a> to the <a href="/breakup/specs/html-media/#text-track-loaded" id="text-track-api:text-track-loaded">text track loaded</a> state, its
    <a href="/breakup/specs/html-media/#text-track-mode" id="text-track-api:text-track-mode-2">text track mode</a> to the <a href="/breakup/specs/html-media/#text-track-hidden" id="text-track-api:text-track-hidden-2">text track hidden</a> mode, and its <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-5">text
    track list of cues</a> to an empty list.</p>

    <p>Initially, the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-6">text track list of cues</a> is not associated with any <a href="/breakup/specs/html-media/#rules-for-updating-the-text-track-rendering" id="text-track-api:rules-for-updating-the-text-track-rendering">rules
    for updating the text track rendering</a>. When a <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-2">text track cue</a> is added to it,
    the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-7">text track list of cues</a> has its rules permanently set accordingly.</p>

   </li><li>

    <p>Add the new <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-11">text track</a> to the <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-8">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-api:list-of-text-tracks-6">list of text
    tracks</a>.</p>

   </li><li>

    <p><a href="/breakup/specs/browser-dom/#queue-a-task" id="text-track-api:queue-a-task">Queue a task</a> to <a href="/breakup/specs/core-algorithms/#concept-event-fire" id="text-track-api:concept-event-fire">fire</a> a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="text-track-api:concept-events-trusted">trusted</a> event with the name <code id="text-track-api:event-media-addtrack"><a href="/breakup/specs/html-media/#event-media-addtrack">addtrack</a></code>, that does not bubble and is not cancelable, and
    that uses the <code id="text-track-api:trackevent"><a href="/breakup/specs/html-media/#trackevent">TrackEvent</a></code> interface, with the <code id="text-track-api:dom-trackevent-track"><a href="/breakup/specs/html-media/#dom-trackevent-track">track</a></code> attribute initialised to the new <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-12">text
    track</a>'s <code id="text-track-api:texttrack-10"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object, at the <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-9">media element</a>'s <code id="text-track-api:dom-media-texttracks-4"><a href="/breakup/specs/html-media/#dom-media-texttracks">textTracks</a></code> attribute's <code id="text-track-api:texttracklist-10"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code>
    object.</p>

   </li><li>

    <p>Return the new <code id="text-track-api:texttrack-11"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object.</p>

   </li></ol>

  <hr>

  <p>The <dfn id="dom-texttrack-kind"><code>kind</code></dfn> attribute must return the
  <a href="/breakup/specs/html-media/#text-track-kind" id="text-track-api:text-track-kind-3">text track kind</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-13">text track</a> that the <code id="text-track-api:texttrack-12"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object
  represents.</p>

  <p>The <dfn id="dom-texttrack-label"><code>label</code></dfn> attribute must return the
  <a href="/breakup/specs/html-media/#text-track-label" id="text-track-api:text-track-label-3">text track label</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-14">text track</a> that the <code id="text-track-api:texttrack-13"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code>
  object represents.</p>

  <p>The <dfn id="dom-texttrack-language"><code>language</code></dfn> attribute must return the
  <a href="/breakup/specs/html-media/#text-track-language" id="text-track-api:text-track-language-3">text track language</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-15">text track</a> that the <code id="text-track-api:texttrack-14"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code>
  object represents.</p>

  <p>The <dfn id="dom-texttrack-id"><code>id</code></dfn> attribute returns the track's
  identifier, if it has one, or the empty string otherwise. For tracks that correspond to
  <code id="text-track-api:the-track-element-4"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> elements, the track's identifier is the value of the element's <code id="text-track-api:the-id-attribute"><a href="/breakup/specs/html-attributes/#the-id-attribute">id</a></code> attribute, if any. For in-band tracks, the track's identifier is
  specified by the <a href="/breakup/specs/html-media/#media-resource" id="text-track-api:media-resource">media resource</a>. If the <a href="/breakup/specs/html-media/#media-resource" id="text-track-api:media-resource-2">media resource</a> is in a format
  that supports the <cite>Media Fragments URI</cite> fragment identifier syntax, the identifier
  returned for a particular track must be the same identifier that would enable the track if used as
  the name of a track in the track dimension of such a fragment identifier. [[!MEDIAFRAG]]</p>

  <p>The <dfn id="dom-texttrack-inbandmetadatatrackdispatchtype"><code>inBandMetadataTrackDispatchType</code></dfn>
  attribute must return the <a href="/breakup/specs/html-media/#text-track-in-band-metadata-track-dispatch-type" id="text-track-api:text-track-in-band-metadata-track-dispatch-type-2">text track in-band metadata track dispatch type</a> of the
  <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-16">text track</a> that the <code id="text-track-api:texttrack-15"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object represents.</p>

  <p>The <dfn id="dom-texttrack-mode"><code>mode</code></dfn> attribute, on getting, must return
  the string corresponding to the <a href="/breakup/specs/html-media/#text-track-mode" id="text-track-api:text-track-mode-3">text track mode</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-17">text track</a> that
  the <code id="text-track-api:texttrack-16"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object represents, as defined by the following list:</p>

  <dl><dt>"<dfn id="dom-texttrack-disabled"><code>disabled</code></dfn>"</dt><dd>The <a href="/breakup/specs/html-media/#text-track-disabled" id="text-track-api:text-track-disabled-2">text track disabled</a> mode.</dd><dt>"<dfn id="dom-texttrack-hidden"><code>hidden</code></dfn>"</dt><dd>The <a href="/breakup/specs/html-media/#text-track-hidden" id="text-track-api:text-track-hidden-3">text track hidden</a> mode.</dd><dt>"<dfn id="dom-texttrack-showing"><code>showing</code></dfn>"</dt><dd>The <a href="/breakup/specs/html-media/#text-track-showing" id="text-track-api:text-track-showing-2">text track showing</a> mode.</dd></dl>

  <p>On setting, if the new value isn't equal to what the attribute would currently return, the new
  value must be processed as follows:</p>

  <dl class="switch"><dt>If the new value is "<code id="text-track-api:dom-texttrack-disabled-3"><a href="/breakup/specs/html-media/#dom-texttrack-disabled">disabled</a></code>"</dt><dd>

    <p>Set the <a href="/breakup/specs/html-media/#text-track-mode" id="text-track-api:text-track-mode-4">text track mode</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-18">text track</a> that the
    <code id="text-track-api:texttrack-17"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object represents to the <a href="/breakup/specs/html-media/#text-track-disabled" id="text-track-api:text-track-disabled-3">text track disabled</a> mode.</p>

   </dd><dt>If the new value is "<code id="text-track-api:dom-texttrack-hidden-3"><a href="/breakup/specs/html-media/#dom-texttrack-hidden">hidden</a></code>"</dt><dd>

    <p>Set the <a href="/breakup/specs/html-media/#text-track-mode" id="text-track-api:text-track-mode-5">text track mode</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-19">text track</a> that the
    <code id="text-track-api:texttrack-18"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object represents to the <a href="/breakup/specs/html-media/#text-track-hidden" id="text-track-api:text-track-hidden-4">text track hidden</a> mode.</p>

   </dd><dt>If the new value is "<code id="text-track-api:dom-texttrack-showing-3"><a href="/breakup/specs/html-media/#dom-texttrack-showing">showing</a></code>"</dt><dd>

    <p>Set the <a href="/breakup/specs/html-media/#text-track-mode" id="text-track-api:text-track-mode-6">text track mode</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-20">text track</a> that the
    <code id="text-track-api:texttrack-19"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object represents to the <a href="/breakup/specs/html-media/#text-track-showing" id="text-track-api:text-track-showing-3">text track showing</a> mode.</p>

   </dd></dl>

  <p>If the <a href="/breakup/specs/html-media/#text-track-mode" id="text-track-api:text-track-mode-7">text track mode</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-21">text track</a> that the
  <code id="text-track-api:texttrack-20"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object represents is not the <a href="/breakup/specs/html-media/#text-track-disabled" id="text-track-api:text-track-disabled-4">text track disabled</a> mode, then
  the <dfn id="dom-texttrack-cues"><code>cues</code></dfn> attribute must return a
  <a href="/breakup/specs/core-algorithms/#live" id="text-track-api:live">live</a> <code id="text-track-api:texttrackcuelist-5"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object that represents the subset of the
  <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-8">text track list of cues</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-22">text track</a> that the
  <code id="text-track-api:texttrack-21"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object represents whose <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="text-track-api:text-track-cue-end-time">end
  times</a> occur at or after the <a href="/breakup/specs/html-media/#earliest-possible-position-when-the-script-started" id="text-track-api:earliest-possible-position-when-the-script-started">earliest possible position when the script
  started</a>, in <a href="/breakup/specs/html-media/#text-track-cue-order" id="text-track-api:text-track-cue-order">text track cue order</a>. Otherwise, it must return null. For each <code id="text-track-api:texttrack-22"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object, when an
  object is returned, the same <code id="text-track-api:texttrackcuelist-6"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object must be returned each time.</p>

  <p>The <dfn id="earliest-possible-position-when-the-script-started">earliest possible position when the script started</dfn> is whatever the
  <a href="/breakup/specs/html-media/#earliest-possible-position" id="text-track-api:earliest-possible-position">earliest possible position</a> was the last time the <a href="/breakup/specs/browser-dom/#event-loop" id="text-track-api:event-loop">event loop</a> reached step
  1.</p>

  <p>If the <a href="/breakup/specs/html-media/#text-track-mode" id="text-track-api:text-track-mode-8">text track mode</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-23">text track</a> that the
  <code id="text-track-api:texttrack-23"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object represents is not the <a href="/breakup/specs/html-media/#text-track-disabled" id="text-track-api:text-track-disabled-5">text track disabled</a> mode, then
  the <dfn id="dom-texttrack-activecues"><code>activeCues</code></dfn> attribute must return a
  <a href="/breakup/specs/core-algorithms/#live" id="text-track-api:live-2">live</a> <code id="text-track-api:texttrackcuelist-7"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object that represents the subset of the
  <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-9">text track list of cues</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-24">text track</a> that the
  <code id="text-track-api:texttrack-24"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object represents whose <a href="/breakup/specs/html-media/#active-flag-was-set-when-the-script-started" id="text-track-api:active-flag-was-set-when-the-script-started">active flag was set when the script
  started</a>, in <a href="/breakup/specs/html-media/#text-track-cue-order" id="text-track-api:text-track-cue-order-2">text track cue order</a>. Otherwise, it must return null. For each <code id="text-track-api:texttrack-25"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object, when an
  object is returned, the same <code id="text-track-api:texttrackcuelist-8"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object must be returned each time.</p>

  <p>A <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-3">text track cue</a>'s <dfn id="active-flag-was-set-when-the-script-started">active flag was set when the script started</dfn> if its
  <a href="/breakup/specs/html-media/#text-track-cue-active-flag" id="text-track-api:text-track-cue-active-flag">text track cue active flag</a> was set the last time the <a href="/breakup/specs/browser-dom/#event-loop" id="text-track-api:event-loop-2">event loop</a> reached
  <a href="/breakup/specs/browser-dom/#step1">step 1</a>.</p>

  <hr>

  <p>The <dfn id="dom-texttrack-addcue"><code>addCue(<var>cue</var>)</code></dfn> method
  of <code id="text-track-api:texttrack-26"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> objects, when invoked, must run the following steps:</p>

  <ol><li><p>If the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-10">text track list of cues</a> does not yet have any associated <a href="/breakup/specs/html-media/#rules-for-updating-the-text-track-rendering" id="text-track-api:rules-for-updating-the-text-track-rendering-2">rules
   for updating the text track rendering</a>, then associate the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-11">text track list of
   cues</a> with the <a href="/breakup/specs/html-media/#rules-for-updating-the-text-track-rendering" id="text-track-api:rules-for-updating-the-text-track-rendering-3">rules for updating the text track rendering</a> appropriate to <var>cue</var>.</p>

   </li><li><p>If <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-12">text track list of cues</a>' associated <a href="/breakup/specs/html-media/#rules-for-updating-the-text-track-rendering" id="text-track-api:rules-for-updating-the-text-track-rendering-4">rules for updating the text
   track rendering</a> are not the same <a href="/breakup/specs/html-media/#rules-for-updating-the-text-track-rendering" id="text-track-api:rules-for-updating-the-text-track-rendering-5">rules for updating the text track rendering</a>
   as appropriate for <var>cue</var>, then throw an <code id="text-track-api:invalidstateerror"><a href="/breakup/specs/core-algorithms/#invalidstateerror">InvalidStateError</a></code>
   exception and abort these steps.</p>

   </li><li><p>If the given <var>cue</var> is in a <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-13">text track list of cues</a>, then
   remove <var>cue</var> from that <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-14">text track list of cues</a>.</p></li><li><p>Add <var>cue</var> to the method's <code id="text-track-api:texttrack-27"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object's <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-25">text
   track</a>'s <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-15">text track list of cues</a>.</p></li></ol>

  <p>The <dfn id="dom-texttrack-removecue"><code>removeCue(<var>cue</var>)</code></dfn>
  method of <code id="text-track-api:texttrack-28"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> objects, when invoked, must run the following steps:</p>

  <ol><li><p>If the given <var>cue</var> is not currently listed in the method's
   <code id="text-track-api:texttrack-29"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object's <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-26">text track</a>'s <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-16">text track list of cues</a>,
   then throw a <code id="text-track-api:notfounderror"><a href="/breakup/specs/core-algorithms/#notfounderror">NotFoundError</a></code> exception and abort these steps.</p></li><li><p>Remove <var>cue</var> from the method's <code id="text-track-api:texttrack-30"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object's
   <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-27">text track</a>'s <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-17">text track list of cues</a>.</p></li></ol>

  

  <div class="example">

   <p>In this example, an <code id="text-track-api:the-audio-element"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code> element is used to play a specific sound-effect from a
   sound file containing many sound effects. A cue is used to pause the audio, so that it ends
   exactly at the end of the clip, even if the browser is busy running some script. If the page had
   relied on script to pause the audio, then the start of the next clip might be heard if the
   browser was not able to run the script at the exact time specified.</p>

   <pre>var sfx = new Audio('sfx.wav');
var sounds = sfx.addTextTrack('metadata');

// add sounds we care about
function addFX(start, end, name) {
  var cue = new VTTCue(start, end, '');
  cue.id = name;
  cue.pauseOnExit = true;
  sounds.addCue(cue);
}
addFX(12.783, 13.612, 'dog bark');
addFX(13.612, 15.091, 'kitten mew'))

function playSound(id) {
  sfx.currentTime = sounds.getCueById(id).startTime;
  sfx.play();
}

// play a bark as soon as we can
sfx.oncanplaythrough = function () {
  playSound('dog bark');
}
// meow when the user tries to leave
window.onbeforeunload = function () {
  playSound('kitten mew');
  return 'Are you sure you want to leave this awesome page?';
}</pre>

  </div>

  <hr>

  <pre class="idl">interface <dfn id="texttrackcuelist">TextTrackCueList</dfn> {
  readonly attribute unsigned long <a href="/breakup/specs/html-media/#dom-texttrackcuelist-length" id="text-track-api:dom-texttrackcuelist-length">length</a>;
  getter <a href="/breakup/specs/html-media/#texttrackcue" id="text-track-api:texttrackcue-3">TextTrackCue</a> (unsigned long index);
  <a href="/breakup/specs/html-media/#texttrackcue" id="text-track-api:texttrackcue-4">TextTrackCue</a>? <a href="/breakup/specs/html-media/#dom-texttrackcuelist-getcuebyid" id="text-track-api:dom-texttrackcuelist-getcuebyid">getCueById</a>(DOMString id);
};</pre>

  <dl class="domintro"><dt><var>cuelist</var> . <code id="text-track-api:dom-texttrackcuelist-length-2"><a href="/breakup/specs/html-media/#dom-texttrackcuelist-length">length</a></code></dt><dd>
    <p>Returns the number of <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-4">cues</a> in the list.</p>
   </dd><dt><var>cuelist</var>[<var>index</var>]</dt><dd>
    <p>Returns the <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-5">text track cue</a> with index <var>index</var> in the list. The cues are sorted in <a href="/breakup/specs/html-media/#text-track-cue-order" id="text-track-api:text-track-cue-order-3">text track cue order</a>.</p>
   </dd><dt><var>cuelist</var> . <code id="text-track-api:dom-texttrackcuelist-getcuebyid-2"><a href="/breakup/specs/html-media/#dom-texttrackcuelist-getcuebyid">getCueById</a></code>( <var>id</var> )</dt><dd>
    <p>Returns the first <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-6">text track cue</a> (in <a href="/breakup/specs/html-media/#text-track-cue-order" id="text-track-api:text-track-cue-order-4">text track cue order</a>) with <a href="/breakup/specs/html-media/#text-track-cue-identifier" id="text-track-api:text-track-cue-identifier">text track cue identifier</a> <var>id</var>.</p>
    <p>Returns null if none of the cues have the given identifier or if the argument is the empty string.</p>
   </dd></dl>

  

  <p>A <code id="text-track-api:texttrackcuelist-9"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object represents a dynamically updating list of <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-7">text track cues</a> in a given order.</p>

  <p>The <dfn id="dom-texttrackcuelist-length"><code>length</code></dfn> attribute must return
  the number of <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-8">cues</a> in the list represented by the
  <code id="text-track-api:texttrackcuelist-10"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object.</p>

  <p>The <a href="/breakup/specs/core-algorithms/#supported-property-indices" id="text-track-api:supported-property-indices-3">supported property indices</a> of a <code id="text-track-api:texttrackcuelist-11"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object at any
  instant are the numbers from zero to the number of <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-9">cues</a> in the
  list represented by the <code id="text-track-api:texttrackcuelist-12"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object minus one, if any. If there are no
  <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-10">cues</a> in the list, there are no <a href="/breakup/specs/core-algorithms/#supported-property-indices" id="text-track-api:supported-property-indices-4">supported property
  indices</a>.</p>

  <p>To <a href="/breakup/specs/core-algorithms/#determine-the-value-of-an-indexed-property" id="text-track-api:determine-the-value-of-an-indexed-property-2">determine the value of an indexed property</a> for a given index <var>index</var>, the user agent must return the <var>index</var>th <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-11">text track
  cue</a> in the list represented by the <code id="text-track-api:texttrackcuelist-13"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object.</p>

  <p>The <dfn id="dom-texttrackcuelist-getcuebyid"><code>getCueById(<var>id</var>)</code></dfn> method, when called with an argument other than the empty string,
  must return the first <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-12">text track cue</a> in the list represented by the
  <code id="text-track-api:texttrackcuelist-14"><a href="/breakup/specs/html-media/#texttrackcuelist">TextTrackCueList</a></code> object whose <a href="/breakup/specs/html-media/#text-track-cue-identifier" id="text-track-api:text-track-cue-identifier-2">text track cue identifier</a> is <var>id</var>, if any, or null otherwise. If the argument is the empty string, then the method
  must return null.</p>

  

  <hr>

  <pre class="idl">interface <dfn id="texttrackcue">TextTrackCue</dfn> : <a href="/breakup/specs/core-algorithms/#eventtarget" id="text-track-api:eventtarget-3">EventTarget</a> {
  readonly attribute <a href="/breakup/specs/html-media/#texttrack" id="text-track-api:texttrack-31">TextTrack</a>? <a href="/breakup/specs/html-media/#dom-texttrackcue-track" id="text-track-api:dom-texttrackcue-track">track</a>;

  attribute DOMString <a href="/breakup/specs/html-media/#dom-texttrackcue-id" id="text-track-api:dom-texttrackcue-id">id</a>;
  attribute double <a href="/breakup/specs/html-media/#dom-texttrackcue-starttime" id="text-track-api:dom-texttrackcue-starttime">startTime</a>;
  attribute double <a href="/breakup/specs/html-media/#dom-texttrackcue-endtime" id="text-track-api:dom-texttrackcue-endtime">endTime</a>;
  attribute boolean <a href="/breakup/specs/html-media/#dom-texttrackcue-pauseonexit" id="text-track-api:dom-texttrackcue-pauseonexit">pauseOnExit</a>;

  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="text-track-api:eventhandler-5">EventHandler</a> <a href="/breakup/specs/html-media/#handler-texttrackcue-onenter" id="text-track-api:handler-texttrackcue-onenter">onenter</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="text-track-api:eventhandler-6">EventHandler</a> <a href="/breakup/specs/html-media/#handler-texttrackcue-onexit" id="text-track-api:handler-texttrackcue-onexit">onexit</a>;
};</pre>

  <dl class="domintro"><dt><var>cue</var> . <a href="/breakup/specs/html-media/#dom-texttrackcue-track" id="text-track-api:dom-texttrackcue-track-2">track</a></dt><dd>
    <p>Returns the <code id="text-track-api:texttrack-32"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object to which this
    <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-13">text track cue</a> belongs, if any, or null
    otherwise.</p>
   </dd><dt><var>cue</var> . <a href="/breakup/specs/html-media/#dom-texttrackcue-id" id="text-track-api:dom-texttrackcue-id-2">id</a> [ = <var>value</var> ]</dt><dd>
    <p>Returns the <a href="/breakup/specs/html-media/#text-track-cue-identifier" id="text-track-api:text-track-cue-identifier-3">text track cue identifier</a>.</p>
    <p>Can be set.</p>
   </dd><dt><var>cue</var> . <a href="/breakup/specs/html-media/#dom-texttrackcue-starttime" id="text-track-api:dom-texttrackcue-starttime-2">startTime</a> [ = <var>value</var> ]</dt><dd>
    <p>Returns the <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="text-track-api:text-track-cue-start-time">text track cue start time</a>, in seconds.</p>
    <p>Can be set.</p>
   </dd><dt><var>cue</var> . <a href="/breakup/specs/html-media/#dom-texttrackcue-endtime" id="text-track-api:dom-texttrackcue-endtime-2">endTime</a> [ = <var>value</var> ]</dt><dd>
    <p>Returns the <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="text-track-api:text-track-cue-end-time-2">text track cue end time</a>, in seconds.</p>
    <p>Can be set.</p>
   </dd><dt><var>cue</var> . <a href="/breakup/specs/html-media/#dom-texttrackcue-pauseonexit" id="text-track-api:dom-texttrackcue-pauseonexit-2">pauseOnExit</a> [ = <var>value</var> ]</dt><dd>
    <p>Returns true if the <a href="/breakup/specs/html-media/#text-track-cue-pause-on-exit-flag" id="text-track-api:text-track-cue-pause-on-exit-flag">text track cue pause-on-exit flag</a> is set, false otherwise.</p>
    <p>Can be set.</p>
   </dd></dl>

  

  <p>The <dfn id="dom-texttrackcue-track"><code>track</code></dfn> attribute, on getting, must
  return the <code id="text-track-api:texttrack-33"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> object of the <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-28">text track</a> in whose <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-18">list of cues</a> the <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-14">text track cue</a> that the
  <code id="text-track-api:texttrackcue-5"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> object represents finds itself, if any; or null otherwise.</p>

  <p>The <dfn id="dom-texttrackcue-id"><code>id</code></dfn> attribute, on getting, must return
  the <a href="/breakup/specs/html-media/#text-track-cue-identifier" id="text-track-api:text-track-cue-identifier-4">text track cue identifier</a> of the <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-15">text track cue</a> that the
  <code id="text-track-api:texttrackcue-6"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> object represents. On setting, the <a href="/breakup/specs/html-media/#text-track-cue-identifier" id="text-track-api:text-track-cue-identifier-5">text track cue
  identifier</a> must be set to the new value.</p>

  <p>The <dfn id="dom-texttrackcue-starttime"><code>startTime</code></dfn> attribute, on
  getting, must return the <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="text-track-api:text-track-cue-start-time-2">text track cue start time</a> of the <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-16">text track cue</a>
  that the <code id="text-track-api:texttrackcue-7"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> object represents, in seconds. On setting, the <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="text-track-api:text-track-cue-start-time-3">text track
  cue start time</a> must be set to the new value, interpreted in seconds; then, if the
  <code id="text-track-api:texttrackcue-8"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> object's <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-17">text track cue</a> is in a <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-29">text track</a>'s
  <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-19">list of cues</a>, and that <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-30">text track</a> is in
  a <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-10">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-api:list-of-text-tracks-7">list of text tracks</a>, and the <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-11">media
  element</a>'s <a href="/breakup/specs/html-media/#show-poster-flag" id="text-track-api:show-poster-flag">show poster flag</a> is not set, then run the <i id="text-track-api:time-marches-on"><a href="/breakup/specs/html-media/#time-marches-on">time marches on</a></i> steps for that <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-12">media element</a>.</p>

  <p>The <dfn id="dom-texttrackcue-endtime"><code>endTime</code></dfn> attribute, on getting,
  must return the <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="text-track-api:text-track-cue-end-time-3">text track cue end time</a> of the <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-18">text track cue</a> that the
  <code id="text-track-api:texttrackcue-9"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> object represents, in seconds. On setting, the <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="text-track-api:text-track-cue-end-time-4">text track cue end
  time</a> must be set to the new value, interpreted in seconds; then, if the
  <code id="text-track-api:texttrackcue-10"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> object's <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-19">text track cue</a> is in a <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-31">text track</a>'s
  <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-track-api:text-track-list-of-cues-20">list of cues</a>, and that <a href="/breakup/specs/html-media/#text-track" id="text-track-api:text-track-32">text track</a> is in
  a <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-13">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="text-track-api:list-of-text-tracks-8">list of text tracks</a>, and the <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-14">media
  element</a>'s <a href="/breakup/specs/html-media/#show-poster-flag" id="text-track-api:show-poster-flag-2">show poster flag</a> is not set, then run the <i id="text-track-api:time-marches-on-2"><a href="/breakup/specs/html-media/#time-marches-on">time marches on</a></i> steps for that <a href="/breakup/specs/html-media/#media-element" id="text-track-api:media-element-15">media element</a>.</p>

  <p>The <dfn id="dom-texttrackcue-pauseonexit"><code>pauseOnExit</code></dfn> attribute, on
  getting, must return true if the <a href="/breakup/specs/html-media/#text-track-cue-pause-on-exit-flag" id="text-track-api:text-track-cue-pause-on-exit-flag-2">text track cue pause-on-exit flag</a> of the <a href="/breakup/specs/html-media/#text-track-cue" id="text-track-api:text-track-cue-20">text
  track cue</a> that the <code id="text-track-api:texttrackcue-11"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> object represents is set; or false otherwise.
  On setting, the <a href="/breakup/specs/html-media/#text-track-cue-pause-on-exit-flag" id="text-track-api:text-track-cue-pause-on-exit-flag-3">text track cue pause-on-exit flag</a> must be set if the new value is
  true, and must be unset otherwise.</p></section>

  


  <section>
  <h2>Text tracks exposing in-band metadata</h2>

  <p><a href="/breakup/specs/html-media/#media-resource">Media resources</a> often contain one or more
  <a href="/breakup/specs/html-media/#media-resource-specific-text-track">media-resource-specific text tracks</a>
  containing data that browsers don't render, but want to expose to script to allow being
  dealt with.</p>

  <p>If the browser is unable to identify a <code><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> interface that is more
  appropriate to expose the data in the cues of a <a href="/breakup/specs/html-media/#media-resource-specific-text-track">media-resource-specific text track</a>,
  the <a href="/breakup/specs/html-media/#datacue">DataCue</a> object is used. [[INBANDTRACKS]]</p>

  <pre class="idl">[<span>Constructor</span>(double startTime, double endTime, ArrayBuffer data)]
   interface <dfn id="datacue">DataCue</dfn> : <a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a> {
               attribute ArrayBuffer <a href="/breakup/specs/html-media/#dom-datacue-data">data</a>;
};</pre>

  <dl class="domintro">

  <dt><var>cue</var> = new <code>DataCue</code>( [ <var>startTime</var>, <var>endTime</var>, <var>data</var> ] )</dt>
  <dd>
    <p>Returns a new <code><a href="/breakup/specs/html-media/#datacue">DataCue</a></code> object, for use with the <code><a href="/breakup/specs/html-media/#dom-texttrack-addcue">addCue()</a></code> method.</p>
    <p>The <var>startTime</var> argument sets the <a href="/breakup/specs/html-media/#text-track-cue-start-time">text track cue start time</a>.</p>
    <p>The <var>endTime</var> argument sets the <a href="/breakup/specs/html-media/#text-track-cue-end-time">text track cue end time</a>.</p>
    <p>The <var>data</var> argument is copied as the <a href="/breakup/specs/html-media/#text-track-cue-data">text track cue data</a>.</p>
  </dd>

  <dt><var>cue</var> . <a href="/breakup/specs/html-media/#dom-datacue-data">data</a> [ = <var>value</var> ]</dt>
  <dd>
    <p>Returns the <a href="/breakup/specs/html-media/#text-track-cue-data">text track cue data</a> in raw unparsed form.</p>
    <p>Can be set.</p>
  </dd>

  </dl>

  <p>The <dfn id="dom-datacue-data"><code>data</code></dfn> attribute, on getting, must
  return the raw text track cue data of the <a href="/breakup/specs/html-media/#text-track-cue">text track cue</a> that the
  <code><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> object represents. On setting, the text track cue data must
  be set to the new value.</p>

  <p>The UA will use <a href="/breakup/specs/html-media/#datacue">DataCue</a> to expose only <a href="/breakup/specs/html-media/#text-track-cue">text track cue</a>
  objects that belong to a <a href="/breakup/specs/html-media/#text-track">text track</a> that has a <a href="/breakup/specs/html-media/#text-track-kind">text track kind</a> of
  <a href="/breakup/specs/html-media/#dom-texttrack-kind-metadata">metadata</a>.</p>

  <p class="note"><a href="/breakup/specs/html-media/#datacue">DataCue</a> has a constructor to allow script to create <a href="/breakup/specs/html-media/#datacue">DataCue</a>
  objects in cases where generic metadata needs to be managed for a <a href="/breakup/specs/html-media/#text-track">text track</a>.</p>

  <p>The <a href="/breakup/specs/html-media/#rules-for-updating-the-text-track-rendering">rules for updating the text track rendering</a> for a <a href="/breakup/specs/html-media/#datacue">DataCue</a> simply
  state that there is no rendering, even when the cues are in <a href="/breakup/specs/html-media/#text-track-showing">showing</a> mode and the <a href="/breakup/specs/html-media/#text-track-kind">text track kind</a> is one of
  <code><a href="/breakup/specs/html-media/#dom-texttrack-kind-subtitles">subtitles</a></code> or
  <code><a href="/breakup/specs/html-media/#dom-texttrack-kind-captions">captions</a></code> or
  <code><a href="/breakup/specs/html-media/#dom-texttrack-kind-descriptions">descriptions</a></code> or
  <code><a href="/breakup/specs/html-media/#dom-texttrack-kind-chapters">chapters</a></code>.</p>
  
</section><section><h2>Text tracks describing chapters</h2>

  <p>Chapters are segments of a <a href="/breakup/specs/html-media/#media-resource" id="text-tracks-describing-chapters:media-resource">media resource</a> with a given title. Chapters can be
  nested, in the same way that sections in a document outline can have subsections.</p>

  <p>Each <a href="/breakup/specs/html-media/#text-track-cue" id="text-tracks-describing-chapters:text-track-cue">text track cue</a> in a <a href="/breakup/specs/html-media/#text-track" id="text-tracks-describing-chapters:text-track">text track</a> being used for describing
  chapters has three key features: the <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="text-tracks-describing-chapters:text-track-cue-start-time">text track cue start time</a>, giving the start time
  of the chapter, the <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="text-tracks-describing-chapters:text-track-cue-end-time">text track cue end time</a>, giving the end time of the chapter, and
  the <a href="/breakup/specs/html-media/#text-track-rules-for-extracting-the-chapter-title" id="text-tracks-describing-chapters:text-track-rules-for-extracting-the-chapter-title">text track rules for extracting the chapter title</a>.</p>

  

  <p>The <dfn id="rules-for-constructing-the-chapter-tree-from-a-text-track">rules for constructing the chapter tree from a text track</dfn> are as follows. They
  produce a potentially nested list of chapters, each of which have a start time, end time, title,
  and a list of nested chapters. This algorithm discards cues that do not correctly nest within each
  other, or that are out of order.</p>

  <ol><li><p>Let <var>list</var> be a copy of the <a href="/breakup/specs/html-media/#text-track-list-of-cues" id="text-tracks-describing-chapters:text-track-list-of-cues">list
   of cues</a> of the <a href="/breakup/specs/html-media/#text-track" id="text-tracks-describing-chapters:text-track-2">text track</a> being processed.</p></li><li><p>Remove from <var>list</var> any <a href="/breakup/specs/html-media/#text-track-cue" id="text-tracks-describing-chapters:text-track-cue-2">text track cue</a> whose <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="text-tracks-describing-chapters:text-track-cue-end-time-2">text
   track cue end time</a> is before its <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="text-tracks-describing-chapters:text-track-cue-start-time-2">text track cue start time</a>.</p></li><li><p>Let <var>output</var> be an empty list of chapters, where a chapter is a record
   consisting of a start time, an end time, a title, and a (potentially empty) list of nested
   chapters. For the purpose of this algorithm, each chapter also has a parent chapter.</p></li><li><p>Let <var>current chapter</var> be a stand-in chapter whose start time is negative
   infinity, whose end time is positive infinity, and whose list of nested chapters is <var>output</var>. (This is just used to make the algorithm easier to describe.)</p></li><li><p><i>Loop</i>: If <var>list</var> is empty, jump to the step labeled
   <i>end</i>.</p></li><li><p>Let <var>current cue</var> be the first cue in <var>list</var>, and then
   remove it from <var>list</var>.</p></li><li><p>If <var>current cue</var>'s <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="text-tracks-describing-chapters:text-track-cue-start-time-3">text track cue start time</a> is less than
   the start time of <var>current chapter</var>, then return to the step labeled
   <i>loop</i>.</p> 

   </li><li><p>While <var>current cue</var>'s <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="text-tracks-describing-chapters:text-track-cue-start-time-4">text track cue start time</a> is greater
   than or equal to <var>current chapter</var>'s end time, let <var>current
   chapter</var> be <var>current chapter</var>'s parent chapter.</p></li><li><p>If <var>current cue</var>'s <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="text-tracks-describing-chapters:text-track-cue-end-time-3">text track cue end time</a> is greater than
   the end time of <var>current chapter</var>, then return to the step labeled
   <i>loop</i>.</p> 

   </li><li>

    <p>Create a new chapter <var>new chapter</var>, whose start time is <var>current cue</var>'s <a href="/breakup/specs/html-media/#text-track-cue-start-time" id="text-tracks-describing-chapters:text-track-cue-start-time-5">text track cue start time</a>, whose end time is <var>current cue</var>'s <a href="/breakup/specs/html-media/#text-track-cue-end-time" id="text-tracks-describing-chapters:text-track-cue-end-time-4">text track cue end time</a>, whose title is the result of running <var>current cue</var>'s <a href="/breakup/specs/html-media/#text-track-rules-for-extracting-the-chapter-title" id="text-tracks-describing-chapters:text-track-rules-for-extracting-the-chapter-title-2">text track rules for extracting the chapter title</a>, and whose list of nested chapters is
    empty.</p>

   </li><li><p>Append <var>new chapter</var> to <var>current chapter</var>'s list of
   nested chapters, and let <var>current chapter</var> be <var>new chapter</var>'s
   parent.</p></li><li><p>Let <var>current chapter</var> be <var>new chapter</var>.</p></li><li><p>Return to the step labeled <i>loop</i>.</p></li><li><p><i>End</i>: Return <var>output</var>.</p></li></ol>

  

  <div class="example">

   <p>The following snippet of a <a href="/breakup/specs/core-algorithms/#webvtt-file" id="text-tracks-describing-chapters:webvtt-file">WebVTT file</a> shows how nested chapters can be marked
   up. The file describes three 50-minute chapters, "Astrophysics", "Computational Physics", and
   "General Relativity". The first has three subchapters, the second has four, and the third has
   two. [[!WEBVTT]]</p>

   <pre>WEBVTT

00:00:00.000 --&gt; 00:50:00.000
Astrophysics

00:00:00.000 --&gt; 00:10:00.000
Introduction to Astrophysics

00:10:00.000 --&gt; 00:45:00.000
The Solar System

00:00:00.000 --&gt; 00:10:00.000
Coursework Description

00:50:00.000 --&gt; 01:40:00.000
Computational Physics

00:50:00.000 --&gt; 00:55:00.000
Introduction to Programming

00:55:00.000 --&gt; 01:30:00.000
Data Structures

01:30:00.000 --&gt; 01:35:00.000
Answers to Last Exam

01:35:00.000 --&gt; 01:40:00.000
Coursework Description

01:40:00.000 --&gt; 02:30:00.000
General Relativity

01:40:00.000 --&gt; 02:00:00.000
Tensor Algebra

02:00:00.000 --&gt; 02:30:00.000
The General Relativistic Field Equations</pre>

  </div></section>


  

  <section><h2>Event handlers for objects of the text track APIs</h2>

  <p>The following are the <a href="/breakup/specs/browser-dom/#event-handlers" id="cue-events:event-handlers">event handlers</a> that (and their corresponding <a href="/breakup/specs/browser-dom/#event-handler-event-type" id="cue-events:event-handler-event-type">event handler event types</a>) must be supported, as <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="cue-events:event-handler-idl-attributes">event handler IDL
  attributes</a>, by all objects implementing the <code id="cue-events:texttracklist"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> interface:</p>

  <table><thead><tr><th><a href="/breakup/specs/browser-dom/#event-handlers" id="cue-events:event-handlers-2">Event handler</a> </th><th><a href="/breakup/specs/browser-dom/#event-handler-event-type" id="cue-events:event-handler-event-type-2">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-texttracklist-onchange"><code>onchange</code></dfn> </td><td> <code id="cue-events:event-media-change"><a href="/breakup/specs/html-media/#event-media-change">change</a></code>
    </td></tr><tr><td><dfn id="handler-texttracklist-onaddtrack"><code>onaddtrack</code></dfn> </td><td> <code id="cue-events:event-media-addtrack"><a href="/breakup/specs/html-media/#event-media-addtrack">addtrack</a></code>
    </td></tr><tr><td><dfn id="handler-texttracklist-onremovetrack"><code>onremovetrack</code></dfn> </td><td> <code id="cue-events:event-media-removetrack"><a href="/breakup/specs/html-media/#event-media-removetrack">removetrack</a></code>
  </td></tr></tbody></table>

  <p>The following are the <a href="/breakup/specs/browser-dom/#event-handlers" id="cue-events:event-handlers-3">event handlers</a> that (and their corresponding <a href="/breakup/specs/browser-dom/#event-handler-event-type" id="cue-events:event-handler-event-type-3">event handler event types</a>) must be supported, as <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="cue-events:event-handler-idl-attributes-2">event handler IDL
  attributes</a>, by all objects implementing the <code id="cue-events:texttrack"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> interface:</p>

  <table><thead><tr><th><a href="/breakup/specs/browser-dom/#event-handlers" id="cue-events:event-handlers-4">Event handler</a> </th><th><a href="/breakup/specs/browser-dom/#event-handler-event-type" id="cue-events:event-handler-event-type-4">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-texttrack-oncuechange"><code>oncuechange</code></dfn> </td><td> <code id="cue-events:event-media-cuechange"><a href="/breakup/specs/html-media/#event-media-cuechange">cuechange</a></code>
  </td></tr></tbody></table>

  <p>The following are the <a href="/breakup/specs/browser-dom/#event-handlers" id="cue-events:event-handlers-5">event handlers</a> that (and their corresponding <a href="/breakup/specs/browser-dom/#event-handler-event-type" id="cue-events:event-handler-event-type-5">event handler event types</a>) must be supported, as <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="cue-events:event-handler-idl-attributes-3">event handler IDL
  attributes</a>, by all objects implementing the <code id="cue-events:texttrackcue"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> interface:</p>

  <table><thead><tr><th><a href="/breakup/specs/browser-dom/#event-handlers" id="cue-events:event-handlers-6">Event handler</a> </th><th><a href="/breakup/specs/browser-dom/#event-handler-event-type" id="cue-events:event-handler-event-type-6">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-texttrackcue-onenter"><code>onenter</code></dfn> </td><td> <code id="cue-events:event-media-enter"><a href="/breakup/specs/html-media/#event-media-enter">enter</a></code>
    </td></tr><tr><td><dfn id="handler-texttrackcue-onexit"><code>onexit</code></dfn> </td><td> <code id="cue-events:event-media-exit"><a href="/breakup/specs/html-media/#event-media-exit">exit</a></code>
  </td></tr></tbody></table></section>

  



  <section><h2>Best practices for metadata text tracks</h2>

  <p><i>This section is non-normative.</i></p>

  <p>Text tracks can be used for storing data relating to the media data, for interactive or
  augmented views.</p>

  <p>For example, a page showing a sports broadcast could include information about the current
  score. Suppose a robotics competition was being streamed live. The image could be overlayed with
  the scores, as follows:</p>

  <p><iframe src="data:text/html;charset=utf-8,%3C!DOCTYPE%20html%3E%0A%3Cstyle%3E%0A%20body%2C%20html%20%7B%20margin%3A%200%3B%20padding%3A%200%3B%20overflow%3A%20hidden%3B%20%7D%0A%20div%20%7B%20width%3A%20600px%3B%20height%3A%20400px%3B%20position%3A%20relative%3B%20%7D%0A%20p%20%7B%20position%3A%20absolute%3B%20top%3A%200%3B%20margin%3A%200.25em%3B%20font%3A%20small-caps%20900%202em%20sans-serif%3B%20text-shadow%3A%20white%200%200%204px%3B%20%7D%0A%20span%20%7B%20display%3A%20block%3B%20%7D%0A%20.left%20%7B%20color%3A%20red%3B%20left%3A%200%3B%20text-align%3A%20left%3B%20%7D%0A%20.right%20%7B%20color%3A%20blue%3B%20right%3A%200%3B%20text-align%3A%20right%3B%20%7D%0A%20.middle%20%7B%20color%3A%20white%3B%20top%3A%20auto%3B%20bottom%3A%200%3B%20left%3A%200%3B%20right%3A%200%3B%20text-align%3A%20center%3B%20text-shadow%3A%20black%200%200%204px%3B%20%7D%0A%20.middle%20span%20%7B%20display%3A%20inline-block%3B%20margin%3A%200%201em%3B%20font-size%3A%200.75em%3B%20text-transform%3A%20uppercase%3B%20%7D%0A%3C%2Fstyle%3E%0A%3Cdiv%3E%0A%20%3Cimg%20src%3D%22https%3A%2F%2Fimages.whatwg.org%2Frobots.jpeg%22%3E%0A%20%3Cp%20class%3D%22score%20left%22%3E%3Cspan%3ERed%20Alliance%3C%2Fspan%3E%20%3Cspan%3E78%3C%2Fspan%3E%3C%2Fp%3E%0A%20%3Cp%20class%3D%22score%20right%22%3E%3Cspan%3EBlue%20Alliance%3C%2Fspan%3E%20%3Cspan%3E66%3C%2Fspan%3E%3C%2Fp%3E%0A%20%3Cp%20class%3D%22score%20middle%22%3E%3Cspan%3EQual%20Match%2037%3C%2Fspan%3E%20%3Cspan%3EFriday%2014%3A21%3C%2Fspan%3E%0A%3C%2Fdiv%3E" width="600" height="400"></iframe>

  </p><p>In order to make the score display render correctly whenever the user seeks to an arbitrary
  point in the video, the metadata text track cues need to be as long as is appropriate for the
  score. For example, in the frame above, there would be maybe one cue that lasts the length of the
  match that gives the match number, one cue that lasts until the blue alliance's score changes, and
  one cue that lasts until the red alliance's score changes. If the video is just a stream of the
  live event, the time in the bottom right would presumably be automatically derived from the
  current video time, rather than based on a cue. However, if the video was just the highlights,
  then that might be given in cues also.</p>

  <p>The following shows what fragments of this could look like in a WebVTT file:</p>

  <pre>WEBVTT

...

05:10:00.000 --&gt; 05:12:15.000
matchtype:qual
matchnumber:37

...

05:11:02.251 --&gt; 05:11:17.198
red:78

05:11:03.672 --&gt; 05:11:54.198
blue:66

05:11:17.198 --&gt; 05:11:25.912
red:80

05:11:25.912 --&gt; 05:11:26.522
red:83

05:11:26.522 --&gt; 05:11:26.982
red:86

05:11:26.982 --&gt; 05:11:27.499
red:89

...</pre>

  <p>The key here is to notice that the information is given in cues that span the length of time to
  which the relevant event applies. If, instead, the scores were given as zero-length (or very
  brief, nearly zero-length) cues when the score changes, for example saying "red+2" at
  05:11:17.198, "red+3" at 05:11:25.912, etc, problems arise: primarily, seeking is much harder to
  implement, as the script has to walk the entire list of cues to make sure that no notifications
  have been missed; but also, if the cues are short it's possible the script will never see that
  they are active unless it listens to them specifically.</p>

  <p>When using cues in this manner, authors are encouraged to use the <code id="best-practices-for-metadata-text-tracks:event-media-cuechange"><a href="/breakup/specs/html-media/#event-media-cuechange">cuechange</a></code> event to update the current annotations. (In
  particular, using the <code id="best-practices-for-metadata-text-tracks:event-media-timeupdate"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> event would be less
  appropriate as it would require doing work even when the cues haven't changed, and, more
  importantly, would introduce a higher latency between when the metatata cues become active and
  when the display is updated, since <code id="best-practices-for-metadata-text-tracks:event-media-timeupdate-2"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code> events
  are rate-limited.)</p></section></section>




  <section><h2>User interface</h2>

  <p>The <dfn id="attr-media-controls"><code>controls</code></dfn> attribute is a <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="user-interface:boolean-attribute">boolean
  attribute</a>. If present, it indicates that the author has not provided a scripted controller
  and would like the user agent to provide its own set of controls.</p>

  

  <p>If the attribute is present, or if <a href="/breakup/specs/browser-dom/#concept-n-noscript" id="user-interface:concept-n-noscript">scripting is
  disabled</a> for the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element">media element</a>, then the user agent should <dfn id="expose-a-user-interface-to-the-user">expose a user
  interface to the user</dfn>. This user interface should include features to begin playback, pause
  playback, seek to an arbitrary position in the content (if the content supports arbitrary
  seeking), change the volume, change the display of closed captions or embedded sign-language
  tracks, select different audio tracks or turn on audio descriptions, and show the media content in
  manners more suitable to the user (e.g. full-screen video or in an independent resizable window).
  Other controls may also be made available.</p>

  <p>If the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-2">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller">current media controller</a>, then the user
  agent should expose audio tracks from all the <a href="/breakup/specs/html-media/#slaved-media-elements" id="user-interface:slaved-media-elements">slaved media elements</a> (although
  avoiding duplicates if the same <a href="/breakup/specs/html-media/#media-resource" id="user-interface:media-resource">media resource</a> is being used several times). If a
  <a href="/breakup/specs/html-media/#media-resource" id="user-interface:media-resource-2">media resource</a>'s audio track exposed in this way has no known name, and it is the
  only audio track for a particular <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-3">media element</a>, the user agent should use the
  element's <code id="user-interface:attr-title"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attribute, if any, as the name (or as part of the
  name) of that track.</p>

  <p>Even when the attribute is absent, however, user agents may provide controls to affect playback
  of the media resource (e.g. play, pause, seeking, and volume controls), but such features should
  not interfere with the page's normal rendering. For example, such features could be exposed in the
  <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-4">media element</a>'s context menu. The user agent may implement this simply by <a href="/breakup/specs/html-media/#expose-a-user-interface-to-the-user" id="user-interface:expose-a-user-interface-to-the-user">exposing a user interface to the user</a> as
  described above (as if the <code id="user-interface:attr-media-controls"><a href="/breakup/specs/html-media/#attr-media-controls">controls</a></code> attribute was
  present).</p>

  <p>If the user agent <a href="/breakup/specs/html-media/#expose-a-user-interface-to-the-user" id="user-interface:expose-a-user-interface-to-the-user-2">exposes a user interface to
  the user</a> by displaying controls over the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-5">media element</a>, then the user agent
  should suppress any user interaction events while the user agent is interacting with this
  interface. (For example, if the user clicks on a video's playback control, <code id="user-interface:event-mousedown"><a href="/breakup/specs/core-algorithms/#event-mousedown">mousedown</a></code> events and so forth would not simultaneously be fired at
  elements on the page.)</p>

  <p>Where possible (specifically, for starting, stopping, pausing, and unpausing playback, for
  seeking, for changing the rate of playback, for fast-forwarding or rewinding, for listing,
  enabling, and disabling text tracks, and for muting or changing the volume of the audio), user
  interface features exposed by the user agent must be implemented in terms of the DOM API described
  above, so that, e.g., all the same events fire.</p>

  <p>When a <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-6">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-2">current media controller</a>, the user agent's
  user interface for pausing and unpausing playback, for seeking, for changing the rate of playback,
  for fast-forwarding or rewinding, and for muting or changing the volume of audio of the entire
  group must be implemented in terms of the <code id="user-interface:mediacontroller"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> API exposed on that
  <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-3">current media controller</a>. When a <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-7">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-4">current media
  controller</a>, and all the <a href="/breakup/specs/html-media/#slaved-media-elements" id="user-interface:slaved-media-elements-2">slaved media elements</a> of that
  <code id="user-interface:mediacontroller-2"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> are paused, the user agent should also unpause all the <a href="/breakup/specs/html-media/#slaved-media-elements" id="user-interface:slaved-media-elements-3">slaved
  media elements</a> when the user invokes a user agent interface control for beginning
  playback.</p>

  <p>The "play" function in the user agent's interface must set the <code>playbackRate</code> attribute to the value of the <code>defaultPlaybackRate</code> attribute before invoking the <code>play()</code>
  method. When a <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-8">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-5">current media controller</a>, the
  attributes and method with those names on that <code id="user-interface:mediacontroller-3"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object must be used.
  Otherwise, the attributes and method with those names on the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-9">media element</a> itself
  must be used. </p>

  <p>Features such as fast-forward or rewind must be implemented by only changing the <code>playbackRate</code> attribute (and not the <code>defaultPlaybackRate</code>
  attribute). Again, when a <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-10">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-6">current media controller</a>,
  the attributes with those names on that <code id="user-interface:mediacontroller-4"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object must be used;
  otherwise, the attributes with those names on the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-11">media element</a> itself must be used.</p>

  <p>When a <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-12">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-7">current media controller</a>, seeking must be
  implemented in terms of the <code id="user-interface:dom-mediacontroller-currenttime"><a href="/breakup/specs/html-media/#dom-mediacontroller-currenttime">currentTime</a></code>
  attribute on that <code id="user-interface:mediacontroller-5"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object. Otherwise, the user agent must directly
  <a href="/breakup/specs/html-media/#dom-media-seek" id="user-interface:dom-media-seek">seek</a> to the requested position in the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-13">media
  element</a>'s <a href="/breakup/specs/html-media/#media-timeline" id="user-interface:media-timeline">media timeline</a>. For media resources where seeking to an arbitrary
  position would be slow, user agents are encouraged to use the <i>approximate-for-speed</i> flag
  when seeking in response to the user manipulating an approximate position interface such as a seek
  bar.</p>

  <p>When a <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-14">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-8">current media controller</a>, user agents may
  additionally provide the user with controls that directly manipulate an individual <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-15">media
  element</a> without affecting the <code id="user-interface:mediacontroller-6"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>, but such features are
  considered relatively advanced and unlikely to be useful to most users.</p>

  <p>The <a href="/breakup/specs/html-interacton-attr/#activation-behaviour" id="user-interface:activation-behaviour">activation behaviour</a> of a <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-16">media element</a> that is <a href="/breakup/specs/html-media/#expose-a-user-interface-to-the-user" id="user-interface:expose-a-user-interface-to-the-user-3">exposing a user interface to the user</a> must be
  to run the following steps:</p>

  <ol><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-17">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-9">current media controller</a>, and that
   <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-10">current media controller</a> is a <a href="/breakup/specs/html-media/#restrained-media-controller" id="user-interface:restrained-media-controller">restrained media controller</a>, then invoke
   the <code id="user-interface:dom-mediacontroller-play"><a href="/breakup/specs/html-media/#dom-mediacontroller-play">play()</a></code> method of the
   <code id="user-interface:mediacontroller-7"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> and abort these steps.</p></li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-18">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-11">current media controller</a>,
   and that <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-12">current media controller</a> is a <a href="/breakup/specs/html-media/#paused-media-controller" id="user-interface:paused-media-controller">paused media controller</a>, all
   of the <code id="user-interface:mediacontroller-8"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s <a href="/breakup/specs/html-media/#slaved-media-elements" id="user-interface:slaved-media-elements-4">slaved media elements</a> have <a href="/breakup/specs/html-media/#ended-playback" id="user-interface:ended-playback">ended
   playback</a>, and the <a href="/breakup/specs/html-media/#media-controller-playback-rate" id="user-interface:media-controller-playback-rate">media controller playback rate</a> is positive or zero, then
   <a href="/breakup/specs/html-media/#seek-the-media-controller" id="user-interface:seek-the-media-controller">seek the media controller</a> to zero.</p></li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-19">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-13">current media controller</a>,
   and that <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-14">current media controller</a> is a <a href="/breakup/specs/html-media/#paused-media-controller" id="user-interface:paused-media-controller-2">paused media controller</a>, then
   invoke the <code id="user-interface:dom-mediacontroller-unpause"><a href="/breakup/specs/html-media/#dom-mediacontroller-unpause">unpause()</a></code> method of the
   <code id="user-interface:mediacontroller-9"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> and abort these steps.</p></li><li><p>If the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-20">media element</a> has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-15">current media controller</a>,
   then that <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-16">current media controller</a> is a <a href="/breakup/specs/html-media/#playing-media-controller" id="user-interface:playing-media-controller">playing media controller</a>;
   invoke the <code id="user-interface:dom-mediacontroller-pause"><a href="/breakup/specs/html-media/#dom-mediacontroller-pause">pause()</a></code> method of the
   <code id="user-interface:mediacontroller-10"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> and abort these steps.</p></li><li><p>If
   the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-21">media element</a>'s <code id="user-interface:dom-media-paused"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> attribute is true,
   then invoke the <code id="user-interface:dom-media-play"><a href="/breakup/specs/html-media/#dom-media-play">play()</a></code> method on the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-22">media
   element</a> and abort these steps.</p></li><li><p>Invoke the <code id="user-interface:dom-media-pause"><a href="/breakup/specs/html-media/#dom-media-pause">pause()</a></code> method on the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-23">media
   element</a>.</p></li></ol>

  <p>For the purposes of listing chapters in the <a href="/breakup/specs/html-media/#media-resource" id="user-interface:media-resource-3">media resource</a>, only <a href="/breakup/specs/html-media/#text-track" id="user-interface:text-track">text tracks</a> in the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-24">media element</a>'s <a href="/breakup/specs/html-media/#list-of-text-tracks" id="user-interface:list-of-text-tracks">list of text tracks</a>
  that are <a href="/breakup/specs/html-media/#text-track-showing" id="user-interface:text-track-showing">showing</a> and whose <a href="/breakup/specs/html-media/#text-track-kind" id="user-interface:text-track-kind">text track kind</a> is
  <code id="user-interface:dom-texttrack-kind-chapters"><a href="/breakup/specs/html-media/#dom-texttrack-kind-chapters">chapters</a></code> should be used. Such tracks must be
  interpreted according to the <a href="/breakup/specs/html-media/#rules-for-constructing-the-chapter-tree-from-a-text-track" id="user-interface:rules-for-constructing-the-chapter-tree-from-a-text-track">rules for constructing the chapter tree from a text
  track</a>. When seeking in response to a user maniplating a chapter selection interface, user
  agents should not use the <i>approximate-for-speed</i> flag.</p>

  <p>The <dfn id="dom-media-controls"><code>controls</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="user-interface:reflect">reflect</a> the content attribute of the same name.</p>

  <hr>

  

  <dl class="domintro"><dt><var>media</var> . <code id="user-interface:dom-media-volume"><a href="/breakup/specs/html-media/#dom-media-volume">volume</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the current playback volume, as a number in the range 0.0 to 1.0, where 0.0 is the
    quietest and 1.0 the loudest.</p>

    <p>Can be set, to change the volume.</p>

    <p>Throws an <code id="user-interface:indexsizeerror"><a href="/breakup/specs/core-algorithms/#indexsizeerror">IndexSizeError</a></code> exception if the new value is not in the range 0.0 .. 1.0.</p>

   </dd><dt><var>media</var> . <code id="user-interface:dom-media-muted"><a href="/breakup/specs/html-media/#dom-media-muted">muted</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns true if audio is muted, overriding the <code id="user-interface:dom-media-volume-2"><a href="/breakup/specs/html-media/#dom-media-volume">volume</a></code>
    attribute, and false if the <code id="user-interface:dom-media-volume-3"><a href="/breakup/specs/html-media/#dom-media-volume">volume</a></code> attribute is being
    honored.</p>

    <p>Can be set, to change whether the audio is muted or not.</p>

   </dd></dl>

  

  <p>A <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-25">media element</a> has a <dfn id="concept-media-volume">playback volume</dfn>, which is a fraction in the range 0.0 (silent) to 1.0 (loudest).
  Initially, the volume should be 1.0, but user agents may remember the last set value across
  sessions, on a per-site basis or otherwise, so the volume may start at other values.</p>

  <p>The <dfn id="dom-media-volume"><code>volume</code></dfn> IDL attribute must return the
  <a href="/breakup/specs/html-media/#concept-media-volume" id="user-interface:concept-media-volume">playback volume</a> of any audio portions of the
  <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-26">media element</a>. On setting, if the new value is in the range 0.0 to 1.0 inclusive, the
  <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-27">media element</a>'s <a href="/breakup/specs/html-media/#concept-media-volume" id="user-interface:concept-media-volume-2">playback volume</a> must be
  set to the new value. If the new value is outside the range 0.0 to 1.0 inclusive, then, on
  setting, an <code id="user-interface:indexsizeerror-2"><a href="/breakup/specs/core-algorithms/#indexsizeerror">IndexSizeError</a></code> exception must be thrown instead.</p>

  <p>A <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-28">media element</a> can also be <dfn id="concept-media-muted">muted</dfn>. If
  anything is muting the element, then it is muted. (For example, when the <a href="/breakup/specs/html-media/#direction-of-playback" id="user-interface:direction-of-playback">direction of
  playback</a> is backwards, the element is muted.)</p>

  <p>The <dfn id="dom-media-muted"><code>muted</code></dfn> IDL attribute must return the value
  to which it was last set. When a <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-29">media element</a> is created, if the element has a <code id="user-interface:attr-media-muted"><a href="/breakup/specs/html-media/#attr-media-muted">muted</a></code> content attribute specified, then the <code id="user-interface:dom-media-muted-2"><a href="/breakup/specs/html-media/#dom-media-muted">muted</a></code> IDL attribute should be set to true; otherwise, the user
  agents may set the value to the user's preferred value (e.g. remembering the last set value across
  sessions, on a per-site basis or otherwise). While the <code id="user-interface:dom-media-muted-3"><a href="/breakup/specs/html-media/#dom-media-muted">muted</a></code>
  IDL attribute is set to true, the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-30">media element</a> must be <a href="/breakup/specs/html-media/#concept-media-muted" id="user-interface:concept-media-muted">muted</a>.</p>

  <p>Whenever either of the values that would be returned by the <code id="user-interface:dom-media-volume-4"><a href="/breakup/specs/html-media/#dom-media-volume">volume</a></code> and <code id="user-interface:dom-media-muted-4"><a href="/breakup/specs/html-media/#dom-media-muted">muted</a></code> IDL
  attributes change, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="user-interface:queue-a-task">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="user-interface:fire-a-simple-event">fire a simple
  event</a> named <code id="user-interface:event-media-volumechange"><a href="/breakup/specs/html-media/#event-media-volumechange">volumechange</a></code> at the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-31">media
  element</a>.</p>

  <p>An element's <dfn id="effective-media-volume">effective media volume</dfn> is determined as follows:</p>

  <ol><li><p>If the user has indicated that the user agent is to override the volume of the element,
   then the element's <a href="/breakup/specs/html-media/#effective-media-volume" id="user-interface:effective-media-volume">effective media volume</a> is the volume desired by the user. Abort
   these steps.</p></li><li><p>If the element's audio output is <a href="/breakup/specs/html-media/#concept-media-muted" id="user-interface:concept-media-muted-2">muted</a>, the
   element's <a href="/breakup/specs/html-media/#effective-media-volume" id="user-interface:effective-media-volume-2">effective media volume</a> is zero. Abort these steps.</p></li><li><p>If the element has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-17">current media controller</a> and that
   <code id="user-interface:mediacontroller-11"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object's <a href="/breakup/specs/html-media/#media-controller-mute-override" id="user-interface:media-controller-mute-override">media controller mute override</a> is true, the
   element's <a href="/breakup/specs/html-media/#effective-media-volume" id="user-interface:effective-media-volume-3">effective media volume</a> is zero. Abort these steps.</p></li><li><p>Let <var>volume</var> be the <a href="/breakup/specs/html-media/#concept-media-volume" id="user-interface:concept-media-volume-3">playback
   volume</a> of the audio portions of the <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-32">media element</a>, in range 0.0 (silent) to
   1.0 (loudest).</p></li><li><p>If the element has a <a href="/breakup/specs/html-media/#current-media-controller" id="user-interface:current-media-controller-18">current media controller</a>, multiply <var>volume</var> by that <code id="user-interface:mediacontroller-12"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> object's <a href="/breakup/specs/html-media/#media-controller-volume-multiplier" id="user-interface:media-controller-volume-multiplier">media controller
   volume multiplier</a>. (The <a href="/breakup/specs/html-media/#media-controller-volume-multiplier" id="user-interface:media-controller-volume-multiplier-2">media controller volume multiplier</a> is in the range
   0.0 to 1.0, so this can only reduce the value.)</p></li><li><p>The element's <a href="/breakup/specs/html-media/#effective-media-volume" id="user-interface:effective-media-volume-4">effective media volume</a> is <var>volume</var>,
   interpreted relative to the range 0.0 to 1.0, with 0.0 being silent, and 1.0 being the loudest
   setting, values in between increasing in loudness. The range need not be linear. The loudest
   setting may be lower than the system's loudest possible setting; for example the user could have
   set a maximum volume.</p></li></ol>

  

  <p>The <dfn id="attr-media-muted"><code>muted</code></dfn> content attribute on <a href="/breakup/specs/html-media/#media-element" id="user-interface:media-element-33">media elements</a> is a <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="user-interface:boolean-attribute-2">boolean attribute</a> that controls the
  default state of the audio output of the <a href="/breakup/specs/html-media/#media-resource" id="user-interface:media-resource-4">media resource</a>, potentially overriding user
  preferences.</p>

  

  <p>The <dfn id="dom-media-defaultmuted"><code>defaultMuted</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="user-interface:reflect-2">reflect</a> the <code id="user-interface:attr-media-muted-2"><a href="/breakup/specs/html-media/#attr-media-muted">muted</a></code> content attribute.</p>

  

  <p class="note">This attribute has no dynamic effect (it only controls the default state of the
  element).</p>

  <div class="example">

   <p>This video (an advertisement) autoplays, but to avoid annoying users, it does so without
   sound, and allows the user to turn the sound on.</p>

   <pre>&lt;video src="adverts.cgi?kind=video" controls autoplay loop muted&gt;&lt;/video&gt;</pre>

  </div></section>




  <section><h2>Time ranges</h2>

  <p>Objects implementing the <code id="time-ranges:timeranges"><a href="/breakup/specs/html-media/#timeranges">TimeRanges</a></code> interface
  represent a list of ranges (periods) of time.</p>

  <pre class="idl">interface <dfn id="timeranges">TimeRanges</dfn> {
  readonly attribute unsigned long <a href="/breakup/specs/html-media/#dom-timeranges-length" id="time-ranges:dom-timeranges-length">length</a>;
  double <a href="/breakup/specs/html-media/#dom-timeranges-start" id="time-ranges:dom-timeranges-start">start</a>(unsigned long index);
  double <a href="/breakup/specs/html-media/#dom-timeranges-end" id="time-ranges:dom-timeranges-end">end</a>(unsigned long index);
};</pre>

  <dl class="domintro"><dt><var>media</var> . <code id="time-ranges:dom-timeranges-length-2"><a href="/breakup/specs/html-media/#dom-timeranges-length">length</a></code></dt><dd>

    <p>Returns the number of ranges in the object.</p>

   </dd><dt><var>time</var> = <var>media</var> . <code id="time-ranges:dom-timeranges-start-2"><a href="/breakup/specs/html-media/#dom-timeranges-start">start</a></code>(<var>index</var>)</dt><dd>

    <p>Returns the time for the start of the range with the given index.</p>

    <p>Throws an <code id="time-ranges:indexsizeerror"><a href="/breakup/specs/core-algorithms/#indexsizeerror">IndexSizeError</a></code> exception if the index is out of range.</p>

   </dd><dt><var>time</var> = <var>media</var> . <code id="time-ranges:dom-timeranges-end-2"><a href="/breakup/specs/html-media/#dom-timeranges-end">end</a></code>(<var>index</var>)</dt><dd>

    <p>Returns the time for the end of the range with the given index.</p>

    <p>Throws an <code id="time-ranges:indexsizeerror-2"><a href="/breakup/specs/core-algorithms/#indexsizeerror">IndexSizeError</a></code> exception if the index is out of range.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-timeranges-length"><code>length</code></dfn> IDL attribute must return the
  number of ranges represented by the object.</p>

  <p>The <dfn id="dom-timeranges-start"><code>start(<var>index</var>)</code></dfn>
  method must return the position of the start of the <var>index</var>th range represented
  by the object, in seconds measured from the start of the timeline that the object covers.</p>

  <p>The <dfn id="dom-timeranges-end"><code>end(<var>index</var>)</code></dfn> method
  must return the position of the end of the <var>index</var>th range represented by the
  object, in seconds measured from the start of the timeline that the object covers.</p>

  <p>These methods must throw <code id="time-ranges:indexsizeerror-3"><a href="/breakup/specs/core-algorithms/#indexsizeerror">IndexSizeError</a></code> exceptions if called with an <var>index</var> argument greater than or equal to the number of ranges represented by the
  object.</p>

  <p>When a <code id="time-ranges:timeranges-2"><a href="/breakup/specs/html-media/#timeranges">TimeRanges</a></code> object is said to be a <dfn id="normalised-timeranges-object">normalised <code>TimeRanges</code>
  object</dfn>, the ranges it represents must obey the following criteria:</p>

  <ul><li>The start of a range must be greater than the end of all earlier ranges.</li><li>The start of a range must be less than or equal to the end of that same range.</li></ul>

  <p>In other words, the ranges in such an object are ordered, don't overlap, and don't touch
  (adjacent ranges are folded into one bigger range). A range can be empty (referencing just a
  single moment in time), e.g. to indicate that only one frame is currently buffered in the case
  that the user agent has discarded the entire <a href="/breakup/specs/html-media/#media-resource" id="time-ranges:media-resource">media resource</a> except for the current
  frame, when a <a href="/breakup/specs/html-media/#media-element" id="time-ranges:media-element">media element</a> is paused.</p>

  <p>Ranges in a <code id="time-ranges:timeranges-3"><a href="/breakup/specs/html-media/#timeranges">TimeRanges</a></code> object must be inclusive.</p>

  <p class="example">Thus, the end of a range would be equal to the start of a following adjacent
  (touching but not overlapping) range. Similarly, a range covering a whole timeline anchored at
  zero would have a start equal to zero and an end equal to the duration of the timeline.</p>

  <p>The timelines used by the objects returned by the <code id="time-ranges:dom-media-buffered"><a href="/breakup/specs/html-media/#dom-media-buffered">buffered</a></code>, <code id="time-ranges:dom-media-seekable"><a href="/breakup/specs/html-media/#dom-media-seekable">seekable</a></code> and
  <code id="time-ranges:dom-media-played"><a href="/breakup/specs/html-media/#dom-media-played">played</a></code> IDL attributes of <a href="/breakup/specs/html-media/#media-element" id="time-ranges:media-element-2">media
  elements</a> must be that element's <a href="/breakup/specs/html-media/#media-timeline" id="time-ranges:media-timeline">media timeline</a>.</p></section>

  


  <section><h2>The <code id="the-trackevent-interface:trackevent"><a href="/breakup/specs/html-media/#trackevent">TrackEvent</a></code> interface</h2>

  <pre class="idl">[Constructor(DOMString type, optional <a href="/breakup/specs/html-media/#trackeventinit" id="the-trackevent-interface:trackeventinit">TrackEventInit</a> eventInitDict)]
interface <dfn id="trackevent">TrackEvent</dfn> : <a href="/breakup/specs/core-algorithms/#event" id="the-trackevent-interface:event">Event</a> {
  readonly attribute (<a href="/breakup/specs/html-media/#videotrack" id="the-trackevent-interface:videotrack">VideoTrack</a> or <a href="/breakup/specs/html-media/#audiotrack" id="the-trackevent-interface:audiotrack">AudioTrack</a> or <a href="/breakup/specs/html-media/#texttrack" id="the-trackevent-interface:texttrack">TextTrack</a>)? <a href="/breakup/specs/html-media/#dom-trackevent-track" id="the-trackevent-interface:dom-trackevent-track">track</a>;
};

dictionary <dfn id="trackeventinit">TrackEventInit</dfn> : <a href="/breakup/specs/core-algorithms/#eventinit" id="the-trackevent-interface:eventinit">EventInit</a> {
  (<a href="/breakup/specs/html-media/#videotrack" id="the-trackevent-interface:videotrack-2">VideoTrack</a> or <a href="/breakup/specs/html-media/#audiotrack" id="the-trackevent-interface:audiotrack-2">AudioTrack</a> or <a href="/breakup/specs/html-media/#texttrack" id="the-trackevent-interface:texttrack-2">TextTrack</a>)? track;
};</pre>

  <dl class="domintro"><dt><var>event</var> . <code id="the-trackevent-interface:dom-trackevent-track-2"><a href="/breakup/specs/html-media/#dom-trackevent-track">track</a></code></dt><dd>

    <p>Returns the track object (<code id="the-trackevent-interface:texttrack-3"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code>, <code id="the-trackevent-interface:audiotrack-3"><a href="/breakup/specs/html-media/#audiotrack">AudioTrack</a></code>, or
    <code id="the-trackevent-interface:videotrack-3"><a href="/breakup/specs/html-media/#videotrack">VideoTrack</a></code>) to which the event relates.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-trackevent-track"><code>track</code></dfn> attribute must return the value
  it was initialised to. When the object is created, this attribute must be initialised to null. It
  represents the context information for the event.</p></section>

  



  <section><h2>Event summary</h2>

  <p><i>This section is non-normative.</i></p>

  <p>The following events fire on <a href="/breakup/specs/html-media/#media-element" id="mediaevents:media-element">media elements</a> as part of the
  processing model described above:</p>

  <table><thead><tr><th>Event name
     </th><th>Interface
     </th><th>Fired when...
     </th><th>Preconditions

   </th></tr></thead><tbody><tr><td><dfn id="event-media-loadstart"><code>loadstart</code></dfn>

     </td><td><code id="mediaevents:event"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The user agent begins looking for <a href="/breakup/specs/html-media/#media-data" id="mediaevents:media-data">media data</a>, as part of the <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="mediaevents:concept-media-load-algorithm">resource selection algorithm</a>.

     </td><td><code id="mediaevents:dom-media-networkstate"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> equals <code id="mediaevents:dom-media-network_loading"><a href="/breakup/specs/html-media/#dom-media-network_loading">NETWORK_LOADING</a></code>

    </td></tr><tr><td><dfn id="event-media-progress"><code>progress</code></dfn>

     </td><td><code id="mediaevents:event-2"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The user agent is fetching <a href="/breakup/specs/html-media/#media-data" id="mediaevents:media-data-2">media data</a>.

     </td><td><code id="mediaevents:dom-media-networkstate-2"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> equals <code id="mediaevents:dom-media-network_loading-2"><a href="/breakup/specs/html-media/#dom-media-network_loading">NETWORK_LOADING</a></code>

    </td></tr><tr><td><dfn id="event-media-suspend"><code>suspend</code></dfn>

     </td><td><code id="mediaevents:event-3"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The user agent is intentionally not currently fetching <a href="/breakup/specs/html-media/#media-data" id="mediaevents:media-data-3">media data</a>.

     </td><td><code id="mediaevents:dom-media-networkstate-3"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> equals <code id="mediaevents:dom-media-network_idle"><a href="/breakup/specs/html-media/#dom-media-network_idle">NETWORK_IDLE</a></code>

    </td></tr><tr><td><dfn id="event-media-abort"><code>abort</code></dfn>

     </td><td><code id="mediaevents:event-4"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The user agent stops fetching the <a href="/breakup/specs/html-media/#media-data" id="mediaevents:media-data-4">media data</a> before it is completely
     downloaded, but not due to an error.

     </td><td><code id="mediaevents:dom-media-error"><a href="/breakup/specs/html-media/#dom-media-error">error</a></code> is an object with the code <code id="mediaevents:dom-mediaerror-media_err_aborted"><a href="/breakup/specs/html-media/#dom-mediaerror-media_err_aborted">MEDIA_ERR_ABORTED</a></code>. <code id="mediaevents:dom-media-networkstate-4"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> equals either <code id="mediaevents:dom-media-network_empty"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code> or <code id="mediaevents:dom-media-network_idle-2"><a href="/breakup/specs/html-media/#dom-media-network_idle">NETWORK_IDLE</a></code>, depending on when the download was aborted.

    </td></tr><tr><td><dfn id="event-media-error"><code>error</code></dfn>

     </td><td><code id="mediaevents:event-5"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>An error occurs while fetching the <a href="/breakup/specs/html-media/#media-data" id="mediaevents:media-data-5">media data</a>.

     </td><td><code id="mediaevents:dom-media-error-2"><a href="/breakup/specs/html-media/#dom-media-error">error</a></code> is an object with the code <code id="mediaevents:dom-mediaerror-media_err_network"><a href="/breakup/specs/html-media/#dom-mediaerror-media_err_network">MEDIA_ERR_NETWORK</a></code> or higher. <code id="mediaevents:dom-media-networkstate-5"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> equals either <code id="mediaevents:dom-media-network_empty-2"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code> or <code id="mediaevents:dom-media-network_idle-3"><a href="/breakup/specs/html-media/#dom-media-network_idle">NETWORK_IDLE</a></code>, depending on when the download was aborted.

    </td></tr><tr><td><dfn id="event-media-emptied"><code>emptied</code></dfn>

     </td><td><code id="mediaevents:event-6"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>A <a href="/breakup/specs/html-media/#media-element" id="mediaevents:media-element-2">media element</a> whose <code id="mediaevents:dom-media-networkstate-6"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code>
     was previously not in the <code id="mediaevents:dom-media-network_empty-3"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code> state has
     just switched to that state (either because of a fatal error during load that's about to be
     reported, or because the <code id="mediaevents:dom-media-load"><a href="/breakup/specs/html-media/#dom-media-load">load()</a></code> method was invoked while
     the <a href="/breakup/specs/html-media/#concept-media-load-algorithm" id="mediaevents:concept-media-load-algorithm-2">resource selection algorithm</a> was already
     running).

     </td><td><code id="mediaevents:dom-media-networkstate-7"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> is <code id="mediaevents:dom-media-network_empty-4"><a href="/breakup/specs/html-media/#dom-media-network_empty">NETWORK_EMPTY</a></code>; all the IDL attributes are in their
     initial states.

    </td></tr><tr><td><dfn id="event-media-stalled"><code>stalled</code></dfn>

     </td><td><code id="mediaevents:event-7"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The user agent is trying to fetch <a href="/breakup/specs/html-media/#media-data" id="mediaevents:media-data-6">media data</a>, but data is unexpectedly not
     forthcoming.

     </td><td><code id="mediaevents:dom-media-networkstate-8"><a href="/breakup/specs/html-media/#dom-media-networkstate">networkState</a></code> is <code id="mediaevents:dom-media-network_loading-3"><a href="/breakup/specs/html-media/#dom-media-network_loading">NETWORK_LOADING</a></code>.

   </td></tr></tbody><tbody><tr><td><dfn id="event-media-loadedmetadata"><code>loadedmetadata</code></dfn>

     </td><td><code id="mediaevents:event-8"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The user agent has just determined the duration and dimensions of the <a href="/breakup/specs/html-media/#media-resource" id="mediaevents:media-resource">media
     resource</a> and <a href="/breakup/specs/html-media/#the-text-tracks-are-ready" id="mediaevents:the-text-tracks-are-ready">the text tracks are ready</a>.

     </td><td><code id="mediaevents:dom-media-readystate"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> is newly equal to <code id="mediaevents:dom-media-have_metadata"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> or greater for the first time.

    </td></tr><tr><td><dfn id="event-media-loadeddata"><code>loadeddata</code></dfn>

     </td><td><code id="mediaevents:event-9"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The user agent can render the <a href="/breakup/specs/html-media/#media-data" id="mediaevents:media-data-7">media data</a> at the <a href="/breakup/specs/html-media/#current-playback-position" id="mediaevents:current-playback-position">current playback
     position</a> for the first time.

     </td><td><code id="mediaevents:dom-media-readystate-2"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> newly increased to <code id="mediaevents:dom-media-have_current_data"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> or greater for the first time.

    </td></tr><tr><td><dfn id="event-media-canplay"><code>canplay</code></dfn>

     </td><td><code id="mediaevents:event-10"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The user agent can resume playback of the <a href="/breakup/specs/html-media/#media-data" id="mediaevents:media-data-8">media data</a>, but estimates that if
     playback were to be started now, the <a href="/breakup/specs/html-media/#media-resource" id="mediaevents:media-resource-2">media resource</a> could not be rendered at the
     current playback rate up to its end without having to stop for further buffering of content.

     </td><td><code id="mediaevents:dom-media-readystate-3"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> newly increased to <code id="mediaevents:dom-media-have_future_data"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code> or greater.

    </td></tr><tr><td><dfn id="event-media-canplaythrough"><code>canplaythrough</code></dfn>

     </td><td><code id="mediaevents:event-11"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The user agent estimates that if playback were to be started now, the <a href="/breakup/specs/html-media/#media-resource" id="mediaevents:media-resource-3">media
     resource</a> could be rendered at the current playback rate all the way to its end without
     having to stop for further buffering.

     </td><td><code id="mediaevents:dom-media-readystate-4"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> is newly equal to <code id="mediaevents:dom-media-have_enough_data"><a href="/breakup/specs/html-media/#dom-media-have_enough_data">HAVE_ENOUGH_DATA</a></code>.

    </td></tr><tr><td><dfn id="event-media-playing"><code>playing</code></dfn>

     </td><td><code id="mediaevents:event-12"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>Playback is ready to start after having been paused or delayed due to lack of <a href="/breakup/specs/html-media/#media-data" id="mediaevents:media-data-9">media
     data</a>.

     </td><td><code id="mediaevents:dom-media-readystate-5"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> is newly equal to or greater than
     <code id="mediaevents:dom-media-have_future_data-2"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code> and <code id="mediaevents:dom-media-paused"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> is false, or <code id="mediaevents:dom-media-paused-2"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> is newly false and <code id="mediaevents:dom-media-readystate-6"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> is equal to or greater than <code id="mediaevents:dom-media-have_future_data-3"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code>. Even if this event fires, the
     element might still not be <a href="/breakup/specs/html-media/#potentially-playing" id="mediaevents:potentially-playing">potentially playing</a>, e.g. if the element is
     <a href="/breakup/specs/html-media/#blocked-on-its-media-controller" id="mediaevents:blocked-on-its-media-controller">blocked on its media controller</a> (e.g. because the <a href="/breakup/specs/html-media/#current-media-controller" id="mediaevents:current-media-controller">current media
     controller</a> is paused, or another <a href="/breakup/specs/html-media/#slaved-media-elements" id="mediaevents:slaved-media-elements">slaved media
     element</a> is stalled somehow, or because the <a href="/breakup/specs/html-media/#media-resource" id="mediaevents:media-resource-4">media resource</a> has no data
     corresponding to the <a href="/breakup/specs/html-media/#media-controller-position" id="mediaevents:media-controller-position">media controller position</a>), or the element is <a href="/breakup/specs/html-media/#paused-for-user-interaction" id="mediaevents:paused-for-user-interaction">paused
     for user interaction</a> or <a href="/breakup/specs/html-media/#paused-for-in-band-content" id="mediaevents:paused-for-in-band-content">paused for in-band content</a>.

    </td></tr><tr><td><dfn id="event-media-waiting"><code>waiting</code></dfn>

     </td><td><code id="mediaevents:event-13"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>Playback has stopped because the next frame is not available, but the user agent expects
     that frame to become available in due course.

     </td><td><code id="mediaevents:dom-media-readystate-7"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> is equal to or less than <code id="mediaevents:dom-media-have_current_data-2"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code>, and <code id="mediaevents:dom-media-paused-3"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> is false. Either <code id="mediaevents:dom-media-seeking"><a href="/breakup/specs/html-media/#dom-media-seeking">seeking</a></code> is true, or the <a href="/breakup/specs/html-media/#current-playback-position" id="mediaevents:current-playback-position-2">current playback position</a>
     is not contained in any of the ranges in <code id="mediaevents:dom-media-buffered"><a href="/breakup/specs/html-media/#dom-media-buffered">buffered</a></code>. It
     is possible for playback to stop for other reasons without <code id="mediaevents:dom-media-paused-4"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> being false, but those reasons do not fire this event
     (and when those situations resolve, a separate <code id="mediaevents:event-media-playing"><a href="/breakup/specs/html-media/#event-media-playing">playing</a></code>
     event is not fired either): e.g. the element is newly <a href="/breakup/specs/html-media/#blocked-on-its-media-controller" id="mediaevents:blocked-on-its-media-controller-2">blocked on its media
     controller</a>, or <a href="/breakup/specs/html-media/#ended-playback" id="mediaevents:ended-playback">playback ended</a>, or playback
     <a href="/breakup/specs/html-media/#stopped-due-to-errors" id="mediaevents:stopped-due-to-errors">stopped due to errors</a>, or the element has <a href="/breakup/specs/html-media/#paused-for-user-interaction" id="mediaevents:paused-for-user-interaction-2">paused for user interaction</a>
     or <a href="/breakup/specs/html-media/#paused-for-in-band-content" id="mediaevents:paused-for-in-band-content-2">paused for in-band content</a>.

   </td></tr></tbody><tbody><tr><td><dfn id="event-media-seeking"><code>seeking</code></dfn>

     </td><td><code id="mediaevents:event-14"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The <code id="mediaevents:dom-media-seeking-2"><a href="/breakup/specs/html-media/#dom-media-seeking">seeking</a></code> IDL attribute changed to true, and the user agent has started seeking to a new position.

     </td><td>

    </td></tr><tr><td><dfn id="event-media-seeked"><code>seeked</code></dfn>

     </td><td><code id="mediaevents:event-15"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The <code id="mediaevents:dom-media-seeking-3"><a href="/breakup/specs/html-media/#dom-media-seeking">seeking</a></code> IDL attribute changed to false after the <a href="/breakup/specs/html-media/#current-playback-position" id="mediaevents:current-playback-position-3">current playback position</a> was changed.

     </td><td>

    </td></tr><tr><td><dfn id="event-media-ended"><code>ended</code></dfn>

     </td><td><code id="mediaevents:event-16"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>Playback has stopped because the end of the <a href="/breakup/specs/html-media/#media-resource" id="mediaevents:media-resource-5">media resource</a> was reached.

     </td><td><code id="mediaevents:dom-media-currenttime"><a href="/breakup/specs/html-media/#dom-media-currenttime">currentTime</a></code> equals the end of the <a href="/breakup/specs/html-media/#media-resource" id="mediaevents:media-resource-6">media
     resource</a>; <code id="mediaevents:dom-media-ended"><a href="/breakup/specs/html-media/#dom-media-ended">ended</a></code> is true.

   </td></tr></tbody><tbody><tr><td><dfn id="event-media-durationchange"><code>durationchange</code></dfn>

     </td><td><code id="mediaevents:event-17"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The <code id="mediaevents:dom-media-duration"><a href="/breakup/specs/html-media/#dom-media-duration">duration</a></code> attribute has just been updated.

     </td><td>

    </td></tr><tr><td><dfn id="event-media-timeupdate"><code>timeupdate</code></dfn>

     </td><td><code id="mediaevents:event-18"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The <a href="/breakup/specs/html-media/#current-playback-position" id="mediaevents:current-playback-position-4">current playback position</a> changed as part of normal playback or in an especially interesting way, for example discontinuously.

     </td><td>

    </td></tr><tr><td><dfn id="event-media-play"><code>play</code></dfn>

     </td><td><code id="mediaevents:event-19"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The element is no longer paused. Fired after the <code id="mediaevents:dom-media-play"><a href="/breakup/specs/html-media/#dom-media-play">play()</a></code>
     method has returned, or when the <code id="mediaevents:attr-media-autoplay"><a href="/breakup/specs/html-media/#attr-media-autoplay">autoplay</a></code> attribute
     has caused playback to begin.

     </td><td><code id="mediaevents:dom-media-paused-5"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> is newly false.

    </td></tr><tr><td><dfn id="event-media-pause"><code>pause</code></dfn>

     </td><td><code id="mediaevents:event-20"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The element has been paused. Fired after the <code id="mediaevents:dom-media-pause"><a href="/breakup/specs/html-media/#dom-media-pause">pause()</a></code>
     method has returned.

     </td><td><code id="mediaevents:dom-media-paused-6"><a href="/breakup/specs/html-media/#dom-media-paused">paused</a></code> is newly true.

    </td></tr><tr><td><dfn id="event-media-ratechange"><code>ratechange</code></dfn>

     </td><td><code id="mediaevents:event-21"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>Either the <code id="mediaevents:dom-media-defaultplaybackrate"><a href="/breakup/specs/html-media/#dom-media-defaultplaybackrate">defaultPlaybackRate</a></code> or the
     <code id="mediaevents:dom-media-playbackrate"><a href="/breakup/specs/html-media/#dom-media-playbackrate">playbackRate</a></code> attribute has just been updated.

     </td><td>

   </td></tr></tbody><tbody><tr><td><dfn id="event-media-resize"><code>resize</code></dfn>

     </td><td><code id="mediaevents:event-22"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>One or both of the <code id="mediaevents:dom-video-videowidth"><a href="/breakup/specs/html-media/#dom-video-videowidth">videoWidth</a></code> and <code id="mediaevents:dom-video-videoheight"><a href="/breakup/specs/html-media/#dom-video-videoheight">videoHeight</a></code> attributes have just been updated.

     </td><td><a href="/breakup/specs/html-media/#media-element" id="mediaevents:media-element-3">Media element</a> is a <code id="mediaevents:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element; <code id="mediaevents:dom-media-readystate-8"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> is not <code id="mediaevents:dom-media-have_nothing"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code>

    </td></tr><tr><td><dfn id="event-media-volumechange"><code>volumechange</code></dfn>

     </td><td><code id="mediaevents:event-23"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>Either the <code id="mediaevents:dom-media-volume"><a href="/breakup/specs/html-media/#dom-media-volume">volume</a></code> attribute or the <code id="mediaevents:dom-media-muted"><a href="/breakup/specs/html-media/#dom-media-muted">muted</a></code> attribute has changed. Fired after the relevant
     attribute's setter has returned.

     </td><td>

  </td></tr></tbody></table>

  <p>The following events fire on <code id="mediaevents:mediacontroller"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> objects:</p>

  <table><thead><tr><th>Event name

     </th><th>Interface

     </th><th>Fired when...

   </th></tr></thead><tbody><tr><td><dfn id="event-mediacontroller-emptied"><code>emptied</code></dfn>

     </td><td><code id="mediaevents:event-24"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>All the <a href="/breakup/specs/html-media/#slaved-media-elements" id="mediaevents:slaved-media-elements-2">slaved media elements</a> newly have <code id="mediaevents:dom-media-readystate-9"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> set to <code id="mediaevents:dom-media-have_nothing-2"><a href="/breakup/specs/html-media/#dom-media-have_nothing">HAVE_NOTHING</a></code> or greater, or there are no longer any
     <a href="/breakup/specs/html-media/#slaved-media-elements" id="mediaevents:slaved-media-elements-3">slaved media elements</a>.

    </td></tr><tr><td><dfn id="event-mediacontroller-loadedmetadata"><code>loadedmetadata</code></dfn>

     </td><td><code id="mediaevents:event-25"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>All the <a href="/breakup/specs/html-media/#slaved-media-elements" id="mediaevents:slaved-media-elements-4">slaved media elements</a> newly have <code id="mediaevents:dom-media-readystate-10"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> set to <code id="mediaevents:dom-media-have_metadata-2"><a href="/breakup/specs/html-media/#dom-media-have_metadata">HAVE_METADATA</a></code> or greater.

    </td></tr><tr><td><dfn id="event-mediacontroller-loadeddata"><code>loadeddata</code></dfn>

     </td><td><code id="mediaevents:event-26"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>All the <a href="/breakup/specs/html-media/#slaved-media-elements" id="mediaevents:slaved-media-elements-5">slaved media elements</a> newly have <code id="mediaevents:dom-media-readystate-11"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> set to <code id="mediaevents:dom-media-have_current_data-3"><a href="/breakup/specs/html-media/#dom-media-have_current_data">HAVE_CURRENT_DATA</a></code> or greater.

    </td></tr><tr><td><dfn id="event-mediacontroller-canplay"><code>canplay</code></dfn>

     </td><td><code id="mediaevents:event-27"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>All the <a href="/breakup/specs/html-media/#slaved-media-elements" id="mediaevents:slaved-media-elements-6">slaved media elements</a> newly have <code id="mediaevents:dom-media-readystate-12"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> set to <code id="mediaevents:dom-media-have_future_data-4"><a href="/breakup/specs/html-media/#dom-media-have_future_data">HAVE_FUTURE_DATA</a></code> or greater.

    </td></tr><tr><td><dfn id="event-mediacontroller-canplaythrough"><code>canplaythrough</code></dfn>

     </td><td><code id="mediaevents:event-28"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>All the <a href="/breakup/specs/html-media/#slaved-media-elements" id="mediaevents:slaved-media-elements-7">slaved media elements</a> newly have <code id="mediaevents:dom-media-readystate-13"><a href="/breakup/specs/html-media/#dom-media-readystate">readyState</a></code> set to <code id="mediaevents:dom-media-have_enough_data-2"><a href="/breakup/specs/html-media/#dom-media-have_enough_data">HAVE_ENOUGH_DATA</a></code>.

    </td></tr><tr><td><dfn id="event-mediacontroller-playing"><code>playing</code></dfn>

     </td><td><code id="mediaevents:event-29"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The <code id="mediaevents:mediacontroller-2"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is no longer a <a href="/breakup/specs/html-media/#blocked-media-controller" id="mediaevents:blocked-media-controller">blocked media controller</a>.

    </td></tr><tr><td><dfn id="event-mediacontroller-waiting"><code>waiting</code></dfn>

     </td><td><code id="mediaevents:event-30"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The <code id="mediaevents:mediacontroller-3"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> is now a <a href="/breakup/specs/html-media/#blocked-media-controller" id="mediaevents:blocked-media-controller-2">blocked media controller</a>.

    </td></tr><tr><td><dfn id="event-mediacontroller-ended"><code>ended</code></dfn>

     </td><td><code id="mediaevents:event-31"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>All the <a href="/breakup/specs/html-media/#slaved-media-elements" id="mediaevents:slaved-media-elements-8">slaved media elements</a> have newly <a href="/breakup/specs/html-media/#ended-playback" id="mediaevents:ended-playback-2">ended playback</a>; the
     <code id="mediaevents:mediacontroller-4"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code> has reached the end of all the <a href="/breakup/specs/html-media/#slaved-media-elements" id="mediaevents:slaved-media-elements-9">slaved media elements</a>.

   </td></tr></tbody><tbody><tr><td><dfn id="event-mediacontroller-durationchange"><code>durationchange</code></dfn>

     </td><td><code id="mediaevents:event-32"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The <code id="mediaevents:dom-mediacontroller-duration"><a href="/breakup/specs/html-media/#dom-mediacontroller-duration">duration</a></code> attribute has just been
     updated.

    </td></tr><tr><td><dfn id="event-mediacontroller-timeupdate"><code>timeupdate</code></dfn>

     </td><td><code id="mediaevents:event-33"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The <a href="/breakup/specs/html-media/#media-controller-position" id="mediaevents:media-controller-position-2">media controller position</a> changed.

    </td></tr><tr><td><dfn id="event-mediacontroller-play"><code>play</code></dfn>

     </td><td><code id="mediaevents:event-34"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The <code id="mediaevents:dom-mediacontroller-paused"><a href="/breakup/specs/html-media/#dom-mediacontroller-paused">paused</a></code> attribute is newly false.

    </td></tr><tr><td><dfn id="event-mediacontroller-pause"><code>pause</code></dfn>

     </td><td><code id="mediaevents:event-35"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The <code id="mediaevents:dom-mediacontroller-paused-2"><a href="/breakup/specs/html-media/#dom-mediacontroller-paused">paused</a></code> attribute is newly true.

    </td></tr><tr><td><dfn id="event-mediacontroller-ratechange"><code>ratechange</code></dfn>

     </td><td><code id="mediaevents:event-36"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>Either the <code id="mediaevents:dom-mediacontroller-defaultplaybackrate"><a href="/breakup/specs/html-media/#dom-mediacontroller-defaultplaybackrate">defaultPlaybackRate</a></code>
     attribute or the <code id="mediaevents:dom-mediacontroller-playbackrate"><a href="/breakup/specs/html-media/#dom-mediacontroller-playbackrate">playbackRate</a></code> attribute
     has just been updated.

    </td></tr><tr><td><dfn id="event-mediacontroller-volumechange"><code>volumechange</code></dfn>

     </td><td><code id="mediaevents:event-37"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>Either the <code id="mediaevents:dom-mediacontroller-volume"><a href="/breakup/specs/html-media/#dom-mediacontroller-volume">volume</a></code> attribute or the <code id="mediaevents:dom-mediacontroller-muted"><a href="/breakup/specs/html-media/#dom-mediacontroller-muted">muted</a></code> attribute has just been updated.

  </td></tr></tbody></table>


  <p>The following events fire on <code id="mediaevents:audiotracklist"><a href="/breakup/specs/html-media/#audiotracklist">AudioTrackList</a></code>, <code id="mediaevents:videotracklist"><a href="/breakup/specs/html-media/#videotracklist">VideoTrackList</a></code>, and
  <code id="mediaevents:texttracklist"><a href="/breakup/specs/html-media/#texttracklist">TextTrackList</a></code> objects:</p>

  <table><thead><tr><th>Event name

     </th><th>Interface

     </th><th>Fired when...

   </th></tr></thead><tbody><tr><td><dfn id="event-media-change"><code>change</code></dfn>

     </td><td><code id="mediaevents:event-38"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>One or more tracks in the track list have been enabled or disabled.

    </td></tr><tr><td><dfn id="event-media-addtrack"><code>addtrack</code></dfn>

     </td><td><code id="mediaevents:trackevent"><a href="/breakup/specs/html-media/#trackevent">TrackEvent</a></code>

     </td><td>A track has been added to the track list.

    </td></tr><tr><td><dfn id="event-media-removetrack"><code>removetrack</code></dfn>

     </td><td><code id="mediaevents:trackevent-2"><a href="/breakup/specs/html-media/#trackevent">TrackEvent</a></code>

     </td><td>A track has been removed from the track list.

  </td></tr></tbody></table>



  <p>The following event fires on <code id="mediaevents:texttrack"><a href="/breakup/specs/html-media/#texttrack">TextTrack</a></code> objects and <code id="mediaevents:the-track-element"><a href="/breakup/specs/html-media/#the-track-element">track</a></code> elements:</p>

  <table><thead><tr><th>Event name

     </th><th>Interface

     </th><th>Fired when...

   </th></tr></thead><tbody><tr><td><dfn id="event-media-cuechange"><code>cuechange</code></dfn>

     </td><td><code id="mediaevents:event-39"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>One or more cues in the track have become active or stopped being active.

  </td></tr></tbody></table>


  <p>The following events fire on <code id="mediaevents:texttrackcue"><a href="/breakup/specs/html-media/#texttrackcue">TextTrackCue</a></code> objects:</p>

  <table><thead><tr><th>Event name

     </th><th>Interface

     </th><th>Fired when...

   </th></tr></thead><tbody><tr><td><dfn id="event-media-enter"><code>enter</code></dfn>

     </td><td><code id="mediaevents:event-40"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The cue has become active.

    </td></tr><tr><td><dfn id="event-media-exit"><code>exit</code></dfn>

     </td><td><code id="mediaevents:event-41"><a href="/breakup/specs/core-algorithms/#event">Event</a></code>

     </td><td>The cue has stopped being active.

  </td></tr></tbody></table></section>



  

  <section><h2>Security and privacy considerations</h2>

  <p>The main security and privacy implications of the <code id="security-and-privacy-considerations:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> and <code id="security-and-privacy-considerations:the-audio-element"><a href="/breakup/specs/html-media/#the-audio-element">audio</a></code>
  elements come from the ability to embed media cross-origin. There are two directions that threats
  can flow: from hostile content to a victim page, and from a hostile page to victim content.</p>

  <hr>

  <p>If a victim page embeds hostile content, the threat is that the content might contain scripted
  code that attempts to interact with the <code id="security-and-privacy-considerations:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> that embeds the content. To avoid
  this, user agents must ensure that there is no access from the content to the embedding page. In
  the case of media content that uses DOM concepts, the embedded content must be treated as if it
  was in its own unrelated <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="security-and-privacy-considerations:top-level-browsing-context">top-level browsing context</a>.</p>

  <p class="example">For instance, if an SVG animation was embedded in a <code id="security-and-privacy-considerations:the-video-element-2"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element,
  the user agent would not give it access to the DOM of the outer page. From the perspective of
  scripts in the SVG resource, the SVG file would appear to be in a lone top-level browsing context
  with no parent.</p>

  <hr>

  <p>If a hostile page embeds victim content, the threat is that the embedding page could obtain
  information from the content that it would not otherwise have access to. The API does expose some
  information: the existence of the media, its type, its duration, its size, and the performance
  characteristics of its host. Such information is already potentially problematic, but in practice
  the same information can more or less be obtained using the <code id="security-and-privacy-considerations:the-img-element"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> element, and so it
  has been deemed acceptable.</p>

  <p>However, significantly more sensitive information could be obtained if the user agent further
  exposes metadata within the content such as subtitles or chapter titles. Such information is
  therefore only exposed if the video resource passes a CORS <a href="/breakup/specs/core-algorithms/#resource-sharing-check" id="security-and-privacy-considerations:resource-sharing-check">resource sharing check</a>.
  The <code id="security-and-privacy-considerations:attr-media-crossorigin"><a href="/breakup/specs/html-media/#attr-media-crossorigin">crossorigin</a></code> attribute allows authors to control
  how this check is performed. [[!FETCH]]</p>

  <p class="example">Without this restriction, an attacker could trick a user running within a
  corporate network into visiting a site that attempts to load a video from a previously leaked
  location on the corporation's intranet. If such a video included confidential plans for a new
  product, then being able to read the subtitles would present a serious confidentiality breach.</p></section>

  



  <section><h2>Best practices for authors using media elements</h2>

  <p><i>This section is non-normative.</i></p>

  <p>Playing audio and video resources on small devices such as set-top boxes or mobile phones is
  often constrained by limited hardware resources in the device. For example, a device might only
  support three simultaneous videos. For this reason, it is a good practice to release resources
  held by <a href="/breakup/specs/html-media/#media-element" id="best-practices-for-authors-using-media-elements:media-element">media elements</a> when they are done playing, either by
  being very careful about removing all references to the element and allowing it to be garbage
  collected, or, even better, by removing the element's <code id="best-practices-for-authors-using-media-elements:attr-media-src"><a href="/breakup/specs/html-media/#attr-media-src">src</a></code>
  attribute and any <code id="best-practices-for-authors-using-media-elements:the-source-element"><a href="/breakup/specs/html-media/#the-source-element">source</a></code> element descendants, and invoking the element's <code id="best-practices-for-authors-using-media-elements:dom-media-load"><a href="/breakup/specs/html-media/#dom-media-load">load()</a></code> method.</p>

  <p>Similarly, when the playback rate is not exactly 1.0, hardware, software, or format limitations
  can cause video frames to be dropped and audio to be choppy or muted.</p></section>


  

  <section><h2>Best practices for implementors of media elements</h2>

  <p><i>This section is non-normative.</i></p>

  <p>How accurately various aspects of the <a href="/breakup/specs/html-media/#media-element" id="best-practices-for-implementors-of-media-elements:media-element">media element</a> API are implemented is
  considered a quality-of-implementation issue.</p>

  <p>For example, when implementing the <code id="best-practices-for-implementors-of-media-elements:dom-media-buffered"><a href="/breakup/specs/html-media/#dom-media-buffered">buffered</a></code> attribute,
  how precise an implementation reports the ranges that have been buffered depends on how carefully
  the user agent inspects the data. Since the API reports ranges as times, but the data is obtained
  in byte streams, a user agent receiving a variable-bit-rate stream might only be able to determine
  precise times by actually decoding all of the data. User agents aren't required to do this,
  however; they can instead return estimates (e.g. based on the average bit rate seen so far) which
  get revised as more information becomes available.</p>

  <p>As a general rule, user agents are urged to be conservative rather than optimistic. For
  example, it would be bad to report that everything had been buffered when it had not.</p>

  <p>Another quality-of-implementation issue would be playing a video backwards when the codec is
  designed only for forward playback (e.g. there aren't many key frames, and they are far apart, and
  the intervening frames only have deltas from the previous frame). User agents could do a poor job,
  e.g. only showing key frames; however, better implementations would do more work and thus do a
  better job, e.g. actually decoding parts of the video forwards, storing the complete frames, and
  then playing the frames backwards.</p>

  <p>Similarly, while implementations are allowed to drop buffered data at any time (there is no
  requirement that a user agent keep all the media data obtained for the lifetime of the media
  element), it is again a quality of implementation issue: user agents with sufficient resources to
  keep all the data around are encouraged to do so, as this allows for a better user experience. For
  example, if the user is watching a live stream, a user agent could allow the user only to view the
  live video; however, a better user agent would buffer everything and allow the user to seek
  through the earlier material, pause it, play it forwards and backwards, etc.</p>

  <p>When multiple tracks are synchronised with a <code id="best-practices-for-implementors-of-media-elements:mediacontroller"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>, it is possible for
  scripts to add and remove media elements from the <code id="best-practices-for-implementors-of-media-elements:mediacontroller-2"><a href="/breakup/specs/html-media/#mediacontroller">MediaController</a></code>'s list of
  <a href="/breakup/specs/html-media/#slaved-media-elements" id="best-practices-for-implementors-of-media-elements:slaved-media-elements">slaved media elements</a>, even while these tracks are playing. How smoothly the media
  plays back in such situations is another quality-of-implementation issue.</p>

  <hr>

  <p>When a <a href="/breakup/specs/html-media/#media-element" id="best-practices-for-implementors-of-media-elements:media-element-2">media element</a> that is paused is <a href="/breakup/specs/core-algorithms/#remove-an-element-from-a-document" id="best-practices-for-implementors-of-media-elements:remove-an-element-from-a-document">removed from a document</a> and not reinserted before the next time the <a href="/breakup/specs/browser-dom/#event-loop" id="best-practices-for-implementors-of-media-elements:event-loop">event
  loop</a> reaches <a href="/breakup/specs/browser-dom/#step1">step 1</a>, implementations that are resource constrained are encouraged to take
  that opportunity to release all hardware resources (like video planes, networking resources, and
  data buffers) used by the <a href="/breakup/specs/html-media/#media-element" id="best-practices-for-implementors-of-media-elements:media-element-3">media element</a>. (User agents still have to keep track of the
  playback position and so forth, though, in case playback is later restarted.)</p></section></section></body></html>