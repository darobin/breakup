<html lang="en"><head>
    <meta charset="utf-8">
    <title>HTML Templates</title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove"></script>
    <script class="remove">
      var respecConfig = {
              specStatus:     "ED"
          ,   shortName:      "html-template"
          ,   editors:      [{ name: "Up for the taking" }]
          ,   wg:             "HTML Working Group"
          ,   wgURI:          "http://www.w3.org/html/wg/"
          ,   wgPublicList:   "public-html"
          ,   wgPatentURI:    "http://www.w3.org/2004/01/pp-impl/40318/status"
          ,   license:        "cc-by"
          ,   processVersion: "2014"
        };
    </script>
  </head>
  <body>
    <section id="abstract">
      <p>
        An element and API that enables templating.
      </p>
    </section>
    <section id="sotd">
      <p>
        This specification is an experimental breakup of the
        <a href="http://www.w3.org/TR/html51/">HTML specification</a>. You can see the full list on
        <a href="https://darobin.github.io/breakup/specs/">the index page</a> and take part in the
        discussion in <a href="https://github.com/darobin/breakup/">the repository</a>.
      </p>
    </section>
  

<section><h2>The <dfn><code>template</code></dfn> element</h2>

  <dl class="element"><dt><a href="#concept-element-categories" id="the-template-element:concept-element-categories">Categories</a>:</dt><dd><a href="#metadata-content-2" id="the-template-element:metadata-content-2">Metadata content</a>.</dd><dd><a href="#flow-content-2" id="the-template-element:flow-content-2">Flow content</a>.</dd><dd><a href="#phrasing-content-2" id="the-template-element:phrasing-content-2">Phrasing content</a>.</dd><dd><a href="#script-supporting-elements-2" id="the-template-element:script-supporting-elements-2">Script-supporting element</a>.</dd><dt><a href="#concept-element-contexts" id="the-template-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>Where <a href="#metadata-content-2" id="the-template-element:metadata-content-2-2">metadata content</a> is expected.</dd><dd>Where <a href="#phrasing-content-2" id="the-template-element:phrasing-content-2-2">phrasing content</a> is expected.</dd><dd>Where <a href="#script-supporting-elements-2" id="the-template-element:script-supporting-elements-2-2">script-supporting elements</a> are expected.</dd><dd>As a child of a <code id="the-template-element:the-colgroup-element"><a href="/breakup/specs/html-tables/#the-colgroup-element">colgroup</a></code> element that doesn't have a <code id="the-template-element:attr-colgroup-span"><a href="/breakup/specs/html-tables/#attr-colgroup-span">span</a></code> attribute.</dd><dt><a href="#concept-element-content-model" id="the-template-element:concept-element-content-model">Content model</a>:</dt><dd>Either: <a href="#metadata-content-2" id="the-template-element:metadata-content-2-3">Metadata content</a>.</dd><dd>Or: <a href="#flow-content-2" id="the-template-element:flow-content-2-2">Flow content</a>.</dd><dd>Or: The content model of <code id="the-template-element:the-ol-element"><a href="/breakup/specs/html-lists/#the-ol-element">ol</a></code> and <code id="the-template-element:the-ul-element"><a href="/breakup/specs/html-lists/#the-ul-element">ul</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-dl-element"><a href="/breakup/specs/html-lists/#the-dl-element">dl</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-figure-element"><a href="/breakup/specs/html-figures/#the-figure-element">figure</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-ruby-element"><a href="/breakup/specs/html-text/#the-ruby-element">ruby</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-object-element"><a href="#the-object-element">object</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-video-element"><a href="#the-video-element">video</a></code> and <code id="the-template-element:the-audio-element"><a href="#the-audio-element">audio</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-table-element"><a href="/breakup/specs/html-tables/#the-table-element">table</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-colgroup-element-2"><a href="/breakup/specs/html-tables/#the-colgroup-element">colgroup</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-thead-element"><a href="/breakup/specs/html-tables/#the-thead-element">thead</a></code>, <code id="the-template-element:the-tbody-element"><a href="/breakup/specs/html-tables/#the-tbody-element">tbody</a></code>, and <code id="the-template-element:the-tfoot-element"><a href="/breakup/specs/html-tables/#the-tfoot-element">tfoot</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-tr-element"><a href="/breakup/specs/html-tables/#the-tr-element">tr</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-fieldset-element"><a href="/breakup/specs/html-forms/#the-fieldset-element">fieldset</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-select-element"><a href="/breakup/specs/html-forms/#the-select-element">select</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-details-element"><a href="#the-details-element">details</a></code> elements.</dd><dd>Or: The content model of <code id="the-template-element:the-menu-element"><a href="#the-menu-element">menu</a></code> elements whose <code id="the-template-element:attr-menu-type"><a href="#attr-menu-type">type</a></code> attribute is in the <a href="#popup-menu-state" id="the-template-element:popup-menu-state">popup menu state</a>.</dd><dt><a href="#concept-element-tag-omission" id="the-template-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>Neither tag is omissible.</dd><dt><a href="#concept-element-attributes" id="the-template-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-template-element:global-attributes">Global attributes</a></dd><dt>Allowed <a href="#aria-role-attribute">ARIA role attribute</a> values:</dt><dd>None</dd><dt>Allowed <a href="#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="#index-aria-global">Global aria-* attributes</a></dd><dt><a href="#concept-element-dom" id="the-template-element:concept-element-dom">DOM interface</a>:</dt><dd>
<pre class="idl">interface <dfn id="htmltemplateelement">HTMLTemplateElement</dfn> : <a href="#htmlelement" id="the-template-element:htmlelement">HTMLElement</a> {
  readonly attribute <a href="/breakup/specs/core-algorithms/#documentfragment" id="the-template-element:documentfragment">DocumentFragment</a> <a href="/breakup/specs/html-template/#dom-template-content" id="the-template-element:dom-template-content">content</a>;
};</pre>
</dd></dl>

  <p>The <code id="the-template-element:the-template-element"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> element is used to declare fragments of HTML that can be cloned and
  inserted in the document by script.</p>

  <p>In a rendering, the <code id="the-template-element:the-template-element-2"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> element <a href="#represents" id="the-template-element:represents">represents</a> nothing.</p>

  <dl class="domintro"><dt><var>template</var> . <code id="the-template-element:dom-template-content-2"><a href="/breakup/specs/html-template/#dom-template-content">content</a></code></dt><dd>

    <p>Returns the contents of the <code id="the-template-element:the-template-element-3"><a href="/breakup/specs/html-template/#the-template-element">template</a></code>, which are stored in a
    <code id="the-template-element:documentfragment-2"><a href="/breakup/specs/core-algorithms/#documentfragment">DocumentFragment</a></code> associated with a different <code id="the-template-element:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> so as to avoid
    the <code id="the-template-element:the-template-element-4"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> contents interfering with the main <code id="the-template-element:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code>. (For
    example, this avoids form controls from being submitted, scripts from executing, and so
    forth.)</p>

   </dd></dl>

  

  <p>Each <code id="the-template-element:the-template-element-5"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> element has an associated <code id="the-template-element:documentfragment-3"><a href="/breakup/specs/core-algorithms/#documentfragment">DocumentFragment</a></code> object that
  is its <dfn id="template-contents">template contents</dfn>. When a <code id="the-template-element:the-template-element-6"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> element is created, the user
  agent must run the following steps to establish the <a href="/breakup/specs/html-template/#template-contents" id="the-template-element:template-contents">template contents</a>:</p>

  <ol><li><p>Let <var>doc</var> be the <code id="the-template-element:the-template-element-7"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> element's <a id="the-template-element:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="/breakup/specs/html-template/#appropriate-template-contents-owner-document" id="the-template-element:appropriate-template-contents-owner-document">appropriate template contents owner
   document</a>.</p></li><li><p>Create a <code id="the-template-element:documentfragment-4"><a href="/breakup/specs/core-algorithms/#documentfragment">DocumentFragment</a></code> object whose <a id="the-template-element:node-document-2" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> is <var>doc</var>.</p></li><li><p>Set the <code id="the-template-element:the-template-element-8"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> element's <a href="/breakup/specs/html-template/#template-contents" id="the-template-element:template-contents-2">template contents</a> to the newly
   created <code id="the-template-element:documentfragment-5"><a href="/breakup/specs/core-algorithms/#documentfragment">DocumentFragment</a></code> object.</p></li></ol>

  <p>A <code id="the-template-element:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code> <var>doc</var>'s <dfn id="appropriate-template-contents-owner-document">appropriate template contents owner
  document</dfn> is the <code id="the-template-element:document-4"><a href="/breakup/specs/browser-dom/#document">Document</a></code> returned by the following algorithm:</p>

  <ol><li>

    <p>If <var>doc</var> is not a <code id="the-template-element:document-5"><a href="/breakup/specs/browser-dom/#document">Document</a></code> created by this algorithm, run
    these substeps:</p>

    <ol><li>

      <p>If <var>doc</var> does not yet have an <dfn id="associated-inert-template-document">associated inert template
      document</dfn> then run these substeps:</p>

      <ol><li><p>Let <var>new doc</var> be a new <code id="the-template-element:document-6"><a href="/breakup/specs/browser-dom/#document">Document</a></code> (that does not have a
       <a href="/breakup/specs/browser-dom/#browsing-context" id="the-template-element:browsing-context">browsing context</a>). This is "a <code id="the-template-element:document-7"><a href="/breakup/specs/browser-dom/#document">Document</a></code> created by this algorithm"
       for the purposes of the step above.</p></li><li><p>If <var>doc</var> is an <a href="/breakup/specs/core-algorithms/#html-documents" id="the-template-element:html-documents">HTML document</a>, mark
       <var>new doc</var> as an <a href="/breakup/specs/core-algorithms/#html-documents" id="the-template-element:html-documents-2">HTML document</a>
       also.</p></li><li><p>Let <var>doc</var>'s <a href="/breakup/specs/html-template/#associated-inert-template-document" id="the-template-element:associated-inert-template-document">associated inert template document</a> be <var>new doc</var>.</p></li></ol>

     </li><li><p>Set <var>doc</var> to <var>doc</var>'s <a href="/breakup/specs/html-template/#associated-inert-template-document" id="the-template-element:associated-inert-template-document-2">associated inert
     template document</a>.</p></li></ol>

    <p class="note">Each <code id="the-template-element:document-8"><a href="/breakup/specs/browser-dom/#document">Document</a></code> not created by this algorithm thus gets a single
    <code id="the-template-element:document-9"><a href="/breakup/specs/browser-dom/#document">Document</a></code> to act as its proxy for owning the <a href="/breakup/specs/html-template/#template-contents" id="the-template-element:template-contents-3">template contents</a> of all
    its <code id="the-template-element:the-template-element-9"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> elements, so that they aren't in a <a href="/breakup/specs/browser-dom/#browsing-context" id="the-template-element:browsing-context-2">browsing context</a> and
    thus remain inert (e.g. scripts do not run). Meanwhile, <code id="the-template-element:the-template-element-10"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> elements inside
    <code id="the-template-element:document-10"><a href="/breakup/specs/browser-dom/#document">Document</a></code> objects that <em>are</em> created by this algorithm just reuse the same
    <code id="the-template-element:document-11"><a href="/breakup/specs/browser-dom/#document">Document</a></code> owner for their contents.</p>

   </li><li><p>Return <var>doc</var>.</p></li></ol>

  <p>When a <code id="the-template-element:the-template-element-11"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> element's <a id="the-template-element:node-document-3" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> changes, the user agent must run the following
  steps:</p>

  <ol><li><p>Let <var>doc</var> be the <code id="the-template-element:the-template-element-12"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> element's new <a id="the-template-element:node-document-4" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="/breakup/specs/html-template/#appropriate-template-contents-owner-document" id="the-template-element:appropriate-template-contents-owner-document-2">appropriate template contents owner
   document</a>.</p></li><li><p><a href="/breakup/specs/core-algorithms/#concept-node-adopt" id="the-template-element:concept-node-adopt">Adopt</a> the <code id="the-template-element:the-template-element-13"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> element's
   <a href="/breakup/specs/html-template/#template-contents" id="the-template-element:template-contents-4">template contents</a> (a <code id="the-template-element:documentfragment-6"><a href="/breakup/specs/core-algorithms/#documentfragment">DocumentFragment</a></code> object) into <var>doc</var>.</p></li></ol>

  <p>The <dfn id="dom-template-content"><code>content</code></dfn> IDL attribute must return the
  <code id="the-template-element:the-template-element-14"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> element's <a href="/breakup/specs/html-template/#template-contents" id="the-template-element:template-contents-5">template contents</a>.</p>

  <hr>

  <p>The <a href="/breakup/specs/core-algorithms/#concept-node-clone-ext" id="the-template-element:concept-node-clone-ext">cloning steps</a> for a <code id="the-template-element:the-template-element-15"><a href="/breakup/specs/html-template/#the-template-element">template</a></code>
  element <var>node</var> being cloned to a copy <var>copy</var> must run the
  following steps:</p>

  <ol><li><p>If the <var>clone children flag</var> is not set in the calling <a href="/breakup/specs/core-algorithms/#concept-node-clone" id="the-template-element:concept-node-clone">clone</a> algorithm, abort these steps.</p></li><li><p>Let <var>copied contents</var> be the result of <a href="/breakup/specs/core-algorithms/#concept-node-clone" id="the-template-element:concept-node-clone-2">cloning</a> all the children of <var>node</var>'s
   <a href="/breakup/specs/html-template/#template-contents" id="the-template-element:template-contents-6">template contents</a>, with <var>document</var> set to <var>copy</var>'s <a href="/breakup/specs/html-template/#template-contents" id="the-template-element:template-contents-7">template contents</a>'s <a id="the-template-element:node-document-5" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node
   document</a>, and with the <var>clone children
   flag</var> set.</p></li><li><p>Append <var>copied contents</var> to <var>copy</var>'s <a href="/breakup/specs/html-template/#template-contents" id="the-template-element:template-contents-8">template
   contents</a>.</p></li></ol>

  

  <div class="example">

   <p>In this example, a script populates a table four-column with data from a data structure, using
   a <code id="the-template-element:the-template-element-16"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> to provide the element structure instead of manually generating the
   structure from markup.</p>

   <pre>&lt;!DOCTYPE html&gt;
&lt;title&gt;Cat data&lt;/title&gt;
&lt;script&gt;
 // Data is hard-coded here, but could come from the server
 var data = [
   { name: 'Pillar', color: 'Ticked Tabby', sex: 'Female (neutered)', legs: 3 },
   { name: 'Hedral', color: 'Tuxedo', sex: 'Male (neutered)', legs: 4 },
 ];
&lt;/script&gt;
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th&gt;Name &lt;th&gt;Colour &lt;th&gt;Sex &lt;th&gt;Legs
 &lt;tbody&gt;
  &lt;template id="row"&gt;
   &lt;tr&gt;&lt;td&gt;&lt;td&gt;&lt;td&gt;&lt;td&gt;
  &lt;/template&gt;
&lt;/table&gt;
&lt;script&gt;
 var template = document.querySelector('#row');
 for (var i = 0; i &lt; data.length; i += 1) {
   var cat = data[i];
   var clone = template.content.cloneNode(true);
   var cells = clone.querySelectorAll('td');
   cells[0].textContent = cat.name;
   cells[1].textContent = cat.color;
   cells[2].textContent = cat.sex;
   cells[3].textContent = cat.legs;
   template.parentNode.appendChild(clone);
 }
&lt;/script&gt;</pre>

   <p>This example uses <code id="the-template-element:dom-node-clonenode"><a href="/breakup/specs/core-algorithms/#dom-node-clonenode">cloneNode()</a></code> on the
   <code id="the-template-element:the-template-element-17"><a href="/breakup/specs/html-template/#the-template-element">template</a></code>'s contents; it could equivalently have used <code id="the-template-element:dom-document-importnode"><a href="/breakup/specs/core-algorithms/#dom-document-importnode">document.importNode()</a></code>, which does the same thing. The
   only difference between these two APIs is when the <a id="the-template-element:node-document-6" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> is updated: with
   <code id="the-template-element:dom-node-clonenode-2"><a href="/breakup/specs/core-algorithms/#dom-node-clonenode">cloneNode()</a></code> it is updated when the nodes are appended
   with <code id="the-template-element:dom-node-appendchild"><a href="/breakup/specs/core-algorithms/#dom-node-appendchild">appendChild()</a></code>, with <code id="the-template-element:dom-document-importnode-2"><a href="/breakup/specs/core-algorithms/#dom-document-importnode">document.importNode()</a></code> it is updated when the nodes are
   cloned.</p>

  </div>



  

  <section><h2>Interaction of <code id="template-XSLT-XPath:the-template-element"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> elements with XSLT and XPath</h2>

  <p><i>This section is non-normative.</i></p>

  <p>This specification does not define how XSLT and XPath interact with the <code id="template-XSLT-XPath:the-template-element-2"><a href="/breakup/specs/html-template/#the-template-element">template</a></code>
  element. However, in the absence of another specification actually defining this, here are some
  guidelines for implementors, which are intended to be consistent with other processing described
  in this specification:</p>

  <ul><li><p>An XSLT processor based on an XML parser that acts <a href="/breakup/specs/xhtml-syntax/#xml-parser" id="template-XSLT-XPath:xml-parser">as described
   in this specification</a> needs to act as if <code id="template-XSLT-XPath:the-template-element-3"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> elements contain as
   descendants their <a href="/breakup/specs/html-template/#template-contents" id="template-XSLT-XPath:template-contents">template contents</a> for the purposes of the transform.</p></li><li><p>An XSLT processor that outputs a DOM needs to ensure that nodes that would go into a
   <code id="template-XSLT-XPath:the-template-element-4"><a href="/breakup/specs/html-template/#the-template-element">template</a></code> element are instead placed into the element's <a href="/breakup/specs/html-template/#template-contents" id="template-XSLT-XPath:template-contents-2">template
   contents</a>.</p></li><li><p>XPath evaluation using the XPath DOM API when applied to a <code id="template-XSLT-XPath:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> parsed
   using the <a href="/breakup/specs/html-syntax/#html-parser" id="template-XSLT-XPath:html-parser">HTML parser</a> or the <a href="/breakup/specs/xhtml-syntax/#xml-parser" id="template-XSLT-XPath:xml-parser-2">XML parser</a> described in this specification
   needs to ignore <a href="/breakup/specs/html-template/#template-contents" id="template-XSLT-XPath:template-contents-3">template contents</a>.</p>

  </li></ul></section></section></body></html>