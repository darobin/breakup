<html lang="en"><head>
    <meta charset="utf-8">
    <title>Scripting HTML</title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove"></script>
    <script class="remove">
      var respecConfig = {
              specStatus:     "ED"
          ,   shortName:      "html-scripting"
          ,   editors:      [{ name: "Up for the taking" }]
          ,   wg:             "HTML Working Group"
          ,   wgURI:          "http://www.w3.org/html/wg/"
          ,   wgPublicList:   "public-html"
          ,   wgPatentURI:    "http://www.w3.org/2004/01/pp-impl/40318/status"
          ,   license:        "cc-by"
          ,   processVersion: "2014"
        };
    </script>
  </head>
  <body>
    <section id="abstract">
      <p>
        Putting scripts in HTML.
      </p>
    </section>
    <section id="sotd">
      <p>
        This specification is an experimental breakup of the
        <a href="http://www.w3.org/TR/html51/">HTML specification</a>. You can see the full list on
        <a href="https://darobin.github.io/breakup/specs/">the index page</a> and take part in the
        discussion in <a href="https://github.com/darobin/breakup/">the repository</a>.
      </p>
    </section>
  

<section><h2>Introduction</h2></section><section><h2>Scripting</h2>

  <section><h2>Introduction</h2>

  <p>Various mechanisms can cause author-provided executable code to run in the context of a
  document. These mechanisms include, but are probably not limited to:</p>

  <ul><li>Processing of <code id="introduction-11:the-script-element"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements.</li><li>Navigating to <a href="/breakup/specs/browser-dom/#javascript-protocol" id="introduction-11:javascript-protocol"><code>javascript:</code> URLs</a>.</li><li>Event handlers, whether registered through the DOM using <code>addEventListener()</code>, by explicit <a href="/breakup/specs/browser-dom/#event-handler-content-attributes" id="introduction-11:event-handler-content-attributes">event handler content attributes</a>, by
   <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="introduction-11:event-handler-idl-attributes">event handler IDL attributes</a>, or otherwise.</li><li>Processing of technologies like SVG that have their own scripting features.</li></ul></section>


  

  <section><h2>Enabling and disabling scripting</h2>

  <p><dfn id="concept-bc-script">Scripting is enabled</dfn> in a <em><a href="/breakup/specs/browser-dom/#browsing-context" id="enabling-and-disabling-scripting:browsing-context">browsing
  context</a></em> when all of the following conditions are true:</p>

  <ul><li>The user agent supports scripting.</li><li>The user has not disabled scripting for this <a href="/breakup/specs/browser-dom/#browsing-context" id="enabling-and-disabling-scripting:browsing-context-2">browsing context</a> at this time.
   (User agents may provide users with the option to disable scripting globally, or in a
   finer-grained manner, e.g. on a per-origin basis.)
   <a href="/breakup/specs/html/#fingerprinting-vector" id="enabling-and-disabling-scripting:fingerprinting-vector" class="fingerprint" title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src="img/fingerprint.png" width="46" height="64"></a>
   </li><li id="sandboxScriptBlocked">The <a href="/breakup/specs/browser-dom/#browsing-context" id="enabling-and-disabling-scripting:browsing-context-3">browsing context</a>'s <a href="/breakup/specs/browser-dom/#active-document" id="enabling-and-disabling-scripting:active-document">active document</a>'s
   <a href="/breakup/specs/browser-dom/#active-sandboxing-flag-set" id="enabling-and-disabling-scripting:active-sandboxing-flag-set">active sandboxing flag set</a> does not have its <a href="/breakup/specs/browser-dom/#sandboxed-scripts-browsing-context-flag" id="enabling-and-disabling-scripting:sandboxed-scripts-browsing-context-flag">sandboxed scripts browsing
   context flag</a> set.</li></ul>

  <p><dfn id="concept-bc-noscript">Scripting is disabled</dfn> in a <a href="/breakup/specs/browser-dom/#browsing-context" id="enabling-and-disabling-scripting:browsing-context-4">browsing context</a>
  when any of the above conditions are false (i.e. when scripting is not <a href="/breakup/specs/browser-dom/#concept-bc-script" id="enabling-and-disabling-scripting:concept-bc-script">enabled</a>).</p>

  <hr>

  <p><dfn id="concept-n-script">Scripting is enabled</dfn> for a <em>node</em> if the
  <code id="enabling-and-disabling-scripting:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object of the node (the node itself, if it is itself a <code id="enabling-and-disabling-scripting:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code>
  object) has an associated <a href="/breakup/specs/browser-dom/#browsing-context" id="enabling-and-disabling-scripting:browsing-context-5">browsing context</a>, and <a href="/breakup/specs/browser-dom/#concept-bc-script" id="enabling-and-disabling-scripting:concept-bc-script-2">scripting is enabled</a> in that <a href="/breakup/specs/browser-dom/#browsing-context" id="enabling-and-disabling-scripting:browsing-context-6">browsing context</a>.</p>

  <p><dfn id="concept-n-noscript">Scripting is disabled</dfn> for a node if there is no such
  <a href="/breakup/specs/browser-dom/#browsing-context" id="enabling-and-disabling-scripting:browsing-context-7">browsing context</a>, or if <a href="/breakup/specs/browser-dom/#concept-bc-noscript" id="enabling-and-disabling-scripting:concept-bc-noscript">scripting is
  disabled</a> in that <a href="/breakup/specs/browser-dom/#browsing-context" id="enabling-and-disabling-scripting:browsing-context-8">browsing context</a>.</p></section>

  


  

  
  <section><h2>Processing model</h2>

  <section><h2>Definitions</h2>

  <p>This specification describes three kinds of <a href="/breakup/specs/core-algorithms/#javascript-global-environment" id="definitions-2:javascript-global-environment">JavaScript global environments</a>: the <dfn id="document-environment">document environment</dfn>, the
  <dfn id="dedicated-worker-environment">dedicated worker environment</dfn>, and the <dfn id="shared-worker-environment">shared worker environment</dfn>. The
  <a href="/breakup/specs/browser-dom/#dedicated-worker-environment" id="definitions-2:dedicated-worker-environment">dedicated worker environment</a> and the <a href="/breakup/specs/browser-dom/#shared-worker-environment" id="definitions-2:shared-worker-environment">shared worker environment</a> are both
  types of <dfn id="worker-environment">worker environments</dfn>.</p>

  <p>Except where otherwise specified, a <a href="/breakup/specs/core-algorithms/#javascript-global-environment" id="definitions-2:javascript-global-environment-2">JavaScript global environment</a> is a
  <a href="/breakup/specs/browser-dom/#document-environment" id="definitions-2:document-environment">document environment</a>.</p> 

  <hr>

  <p>A <dfn id="concept-script">script</dfn> has:</p>

  <dl><dt>A <dfn id="code-entry-point">code entry-point</dfn></dt><dd>

    <p>A code entry-point represents a block of executable code that the script exposes to other
    scripts and to the user agent. Typically, the code corresponding to the code entry-point is
    executed immediately after the script is parsed, but for event handlers, it is called each time
    the handler is invoked.</p>

    <p class="example">In JavaScript <code id="definitions-2:the-script-element"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> blocks, this corresponds to the execution
    context of the global code.</p>

   </dd><dt>Optionally, a <dfn id="muted-errors">muted errors</dfn> flag</dt><dd>

    <p>A flag which, if set, means that error information will not be provided for errors in this
    script (used to mute errors for cross-origin scripts, since that can leak private
    information).</p>

   </dd><dt>A <dfn id="settings-object">settings object</dfn></dt><dd>

    <p>An <a href="/breakup/specs/browser-dom/#environment-settings-object" id="definitions-2:environment-settings-object">environment settings object</a>, various settings that are shared with other scripts in
    the same context.</p>

   </dd></dl>

  <hr>

  <p>An <dfn id="environment-settings-object">environment settings object</dfn> specifies algorithms for obtaining the following:</p>

  <dl><dt>A <dfn id="script-execution-environment">script execution environment</dfn> for each language supported by the user agent</dt><dd>

    <p>The characteristics of the script execution environment depend on the language, and are not
    defined by this specification.</p>

    <p class="example">In JavaScript, the script execution environment consists of the interpreter,
    the stack of <i>execution contexts</i>, the <i>global code</i> and <i>function code</i> and the
    <code id="definitions-2:idl-function"><a href="/breakup/specs/core-algorithms/#idl-function">Function</a></code> objects resulting, and so forth.</p>

   </dd><dt>A <dfn id="global-object">global object</dfn></dt><dd>

    <p>An object that provides the APIs that can be called by the code in scripts that use this
    <a href="/breakup/specs/browser-dom/#environment-settings-object" id="definitions-2:environment-settings-object-2">settings object</a>.</p>

    <p class="note">This is typically a <code id="definitions-2:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object or a
    <code id="definitions-2:workerglobalscope"><a href="http://www.w3.org/TR/workers/#workerglobalscope">WorkerGlobalScope</a></code> object. When a <a href="/breakup/specs/browser-dom/#global-object" id="definitions-2:global-object">global object</a> is an empty object, it
    can't do anything that interacts with the environment.</p>

    <p>If the <a href="/breakup/specs/browser-dom/#global-object" id="definitions-2:global-object-2">global object</a> is a <code id="definitions-2:window-2"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object, then, in JavaScript, the
    ThisBinding of the global execution context for this script must be the <code id="definitions-2:window-3"><a href="/breakup/specs/browser-dom/#window">Window</a></code>
    object's <code id="definitions-2:windowproxy"><a href="/breakup/specs/browser-dom/#windowproxy">WindowProxy</a></code> object, rather than the global object. [[!ECMA262]]</p>

    <p class="note">This is a <a href="/breakup/specs/html/#willful-violation" id="definitions-2:willful-violation">willful violation</a> of the JavaScript specification current
    at the time of writing (ECMAScript edition 5, as defined in section 10.4.1.1 Initial Global
    Execution Context, step 3). The JavaScript specification requires that the <code>this</code> keyword in the global scope return the global object, but this is not
    compatible with the security design prevalent in implementations as specified herein. [[!ECMA262]]</p>

   </dd><dt>A <dfn id="responsible-browsing-context">responsible browsing context</dfn></dt><dd>

    <p>A <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-2:browsing-context">browsing context</a> that is assigned responsibility for actions taken by the
    scripts that use this <a href="/breakup/specs/browser-dom/#environment-settings-object" id="definitions-2:environment-settings-object-3">environment settings object</a>.</p>

    <p class="example">When a script creates and <a href="/breakup/specs/browser-dom/#navigate" id="definitions-2:navigate">navigates</a> a new
    <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="definitions-2:top-level-browsing-context">top-level browsing context</a>, the <code id="definitions-2:dom-opener"><a href="/breakup/specs/browser-dom/#dom-opener">opener</a></code> attribute
    of the new <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-2:browsing-context-2">browsing context</a>'s <code id="definitions-2:window-4"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object will be set to the
    <a href="/breakup/specs/browser-dom/#responsible-browsing-context" id="definitions-2:responsible-browsing-context">responsible browsing context</a>'s <code id="definitions-2:windowproxy-2"><a href="/breakup/specs/browser-dom/#windowproxy">WindowProxy</a></code> object.</p>

   </dd><dt>A <dfn id="responsible-event-loop">responsible event loop</dfn></dt><dd>

    <p>An <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-2:event-loop">event loop</a> that is used when it would not be immediately clear what event
    loop to use.</p>

   </dd><dt>A <dfn id="responsible-document">responsible document</dfn></dt><dd>

    <p>A <code id="definitions-2:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> that is assigned responsibility for actions taken by the scripts that
    use this <a href="/breakup/specs/browser-dom/#environment-settings-object" id="definitions-2:environment-settings-object-4">environment settings object</a>.</p>

    <p class="example">For example, the <a href="https://dom.spec.whatwg.org/#concept-document-url" id="definitions-2:the-document's-address" data-x-internal="the-document's-address">address</a> of the
    <a href="/breakup/specs/browser-dom/#responsible-document" id="definitions-2:responsible-document">responsible document</a> is used to set the <a href="https://dom.spec.whatwg.org/#concept-document-url" id="definitions-2:the-document's-address-2" data-x-internal="the-document's-address">address</a> of the <code id="definitions-2:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> after it has been reset using <code id="definitions-2:dom-document-open"><a href="/breakup/specs/browser-dom/#dom-document-open">document.open()</a></code>.</p>

    <p>If the <a href="/breakup/specs/browser-dom/#responsible-event-loop" id="definitions-2:responsible-event-loop">responsible event loop</a> is not a <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-2:browsing-context-3">browsing context</a> <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-2:event-loop-2">event loop</a>,
    then the <a href="/breakup/specs/browser-dom/#environment-settings-object" id="definitions-2:environment-settings-object-5">environment settings object</a> has no <a href="/breakup/specs/browser-dom/#responsible-document" id="definitions-2:responsible-document-2">responsible document</a>.</p>

   </dd><dt>A <dfn id="referrer-source">referrer source</dfn></dt><dd>

    <p>Either a <code id="definitions-2:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code> (specifically, the <a href="/breakup/specs/browser-dom/#responsible-document" id="definitions-2:responsible-document-3">responsible document</a>), or a
    <a href="/breakup/specs/core-algorithms/#url" id="definitions-2:url">URL</a>, which is used by some APIs to determine what value to use for the <code id="definitions-2:http-referer"><a href="/breakup/specs/core-algorithms/#http-referer">Referer</a></code> (sic) header in calls to the <a href="/breakup/specs/core-algorithms/#fetch" id="definitions-2:fetch">fetching</a> algorithm.</p>

   </dd><dt>An <dfn id="api-url-character-encoding">API URL character encoding</dfn></dt><dd>

    <p>A character encoding used to encode URLs by APIs called by scripts that use this <a href="/breakup/specs/browser-dom/#environment-settings-object" id="definitions-2:environment-settings-object-6">environment
    settings object</a>.</p>

   </dd><dt>An <dfn id="api-base-url">API base URL</dfn></dt><dd>

    <p>An <a href="/breakup/specs/core-algorithms/#absolute-url" id="definitions-2:absolute-url">absolute URL</a> used by APIs called by scripts that use this <a href="/breakup/specs/browser-dom/#environment-settings-object" id="definitions-2:environment-settings-object-7">environment
    settings object</a> to resolve <a href="/breakup/specs/core-algorithms/#relative-url" id="definitions-2:relative-url">relative URLs</a>.</p>

   </dd><dt>An <a href="/breakup/specs/browser-dom/#origin-2" id="definitions-2:origin-2">origin</a> and an <a href="/breakup/specs/browser-dom/#effective-script-origin" id="definitions-2:effective-script-origin">effective script origin</a></dt><dd>

    <p>An instrument used in security checks.</p>

   </dd></dl>

  <p>The <dfn id="relevant-settings-object-for-a-global-object">relevant settings object for a global object</dfn> <var>o</var> is the
  <a href="/breakup/specs/browser-dom/#environment-settings-object" id="definitions-2:environment-settings-object-8">environment settings object</a> whose <a href="/breakup/specs/browser-dom/#global-object" id="definitions-2:global-object-3">global object</a> is <var>o</var>.
  (There is always a 1:1 mapping of global objects to environment settings objects.)</p>

  <p>The <dfn id="relevant-settings-object-for-a-script">relevant settings object for a script</dfn> <var>s</var> is the
  <a href="/breakup/specs/browser-dom/#settings-object" id="definitions-2:settings-object">settings object</a> of <var>s</var>.</p></section>



  <section><h2>Script settings for browsing contexts</h2>

  <p>Whenever a new <code id="script-settings-for-browsing-contexts:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object is created, it must also create an <a href="/breakup/specs/browser-dom/#environment-settings-object" id="script-settings-for-browsing-contexts:environment-settings-object">environment
  settings object</a> whose algorithms are defined as follows:</p>

  <dl><dt>The <a href="/breakup/specs/browser-dom/#script-execution-environment" id="script-settings-for-browsing-contexts:script-execution-environment">script execution environments</a></dt><dd>

    <p>When the <a href="/breakup/specs/browser-dom/#environment-settings-object" id="script-settings-for-browsing-contexts:environment-settings-object-2">environment settings object</a> is created, for each language supported by the
    user agent, create an appropriate execution environment as defined by the relevant
    specification.</p>

    <p>When a <a href="/breakup/specs/browser-dom/#script-execution-environment" id="script-settings-for-browsing-contexts:script-execution-environment-2">script execution environment</a> is needed, return the appropriate one from
    those created when the <a href="/breakup/specs/browser-dom/#environment-settings-object" id="script-settings-for-browsing-contexts:environment-settings-object-3">environment settings object</a> was created.</p>

   </dd><dt>The <a href="/breakup/specs/browser-dom/#global-object" id="script-settings-for-browsing-contexts:global-object">global object</a></dt><dd>

    <p>Return the <code id="script-settings-for-browsing-contexts:window-2"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object itself.</p>

   </dd><dt>The <a href="/breakup/specs/browser-dom/#responsible-browsing-context" id="script-settings-for-browsing-contexts:responsible-browsing-context">responsible browsing context</a></dt><dd>

    <p>Return the <a href="/breakup/specs/browser-dom/#browsing-context" id="script-settings-for-browsing-contexts:browsing-context">browsing context</a> with which the <code id="script-settings-for-browsing-contexts:window-3"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object is
    associated.</p>

   </dd><dt>The <a href="/breakup/specs/browser-dom/#responsible-event-loop" id="script-settings-for-browsing-contexts:responsible-event-loop">responsible event loop</a></dt><dd>

    <p>Return the <a href="/breakup/specs/browser-dom/#event-loop" id="script-settings-for-browsing-contexts:event-loop">event loop</a> that is associated with the <a href="/breakup/specs/browser-dom/#unit-of-related-similar-origin-browsing-contexts" id="script-settings-for-browsing-contexts:unit-of-related-similar-origin-browsing-contexts">unit of related
    similar-origin browsing contexts</a> to which the <code id="script-settings-for-browsing-contexts:window-4"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object's <a href="/breakup/specs/browser-dom/#browsing-context" id="script-settings-for-browsing-contexts:browsing-context-2">browsing
    context</a> belongs.</p>

   </dd><dt>The <a href="/breakup/specs/browser-dom/#responsible-document" id="script-settings-for-browsing-contexts:responsible-document">responsible document</a></dt><dd>

    <p>Return the <code id="script-settings-for-browsing-contexts:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> with which the <code id="script-settings-for-browsing-contexts:window-5"><a href="/breakup/specs/browser-dom/#window">Window</a></code> is currently
    associated.</p>

   </dd><dt>The <a href="/breakup/specs/browser-dom/#referrer-source" id="script-settings-for-browsing-contexts:referrer-source">referrer source</a></dt><dd>

    <p>Return the <code id="script-settings-for-browsing-contexts:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> with which the <code id="script-settings-for-browsing-contexts:window-6"><a href="/breakup/specs/browser-dom/#window">Window</a></code> is currently
    associated.</p>

   </dd><dt>The <a href="/breakup/specs/browser-dom/#api-url-character-encoding" id="script-settings-for-browsing-contexts:api-url-character-encoding">API URL character encoding</a></dt><dd>

    <p>Return the current <a href="/breakup/specs/core-algorithms/#document's-character-encoding" id="script-settings-for-browsing-contexts:document's-character-encoding">character encoding</a> of
    the <code id="script-settings-for-browsing-contexts:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code> with which the <code id="script-settings-for-browsing-contexts:window-7"><a href="/breakup/specs/browser-dom/#window">Window</a></code> is currently associated.</p>

   </dd><dt>The <a href="/breakup/specs/browser-dom/#api-base-url" id="script-settings-for-browsing-contexts:api-base-url">API base URL</a></dt><dd>

    <p>Return the current <a href="/breakup/specs/core-algorithms/#document-base-url" id="script-settings-for-browsing-contexts:document-base-url">base URL</a> of the
    <code id="script-settings-for-browsing-contexts:document-4"><a href="/breakup/specs/browser-dom/#document">Document</a></code> with which the <code id="script-settings-for-browsing-contexts:window-8"><a href="/breakup/specs/browser-dom/#window">Window</a></code> is currently associated.</p>

   </dd><dt>The <a href="/breakup/specs/browser-dom/#origin-2" id="script-settings-for-browsing-contexts:origin-2">origin</a></dt><dd>

    <p>Return the <a href="/breakup/specs/browser-dom/#origin-2" id="script-settings-for-browsing-contexts:origin-2-2">origin</a> of the <code id="script-settings-for-browsing-contexts:document-5"><a href="/breakup/specs/browser-dom/#document">Document</a></code> with which the
    <code id="script-settings-for-browsing-contexts:window-9"><a href="/breakup/specs/browser-dom/#window">Window</a></code> is currently associated.</p>

   </dd><dt>The <a href="/breakup/specs/browser-dom/#effective-script-origin" id="script-settings-for-browsing-contexts:effective-script-origin">effective script origin</a></dt><dd>

    <p>Return the <a href="/breakup/specs/browser-dom/#effective-script-origin" id="script-settings-for-browsing-contexts:effective-script-origin-2">effective script origin</a> of the <code id="script-settings-for-browsing-contexts:document-6"><a href="/breakup/specs/browser-dom/#document">Document</a></code> with which the
    <code id="script-settings-for-browsing-contexts:window-10"><a href="/breakup/specs/browser-dom/#window">Window</a></code> is currently associated.</p>

   </dd></dl></section>




  <section><h2>Calling scripts</h2>

  <p>Each <a href="/breakup/specs/browser-dom/#unit-of-related-similar-origin-browsing-contexts" id="calling-scripts:unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</a> has a <dfn id="stack-of-script-settings-objects">stack of script
  settings objects</dfn>, which must be initially empty. When a new <a href="/breakup/specs/browser-dom/#environment-settings-object" id="calling-scripts:environment-settings-object">environment settings
  object</a> is <i>pushed</i> onto this stack, the specified <a href="/breakup/specs/browser-dom/#environment-settings-object" id="calling-scripts:environment-settings-object-2">environment settings object</a>
  is to be added to the stack; when the <a href="/breakup/specs/browser-dom/#environment-settings-object" id="calling-scripts:environment-settings-object-3">environment settings object</a> on this stack that was
  most recently pushed onto it is to be <i>popped</i> from the stack, it must be removed. Entries on
  this stack can be labeled as <dfn id="candidate-entry-settings-object">candidate entry
  settings objects</dfn>.</p>

  <p>When a user agent is to <dfn id="jump-to-a-code-entry-point">jump to a code entry-point</dfn> for a <a href="/breakup/specs/browser-dom/#concept-script" id="calling-scripts:concept-script">script</a> <var>s</var>, the user agent must run the
  following steps:</p>

  <ol><li><p>Let <var>context</var> be the <a href="/breakup/specs/browser-dom/#settings-object" id="calling-scripts:settings-object">settings object</a> of <var>s</var>.</p></li><li><p><a href="/breakup/specs/browser-dom/#prepare-to-run-a-callback" id="calling-scripts:prepare-to-run-a-callback">Prepare to run a callback</a> with <var>context</var> as the
   <a href="/breakup/specs/browser-dom/#environment-settings-object" id="calling-scripts:environment-settings-object-4">environment settings object</a>. If this returns "do not run" then abort these
   steps.</p></li><li><p>Make the appropriate <a href="/breakup/specs/browser-dom/#script-execution-environment" id="calling-scripts:script-execution-environment">script execution environment</a> specified by <var>context</var> execute the <var>s</var>'s <a href="/breakup/specs/browser-dom/#code-entry-point" id="calling-scripts:code-entry-point">code
   entry-point</a>.</p></li><li><p><a href="/breakup/specs/browser-dom/#clean-up-after-running-a-callback" id="calling-scripts:clean-up-after-running-a-callback">Clean up after running a callback</a>.</p></li></ol>

  <p>The steps to <dfn id="prepare-to-run-a-callback">prepare to run a callback</dfn> with an <a href="/breakup/specs/browser-dom/#environment-settings-object" id="calling-scripts:environment-settings-object-5">environment settings object</a>
  <var>o</var> are as follows. They return either "run" or "do not run".</p>

  <ol><li><p>If the <a href="/breakup/specs/browser-dom/#global-object" id="calling-scripts:global-object">global object</a> specified by <var>o</var> is a
   <code id="calling-scripts:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object whose <code id="calling-scripts:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object is not <a href="/breakup/specs/browser-dom/#fully-active" id="calling-scripts:fully-active">fully active</a>,
   then return "do not run" and abort these steps.</p>

   </li><li><p>If <a href="/breakup/specs/browser-dom/#concept-bc-noscript" id="calling-scripts:concept-bc-noscript">scripting is disabled</a> for the
   <a href="/breakup/specs/browser-dom/#responsible-browsing-context" id="calling-scripts:responsible-browsing-context">responsible browsing context</a> specified by <var>o</var>, then return "do
   not run" and abort these steps.</p>

   </li><li><p>Push <var>o</var> onto the <a href="/breakup/specs/browser-dom/#stack-of-script-settings-objects" id="calling-scripts:stack-of-script-settings-objects">stack of script settings objects</a>, and
   label it as a <a href="/breakup/specs/browser-dom/#candidate-entry-settings-object" id="calling-scripts:candidate-entry-settings-object">candidate entry settings object</a>.</p></li><li><p>Return "run".</p></li></ol>

  <p>The steps to <dfn id="clean-up-after-running-a-callback">clean up after running a callback</dfn> are as follows:</p>

  <ol><li><p>Pop the current <a href="/breakup/specs/browser-dom/#incumbent-settings-object" id="calling-scripts:incumbent-settings-object">incumbent settings object</a> from the <a href="/breakup/specs/browser-dom/#stack-of-script-settings-objects" id="calling-scripts:stack-of-script-settings-objects-2">stack of script
   settings objects</a>.</p></li><li><p>If the <a href="/breakup/specs/browser-dom/#stack-of-script-settings-objects" id="calling-scripts:stack-of-script-settings-objects-3">stack of script settings objects</a> is now empty, <a href="/breakup/specs/browser-dom/#run-the-global-script-clean-up-jobs" id="calling-scripts:run-the-global-script-clean-up-jobs">run the global
   script clean-up jobs</a>. (These cannot run scripts.)</p></li><li><p>If the <a href="/breakup/specs/browser-dom/#stack-of-script-settings-objects" id="calling-scripts:stack-of-script-settings-objects-4">stack of script settings objects</a> is now empty, <a href="/breakup/specs/browser-dom/#perform-a-microtask-checkpoint" id="calling-scripts:perform-a-microtask-checkpoint">perform a
   microtask checkpoint</a>. (If this runs scripts, these algorithms will be invoked
   reentrantly.)</p></li></ol>

  <p class="note">These algorithms are not invoked by one script directly calling another, but they
  can be invoked reentrantly in an indirect manner, e.g. if a script dispatches an event which has
  event listeners registered.</p>

  <p>When a JavaScript <i>SourceElements</i> production is to be evaluated, the <a href="/breakup/specs/browser-dom/#settings-object" id="calling-scripts:settings-object-2">settings
  object</a> of the <a href="/breakup/specs/browser-dom/#concept-script" id="calling-scripts:concept-script-2">script</a> corresponding to that
  <i>SourceElements</i> must be pushed onto the <a href="/breakup/specs/browser-dom/#stack-of-script-settings-objects" id="calling-scripts:stack-of-script-settings-objects-5">stack of script settings objects</a> before
  the evaluation begins, and popped when the evaluation ends (regardless of whether it's an abrupt
  completion or not).</p>

  <p>The <dfn id="entry-settings-object">entry settings object</dfn> is the most-recently added <a href="/breakup/specs/browser-dom/#environment-settings-object" id="calling-scripts:environment-settings-object-6">environment settings
  object</a> in the <a href="/breakup/specs/browser-dom/#stack-of-script-settings-objects" id="calling-scripts:stack-of-script-settings-objects-6">stack of script settings objects</a> that is labeled as a
  <a href="/breakup/specs/browser-dom/#candidate-entry-settings-object" id="calling-scripts:candidate-entry-settings-object-2">candidate entry settings object</a>. If the stack is empty, or has no entries labeled as
  such, then there is no <a href="/breakup/specs/browser-dom/#entry-settings-object" id="calling-scripts:entry-settings-object">entry settings object</a>. It is used to obtain, amongst other
  things, the <a href="/breakup/specs/browser-dom/#api-base-url" id="calling-scripts:api-base-url">API base URL</a> to <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="calling-scripts:resolve-a-url">resolve</a> relative
  <a href="/breakup/specs/core-algorithms/#url" id="calling-scripts:url">URLs</a> used in scripts running in that <a href="/breakup/specs/browser-dom/#unit-of-related-similar-origin-browsing-contexts" id="calling-scripts:unit-of-related-similar-origin-browsing-contexts-2">unit of related
  similar-origin browsing contexts</a>.</p>

  <p>The <dfn id="incumbent-settings-object">incumbent settings object</dfn> is the <a href="/breakup/specs/browser-dom/#environment-settings-object" id="calling-scripts:environment-settings-object-7">environment settings object</a> in the
  <a href="/breakup/specs/browser-dom/#stack-of-script-settings-objects" id="calling-scripts:stack-of-script-settings-objects-7">stack of script settings objects</a> that was most-recently added (i.e. the last one on
  the stack). If the stack is empty, then there is no <a href="/breakup/specs/browser-dom/#incumbent-settings-object" id="calling-scripts:incumbent-settings-object-2">incumbent settings object</a>. It is
  used in some security checks.</p>

  <p class="note">The Web IDL specification also uses these algorithms. [[!WEBIDL]]</p>

  <div class="example">

   <p>Consider the following two pages, with the first being loaded in a browser window and the
   second being loaded in the <code id="calling-scripts:the-iframe-element"><a href="/breakup/specs/html-embedding/#the-iframe-element">iframe</a></code> of the first:</p>

   <pre>&lt;!-- a/a.html --&gt;
&lt;!DOCTYPE HTML&gt;
&lt;title&gt;Outer page&lt;/title&gt;
&lt;iframe src="../b/b.html"&gt;&lt;/iframe&gt;
&lt;input type=button onclick="frames[0].hello()" value="Hello"&gt;</pre>

   <pre>&lt;!-- b/b.html --&gt;
&lt;!DOCTYPE HTML&gt;
&lt;title&gt;Inner page&lt;/title&gt;
&lt;script&gt;
 function hello() {
   location.assign('c.html');
 }
&lt;/script&gt;</pre>

   <p>When the button is pressed in the inner frame, the outer page runs script in the inner page.
   While the <code>hello()</code> function is running, the <a href="/breakup/specs/browser-dom/#entry-settings-object" id="calling-scripts:entry-settings-object-2">entry settings
   object</a> is that of the outer file (<code>a/a.html</code>), and the
   <a href="/breakup/specs/browser-dom/#incumbent-settings-object" id="calling-scripts:incumbent-settings-object-3">incumbent settings object</a> is that of the inner file (<code>b/b.html</code>). The <code id="calling-scripts:dom-location-assign"><a href="/breakup/specs/browser-dom/#dom-location-assign">assign()</a></code> method uses
   the <a href="/breakup/specs/browser-dom/#entry-settings-object" id="calling-scripts:entry-settings-object-3">entry settings object</a> to resolve the URL, so we end up loading <code>a/c.html</code>, but it uses the <a href="/breakup/specs/browser-dom/#incumbent-settings-object" id="calling-scripts:incumbent-settings-object-4">incumbent settings object</a> to establish
   the <a href="/breakup/specs/browser-dom/#source-browsing-context" id="calling-scripts:source-browsing-context">source browsing context</a>, from which the referrer is established, so the <code id="calling-scripts:http-referer"><a href="/breakup/specs/core-algorithms/#http-referer">Referer</a></code> header sent with the request for <code>a/c.html</code> specifies the inner file's URL (the one ending with <code>b/b.html</code>).</p>

   

  </div>

  <hr>

  <p>Each <a href="/breakup/specs/browser-dom/#unit-of-related-similar-origin-browsing-contexts" id="calling-scripts:unit-of-related-similar-origin-browsing-contexts-3">unit of related similar-origin browsing contexts</a> has a <dfn id="global-script-clean-up-jobs-list">global script
  clean-up jobs list</dfn>, which must initially be empty. A global script clean-up job cannot run
  scripts, and cannot be sensitive to the order in which other clean-up jobs are executed. The File
  API uses this to release <code id="calling-scripts:blob-protocol"><a data-x-internal="blob-protocol" href="http://dev.w3.org/2006/webapi/FileAPI/#DefinitionOfScheme">blob:</a></code> URLs. [[!FILEAPI]]</p>

  <p>When the user agent is to <dfn id="run-the-global-script-clean-up-jobs">run the global script clean-up jobs</dfn>, the user agent must
  perform each of the jobs in the <a href="/breakup/specs/browser-dom/#global-script-clean-up-jobs-list" id="calling-scripts:global-script-clean-up-jobs-list">global script clean-up jobs list</a> and then empty the
  list.</p></section>

  


  

  <section><h2>Creating scripts</h2>

  <p>When the specification says that a <a href="/breakup/specs/browser-dom/#concept-script" id="creating-scripts:concept-script">script</a> is to be <dfn id="create-a-script">created</dfn>, given some script source, a script source URL, its
  scripting language, an <a href="/breakup/specs/browser-dom/#environment-settings-object" id="creating-scripts:environment-settings-object">environment settings object</a>, and optionally a <var>muted
  errors</var> flag, the user agent must run the following steps:</p>

  <ol><li><p>Let <var>script</var> be a new <a href="/breakup/specs/browser-dom/#concept-script" id="creating-scripts:concept-script-2">script</a> that
   this algorithm will subsequently initialise.</p></li><li><p>If <a href="/breakup/specs/browser-dom/#concept-bc-noscript" id="creating-scripts:concept-bc-noscript">scripting is disabled</a> for <a href="/breakup/specs/browser-dom/#browsing-context" id="creating-scripts:browsing-context">browsing
   context</a> passed to this algorithm, then abort these steps, as if the script source
   described a program that did nothing but return void.</p>

   </li><li><p>Obtain the appropriate <a href="/breakup/specs/browser-dom/#script-execution-environment" id="creating-scripts:script-execution-environment">script execution environment</a> for the given scripting
   language from the <a href="/breakup/specs/browser-dom/#environment-settings-object" id="creating-scripts:environment-settings-object-2">environment settings object</a> provided.</p></li><li><p>Parse/compile/initialise the source of the script using the <a href="/breakup/specs/browser-dom/#script-execution-environment" id="creating-scripts:script-execution-environment-2">script execution
   environment</a>, as appropriate for the scripting language, and thus obtain <var>script</var>'s <a href="/breakup/specs/browser-dom/#code-entry-point" id="creating-scripts:code-entry-point">code entry-point</a>.</p></li><li><p>Let <var>script</var>'s <a href="/breakup/specs/browser-dom/#settings-object" id="creating-scripts:settings-object">settings object</a> be the <a href="/breakup/specs/browser-dom/#environment-settings-object" id="creating-scripts:environment-settings-object-3">environment
   settings object</a> provided.</p></li><li><p>If the <var>muted errors</var> flag was set, then set <var>script</var>'s <a href="/breakup/specs/browser-dom/#muted-errors" id="creating-scripts:muted-errors">muted errors</a> flag.</p></li><li>

    <p>If all the steps above succeeded (in particular, if the script was compiled successfully),
    <a href="/breakup/specs/browser-dom/#jump-to-a-code-entry-point" id="creating-scripts:jump-to-a-code-entry-point">Jump</a> to <var>script</var>'s <a href="/breakup/specs/browser-dom/#code-entry-point" id="creating-scripts:code-entry-point-2">code
    entry-point</a>.</p>

    <p>Otherwise, <a href="/breakup/specs/browser-dom/#report-the-error" id="creating-scripts:report-the-error">report the error</a> for <var>script</var>, with the
    problematic position (line number and column number), using the <a href="/breakup/specs/browser-dom/#global-object" id="creating-scripts:global-object">global object</a>
    specified by the <a href="/breakup/specs/browser-dom/#environment-settings-object" id="creating-scripts:environment-settings-object-4">environment settings object</a> as the target. If the error is still <i id="creating-scripts:concept-error-nothandled"><a href="/breakup/specs/browser-dom/#concept-error-nothandled">not handled</a></i> after this, then the error may be reported to
    the user.</p>

   </li></ol></section>

  


  

  <section><h2>Killing scripts</h2>

  <p>User agents may impose resource limitations on scripts, for example CPU quotas, memory limits,
  total execution time limits, or bandwidth limitations. When a script exceeds a limit, the user
  agent may either throw a <code id="killing-scripts:quotaexceedederror"><a href="/breakup/specs/core-algorithms/#quotaexceedederror">QuotaExceededError</a></code> exception, abort the script without an
  exception, prompt the user, or throttle script execution.</p>

  <div class="example">

   <p>For example, the following script never terminates. A user agent could, after waiting for a
   few seconds, prompt the user to either terminate the script or let it continue.</p>

   <pre>&lt;script&gt;
 while (true) { /* loop */ }
&lt;/script&gt;</pre>

  </div>

  <p>User agents are encouraged to allow users to disable scripting whenever the user is prompted
  either by a script (e.g. using the <code id="killing-scripts:dom-alert"><a href="/breakup/specs/browser-dom/#dom-alert">window.alert()</a></code> API) or because
  of a script's actions (e.g. because it has exceeded a time limit).</p>

  <p>If scripting is disabled while a script is executing, the script should be terminated
  immediately.</p>

  <p>User agents may allow users to specifically disable scripts just for the purposes of closing a
  <a href="/breakup/specs/browser-dom/#browsing-context" id="killing-scripts:browsing-context">browsing context</a>.</p>

  <p class="example">For example, the prompt mentioned in the example above could also offer the
  user with a mechanism to just close the page entirely, without running any <code id="killing-scripts:event-unload"><a href="/breakup/specs/html/#event-unload">unload</a></code> event handlers.</p></section>

  


  <section><h2>Runtime script errors</h2>

  

  <p>When the user agent is required to <dfn id="report-the-error">report an error</dfn> for a
  particular <a href="/breakup/specs/browser-dom/#concept-script" id="runtime-script-errors:concept-script">script</a> <var>script</var> with a particular
  position <var>line</var>:<var>col</var>, using a particular target <var>target</var>, it must run these steps, after which the error is either <dfn id="concept-error-handled"><i>handled</i></dfn> or <dfn id="concept-error-nothandled"><i>not
  handled</i></dfn>:</p>

  <ol><li><p>If <var>target</var> is <a href="/breakup/specs/browser-dom/#in-error-reporting-mode" id="runtime-script-errors:in-error-reporting-mode">in error reporting mode</a>, then abort these
   steps; the error is <i id="runtime-script-errors:concept-error-nothandled"><a href="/breakup/specs/browser-dom/#concept-error-nothandled">not handled</a></i>.</p></li><li><p>Let <var>target</var> be <dfn id="in-error-reporting-mode">in error reporting mode</dfn>.</p></li><li><p>Let <var>message</var> be a user-agent-defined string describing the error in a
   helpful manner.
   <a href="/breakup/specs/html/#fingerprinting-vector" id="runtime-script-errors:fingerprinting-vector" class="fingerprint" title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src="img/fingerprint.png" width="46" height="64"></a>
   </p></li><li><p>Let <var>error object</var> be the object that represents the error: in the case of an
   uncaught exception, that would be the object that was thrown; in the case of a JavaScript error
   that would be an <code id="runtime-script-errors:idl-error"><a href="/breakup/specs/core-algorithms/#idl-error">Error</a></code> object. If there is no corresponding
   object, then the null value must be used instead.</p></li><li>

    <p>Let <var>location</var> be an <a href="/breakup/specs/core-algorithms/#absolute-url" id="runtime-script-errors:absolute-url">absolute URL</a> that corresponds to the
    resource from which <var>script</var> was obtained.</p>

    <p class="note">The resource containing the script will typically be the file from which the
    <code id="runtime-script-errors:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> was parsed, e.g. for inline <code id="runtime-script-errors:the-script-element"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements or <a href="/breakup/specs/browser-dom/#event-handler-content-attributes" id="runtime-script-errors:event-handler-content-attributes">event
    handler content attributes</a>; or the JavaScript file that the script was in, for external
    scripts. Even for dynamically-generated scripts, user agents are strongly encouraged to attempt
    to keep track of the original source of a script. For example, if an external script uses the
    <code id="runtime-script-errors:dom-document-write"><a href="/breakup/specs/browser-dom/#dom-document-write">document.write()</a></code> API to insert an inline
    <code id="runtime-script-errors:the-script-element-2"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element during parsing, the URL of the resource containing the script would
    ideally be reported as being the external script, and the line number might ideally be reported
    as the line with the <code id="runtime-script-errors:dom-document-write-2"><a href="/breakup/specs/browser-dom/#dom-document-write">document.write()</a></code> call or where the
    string passed to that call was first constructed. Naturally, implementing this can be somewhat
    non-trivial.</p>

    <p class="note">User agents are similarly encouraged to keep careful track of the original line
    numbers, even in the face of <code id="runtime-script-errors:dom-document-write-3"><a href="/breakup/specs/browser-dom/#dom-document-write">document.write()</a></code> calls
    mutating the document as it is parsed, or <a href="/breakup/specs/browser-dom/#event-handler-content-attributes" id="runtime-script-errors:event-handler-content-attributes-2">event handler content attributes</a> spanning
    multiple lines.</p>

   </li><li><p>If <var>script</var> has <a href="/breakup/specs/browser-dom/#muted-errors" id="runtime-script-errors:muted-errors">muted errors</a>, then set <var>message</var> to "<code>Script error.</code>", set <var>location</var>
   to the empty string, set <var>line</var> and <var>col</var> to 0, and set <var>error object</var> to null.</p></li><li><p>Let <var>event</var> be a new <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="runtime-script-errors:concept-events-trusted">trusted</a>
   <code id="runtime-script-errors:errorevent"><a href="/breakup/specs/browser-dom/#errorevent">ErrorEvent</a></code> object that does not bubble but is cancelable, and which has the event
   name <code id="runtime-script-errors:event-error"><a href="/breakup/specs/html/#event-error">error</a></code>.</p></li><li><p>Initialise <var>event</var>'s <code id="runtime-script-errors:dom-errorevent-message"><a href="/breakup/specs/browser-dom/#dom-errorevent-message">message</a></code>
   attribute to <var>message</var>.</p></li><li><p>Initialise <var>event</var>'s <code id="runtime-script-errors:dom-errorevent-filename"><a href="/breakup/specs/browser-dom/#dom-errorevent-filename">filename</a></code> attribute to <var>location</var>.</p></li><li><p>Initialise <var>event</var>'s <code id="runtime-script-errors:dom-errorevent-lineno"><a href="/breakup/specs/browser-dom/#dom-errorevent-lineno">lineno</a></code>
   attribute to <var>line</var>.</p></li><li><p>Initialise <var>event</var>'s <code id="runtime-script-errors:dom-errorevent-colno"><a href="/breakup/specs/browser-dom/#dom-errorevent-colno">colno</a></code>
   attribute to <var>col</var>.</p></li><li><p>Initialise <var>event</var>'s <code id="runtime-script-errors:dom-errorevent-error"><a href="/breakup/specs/browser-dom/#dom-errorevent-error">error</a></code>
   attribute to <var>error object</var>.</p></li><li><p><a href="/breakup/specs/core-algorithms/#concept-event-dispatch" id="runtime-script-errors:concept-event-dispatch">Dispatch</a> <var>event</var> at <var>target</var>.</p></li><li><p>Let <var>target</var> no longer be <a href="/breakup/specs/browser-dom/#in-error-reporting-mode" id="runtime-script-errors:in-error-reporting-mode-2">in error reporting mode</a>.</p></li><li><p>If <var>event</var> was canceled, then the error is <i id="runtime-script-errors:concept-error-handled"><a href="/breakup/specs/browser-dom/#concept-error-handled">handled</a></i>. Otherwise, the error is <i id="runtime-script-errors:concept-error-nothandled-2"><a href="/breakup/specs/browser-dom/#concept-error-nothandled">not handled</a></i>.</p>

  </li></ol>


  <section><h2>Runtime script errors in documents</h2>

  <p>When the user agent is to <dfn id="report-the-exception">report an exception</dfn>
  <var>E</var>, the user agent must <a href="/breakup/specs/browser-dom/#report-the-error" id="runtime-script-errors-in-documents:report-the-error">report the error</a> for the relevant <a href="/breakup/specs/browser-dom/#concept-script" id="runtime-script-errors-in-documents:concept-script">script</a>, with the problematic position (line number and column
  number) in the resource containing the script, using the <a href="/breakup/specs/browser-dom/#global-object" id="runtime-script-errors-in-documents:global-object">global object</a> specified by
  the script's <a href="/breakup/specs/browser-dom/#settings-object" id="runtime-script-errors-in-documents:settings-object">settings object</a> as the target. If the error is still <i id="runtime-script-errors-in-documents:concept-error-nothandled"><a href="/breakup/specs/browser-dom/#concept-error-nothandled">not handled</a></i> after this, then the error may be reported to
  the user.</p>

  <p>When an exception is thrown during the execution of one of the scripts associated with a
  <code id="runtime-script-errors-in-documents:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, and the exception is not caught, the user agent must <a href="/breakup/specs/browser-dom/#report-the-exception" id="runtime-script-errors-in-documents:report-the-exception">report the
  exception</a>.</p></section>


  <section><h2>The <code id="the-errorevent-interface:errorevent"><a href="/breakup/specs/browser-dom/#errorevent">ErrorEvent</a></code> interface</h2>

  

  <pre class="idl">[Constructor(DOMString type, optional <a href="/breakup/specs/browser-dom/#erroreventinit" id="the-errorevent-interface:erroreventinit">ErrorEventInit</a> eventInitDict), Exposed=(Window,Worker)]
interface <dfn id="errorevent">ErrorEvent</dfn> : <a href="/breakup/specs/core-algorithms/#event" id="the-errorevent-interface:event">Event</a> {
  readonly attribute DOMString <a href="/breakup/specs/browser-dom/#dom-errorevent-message" id="the-errorevent-interface:dom-errorevent-message">message</a>;
  readonly attribute DOMString <a href="/breakup/specs/browser-dom/#dom-errorevent-filename" id="the-errorevent-interface:dom-errorevent-filename">filename</a>;
  readonly attribute unsigned long <a href="/breakup/specs/browser-dom/#dom-errorevent-lineno" id="the-errorevent-interface:dom-errorevent-lineno">lineno</a>;
  readonly attribute unsigned long <a href="/breakup/specs/browser-dom/#dom-errorevent-colno" id="the-errorevent-interface:dom-errorevent-colno">colno</a>;
  readonly attribute any <a href="/breakup/specs/browser-dom/#dom-errorevent-error" id="the-errorevent-interface:dom-errorevent-error">error</a>;
};

dictionary <dfn id="erroreventinit">ErrorEventInit</dfn> : <a href="/breakup/specs/core-algorithms/#eventinit" id="the-errorevent-interface:eventinit">EventInit</a> {
  DOMString message;
  DOMString filename;
  unsigned long lineno;
  unsigned long colno;
  any error;
};</pre>

  <p>The <dfn id="dom-errorevent-message"><code>message</code></dfn> attribute must return the
  value it was initialised to. When the object is created, this attribute must be initialised to the
  empty string. It represents the error message.</p>

  <p>The <dfn id="dom-errorevent-filename"><code>filename</code></dfn> attribute must return the
  value it was initialised to. When the object is created, this attribute must be initialised to the
  empty string. It represents the <a href="/breakup/specs/core-algorithms/#absolute-url" id="the-errorevent-interface:absolute-url">absolute URL</a> of the script in which the error
  originally occurred.</p>

  <p>The <dfn id="dom-errorevent-lineno"><code>lineno</code></dfn> attribute must return the
  value it was initialised to. When the object is created, this attribute must be initialised to
  zero. It represents the line number where the error occurred in the script.</p>

  <p>The <dfn id="dom-errorevent-colno"><code>colno</code></dfn> attribute must return the value
  it was initialised to. When the object is created, this attribute must be initialised to zero. It
  represents the column number where the error occurred in the script.</p>

  <p>The <dfn id="dom-errorevent-error"><code>error</code></dfn> attribute must return the value
  it was initialised to. When the object is created, this attribute must be initialised to null.
  Where appropriate, it is set to the object representing the error (e.g. the exception object in
  the case of an uncaught DOM exception).</p></section></section></section>



  

  <section><h2>Event loops</h2> 

  <section><h2>Definitions</h2>

  <p>To coordinate events, user interaction, scripts, rendering, networking, and so forth, user
  agents must use <dfn id="event-loop">event loops</dfn> as described in this section. There are
  two kinds of event loops: those for <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-3:browsing-context">browsing contexts</a>, and
  those for <a href="http://www.w3.org/TR/workers/#workers">workers</a>.</p>

  <p>There must be at least one <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-3:browsing-context-2">browsing context</a> <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop">event loop</a> per user
  agent, and at most one per <a href="/breakup/specs/browser-dom/#unit-of-related-similar-origin-browsing-contexts" id="definitions-3:unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</a>.</p>

  <p class="note">When there is more than one <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-2">event loop</a> for a <a href="/breakup/specs/browser-dom/#unit-of-related-browsing-contexts" id="definitions-3:unit-of-related-browsing-contexts">unit of related
  browsing contexts</a>, complications arise when a <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-3:browsing-context-3">browsing context</a> in that group
  is <a href="/breakup/specs/browser-dom/#navigate" id="definitions-3:navigate">navigated</a> such that it switches from one <a href="/breakup/specs/browser-dom/#unit-of-related-similar-origin-browsing-contexts" id="definitions-3:unit-of-related-similar-origin-browsing-contexts-2">unit of related
  similar-origin browsing contexts</a> to another. This specification does not currently describe
  how to handle these complications.</p>

  <p>A <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-3:browsing-context-4">browsing context</a> <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-3">event loop</a> always has at least one <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-3:browsing-context-5">browsing
  context</a>. If such an <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-4">event loop</a>'s <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-3:browsing-context-6">browsing
  contexts</a> all go away, then the <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-5">event loop</a> goes away as well. A <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-3:browsing-context-7">browsing
  context</a> always has an <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-6">event loop</a> coordinating its activities.</p>

  <p><a href="http://www.w3.org/TR/workers/#worker-event-loop">Worker event loops</a> are simpler: each worker has one
  <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-7">event loop</a>, and the <a href="http://www.w3.org/TR/workers/#run-a-worker" id="definitions-3:run-a-worker">worker processing model</a>
  manages the <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-8">event loop</a>'s lifetime.</p>

  <hr>

  <p>An <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-9">event loop</a> has one or more <dfn id="task-queue">task queues</dfn>. A
  <a href="/breakup/specs/browser-dom/#task-queue" id="definitions-3:task-queue">task queue</a> is an ordered list of <dfn id="concept-task">tasks</dfn>, which are
  algorithms that are responsible for such work as:</p>

  <dl><dt>Events</dt><dd>

    <p>Dispatching an <code id="definitions-3:event"><a href="/breakup/specs/core-algorithms/#event">Event</a></code> object at a particular
    <code id="definitions-3:eventtarget"><a href="/breakup/specs/core-algorithms/#eventtarget">EventTarget</a></code> object is often done by a dedicated task.</p>

    <p class="note">Not all events are dispatched using the <a href="/breakup/specs/browser-dom/#task-queue" id="definitions-3:task-queue-2">task queue</a>, many are
    dispatched during other tasks.</p>

   </dd><dt>Parsing</dt><dd><p>The <a href="/breakup/specs/html-syntax/#html-parser" id="definitions-3:html-parser">HTML parser</a> tokenizing one or more bytes, and then processing any
   resulting tokens, is typically a task.</p></dd><dt>Callbacks</dt><dd><p>Calling a callback is often done by a dedicated task.</p></dd><dt>Using a resource</dt><dd><p>When an algorithm <a href="/breakup/specs/core-algorithms/#fetch" id="definitions-3:fetch">fetches</a> a resource, if the fetching occurs
   in a non-blocking fashion then the processing of the resource once some or all of the resource is available
   is performed by a task.</p></dd><dt>Reacting to DOM manipulation</dt><dd><p>Some elements have tasks that trigger in response to DOM manipulation, e.g. when that
   element is <a href="/breakup/specs/core-algorithms/#insert-an-element-into-a-document" id="definitions-3:insert-an-element-into-a-document">inserted into the document</a>.</p>

  </dd></dl>

  <p>Each <a href="/breakup/specs/browser-dom/#concept-task" id="definitions-3:concept-task">task</a> in a <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-3:browsing-context-8">browsing context</a> <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-10">event
  loop</a> is associated with a <code id="definitions-3:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code>; if the task was queued in the context of
  an element, then it is the element's <a id="definitions-3:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>; if the task was queued in the context
  of a <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-3:browsing-context-9">browsing context</a>, then it is the <a href="/breakup/specs/browser-dom/#browsing-context" id="definitions-3:browsing-context-10">browsing context</a>'s <a href="/breakup/specs/browser-dom/#active-document" id="definitions-3:active-document">active
  document</a> at the time the task was queued; if the task was queued by or for a <a href="/breakup/specs/browser-dom/#concept-script" id="definitions-3:concept-script">script</a> then the document is the <a href="/breakup/specs/browser-dom/#responsible-document" id="definitions-3:responsible-document">responsible document</a>
  specified by the script's <a href="/breakup/specs/browser-dom/#settings-object" id="definitions-3:settings-object">settings object</a>.</p>

  <p>A <a href="/breakup/specs/browser-dom/#concept-task" id="definitions-3:concept-task-2">task</a> is intended for a specific <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-11">event loop</a>:
  the <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-12">event loop</a> that is handling <a href="/breakup/specs/browser-dom/#concept-task" id="definitions-3:concept-task-3">tasks</a> for the
  <a href="/breakup/specs/browser-dom/#concept-task" id="definitions-3:concept-task-4">task</a>'s associated <code id="definitions-3:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> or <a href="http://www.w3.org/TR/workers/#workers">worker</a>.</p>

  <p>When a user agent is to <dfn id="queue-a-task">queue a task</dfn>, it must add the given task to one of the <a href="/breakup/specs/browser-dom/#task-queue" id="definitions-3:task-queue-3">task queues</a> of the relevant <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-13">event loop</a>.</p>

  <p>Each <a href="/breakup/specs/browser-dom/#concept-task" id="definitions-3:concept-task-5">task</a> is defined as coming from a specific <dfn id="task-source">task
  source</dfn>. All the tasks from one particular <a href="/breakup/specs/browser-dom/#task-source" id="definitions-3:task-source">task source</a> and destined to a
  particular <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-14">event loop</a> (e.g. the callbacks generated by timers of a
  <code id="definitions-3:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, the events fired for mouse movements over that <code id="definitions-3:document-4"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, the
  tasks queued for the parser of that <code id="definitions-3:document-5"><a href="/breakup/specs/browser-dom/#document">Document</a></code>) must always be added to the same
  <a href="/breakup/specs/browser-dom/#task-queue" id="definitions-3:task-queue-4">task queue</a>, but <a href="/breakup/specs/browser-dom/#concept-task" id="definitions-3:concept-task-6">tasks</a> from different <a href="/breakup/specs/browser-dom/#task-source" id="definitions-3:task-source-2">task sources</a> may be placed in different <a href="/breakup/specs/browser-dom/#task-queue" id="definitions-3:task-queue-5">task
  queues</a>.</p>

  <p class="example">For example, a user agent could have one <a href="/breakup/specs/browser-dom/#task-queue" id="definitions-3:task-queue-6">task queue</a> for mouse and
  key events (the <a href="/breakup/specs/browser-dom/#user-interaction-task-source" id="definitions-3:user-interaction-task-source">user interaction task source</a>), and another for everything else. The
  user agent could then give keyboard and mouse events preference over other tasks three quarters of
  the time, keeping the interface responsive but not starving other task queues, and never
  processing events from any one <a href="/breakup/specs/browser-dom/#task-source" id="definitions-3:task-source-3">task source</a> out of order.</p>

  <p>Each <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-15">event loop</a> has a <dfn id="currently-running-task">currently running task</dfn>. Initially, this is null.
  It is used to handle reentrancy. Each <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-16">event loop</a> also has a <dfn id="performing-a-microtask-checkpoint">performing a
  microtask checkpoint</dfn> flag, which must initially be false. It is used to prevent reentrant
  invocation of the <a href="/breakup/specs/browser-dom/#perform-a-microtask-checkpoint" id="definitions-3:perform-a-microtask-checkpoint">perform a microtask checkpoint</a> algorithm.</p> 

  <hr>

  <p>A user agent may have one <dfn id="storage-mutex">storage mutex</dfn>. This mutex is used to control access to
  shared state like cookies. At any one point, the <a href="/breakup/specs/browser-dom/#storage-mutex" id="definitions-3:storage-mutex">storage mutex</a> is either free, or
  owned by a particular <a href="/breakup/specs/browser-dom/#event-loop" id="definitions-3:event-loop-17">event loop</a> or instance of the <a href="/breakup/specs/core-algorithms/#fetch" id="definitions-3:fetch-2">fetching</a> algorithm.</p>

  <p>If a user agent does not implement a <a href="/breakup/specs/browser-dom/#storage-mutex" id="definitions-3:storage-mutex-2">storage mutex</a>, it is exempt from implementing
  the requirements that require it to acquire or release it.</p>

  <p class="note">User agent implementors have to make a choice between two evils. On the one hand,
  not implementing the storage mutex means that there is a risk of data corruption: a site could,
  for instance, try to read a cookie, increment its value, then write it back out, using the new
  value of the cookie as a unique identifier for the session; if the site does this twice in two
  different browser windows at the same time, it might end up using the same "unique" identifier for
  both sessions, with potentially disastrous effects. On the other hand, implementing the storage
  mutex has potentially serious performance implications: whenever a site uses Web Storage or
  cookies, all other sites that try to use Web Storage or cookies are blocked until the first site
  finishes.</p>

  <p class="warning">So far, all browsers faced with this decision have opted to not implement the
  <a href="/breakup/specs/browser-dom/#storage-mutex" id="definitions-3:storage-mutex-3">storage mutex</a>.</p>

  <p>Whenever a <a href="/breakup/specs/browser-dom/#concept-script" id="definitions-3:concept-script-2">script</a> calls into a <a href="/breakup/specs/core-algorithms/#plugin" id="definitions-3:plugin">plugin</a>, and
  whenever a <a href="/breakup/specs/core-algorithms/#plugin" id="definitions-3:plugin-2">plugin</a> calls into a <a href="/breakup/specs/browser-dom/#concept-script" id="definitions-3:concept-script-3">script</a>, the user
  agent must release the <a href="/breakup/specs/browser-dom/#storage-mutex" id="definitions-3:storage-mutex-4">storage mutex</a>.</p></section>


  <section><h2>Processing model</h2> 

  <p>An <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop">event loop</a> must continually run through the following steps for as long as it
  exists:</p>

  <ol><li id="step1">

    <p>Select the oldest <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task">task</a> on one of the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-2">event
    loop</a>'s <a href="/breakup/specs/browser-dom/#task-queue" id="processing-model-9:task-queue">task queues</a>, if any, ignoring, in the case of a
    <a href="/breakup/specs/browser-dom/#browsing-context" id="processing-model-9:browsing-context">browsing context</a> <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-3">event loop</a>, tasks whose associated
    <code id="processing-model-9:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code>s are not <a href="/breakup/specs/browser-dom/#fully-active" id="processing-model-9:fully-active">fully active</a>. The user agent may pick any <a href="/breakup/specs/browser-dom/#task-queue" id="processing-model-9:task-queue-2">task
    queue</a>. If there is no task to select, then jump to the <i>microtasks</i> step below.</p>

   </li><li><p>Set the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-4">event loop</a>'s <a href="/breakup/specs/browser-dom/#currently-running-task" id="processing-model-9:currently-running-task">currently running task</a> to the <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-2">task</a> selected in the previous step.</p></li><li><p><i>Run</i>: Run the selected <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-3">task</a>.</p></li><li><p>Set the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-5">event loop</a>'s <a href="/breakup/specs/browser-dom/#currently-running-task" id="processing-model-9:currently-running-task-2">currently running task</a> back to
   null.</p></li><li><p>If the <a href="/breakup/specs/browser-dom/#storage-mutex" id="processing-model-9:storage-mutex">storage mutex</a> is now owned by the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-6">event loop</a>, release it
   so that it is once again free.</p></li><li><p>Remove the task that was run in the <i>run</i> step above from its <a href="/breakup/specs/browser-dom/#task-queue" id="processing-model-9:task-queue-3">task
   queue</a>.</p></li><li><p><i>Microtasks</i>: <a href="/breakup/specs/browser-dom/#perform-a-microtask-checkpoint" id="processing-model-9:perform-a-microtask-checkpoint">Perform a microtask checkpoint</a>.</p></li><li>

    <p><i>Update the rendering</i>: If this <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-7">event loop</a> is a <a href="/breakup/specs/browser-dom/#browsing-context" id="processing-model-9:browsing-context-2">browsing
    context</a> <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-8">event loop</a> (as opposed to a <a href="http://www.w3.org/TR/workers/#workers">worker</a>
    <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-9">event loop</a>), then run the following substeps.</p>

    <ol><li><p>Let <var>now</var> be the value that would be returned by the <code id="processing-model-9:performance"><a href="/breakup/specs/core-algorithms/#performance">Performance</a></code>
     object's <code id="processing-model-9:dom-performance-now"><a href="/breakup/specs/core-algorithms/#dom-performance-now">now()</a></code> method. [[!HRT]]</p>

     </li><li>

      <p>Let <var>docs</var> be the list of <code id="processing-model-9:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> objects associated with the
      <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-10">event loop</a> in question, sorted arbitrarily except that the following conditions
      must be met:</p>

      <ul><li><p>Any <code id="processing-model-9:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code> <var>B</var> that is <span>nested through</span> a
       <code id="processing-model-9:document-4"><a href="/breakup/specs/browser-dom/#document">Document</a></code> <var>A</var> must be listed after <var>A</var> in the list.</p></li><li><p>If there are two documents <var>A</var> and <var>B</var> whose <a href="/breakup/specs/browser-dom/#browsing-context" id="processing-model-9:browsing-context-3">browsing contexts</a> are both <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="processing-model-9:nested-browsing-context">nested
       browsing contexts</a> and their <a href="/breakup/specs/browser-dom/#browsing-context-container" id="processing-model-9:browsing-context-container">browsing context
       containers</a> are both elements in the same <code id="processing-model-9:document-5"><a href="/breakup/specs/browser-dom/#document">Document</a></code> <var>C</var>, then the
       order of <var>A</var> and <var>B</var> in the list must match the relative <a href="/breakup/specs/core-algorithms/#tree-order" id="processing-model-9:tree-order">tree
       order</a> of their respective <a href="/breakup/specs/browser-dom/#browsing-context-container" id="processing-model-9:browsing-context-container-2">browsing context
       containers</a> in <var>C</var>.</p></li></ul>

      <p>In the steps below that iterate over <var>docs</var>, each <code id="processing-model-9:document-6"><a href="/breakup/specs/browser-dom/#document">Document</a></code> must be
      processed in the order it is found in the list.</p>

     </li><li>

      <p>If there is a <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="processing-model-9:top-level-browsing-context">top-level browsing context</a> <var>B</var> that the user agent
      believes would not benefit from having its rendering updated at this time, then remove from
      <var>docs</var> all <code id="processing-model-9:document-7"><a href="/breakup/specs/browser-dom/#document">Document</a></code> objects whose <a href="/breakup/specs/browser-dom/#browsing-context" id="processing-model-9:browsing-context-4">browsing context</a>'s
      <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="processing-model-9:top-level-browsing-context-2">top-level browsing context</a> is <var>B</var>.</p>

      <p class="note">Whether a <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="processing-model-9:top-level-browsing-context-3">top-level browsing context</a> would benefit from having
      its rendering updated depends on various factors, such as the update frequency. For example,
      if the browser is attempting to achieve a 60 Hz refresh rate, then these steps are only
      necessary every 60th of a second (about 16.7ms). If the browser finds that a <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="processing-model-9:top-level-browsing-context-4">top-level
      browsing context</a> is not able to sustain this rate, it might drop to a more sustainable
      30Hz for that set of <code id="processing-model-9:document-8"><a href="/breakup/specs/browser-dom/#document">Document</a></code>s, rather than occasionally dropping frames. (This
      specification does not mandate any particular model for when to update the rendering.)
      Similarly, if a <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="processing-model-9:top-level-browsing-context-5">top-level browsing context</a> is in the background, the user agent
      might decide to drop that page to a much slower 4Hz, or even less.</p>

     </li><li><p>For each <a href="/breakup/specs/browser-dom/#fully-active" id="processing-model-9:fully-active-2">fully active</a> <code id="processing-model-9:document-9"><a href="/breakup/specs/browser-dom/#document">Document</a></code> in <var>docs</var>, <dfn id="run-the-resize-steps">run the resize steps</dfn> for
     that <code id="processing-model-9:document-10"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, passing in <var>now</var> as the timestamp. [[!CSSOMVIEW]]</p></li><li><p>For each <a href="/breakup/specs/browser-dom/#fully-active" id="processing-model-9:fully-active-3">fully active</a> <code id="processing-model-9:document-11"><a href="/breakup/specs/browser-dom/#document">Document</a></code> in <var>docs</var>, <dfn id="run-the-scroll-steps">run the scroll steps</dfn> for
     that <code id="processing-model-9:document-12"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, passing in <var>now</var> as the timestamp. [[!CSSOMVIEW]]</p></li><li><p>For each <a href="/breakup/specs/browser-dom/#fully-active" id="processing-model-9:fully-active-4">fully active</a> <code id="processing-model-9:document-13"><a href="/breakup/specs/browser-dom/#document">Document</a></code> in <var>docs</var>, <dfn id="evaluate-media-queries-and-report-changes">evaluate media queries and
     report changes</dfn> for that <code id="processing-model-9:document-14"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, passing in <var>now</var> as the
     timestamp. [[!CSSOMVIEW]]</p></li><li><p>For each <a href="/breakup/specs/browser-dom/#fully-active" id="processing-model-9:fully-active-5">fully active</a> <code id="processing-model-9:document-15"><a href="/breakup/specs/browser-dom/#document">Document</a></code> in <var>docs</var>, <dfn id="run-css-animations-and-send-events">run CSS animations and send
     events</dfn> for that <code id="processing-model-9:document-16"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, passing in <var>now</var> as the timestamp. [[!CSSANIMATIONS]]</p></li><li><p>For each <a href="/breakup/specs/browser-dom/#fully-active" id="processing-model-9:fully-active-6">fully active</a> <code id="processing-model-9:document-17"><a href="/breakup/specs/browser-dom/#document">Document</a></code> in <var>docs</var>, <dfn id="run-the-fullscreen-rendering-steps">run the fullscreen rendering
     steps</dfn> for that <code id="processing-model-9:document-18"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, passing in <var>now</var> as the timestamp. [[!FULLSCREEN]]</p></li><li><p>For each <a href="/breakup/specs/browser-dom/#fully-active" id="processing-model-9:fully-active-7">fully active</a> <code id="processing-model-9:document-19"><a href="/breakup/specs/browser-dom/#document">Document</a></code> in <var>docs</var>, <a href="/breakup/specs/browser-dom/#run-the-animation-frame-callbacks" id="processing-model-9:run-the-animation-frame-callbacks">run the animation frame
     callbacks</a> for that <code id="processing-model-9:document-20"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, passing in <var>now</var> as the
     timestamp.</p></li><li><p>For each <a href="/breakup/specs/browser-dom/#fully-active" id="processing-model-9:fully-active-8">fully active</a> <code id="processing-model-9:document-21"><a href="/breakup/specs/browser-dom/#document">Document</a></code> in <var>docs</var>, update the rendering or user
     interface of that <code id="processing-model-9:document-22"><a href="/breakup/specs/browser-dom/#document">Document</a></code> and its <a href="/breakup/specs/browser-dom/#browsing-context" id="processing-model-9:browsing-context-5">browsing context</a> to reflect the
     current state.</p></li></ol>

   </li><li><p>If this is a <a href="http://www.w3.org/TR/workers/#workers">worker</a> <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-11">event loop</a> (i.e. one running for a
   <code id="processing-model-9:workerglobalscope"><a href="http://www.w3.org/TR/workers/#workerglobalscope">WorkerGlobalScope</a></code>), but there are no <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-4">tasks</a> in the
   <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-12">event loop</a>'s <a href="/breakup/specs/browser-dom/#task-queue" id="processing-model-9:task-queue-4">task queues</a> and the
   <code id="processing-model-9:workerglobalscope-2"><a href="http://www.w3.org/TR/workers/#workerglobalscope">WorkerGlobalScope</a></code> object's <a href="http://www.w3.org/TR/workers/#dom-workerglobalscope-closing" id="processing-model-9:dom-workerglobalscope-closing">closing</a> flag is true, then destroy the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-13">event
   loop</a>, aborting these steps, resuming the <a href="http://www.w3.org/TR/workers/#run-a-worker" id="processing-model-9:run-a-worker">run a worker</a> steps described in the
   Web Workers section below.</p></li><li><p>Return to the <a href="/breakup/specs/browser-dom/#step1">first step</a> of the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-14">event loop</a>.</p></li></ol>

  <hr>

  <p>Each <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-15">event loop</a> has a <dfn id="microtask-queue">microtask queue</dfn>. A <dfn id="microtask">microtask</dfn> is a
  <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-5">task</a> that is originally to be queued on the <a href="/breakup/specs/browser-dom/#microtask-queue" id="processing-model-9:microtask-queue">microtask
  queue</a> rather than a <a href="/breakup/specs/browser-dom/#task-queue" id="processing-model-9:task-queue-5">task queue</a>. There are two kinds of <a href="/breakup/specs/browser-dom/#microtask" id="processing-model-9:microtask">microtasks</a>: <dfn id="solitary-callback-microtask">solitary callback
  microtasks</dfn>, and <dfn id="compound-microtask">compound microtasks</dfn>.</p>

  <p class="note">This specification only has <a href="/breakup/specs/browser-dom/#solitary-callback-microtask" id="processing-model-9:solitary-callback-microtask">solitary
  callback microtasks</a>. Specifications that use <a href="/breakup/specs/browser-dom/#compound-microtask" id="processing-model-9:compound-microtask">compound
  microtasks</a> have to take extra care to <a href="/breakup/specs/browser-dom/#execute-a-compound-microtask-subtask" id="processing-model-9:execute-a-compound-microtask-subtask">wrap callbacks</a> to handle <a href="/breakup/specs/browser-dom/#spin-the-event-loop" id="processing-model-9:spin-the-event-loop">spinning the event
  loop</a>.</p>

  <p>When an algorithm requires a <a href="/breakup/specs/browser-dom/#microtask" id="processing-model-9:microtask-2">microtask</a> to be <dfn id="queue-a-microtask">queued</dfn>, it must be appended to the relevant <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-16">event loop</a>'s
  <a href="/breakup/specs/browser-dom/#microtask-queue" id="processing-model-9:microtask-queue-2">microtask queue</a>; the <a href="/breakup/specs/browser-dom/#task-source" id="processing-model-9:task-source">task source</a> of such a <a href="/breakup/specs/browser-dom/#microtask" id="processing-model-9:microtask-3">microtask</a> is the
  <dfn id="microtask-task-source">microtask task source</dfn>.</p>

  <p class="note">It is possible for a <a href="/breakup/specs/browser-dom/#microtask" id="processing-model-9:microtask-4">microtask</a> to be moved to a regular <a href="/breakup/specs/browser-dom/#task-queue" id="processing-model-9:task-queue-6">task
  queue</a>, if, during its initial execution, it <a href="/breakup/specs/browser-dom/#spin-the-event-loop" id="processing-model-9:spin-the-event-loop-2">spins the
  event loop</a>. In that case, the <a href="/breakup/specs/browser-dom/#microtask-task-source" id="processing-model-9:microtask-task-source">microtask task source</a> is the <a href="/breakup/specs/browser-dom/#task-source" id="processing-model-9:task-source-2">task
  source</a> used. Normally, the <a href="/breakup/specs/browser-dom/#task-source" id="processing-model-9:task-source-3">task source</a> of a <a href="/breakup/specs/browser-dom/#microtask" id="processing-model-9:microtask-5">microtask</a> is
  irrelevant.</p>

  <p>When a user agent is to <dfn id="perform-a-microtask-checkpoint">perform a microtask checkpoint</dfn>, if the <a href="/breakup/specs/browser-dom/#performing-a-microtask-checkpoint" id="processing-model-9:performing-a-microtask-checkpoint">performing a
  microtask checkpoint</a> flag is false, then the user agent must run the following steps:</p>

  <ol><li><p>Let the <a href="/breakup/specs/browser-dom/#performing-a-microtask-checkpoint" id="processing-model-9:performing-a-microtask-checkpoint-2">performing a microtask checkpoint</a> flag be true.</p></li><li><p><i>Microtask queue handling</i>: If the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-17">event loop</a>'s <a href="/breakup/specs/browser-dom/#microtask-queue" id="processing-model-9:microtask-queue-3">microtask
   queue</a> is empty, jump to the <i>done</i> step below.</p></li><li><p>Select the oldest <a href="/breakup/specs/browser-dom/#microtask" id="processing-model-9:microtask-6">microtask</a> on the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-18">event loop</a>'s <a href="/breakup/specs/browser-dom/#microtask-queue" id="processing-model-9:microtask-queue-4">microtask
   queue</a>.</p></li><li><p>Set the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-19">event loop</a>'s <a href="/breakup/specs/browser-dom/#currently-running-task" id="processing-model-9:currently-running-task-3">currently running task</a> to the <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-6">task</a> selected in the previous step.</p></li><li>

    <p><i>Run</i>: Run the selected <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-7">task</a>.</p>

    <p class="note">This might involve invoking scripted callbacks, which eventually calls the
    <a href="/breakup/specs/browser-dom/#clean-up-after-running-a-callback" id="processing-model-9:clean-up-after-running-a-callback">clean up after running a callback</a> steps, which call this <a href="/breakup/specs/browser-dom/#perform-a-microtask-checkpoint" id="processing-model-9:perform-a-microtask-checkpoint-2">perform a microtask
    checkpoint</a> algorithm again, which is why we use the <a href="/breakup/specs/browser-dom/#performing-a-microtask-checkpoint" id="processing-model-9:performing-a-microtask-checkpoint-3">performing a microtask
    checkpoint</a> flag to avoid reentrancy.</p>

   </li><li><p>Set the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-20">event loop</a>'s <a href="/breakup/specs/browser-dom/#currently-running-task" id="processing-model-9:currently-running-task-4">currently running task</a> back to
   null.</p></li><li><p>If the <a href="/breakup/specs/browser-dom/#storage-mutex" id="processing-model-9:storage-mutex-2">storage mutex</a> is now owned by the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-21">event loop</a>, release it
   so that it is once again free.</p></li><li><p>Remove the <a href="/breakup/specs/browser-dom/#microtask" id="processing-model-9:microtask-7">microtask</a> run in the step above from the <a href="/breakup/specs/browser-dom/#microtask-queue" id="processing-model-9:microtask-queue-5">microtask
   queue</a>, and return to the <i>microtask queue handling</i> step.</p></li><li><p><i>Done</i>: Let the <a href="/breakup/specs/browser-dom/#performing-a-microtask-checkpoint" id="processing-model-9:performing-a-microtask-checkpoint-4">performing a microtask checkpoint</a> flag be
   false.</p></li></ol>

  <p>If, while a <a href="/breakup/specs/browser-dom/#compound-microtask" id="processing-model-9:compound-microtask-2">compound microtask</a> is running, the user agent is required to
  <dfn id="execute-a-compound-microtask-subtask">execute a compound microtask subtask</dfn> to run a series of steps, the user agent must run
  the following steps:</p>

  <ol><li><p>Let <var>parent</var> be the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-22">event loop</a>'s <a href="/breakup/specs/browser-dom/#currently-running-task" id="processing-model-9:currently-running-task-5">currently running
   task</a> (the currently running <a href="/breakup/specs/browser-dom/#compound-microtask" id="processing-model-9:compound-microtask-3">compound microtask</a>).</p></li><li><p>Let <var>subtask</var> be a new <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-8">task</a> that
   consists of running the given series of steps. The <a href="/breakup/specs/browser-dom/#task-source" id="processing-model-9:task-source-4">task source</a> of such a
   <a href="/breakup/specs/browser-dom/#microtask" id="processing-model-9:microtask-8">microtask</a> is the <a href="/breakup/specs/browser-dom/#microtask-task-source" id="processing-model-9:microtask-task-source-2">microtask task source</a>. This is a <dfn id="compound-microtask-subtask">compound
   microtask subtask</dfn>.</p></li><li><p>Set the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-23">event loop</a>'s <a href="/breakup/specs/browser-dom/#currently-running-task" id="processing-model-9:currently-running-task-6">currently running task</a> to <var>subtask</var>.</p></li><li><p>Run <var>subtask</var>.</p></li><li><p>Set the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-24">event loop</a>'s <a href="/breakup/specs/browser-dom/#currently-running-task" id="processing-model-9:currently-running-task-7">currently running task</a> back to <var>parent</var>.</p></li></ol>

  <hr>

  <p>When an algorithm running <a href="/breakup/specs/core-algorithms/#in-parallel" id="processing-model-9:in-parallel">in parallel</a> is to <dfn id="await-a-stable-state">await a stable state</dfn>, the
  user agent must <a href="/breakup/specs/browser-dom/#queue-a-microtask" id="processing-model-9:queue-a-microtask">queue a microtask</a> that runs the following steps, and must then stop
  executing (execution of the algorithm resumes when the microtask is run, as described in the
  following steps):</p>

  <ol><li><p>Run the algorithm's <dfn id="synchronous-section">synchronous section</dfn>.</p></li><li><p>Resumes execution of the algorithm <a href="/breakup/specs/core-algorithms/#in-parallel" id="processing-model-9:in-parallel-2">in parallel</a>, if appropriate, as described
   in the algorithm's steps.</p></li></ol>

  <p class="note">Steps in <a href="/breakup/specs/browser-dom/#synchronous-section" id="processing-model-9:synchronous-section">synchronous sections</a> are marked
  with ⌛.</p>

  <hr>

  <p>When an algorithm says to <dfn id="spin-the-event-loop">spin the event loop</dfn> until a condition <var>goal</var> is met, the user agent must run the following steps:</p>

  <ol><li>

    <p>Let <var>task</var> be the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-25">event loop</a>'s <a href="/breakup/specs/browser-dom/#currently-running-task" id="processing-model-9:currently-running-task-8">currently running
    task</a>.</p>

    <p class="note">This might be a <a href="/breakup/specs/browser-dom/#microtask" id="processing-model-9:microtask-9">microtask</a>, in which case it is a <a href="/breakup/specs/browser-dom/#solitary-callback-microtask" id="processing-model-9:solitary-callback-microtask-2">solitary
    callback microtask</a>. It could also be a <a href="/breakup/specs/browser-dom/#compound-microtask-subtask" id="processing-model-9:compound-microtask-subtask">compound microtask subtask</a>, or a
    regular <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-9">task</a> that is not a <a href="/breakup/specs/browser-dom/#microtask" id="processing-model-9:microtask-10">microtask</a>. It will
    <em>not</em> be a <a href="/breakup/specs/browser-dom/#compound-microtask" id="processing-model-9:compound-microtask-4">compound microtask</a>.</p> 

   </li><li><p>Let <var>task source</var> be <var>task</var>'s <a href="/breakup/specs/browser-dom/#task-source" id="processing-model-9:task-source-5">task
   source</a>.</p></li><li><p>Let <var>old stack of script settings objects</var> be a copy of the <a href="/breakup/specs/browser-dom/#stack-of-script-settings-objects" id="processing-model-9:stack-of-script-settings-objects">stack
   of script settings objects</a>.</p></li><li><p>Empty the <a href="/breakup/specs/browser-dom/#stack-of-script-settings-objects" id="processing-model-9:stack-of-script-settings-objects-2">stack of script settings objects</a>.</p></li><li><p><a href="/breakup/specs/browser-dom/#run-the-global-script-clean-up-jobs" id="processing-model-9:run-the-global-script-clean-up-jobs">Run the global script clean-up jobs</a>.</p></li><li><p><a href="/breakup/specs/browser-dom/#perform-a-microtask-checkpoint" id="processing-model-9:perform-a-microtask-checkpoint-3">Perform a microtask checkpoint</a>.</p></li><li>

    <p>Stop <var>task</var>, allowing whatever algorithm that invoked it to resume, but
    continue these steps <a href="/breakup/specs/core-algorithms/#in-parallel" id="processing-model-9:in-parallel-3">in parallel</a>.</p>

    <p class="note">This causes one of the following algorithms to continue: the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-26">event
    loop</a>'s main set of steps, the <a href="/breakup/specs/browser-dom/#perform-a-microtask-checkpoint" id="processing-model-9:perform-a-microtask-checkpoint-4">perform a microtask checkpoint</a> algorithm, or
    the <a href="/breakup/specs/browser-dom/#execute-a-compound-microtask-subtask" id="processing-model-9:execute-a-compound-microtask-subtask-2">execute a compound microtask subtask</a> algorithm to continue.</p>

   </li><li><p>Wait until the condition <var>goal</var> is met.</p></li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="processing-model-9:queue-a-task">Queue a task</a> to continue running these steps, using the <a href="/breakup/specs/browser-dom/#task-source" id="processing-model-9:task-source-6">task
   source</a> <var>task source</var>. Wait until this new task runs before continuing
   these steps.</p></li><li><p>Replace the <a href="/breakup/specs/browser-dom/#stack-of-script-settings-objects" id="processing-model-9:stack-of-script-settings-objects-3">stack of script settings objects</a> with the <var>old
   stack of script settings objects</var>.</p></li><li><p>Return to the caller.</p></li></ol>

  <hr>

  <p>Some of the algorithms in this specification, for historical reasons, require the user agent to
  <dfn id="pause">pause</dfn> while running a <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-10">task</a> until a condition <var>goal</var> is met. This means running the following steps:</p>

  <ol><li><p>If necessary, update the rendering or user interface of any <code id="processing-model-9:document-23"><a href="/breakup/specs/browser-dom/#document">Document</a></code> or
   <a href="/breakup/specs/browser-dom/#browsing-context" id="processing-model-9:browsing-context-6">browsing context</a> to reflect the current state.</p></li><li><p>Wait until the condition <var>goal</var> is met. While a user agent has a paused
   <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-11">task</a>, the corresponding <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-27">event loop</a> must not run
   further <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-12">tasks</a>, and any script in the currently running <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-13">task</a> must block. User agents should remain responsive to user input
   while paused, however, albeit in a reduced capacity since the <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-28">event loop</a> will not be
   doing anything.</p></li></ol>

  <hr>

  <p>When a user agent is to <dfn id="obtain-the-storage-mutex">obtain the storage mutex</dfn> as part of running a <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-14">task</a>, it must run through the following steps:</p>

  <ol><li><p>If the <a href="/breakup/specs/browser-dom/#storage-mutex" id="processing-model-9:storage-mutex-3">storage mutex</a> is already owned by this <a href="/breakup/specs/browser-dom/#concept-task" id="processing-model-9:concept-task-15">task</a>'s <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-29">event loop</a>, then abort these steps.</p></li><li><p>Otherwise, <a href="/breakup/specs/browser-dom/#pause" id="processing-model-9:pause">pause</a> until the <a href="/breakup/specs/browser-dom/#storage-mutex" id="processing-model-9:storage-mutex-4">storage mutex</a> can be taken by the
   <a href="/breakup/specs/browser-dom/#event-loop" id="processing-model-9:event-loop-30">event loop</a>.</p></li><li><p>Take ownership of the <a href="/breakup/specs/browser-dom/#storage-mutex" id="processing-model-9:storage-mutex-5">storage mutex</a>.</p></li></ol></section>

  


  

  <section><h2>Generic task sources</h2>

  <p>The following <a href="/breakup/specs/browser-dom/#task-source" id="generic-task-sources:task-source">task sources</a> are used by a number of mostly
  unrelated features in this and other specifications.</p>

  <dl><dt>The <dfn id="dom-manipulation-task-source">DOM manipulation task source</dfn></dt><dd>

    <p>This <a href="/breakup/specs/browser-dom/#task-source" id="generic-task-sources:task-source-2">task source</a> is used for features that react to DOM manipulations, such as
    things that happen in a non-blocking fashion when an element is <a href="/breakup/specs/core-algorithms/#insert-an-element-into-a-document" id="generic-task-sources:insert-an-element-into-a-document">inserted into the document</a>.</p>

   </dd><dt>The <dfn id="user-interaction-task-source">user interaction task source</dfn></dt><dd>

    <p>This <a href="/breakup/specs/browser-dom/#task-source" id="generic-task-sources:task-source-3">task source</a> is used for features that react to user interaction, for
    example keyboard or mouse input.</p>

    <p>Events sent in response to user input (e.g. <code id="generic-task-sources:event-click"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code> events) must be fired using <a href="/breakup/specs/browser-dom/#concept-task" id="generic-task-sources:concept-task">tasks</a> <a href="/breakup/specs/browser-dom/#queue-a-task" id="generic-task-sources:queue-a-task">queued</a> with the <a href="/breakup/specs/browser-dom/#user-interaction-task-source" id="generic-task-sources:user-interaction-task-source">user
    interaction task source</a>. [[!DOMEVENTS]]</p> 

   </dd><dt>The <dfn id="networking-task-source">networking task source</dfn></dt><dd>

    <p>This <a href="/breakup/specs/browser-dom/#task-source" id="generic-task-sources:task-source-4">task source</a> is used for features that trigger in response to network
    activity.</p>

   </dd><dt>The <dfn id="history-traversal-task-source">history traversal task source</dfn></dt><dd>

    <p>This <a href="/breakup/specs/browser-dom/#task-source" id="generic-task-sources:task-source-5">task source</a> is used to queue calls to <code id="generic-task-sources:dom-history-back"><a href="/breakup/specs/browser-dom/#dom-history-back">history.back()</a></code> and similar APIs.</p>

   </dd></dl></section></section>

  




  <section><h2>Events</h2>

  <section><h2>Event handlers</h2>

  

  <p>Many objects can have <dfn id="event-handlers">event handlers</dfn> specified. These act as non-capture event
  listeners for the object on which they are specified. [[!DOM]]</p>

  <p>An <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers">event handler</a> has a name, which always starts with
  "<code>on</code>" and is followed by the name of the event for which it is intended.</p>

  <p>An <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-2">event handler</a> can either have the value null, or be set
  to a callback object, or be set to an <a href="/breakup/specs/browser-dom/#internal-raw-uncompiled-handler" id="event-handler-attributes:internal-raw-uncompiled-handler">internal raw uncompiled
  handler</a>. The <code id="event-handler-attributes:eventhandler"><a href="/breakup/specs/browser-dom/#eventhandler">EventHandler</a></code> callback function type describes how this is
  exposed to scripts. Initially, event handlers must be set to null.</p>

  <p>Event handlers are exposed in one of two ways.</p>

  <p>The first way, common to all event handlers, is as an <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handler-attributes:event-handler-idl-attributes">event handler IDL attribute</a>.</p>

  <p>The second way is as an <a href="/breakup/specs/browser-dom/#event-handler-content-attributes" id="event-handler-attributes:event-handler-content-attributes">event handler content
  attribute</a>. Event handlers on <a href="/breakup/specs/core-algorithms/#html-elements" id="event-handler-attributes:html-elements">HTML elements</a> and some of the event handlers on
  <code id="event-handler-attributes:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code> objects are exposed in this way.</p>

  

  <hr>

  <p>An <dfn id="event-handler-idl-attributes">event handler IDL attribute</dfn> is an IDL
  attribute for a specific <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-3">event handler</a>. The name of the IDL
  attribute is the same as the name of the <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-4">event handler</a>.</p>

  <p><a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handler-attributes:event-handler-idl-attributes-2">Event handler IDL attributes</a>, on setting, must set the corresponding <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-5">event handler</a> to their new value, and on getting, must return the
  result of <a href="/breakup/specs/browser-dom/#getting-the-current-value-of-the-event-handler" id="event-handler-attributes:getting-the-current-value-of-the-event-handler">getting the current value of the event handler</a> in question (this can throw
  an exception, in which case the getting propagates it to the caller, it does not catch it).</p>

  <p>If an <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handler-attributes:event-handler-idl-attributes-3">event handler IDL attribute</a> exposes an
  <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-6">event handler</a> of an object that doesn't exist, it must always
  return null on getting and must do nothing on setting.</p>

  <p class="note">This can happen in particular for <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handler-attributes:event-handler-idl-attributes-4">event
  handler IDL attribute</a> on <code id="event-handler-attributes:the-body-element"><a href="/breakup/specs/html-structure/#the-body-element">body</a></code> elements that do not have corresponding
  <code id="event-handler-attributes:window-2"><a href="/breakup/specs/browser-dom/#window">Window</a></code> objects.</p>

  <p class="note">Certain event handler IDL attributes have additional requirements, in particular
  the <code id="event-handler-attributes:handler-messageport-onmessage"><a href="http://www.w3.org/TR/webmessaging/#handler-messageport-onmessage">onmessage</a></code> attribute of
  <code id="event-handler-attributes:messageport"><a href="http://www.w3.org/TR/webmessaging/#messageport">MessagePort</a></code> objects.</p>

  <hr>

  

  <p>An <dfn id="event-handler-content-attributes">event handler content attribute</dfn> is a
  content attribute for a specific <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-7">event handler</a>. The name of
  the content attribute is the same as the name of the <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-8">event
  handler</a>.</p>

  <p><a href="/breakup/specs/browser-dom/#event-handler-content-attributes" id="event-handler-attributes:event-handler-content-attributes-2">Event handler content attributes</a>, when specified, must contain valid JavaScript
  code which, when parsed, would match the <code>FunctionBody</code> production after
  automatic semicolon insertion. [[!ECMA262]]</p>

  

  <p>When an <a href="/breakup/specs/browser-dom/#event-handler-content-attributes" id="event-handler-attributes:event-handler-content-attributes-3">event handler content attribute</a>
  is set, the user agent must set the corresponding <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-9">event
  handler</a> to an <a href="/breakup/specs/browser-dom/#internal-raw-uncompiled-handler" id="event-handler-attributes:internal-raw-uncompiled-handler-2">internal raw uncompiled handler</a> consisting of the attribute's
  new value and the script location where the attribute was set to this value</p>

  <p>When an event handler content attribute is removed, the user agent must set the corresponding
  <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-10">event handler</a> to null.</p>
  

  <hr>

  <p>When an <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-11">event handler</a> <var>H</var> of an element
  or object <var>T</var> implementing the <code id="event-handler-attributes:eventtarget"><a href="/breakup/specs/core-algorithms/#eventtarget">EventTarget</a></code> interface is first set
  to a non-null value, the user agent must append an <a href="/breakup/specs/core-algorithms/#concept-event-listener" id="event-handler-attributes:concept-event-listener">event
  listener</a> to the list of <a href="/breakup/specs/core-algorithms/#concept-event-listener" id="event-handler-attributes:concept-event-listener-2">event listeners</a>
  associated with <var>T</var> with <i>type</i> set to the <dfn id="event-handler-event-type">event handler event
  type</dfn> corresponding to <var>H</var>, <i>capture</i> set to false, and
  <i>listener</i> set to <a href="/breakup/specs/browser-dom/#the-event-handler-processing-algorithm" id="event-handler-attributes:the-event-handler-processing-algorithm">the event handler processing algorithm</a> defined below. [[!DOM]]</p>

  <p class="note">The <i>listener</i> is emphatically <em>not</em> the <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-12">event handler</a> itself. Every event handler ends up registering the same
  <i>listener</i>, the algorithm defined below, which takes care of invoking the right callback, and
  processing the callback's return value.</p>

  <p class="note">This only happens the first time the <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-13">event
  handler</a>'s value is set. Since listeners are called in the order they were registered, the
  order of event listeners for a particular event type will always be first the event listeners
  registered with <code id="event-handler-attributes:dom-eventtarget-addeventlistener"><a href="/breakup/specs/core-algorithms/#dom-eventtarget-addeventlistener">addEventListener()</a></code> before
  the first time the <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-14">event handler</a> was set to a non-null value,
  then the callback to which it is currently set, if any, and finally the event listeners registered
  with <code id="event-handler-attributes:dom-eventtarget-addeventlistener-2"><a href="/breakup/specs/core-algorithms/#dom-eventtarget-addeventlistener">addEventListener()</a></code> <em>after</em> the
  first time the <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-15">event handler</a> was set to a non-null value.</p>

  

  <div class="example">

   <p>This example demonstrates the order in which event listeners are invoked. If the button in
   this example is clicked by the user, the page will show four alerts, with the text "ONE", "TWO",
   "THREE", and "FOUR" respectively.</p>

   <pre>&lt;button id="test"&gt;Start Demo&lt;/button&gt;
&lt;script&gt;
 var button = document.getElementById('test');
 button.addEventListener('click', function () { alert('ONE') }, false);
 button.setAttribute('onclick', "alert('NOT CALLED')"); // event handler listener is registered here
 button.addEventListener('click', function () { alert('THREE') }, false);
 button.onclick = function () { alert('TWO'); };
 button.addEventListener('click', function () { alert('FOUR') }, false);
&lt;/script&gt;</pre>

  </div>

  

  <p class="note">The interfaces implemented by the event object do not influence whether an <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-16">event handler</a> is triggered or not.</p>

  <p><dfn id="the-event-handler-processing-algorithm">The event handler processing algorithm</dfn> for an <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-17">event
  handler</a> <var>H</var> and an <code id="event-handler-attributes:event"><a href="/breakup/specs/core-algorithms/#event">Event</a></code> object <var>E</var> is as
  follows:</p>

  <ol><li>

    <p>Let <var>callback</var> be the result of <a href="/breakup/specs/browser-dom/#getting-the-current-value-of-the-event-handler" id="event-handler-attributes:getting-the-current-value-of-the-event-handler-2">getting the current value of the
    event handler</a> <var>H</var>.</p>

   </li><li><p>If <var>callback</var> is null, then abort these steps.</p></li><li>

    <p>Process the <code id="event-handler-attributes:event-2"><a href="/breakup/specs/core-algorithms/#event">Event</a></code> object <var>E</var> as follows:</p>

    <dl class="switch"><dt>If <var>E</var> is an <code id="event-handler-attributes:errorevent"><a href="/breakup/specs/browser-dom/#errorevent">ErrorEvent</a></code> object and the <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handler-attributes:event-handler-idl-attributes-5">event handler IDL attribute</a>'s type is
     <code id="event-handler-attributes:onerroreventhandler"><a href="/breakup/specs/browser-dom/#onerroreventhandler">OnErrorEventHandler</a></code></dt><dd>

      <p><a href="/breakup/specs/browser-dom/#concept-invoke-event-handler" id="event-handler-attributes:concept-invoke-event-handler">Invoke</a> <var>callback</var> with five
      arguments, the first one having the value of <var>E</var>'s <code id="event-handler-attributes:dom-errorevent-message"><a href="/breakup/specs/browser-dom/#dom-errorevent-message">message</a></code> attribute, the second having the value of
      <var>E</var>'s <code id="event-handler-attributes:dom-errorevent-filename"><a href="/breakup/specs/browser-dom/#dom-errorevent-filename">filename</a></code> attribute, the third
      having the value of <var>E</var>'s <code id="event-handler-attributes:dom-errorevent-lineno"><a href="/breakup/specs/browser-dom/#dom-errorevent-lineno">lineno</a></code>
      attribute, the fourth having the value of <var>E</var>'s <code id="event-handler-attributes:dom-errorevent-colno"><a href="/breakup/specs/browser-dom/#dom-errorevent-colno">colno</a></code> attribute, the fifth having the value of
      <var>E</var>'s <code id="event-handler-attributes:dom-errorevent-error"><a href="/breakup/specs/browser-dom/#dom-errorevent-error">error</a></code> attribute, and with the <i id="event-handler-attributes:dfn-callback-this-value"><a href="/breakup/specs/core-algorithms/#dfn-callback-this-value">callback this value</a></i> set to <var>E</var>'s <code id="event-handler-attributes:dom-event-currenttarget"><a href="/breakup/specs/core-algorithms/#dom-event-currenttarget">currentTarget</a></code>. Let <var>return value</var> be the
      callback's return value. [[!WEBIDL]]</p>

     </dd><dt>Otherwise</dt><dd>

      <p><a href="/breakup/specs/browser-dom/#concept-invoke-event-handler" id="event-handler-attributes:concept-invoke-event-handler-2">Invoke</a> <var>callback</var>
      with one argument, the value of which is the <code id="event-handler-attributes:event-3"><a href="/breakup/specs/core-algorithms/#event">Event</a></code> object <var>E</var>,
      with the <i id="event-handler-attributes:dfn-callback-this-value-2"><a href="/breakup/specs/core-algorithms/#dfn-callback-this-value">callback this value</a></i> set to <var>E</var>'s <code id="event-handler-attributes:dom-event-currenttarget-2"><a href="/breakup/specs/core-algorithms/#dom-event-currenttarget">currentTarget</a></code>. Let <var>return value</var> be the callback's return value. [[!WEBIDL]]</p>

     </dd></dl>

    <p>In this step, <dfn id="concept-invoke-event-handler">invoke</dfn> means to <a href="http://heycam.github.io/webidl/#es-invoking-callback-functions" id="event-handler-attributes:es-invoking-callback-functions" data-x-internal="es-invoking-callback-functions">invoke the Web IDL callback function</a>.</p>

    <p>If an exception gets thrown by the callback, end these steps and allow the exception to
    propagate. (It will propagate to the <a href="/breakup/specs/core-algorithms/#concept-event-dispatch" id="event-handler-attributes:concept-event-dispatch">DOM event dispatch
    logic</a>, which will then <a href="/breakup/specs/browser-dom/#report-the-exception" id="event-handler-attributes:report-the-exception">report the exception</a>.)</p>

   </li><li>

    <p>Process <var>return value</var> as follows:</p>

    <dl class="switch"><dt>If the event type is <code id="event-handler-attributes:event-mouseover"><a href="/breakup/specs/core-algorithms/#event-mouseover">mouseover</a></code></dt><dt>If the event type is <code id="event-handler-attributes:event-error"><a href="/breakup/specs/html/#event-error">error</a></code> and <var>E</var> is an <code id="event-handler-attributes:errorevent-2"><a href="/breakup/specs/browser-dom/#errorevent">ErrorEvent</a></code> object</dt><dd><p>If <var>return value</var> is a Web IDL boolean true value, then cancel the event.</p></dd><dt>If the event type is <code id="event-handler-attributes:event-beforeunload"><a href="/breakup/specs/html/#event-beforeunload">beforeunload</a></code></dt><dd>

      <p class="note">The <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handler-attributes:event-handler-idl-attributes-6">event handler IDL
      attribute</a>'s type is <code id="event-handler-attributes:onbeforeunloadeventhandler"><a href="/breakup/specs/browser-dom/#onbeforeunloadeventhandler">OnBeforeUnloadEventHandler</a></code>, and the <var>return value</var> will therefore have been coerced into either the value null or a
      DOMString.</p>

      <p>If the <var>return value</var> is null, then cancel the event.</p>

      <p>Otherwise, If the <code id="event-handler-attributes:event-4"><a href="/breakup/specs/core-algorithms/#event">Event</a></code> object <var>E</var> is a
      <code id="event-handler-attributes:beforeunloadevent"><a href="/breakup/specs/browser-dom/#beforeunloadevent">BeforeUnloadEvent</a></code> object, and the <code id="event-handler-attributes:event-5"><a href="/breakup/specs/core-algorithms/#event">Event</a></code> object <var>E</var>'s <code id="event-handler-attributes:dom-beforeunloadevent-returnvalue"><a href="/breakup/specs/browser-dom/#dom-beforeunloadevent-returnvalue">returnValue</a></code>
      attribute's value is the empty string, then set the <code id="event-handler-attributes:dom-beforeunloadevent-returnvalue-2"><a href="/breakup/specs/browser-dom/#dom-beforeunloadevent-returnvalue">returnValue</a></code> attribute's value to <var>return value</var>.</p>

     </dd><dt>Otherwise</dt><dd><p>If <var>return value</var> is a Web IDL boolean false value, then cancel the
     event.</p></dd></dl>

   </li></ol>

  

  <hr>

  <p>The <code id="event-handler-attributes:eventhandler-2"><a href="/breakup/specs/browser-dom/#eventhandler">EventHandler</a></code> callback function type represents a callback used for event
  handlers. It is represented in Web IDL as follows:</p>

  <pre class="idl">[TreatNonObjectAsNull]
callback <dfn id="eventhandlernonnull">EventHandlerNonNull</dfn> = any (<a href="/breakup/specs/core-algorithms/#event" id="event-handler-attributes:event-6">Event</a> event);
typedef <a href="/breakup/specs/browser-dom/#eventhandlernonnull" id="event-handler-attributes:eventhandlernonnull">EventHandlerNonNull</a>? <dfn id="eventhandler">EventHandler</dfn>;</pre>

  <p class="note">In JavaScript, any <code id="event-handler-attributes:idl-function"><a href="/breakup/specs/core-algorithms/#idl-function">Function</a></code> object implements
  this interface.</p>

  <div class="example">

   <p>For example, the following document fragment:</p>

   <pre>&lt;body onload="alert(this)" onclick="alert(this)"&gt;</pre>

   <p>...leads to an alert saying "<code>[object&nbsp;Window]</code>" when the document is
   loaded, and an alert saying "<code>[object&nbsp;HTMLBodyElement]</code>" whenever the
   user clicks something in the page.</p>

  </div>

  <p class="note">The return value of the function affects whether the event is canceled or not:
  as described above, if the return value is false, the event is canceled
  (except for <code id="event-handler-attributes:event-mouseover-2"><a href="/breakup/specs/core-algorithms/#event-mouseover">mouseover</a></code> events, where the return value has to
  be true to cancel the event). With <code id="event-handler-attributes:event-beforeunload-2"><a href="/breakup/specs/html/#event-beforeunload">beforeunload</a></code> events,
  the value is instead used to determine the message to show the user.</p>

  <p>For historical reasons, the <code id="event-handler-attributes:handler-onerror"><a href="/breakup/specs/browser-dom/#handler-onerror">onerror</a></code> handler has different
  arguments:</p>

  <pre class="idl">[TreatNonObjectAsNull]
callback <dfn id="onerroreventhandlernonnull">OnErrorEventHandlerNonNull</dfn> = any ((<a href="/breakup/specs/core-algorithms/#event" id="event-handler-attributes:event-7">Event</a> or DOMString) event, optional DOMString source, optional unsigned long lineno, optional unsigned long column, optional any error);
typedef <a href="/breakup/specs/browser-dom/#onerroreventhandlernonnull" id="event-handler-attributes:onerroreventhandlernonnull">OnErrorEventHandlerNonNull</a>? <dfn id="onerroreventhandler">OnErrorEventHandler</dfn>;</pre>

  <p>Similarly, the <code id="event-handler-attributes:handler-window-onbeforeunload"><a href="/breakup/specs/browser-dom/#handler-window-onbeforeunload">onbeforeunload</a></code> handler has a
  different return value:</p>

  <pre class="idl">[TreatNonObjectAsNull]
callback <dfn id="onbeforeunloadeventhandlernonnull">OnBeforeUnloadEventHandlerNonNull</dfn> = DOMString? (<a href="/breakup/specs/core-algorithms/#event" id="event-handler-attributes:event-8">Event</a> event);
typedef <a href="/breakup/specs/browser-dom/#onbeforeunloadeventhandlernonnull" id="event-handler-attributes:onbeforeunloadeventhandlernonnull">OnBeforeUnloadEventHandlerNonNull</a>? <dfn id="onbeforeunloadeventhandler">OnBeforeUnloadEventHandler</dfn>;</pre>

  

  

  <hr>

  <p>An <dfn id="internal-raw-uncompiled-handler">internal raw uncompiled handler</dfn> is a tuple with the following information:</p>

  <ul class="brief"><li>An uncompiled script body

   </li><li>A location where the script body originated, in case an error needs to be reported

  </li></ul>

  <p>When the user agent is to <dfn id="getting-the-current-value-of-the-event-handler">get the
  current value of the event handler</dfn> <var>H</var>, it must run these steps:</p>

  <ol><li>

    <p>If <var>H</var>'s value is an <a href="/breakup/specs/browser-dom/#internal-raw-uncompiled-handler" id="event-handler-attributes:internal-raw-uncompiled-handler-3">internal raw uncompiled handler</a>, run these
    substeps:</p>

    <ol><li>

      <p>If <var>H</var> is an element's <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-18">event
      handler</a>, then let <var>element</var> be the element, and <var>document</var> be the element's <a id="event-handler-attributes:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>.</p>

      <p>Otherwise, <var>H</var> is a <code id="event-handler-attributes:window-3"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object's <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-19">event handler</a>: let <var>element</var> be null, and let <var>document</var> be the <code id="event-handler-attributes:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> most recently associated with that
      <code id="event-handler-attributes:window-4"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object.</p>

     </li><li><p>If  <var>document</var> is
     not in a <a href="/breakup/specs/browser-dom/#browsing-context" id="event-handler-attributes:browsing-context">browsing context</a>, or if <a href="/breakup/specs/browser-dom/#concept-bc-script" id="event-handler-attributes:concept-bc-script">scripting is
     enabled</a> for <var>document</var>'s <a href="/breakup/specs/browser-dom/#browsing-context" id="event-handler-attributes:browsing-context-2">browsing context</a>, then return
     null and abort the algorithm for <a href="/breakup/specs/browser-dom/#getting-the-current-value-of-the-event-handler" id="event-handler-attributes:getting-the-current-value-of-the-event-handler-3">getting the current value of the event
     handler</a>.</p></li><li><p>Let <var>body</var> be the uncompiled script body in the <a href="/breakup/specs/browser-dom/#internal-raw-uncompiled-handler" id="event-handler-attributes:internal-raw-uncompiled-handler-4">internal raw
     uncompiled handler</a>.</p></li><li><p>Let <var>location</var> be the location where the script body originated, as
     given by the <a href="/breakup/specs/browser-dom/#internal-raw-uncompiled-handler" id="event-handler-attributes:internal-raw-uncompiled-handler-5">internal raw uncompiled handler</a>.</p></li><li><p>If <var>element</var> is not null and <var>element</var> has a
     <a href="/breakup/specs/html-forms/#form-owner" id="event-handler-attributes:form-owner">form owner</a>, let <var>form owner</var> be that <a href="/breakup/specs/html-forms/#form-owner" id="event-handler-attributes:form-owner-2">form owner</a>.
     Otherwise, let <var>form owner</var> be null.</p></li><li><p>Let <var>script settings</var> be the <a href="/breakup/specs/browser-dom/#environment-settings-object" id="event-handler-attributes:environment-settings-object">environment settings object</a>
     created for the <code id="event-handler-attributes:window-5"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object with which <var>document</var> is
     currently associated.</p></li><li><p>Obtain the <a href="/breakup/specs/browser-dom/#script-execution-environment" id="event-handler-attributes:script-execution-environment">script execution environment</a> for JavaScript from <var>script settings</var>.</p></li><li>

      <p>If <var>body</var> is not parsable as <i>FunctionBody</i> or if parsing detects
      an <i>early error</i>, then follow these substeps:</p>

      <ol><li><p>Set <var>H</var>'s value to null.</p></li><li><p><a href="/breakup/specs/browser-dom/#report-the-error" id="event-handler-attributes:report-the-error">Report the error</a> for the appropriate <a href="/breakup/specs/browser-dom/#concept-script" id="event-handler-attributes:concept-script">script</a> and with the appropriate position (line number and
       column number) given by <var>location</var>, using the <a href="/breakup/specs/browser-dom/#global-object" id="event-handler-attributes:global-object">global object</a>
       specified by <var>script settings</var> as the target. If the error is still <i id="event-handler-attributes:concept-error-nothandled"><a href="/breakup/specs/browser-dom/#concept-error-nothandled">not handled</a></i> after this, then the error may be reported
       to the user.</p></li><li><p>Jump to the step labeled <i>end</i> below.</p></li></ol>

      <p class="note"><i>FunctionBody</i> is defined in ECMAScript edition 5 section 13 Function
      Definition. <i>Early error</i> is defined in ECMAScript edition 5 section 16 Errors. [[!ECMA262]]</p>

     </li><li>

      <p>If <var>body</var> begins with a Directive Prologue that contains a Use Strict
      Directive then let <var>strict</var> be true, otherwise let <var>strict</var> be false.</p> 

      <p class="note">The terms "Directive Prologue" and "Use Strict Directive" are defined in
      ECMAScript edition 5 section 14.1 Directive Prologues and the Use Strict Directive. [[!ECMA262]]</p>

     </li><li>

      <p>Using the <a href="/breakup/specs/browser-dom/#script-execution-environment" id="event-handler-attributes:script-execution-environment-2">script execution environment</a> obtained above, create a function
      object (as defined in ECMAScript edition 5 section 13.2 Creating Function Objects), with:</p>

      <dl><dt>Parameter list <var>FormalParameterList</var></dt><dd>

        <dl class="switch"><dt>If <var>H</var> is an <code id="event-handler-attributes:handler-onerror-2"><a href="/breakup/specs/browser-dom/#handler-onerror">onerror</a></code> <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-20">event handler</a> of a <code id="event-handler-attributes:window-6"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object</dt><dd>Let the function have five arguments, named <code>event</code>, <code>source</code>, <code>lineno</code>, <code>colno</code>, and
         <code>error</code>.</dd><dt>Otherwise</dt><dd>Let the function have a single argument called <code>event</code>.</dd></dl>

       </dd><dt>Function body <var>FunctionBody</var></dt><dd>The result of parsing <var>body</var> above.</dd><dt>Lexical Environment <var>Scope</var></dt><dd>

        <ol><li>

          <p>If <var>H</var> is an element's <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-21">event
          handler</a>, then let <var>Scope</var> be the result of
          NewObjectEnvironment(<var>document</var>, the <var>global
          environment</var>).</p>

          <p>Otherwise, <var>H</var> is a <code id="event-handler-attributes:window-7"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object's <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handler-attributes:event-handlers-22">event handler</a>: let <var>Scope</var> be the <var>global environment</var>.</p>

         </li><li><p>If <var>form owner</var> is not null, let <var>Scope</var> be
         the result of NewObjectEnvironment(<var>form owner</var>, <var>Scope</var>).</p></li><li><p>If <var>element</var> is not null, let <var>Scope</var> be the
         result of NewObjectEnvironment(<var>element</var>, <var>Scope</var>).</p></li></ol>

        <p class="note">NewObjectEnvironment() is defined in ECMAScript edition 5 section 10.2.2.3
        NewObjectEnvironment (O, E). [[!ECMA262]]</p>

       </dd><dt>Boolean flag <var>Strict</var></dt><dd>The value of <var>strict</var>.</dd></dl>

      <p>Let <var>function</var> be this new function.</p>

     </li><li><p>Let <var>script</var> be a new <a href="/breakup/specs/browser-dom/#concept-script" id="event-handler-attributes:concept-script-2">script</a>.</p></li><li><p>Let <var>script</var>'s <a href="/breakup/specs/browser-dom/#code-entry-point" id="event-handler-attributes:code-entry-point">code entry-point</a> be <var>function</var>.</p></li><li><p>Let <var>script</var>'s <a href="/breakup/specs/browser-dom/#settings-object" id="event-handler-attributes:settings-object">settings object</a> be <var>script
     settings</var>.</p></li><li><p>Set <var>H</var> to <var>function</var>.</p></li></ol>

   </li><li><p><i>End</i>: Return <var>H</var>'s value.</p></li></ol></section>

  



  <section><h2>Event handlers on elements, <code id="event-handlers-on-elements,-document-objects,-and-window-objects:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> objects, and <code id="event-handlers-on-elements,-document-objects,-and-window-objects:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code> objects</h2>

  <p>The following are the <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handlers">event handlers</a> (and their corresponding <a href="/breakup/specs/browser-dom/#event-handler-event-type" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-event-type">event handler event types</a>) that must be
  supported by all <a href="/breakup/specs/core-algorithms/#html-elements" id="event-handlers-on-elements,-document-objects,-and-window-objects:html-elements">HTML elements</a>, as both <a href="/breakup/specs/browser-dom/#event-handler-content-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-content-attributes">event handler content attributes</a>
  and <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-idl-attributes">event handler IDL attributes</a>; and that must be
  supported by all <code id="event-handlers-on-elements,-document-objects,-and-window-objects:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> and <code id="event-handlers-on-elements,-document-objects,-and-window-objects:window-2"><a href="/breakup/specs/browser-dom/#window">Window</a></code> objects, as <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-idl-attributes-2">event handler IDL
  attributes</a>:</p>

  <table><thead><tr><th><a href="/breakup/specs/browser-dom/#event-handlers" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handlers-2">Event handler</a> </th><th><a href="/breakup/specs/browser-dom/#event-handler-event-type" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-event-type-2">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-onabort"><code>onabort</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-abort"><a href="/breakup/specs/html/#event-abort">abort</a></code>
    </td></tr><tr><td><dfn id="handler-onautocomplete"><code>onautocomplete</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-autocomplete"><a href="/breakup/specs/html/#event-autocomplete">autocomplete</a></code> 
    </td></tr><tr><td><dfn id="handler-onautocompleteerror"><code>onautocompleteerror</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-autocompleteerror"><a href="/breakup/specs/html/#event-autocompleteerror">autocompleteerror</a></code> 
    </td></tr><tr><td><dfn id="handler-oncancel"><code>oncancel</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-cancel"><a href="/breakup/specs/html/#event-cancel">cancel</a></code>
    </td></tr><tr><td><dfn id="handler-oncanplay"><code>oncanplay</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-canplay"><a href="/breakup/specs/html-media/#event-media-canplay">canplay</a></code>
    </td></tr><tr><td><dfn id="handler-oncanplaythrough"><code>oncanplaythrough</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-canplaythrough"><a href="/breakup/specs/html-media/#event-media-canplaythrough">canplaythrough</a></code>
    </td></tr><tr><td><dfn id="handler-onchange"><code>onchange</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-change"><a href="/breakup/specs/html/#event-change">change</a></code> 
    </td></tr><tr><td><dfn id="handler-onclick"><code>onclick</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-click"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code> 
    </td></tr><tr><td><dfn id="handler-onclose"><code>onclose</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-close"><a href="/breakup/specs/html/#event-close">close</a></code> 
    </td></tr><tr><td><dfn id="handler-oncontextmenu"><code>oncontextmenu</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-contextmenu"><a href="/breakup/specs/html/#event-contextmenu">contextmenu</a></code> 
    </td></tr><tr><td><dfn id="handler-oncuechange"><code>oncuechange</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-cuechange"><a href="/breakup/specs/html-media/#event-media-cuechange">cuechange</a></code>
    </td></tr><tr><td><dfn id="handler-ondblclick"><code>ondblclick</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-dblclick"><a href="/breakup/specs/core-algorithms/#event-dblclick">dblclick</a></code> 
    </td></tr><tr><td><dfn id="handler-ondrag"><code>ondrag</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-dnd-drag"><a href="/breakup/specs/dnd/#event-dnd-drag">drag</a></code>
    </td></tr><tr><td><dfn id="handler-ondragend"><code>ondragend</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-dnd-dragend"><a href="/breakup/specs/dnd/#event-dnd-dragend">dragend</a></code>
    </td></tr><tr><td><dfn id="handler-ondragenter"><code>ondragenter</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-dnd-dragenter"><a href="/breakup/specs/dnd/#event-dnd-dragenter">dragenter</a></code>
    </td></tr><tr><td><dfn id="handler-ondragexit"><code>ondragexit</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-dnd-dragexit"><a href="/breakup/specs/dnd/#event-dnd-dragexit">dragexit</a></code>
    </td></tr><tr><td><dfn id="handler-ondragleave"><code>ondragleave</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-dnd-dragleave"><a href="/breakup/specs/dnd/#event-dnd-dragleave">dragleave</a></code>
    </td></tr><tr><td><dfn id="handler-ondragover"><code>ondragover</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-dnd-dragover"><a href="/breakup/specs/dnd/#event-dnd-dragover">dragover</a></code>
    </td></tr><tr><td><dfn id="handler-ondragstart"><code>ondragstart</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-dnd-dragstart"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code> 
    </td></tr><tr><td><dfn id="handler-ondrop"><code>ondrop</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-dnd-drop"><a href="/breakup/specs/dnd/#event-dnd-drop">drop</a></code>
    </td></tr><tr><td><dfn id="handler-ondurationchange"><code>ondurationchange</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-durationchange"><a href="/breakup/specs/html-media/#event-media-durationchange">durationchange</a></code>
    </td></tr><tr><td><dfn id="handler-onemptied"><code>onemptied</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-emptied"><a href="/breakup/specs/html-media/#event-media-emptied">emptied</a></code>
    </td></tr><tr><td><dfn id="handler-onended"><code>onended</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-ended"><a href="/breakup/specs/html-media/#event-media-ended">ended</a></code>
    </td></tr><tr><td><dfn id="handler-oninput"><code>oninput</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-input"><a href="/breakup/specs/html/#event-input">input</a></code>
    </td></tr><tr><td><dfn id="handler-oninvalid"><code>oninvalid</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-invalid"><a href="/breakup/specs/html/#event-invalid">invalid</a></code>
    </td></tr><tr><td><dfn id="handler-onkeydown"><code>onkeydown</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-keydown"><a href="/breakup/specs/core-algorithms/#event-keydown">keydown</a></code> 
    </td></tr><tr><td><dfn id="handler-onkeypress"><code>onkeypress</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-keypress"><a href="/breakup/specs/core-algorithms/#event-keypress">keypress</a></code> 
    </td></tr><tr><td><dfn id="handler-onkeyup"><code>onkeyup</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-keyup"><a href="/breakup/specs/core-algorithms/#event-keyup">keyup</a></code> 
    </td></tr><tr><td><dfn id="handler-onloadeddata"><code>onloadeddata</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-loadeddata"><a href="/breakup/specs/html-media/#event-media-loadeddata">loadeddata</a></code>
    </td></tr><tr><td><dfn id="handler-onloadedmetadata"><code>onloadedmetadata</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-loadedmetadata"><a href="/breakup/specs/html-media/#event-media-loadedmetadata">loadedmetadata</a></code>
    </td></tr><tr><td><dfn id="handler-onloadstart"><code>onloadstart</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-loadstart"><a href="/breakup/specs/html-media/#event-media-loadstart">loadstart</a></code>
    </td></tr><tr><td><dfn id="handler-onmousedown"><code>onmousedown</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-mousedown"><a href="/breakup/specs/core-algorithms/#event-mousedown">mousedown</a></code> 
    </td></tr><tr><td><dfn id="handler-onmouseenter"><code>onmouseenter</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-mouseenter"><a href="/breakup/specs/core-algorithms/#event-mouseenter">mouseenter</a></code> 
    </td></tr><tr><td><dfn id="handler-onmouseleave"><code>onmouseleave</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-mouseleave"><a href="/breakup/specs/core-algorithms/#event-mouseleave">mouseleave</a></code> 
    </td></tr><tr><td><dfn id="handler-onmousemove"><code>onmousemove</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-mousemove"><a href="/breakup/specs/core-algorithms/#event-mousemove">mousemove</a></code> 
    </td></tr><tr><td><dfn id="handler-onmouseout"><code>onmouseout</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-mouseout"><a href="/breakup/specs/core-algorithms/#event-mouseout">mouseout</a></code> 
    </td></tr><tr><td><dfn id="handler-onmouseover"><code>onmouseover</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-mouseover"><a href="/breakup/specs/core-algorithms/#event-mouseover">mouseover</a></code> 
    </td></tr><tr><td><dfn id="handler-onmouseup"><code>onmouseup</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-mouseup"><a href="/breakup/specs/core-algorithms/#event-mouseup">mouseup</a></code> 
    </td></tr><tr><td><dfn id="handler-onmousewheel"><code>onmousewheel</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-mousewheel"><a href="/breakup/specs/core-algorithms/#event-mousewheel">mousewheel</a></code> 
    </td></tr><tr><td><dfn id="handler-onpause"><code>onpause</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-pause"><a href="/breakup/specs/html-media/#event-media-pause">pause</a></code>
    </td></tr><tr><td><dfn id="handler-onplay"><code>onplay</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-play"><a href="/breakup/specs/html-media/#event-media-play">play</a></code>
    </td></tr><tr><td><dfn id="handler-onplaying"><code>onplaying</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-playing"><a href="/breakup/specs/html-media/#event-media-playing">playing</a></code>
    </td></tr><tr><td><dfn id="handler-onprogress"><code>onprogress</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-progress"><a href="/breakup/specs/html-media/#event-media-progress">progress</a></code>
    </td></tr><tr><td><dfn id="handler-onratechange"><code>onratechange</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-ratechange"><a href="/breakup/specs/html-media/#event-media-ratechange">ratechange</a></code>
    </td></tr><tr><td><dfn id="handler-onreset"><code>onreset</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-reset"><a href="/breakup/specs/html/#event-reset">reset</a></code>
    </td></tr><tr><td><dfn id="handler-onseeked"><code>onseeked</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-seeked"><a href="/breakup/specs/html-media/#event-media-seeked">seeked</a></code>
    </td></tr><tr><td><dfn id="handler-onseeking"><code>onseeking</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-seeking"><a href="/breakup/specs/html-media/#event-media-seeking">seeking</a></code>
    </td></tr><tr><td><dfn id="handler-onselect"><code>onselect</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-select"><a href="/breakup/specs/html/#event-select">select</a></code>  
    </td></tr><tr><td><dfn id="handler-onshow"><code>onshow</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-show"><a href="/breakup/specs/html/#event-show">show</a></code>
    </td></tr><tr><td><dfn id="handler-onsort"><code>onsort</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-sort"><a href="/breakup/specs/html/#event-sort">sort</a></code>
    </td></tr><tr><td><dfn id="handler-onstalled"><code>onstalled</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-stalled"><a href="/breakup/specs/html-media/#event-media-stalled">stalled</a></code>
    </td></tr><tr><td><dfn id="handler-onsubmit"><code>onsubmit</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-submit"><a href="/breakup/specs/html/#event-submit">submit</a></code> 
    </td></tr><tr><td><dfn id="handler-onsuspend"><code>onsuspend</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-suspend"><a href="/breakup/specs/html-media/#event-media-suspend">suspend</a></code>
    </td></tr><tr><td><dfn id="handler-ontimeupdate"><code>ontimeupdate</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-timeupdate"><a href="/breakup/specs/html-media/#event-media-timeupdate">timeupdate</a></code>
    </td></tr><tr><td><dfn id="handler-ontoggle"><code>ontoggle</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-toggle"><a href="/breakup/specs/html/#event-toggle">toggle</a></code>
    </td></tr><tr><td><dfn id="handler-onvolumechange"><code>onvolumechange</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-volumechange"><a href="/breakup/specs/html-media/#event-media-volumechange">volumechange</a></code>
    </td></tr><tr><td><dfn id="handler-onwaiting"><code>onwaiting</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-media-waiting"><a href="/breakup/specs/html-media/#event-media-waiting">waiting</a></code>


 
 
 

 
  </td></tr></tbody></table>

  <hr>

  <p>The following are the <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handlers-3">event handlers</a> (and their corresponding <a href="/breakup/specs/browser-dom/#event-handler-event-type" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-event-type-3">event handler event types</a>) that must be
  supported by all <a href="/breakup/specs/core-algorithms/#html-elements" id="event-handlers-on-elements,-document-objects,-and-window-objects:html-elements-2">HTML elements</a> other than <code id="event-handlers-on-elements,-document-objects,-and-window-objects:the-body-element"><a href="/breakup/specs/html-structure/#the-body-element">body</a></code> and <code id="event-handlers-on-elements,-document-objects,-and-window-objects:frameset"><a href="/breakup/specs/html-obsolete/#frameset">frameset</a></code>
  elements, as both <a href="/breakup/specs/browser-dom/#event-handler-content-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-content-attributes-2">event handler content attributes</a> and <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-idl-attributes-3">event handler IDL
  attributes</a>; that must be supported by all <code id="event-handlers-on-elements,-document-objects,-and-window-objects:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code>
  objects, as <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-idl-attributes-4">event handler IDL attributes</a>; and that must be
  supported by all <code id="event-handlers-on-elements,-document-objects,-and-window-objects:window-3"><a href="/breakup/specs/browser-dom/#window">Window</a></code> objects, as <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-idl-attributes-5">event handler IDL attributes</a> on the
  <code id="event-handlers-on-elements,-document-objects,-and-window-objects:window-4"><a href="/breakup/specs/browser-dom/#window">Window</a></code> objects themselves, and with corresponding <a href="/breakup/specs/browser-dom/#event-handler-content-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-content-attributes-3">event handler content
  attributes</a> and <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-idl-attributes-6">event handler IDL attributes</a> exposed on all <code id="event-handlers-on-elements,-document-objects,-and-window-objects:the-body-element-2"><a href="/breakup/specs/html-structure/#the-body-element">body</a></code>
  and <code id="event-handlers-on-elements,-document-objects,-and-window-objects:frameset-2"><a href="/breakup/specs/html-obsolete/#frameset">frameset</a></code> elements that are owned by <a href="/breakup/specs/browser-dom/#concept-document-window" id="event-handlers-on-elements,-document-objects,-and-window-objects:concept-document-window">that
  <code>Window</code> object's <code>Document</code>s</a>:</p>

  <table><thead><tr><th><a href="/breakup/specs/browser-dom/#event-handlers" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handlers-4">Event handler</a> </th><th><a href="/breakup/specs/browser-dom/#event-handler-event-type" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-event-type-4">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-onblur"><code>onblur</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-blur"><a href="/breakup/specs/html/#event-blur">blur</a></code> 
    </td></tr><tr><td><dfn id="handler-onerror"><code>onerror</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-error"><a href="/breakup/specs/html/#event-error">error</a></code>
    </td></tr><tr><td><dfn id="handler-onfocus"><code>onfocus</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-focus"><a href="/breakup/specs/html/#event-focus">focus</a></code> 
    </td></tr><tr><td><dfn id="handler-onload"><code>onload</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-load"><a href="/breakup/specs/html/#event-load">load</a></code>
    </td></tr><tr><td><dfn id="handler-onresize"><code>onresize</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-resize"><a href="/breakup/specs/core-algorithms/#event-resize">resize</a></code>
    </td></tr><tr><td><dfn id="handler-onscroll"><code>onscroll</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-scroll"><a href="/breakup/specs/core-algorithms/#event-scroll">scroll</a></code>
  </td></tr></tbody></table>

  <hr>

  <p>The following are the <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handlers-5">event handlers</a> (and their corresponding <a href="/breakup/specs/browser-dom/#event-handler-event-type" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-event-type-5">event handler event types</a>) that must be
  supported by <code id="event-handlers-on-elements,-document-objects,-and-window-objects:window-5"><a href="/breakup/specs/browser-dom/#window">Window</a></code> objects, as <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-idl-attributes-7">event handler IDL attributes</a> on the
  <code id="event-handlers-on-elements,-document-objects,-and-window-objects:window-6"><a href="/breakup/specs/browser-dom/#window">Window</a></code> objects themselves, and with corresponding <a href="/breakup/specs/browser-dom/#event-handler-content-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-content-attributes-4">event handler content
  attributes</a> and <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-idl-attributes-8">event handler IDL attributes</a> exposed on all <code id="event-handlers-on-elements,-document-objects,-and-window-objects:the-body-element-3"><a href="/breakup/specs/html-structure/#the-body-element">body</a></code>
  and <code id="event-handlers-on-elements,-document-objects,-and-window-objects:frameset-3"><a href="/breakup/specs/html-obsolete/#frameset">frameset</a></code> elements that are owned by <a href="/breakup/specs/browser-dom/#concept-document-window" id="event-handlers-on-elements,-document-objects,-and-window-objects:concept-document-window-2">that
  <code>Window</code> object's <code>Document</code>s</a>:</p>

  <table><thead><tr><th><a href="/breakup/specs/browser-dom/#event-handlers" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handlers-6">Event handler</a> </th><th><a href="/breakup/specs/browser-dom/#event-handler-event-type" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-event-type-6">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-window-onafterprint"><code>onafterprint</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-afterprint"><a href="/breakup/specs/html/#event-afterprint">afterprint</a></code>
    </td></tr><tr><td><dfn id="handler-window-onbeforeprint"><code>onbeforeprint</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-beforeprint"><a href="/breakup/specs/html/#event-beforeprint">beforeprint</a></code>
    </td></tr><tr><td><dfn id="handler-window-onbeforeunload"><code>onbeforeunload</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-beforeunload"><a href="/breakup/specs/html/#event-beforeunload">beforeunload</a></code>
    </td></tr><tr><td><dfn id="handler-window-onhashchange"><code>onhashchange</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-hashchange"><a href="/breakup/specs/html/#event-hashchange">hashchange</a></code> 
    </td></tr><tr><td><dfn id="handler-window-onlanguagechange"><code>onlanguagechange</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-languagechange"><a href="/breakup/specs/html/#event-languagechange">languagechange</a></code> 
    </td></tr><tr><td><dfn id="handler-window-onmessage"><code>onmessage</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-message"><a href="/breakup/specs/html/#event-message">message</a></code> 
    </td></tr><tr><td><dfn id="handler-window-onoffline"><code>onoffline</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-offline"><a href="/breakup/specs/html/#event-offline">offline</a></code> 
    </td></tr><tr><td><dfn id="handler-window-ononline"><code>ononline</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-online"><a href="/breakup/specs/html/#event-online">online</a></code> 
    </td></tr><tr><td><dfn id="handler-window-onpagehide"><code>onpagehide</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-pagehide"><a href="/breakup/specs/html/#event-pagehide">pagehide</a></code> 
    </td></tr><tr><td><dfn id="handler-window-onpageshow"><code>onpageshow</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-pageshow"><a href="/breakup/specs/html/#event-pageshow">pageshow</a></code> 
    </td></tr><tr><td><dfn id="handler-window-onpopstate"><code>onpopstate</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-popstate"><a href="/breakup/specs/html/#event-popstate">popstate</a></code> 
    </td></tr><tr><td><dfn id="handler-window-onstorage"><code>onstorage</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-storage"><a href="/breakup/specs/html/#event-storage">storage</a></code> 
    </td></tr><tr><td><dfn id="handler-window-onunload"><code>onunload</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-unload"><a href="/breakup/specs/html/#event-unload">unload</a></code> 
  </td></tr></tbody></table>

  <hr>

  

  <p>The following are the <a href="/breakup/specs/browser-dom/#event-handlers" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handlers-7">event handlers</a> (and their corresponding <a href="/breakup/specs/browser-dom/#event-handler-event-type" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-event-type-7">event handler event types</a>) that must be
  supported on <code id="event-handlers-on-elements,-document-objects,-and-window-objects:document-4"><a href="/breakup/specs/browser-dom/#document">Document</a></code> objects as <a href="/breakup/specs/browser-dom/#event-handler-idl-attributes" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-idl-attributes-9">event handler IDL attributes</a>:</p>

  <table><thead><tr><th><a href="/breakup/specs/browser-dom/#event-handlers" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handlers-8">Event handler</a> </th><th><a href="/breakup/specs/browser-dom/#event-handler-event-type" id="event-handlers-on-elements,-document-objects,-and-window-objects:event-handler-event-type-8">Event handler event type</a>
   </th></tr></thead><tbody><tr><td><dfn id="handler-onreadystatechange"><code>onreadystatechange</code></dfn> </td><td> <code id="event-handlers-on-elements,-document-objects,-and-window-objects:event-readystatechange"><a href="/breakup/specs/html/#event-readystatechange">readystatechange</a></code>
  </td></tr></tbody></table>


  <section><h2>IDL definitions</h2>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="globaleventhandlers">GlobalEventHandlers</dfn> {
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onabort" id="idl-definitions:handler-onabort">onabort</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-2">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onautocomplete" id="idl-definitions:handler-onautocomplete">onautocomplete</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-3">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onautocompleteerror" id="idl-definitions:handler-onautocompleteerror">onautocompleteerror</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-4">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onblur" id="idl-definitions:handler-onblur">onblur</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-5">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-oncancel" id="idl-definitions:handler-oncancel">oncancel</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-6">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-oncanplay" id="idl-definitions:handler-oncanplay">oncanplay</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-7">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-oncanplaythrough" id="idl-definitions:handler-oncanplaythrough">oncanplaythrough</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-8">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onchange" id="idl-definitions:handler-onchange">onchange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-9">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onclick" id="idl-definitions:handler-onclick">onclick</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-10">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onclose" id="idl-definitions:handler-onclose">onclose</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-11">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-oncontextmenu" id="idl-definitions:handler-oncontextmenu">oncontextmenu</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-12">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-oncuechange" id="idl-definitions:handler-oncuechange">oncuechange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-13">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ondblclick" id="idl-definitions:handler-ondblclick">ondblclick</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-14">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ondrag" id="idl-definitions:handler-ondrag">ondrag</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-15">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ondragend" id="idl-definitions:handler-ondragend">ondragend</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-16">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ondragenter" id="idl-definitions:handler-ondragenter">ondragenter</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-17">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ondragexit" id="idl-definitions:handler-ondragexit">ondragexit</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-18">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ondragleave" id="idl-definitions:handler-ondragleave">ondragleave</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-19">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ondragover" id="idl-definitions:handler-ondragover">ondragover</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-20">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ondragstart" id="idl-definitions:handler-ondragstart">ondragstart</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-21">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ondrop" id="idl-definitions:handler-ondrop">ondrop</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-22">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ondurationchange" id="idl-definitions:handler-ondurationchange">ondurationchange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-23">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onemptied" id="idl-definitions:handler-onemptied">onemptied</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-24">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onended" id="idl-definitions:handler-onended">onended</a>;
  attribute <a href="/breakup/specs/browser-dom/#onerroreventhandler" id="idl-definitions:onerroreventhandler">OnErrorEventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onerror" id="idl-definitions:handler-onerror">onerror</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-25">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onfocus" id="idl-definitions:handler-onfocus">onfocus</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-26">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-oninput" id="idl-definitions:handler-oninput">oninput</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-27">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-oninvalid" id="idl-definitions:handler-oninvalid">oninvalid</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-28">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onkeydown" id="idl-definitions:handler-onkeydown">onkeydown</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-29">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onkeypress" id="idl-definitions:handler-onkeypress">onkeypress</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-30">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onkeyup" id="idl-definitions:handler-onkeyup">onkeyup</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-31">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onload" id="idl-definitions:handler-onload">onload</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-32">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onloadeddata" id="idl-definitions:handler-onloadeddata">onloadeddata</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-33">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onloadedmetadata" id="idl-definitions:handler-onloadedmetadata">onloadedmetadata</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-34">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onloadstart" id="idl-definitions:handler-onloadstart">onloadstart</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-35">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onmousedown" id="idl-definitions:handler-onmousedown">onmousedown</a>;
  [LenientThis] attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-36">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onmouseenter" id="idl-definitions:handler-onmouseenter">onmouseenter</a>;
  [LenientThis] attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-37">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onmouseleave" id="idl-definitions:handler-onmouseleave">onmouseleave</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-38">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onmousemove" id="idl-definitions:handler-onmousemove">onmousemove</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-39">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onmouseout" id="idl-definitions:handler-onmouseout">onmouseout</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-40">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onmouseover" id="idl-definitions:handler-onmouseover">onmouseover</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-41">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onmouseup" id="idl-definitions:handler-onmouseup">onmouseup</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-42">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onmousewheel" id="idl-definitions:handler-onmousewheel">onmousewheel</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-43">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onpause" id="idl-definitions:handler-onpause">onpause</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-44">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onplay" id="idl-definitions:handler-onplay">onplay</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-45">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onplaying" id="idl-definitions:handler-onplaying">onplaying</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-46">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onprogress" id="idl-definitions:handler-onprogress">onprogress</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-47">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onratechange" id="idl-definitions:handler-onratechange">onratechange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-48">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onreset" id="idl-definitions:handler-onreset">onreset</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-49">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onresize" id="idl-definitions:handler-onresize">onresize</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-50">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onscroll" id="idl-definitions:handler-onscroll">onscroll</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-51">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onseeked" id="idl-definitions:handler-onseeked">onseeked</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-52">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onseeking" id="idl-definitions:handler-onseeking">onseeking</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-53">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onselect" id="idl-definitions:handler-onselect">onselect</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-54">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onshow" id="idl-definitions:handler-onshow">onshow</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-55">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onsort" id="idl-definitions:handler-onsort">onsort</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-56">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onstalled" id="idl-definitions:handler-onstalled">onstalled</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-57">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onsubmit" id="idl-definitions:handler-onsubmit">onsubmit</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-58">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onsuspend" id="idl-definitions:handler-onsuspend">onsuspend</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-59">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ontimeupdate" id="idl-definitions:handler-ontimeupdate">ontimeupdate</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-60">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-ontoggle" id="idl-definitions:handler-ontoggle">ontoggle</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-61">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onvolumechange" id="idl-definitions:handler-onvolumechange">onvolumechange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-62">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-onwaiting" id="idl-definitions:handler-onwaiting">onwaiting</a>;
};

[NoInterfaceObject]
interface <dfn id="windoweventhandlers">WindowEventHandlers</dfn> {
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-63">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onafterprint" id="idl-definitions:handler-window-onafterprint">onafterprint</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-64">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onbeforeprint" id="idl-definitions:handler-window-onbeforeprint">onbeforeprint</a>;
  attribute <a href="/breakup/specs/browser-dom/#onbeforeunloadeventhandler" id="idl-definitions:onbeforeunloadeventhandler">OnBeforeUnloadEventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onbeforeunload" id="idl-definitions:handler-window-onbeforeunload">onbeforeunload</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-65">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onhashchange" id="idl-definitions:handler-window-onhashchange">onhashchange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-66">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onlanguagechange" id="idl-definitions:handler-window-onlanguagechange">onlanguagechange</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-67">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onmessage" id="idl-definitions:handler-window-onmessage">onmessage</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-68">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onoffline" id="idl-definitions:handler-window-onoffline">onoffline</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-69">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-ononline" id="idl-definitions:handler-window-ononline">ononline</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-70">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onpagehide" id="idl-definitions:handler-window-onpagehide">onpagehide</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-71">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onpageshow" id="idl-definitions:handler-window-onpageshow">onpageshow</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-72">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onpopstate" id="idl-definitions:handler-window-onpopstate">onpopstate</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-73">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onstorage" id="idl-definitions:handler-window-onstorage">onstorage</a>;
  attribute <a href="/breakup/specs/browser-dom/#eventhandler" id="idl-definitions:eventhandler-74">EventHandler</a> <a href="/breakup/specs/browser-dom/#handler-window-onunload" id="idl-definitions:handler-window-onunload">onunload</a>;
};</pre></section></section>



  

  <section><h2>Event firing</h2>

  <p>Certain operations and methods are defined as firing events on elements. For example, the <code id="event-firing:dom-click"><a href="/breakup/specs/html-ui/#dom-click">click()</a></code> method on the <code id="event-firing:htmlelement"><a href="/breakup/specs/html-scripting/#htmlelement">HTMLElement</a></code> interface is defined as
  firing a <code id="event-firing:event-click"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code> event on the element. [[!DOMEVENTS]]</p>

  <p><dfn id="fire-a-simple-event">Firing a simple event named <var>e</var></dfn>
  means that a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="event-firing:concept-events-trusted">trusted</a> event with the name <var>e</var>, which does not bubble (except where otherwise stated) and is not cancelable
  (except where otherwise stated), and which uses the <code id="event-firing:event"><a href="/breakup/specs/core-algorithms/#event">Event</a></code> interface, must be created
  and <a href="/breakup/specs/core-algorithms/#concept-event-dispatch" id="event-firing:concept-event-dispatch">dispatched</a> at the given target.</p>

  <p><dfn id="fire-a-synthetic-mouse-event">Firing a synthetic mouse event named <var>e</var></dfn> means that an event with the name <var>e</var>, which is <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="event-firing:concept-events-trusted-2">trusted</a> (except where otherwise stated), does not bubble
  (except where otherwise stated), is not cancelable (except where otherwise stated), and which uses
  the <code id="event-firing:mouseevent"><a href="/breakup/specs/core-algorithms/#mouseevent">MouseEvent</a></code> interface, must be created and dispatched at the given target. The
  event object must have its <code>screenX</code>, <code>screenY</code>, <code>clientX</code>, <code>clientY</code>, and <code>button</code>
  attributes initialised to 0, its <code>ctrlKey</code>, <code>shiftKey</code>,
  <code>altKey</code>, and <code>metaKey</code> attributes initialised according
  to the current state of the key input device, if any (false for any keys that are not available),
  its <code>detail</code> attribute initialised to 1, its <code id="event-firing:dom-mouseevent-relatedtarget"><a href="/breakup/specs/core-algorithms/#dom-mouseevent-relatedtarget">relatedTarget</a></code> attribute initialised to null (except
  where otherwise stated), and its <code id="event-firing:dom-uievent-view"><a href="/breakup/specs/core-algorithms/#dom-uievent-view">view</a></code> attribute initialised to the <code id="event-firing:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object of the <code id="event-firing:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object of the given target node, if any, or else null. The <code>getModifierState()</code> method on the object must
  return values appropriately describing the state of the key input device at the time the event is
  created.</p>

  <p><dfn id="fire-a-click-event">Firing a <code>click</code> event</dfn>
  means <a href="/breakup/specs/browser-dom/#fire-a-synthetic-mouse-event" id="event-firing:fire-a-synthetic-mouse-event">firing a synthetic mouse event named <code>click</code></a>, which bubbles and is cancelable.</p>

  <p>The default action of these events is to do nothing except where otherwise stated.</p></section>

  


  

  <section><h2>Events and the <code id="events-and-the-window-object:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object</h2>

  <p>When an event is dispatched at a DOM node in a <code id="events-and-the-window-object:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> in a <a href="/breakup/specs/browser-dom/#browsing-context" id="events-and-the-window-object:browsing-context">browsing
  context</a>, if the event is not a <code id="events-and-the-window-object:event-load"><a href="/breakup/specs/html/#event-load">load</a></code> event, the user agent
  must act as if, for the purposes of <a href="/breakup/specs/core-algorithms/#concept-event-dispatch" id="events-and-the-window-object:concept-event-dispatch">event dispatching</a>,
  the <code id="events-and-the-window-object:window-2"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object is the parent of the <code id="events-and-the-window-object:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object. [[!DOM]]</p></section></section></section><section><h2>Elements in the DOM</h2>

  <p>The nodes representing <a href="/breakup/specs/core-algorithms/#html-elements" id="elements-in-the-dom:html-elements">HTML elements</a> in the DOM must
  implement, and expose to scripts, the interfaces listed for them in the relevant sections of this
  specification. This includes <a href="/breakup/specs/core-algorithms/#html-elements" id="elements-in-the-dom:html-elements-2">HTML elements</a> in <a href="/breakup/specs/core-algorithms/#xml-documents" id="elements-in-the-dom:xml-documents">XML documents</a>, even when
  those documents are in another context (e.g. inside an XSLT transform).</p>

  <p>Elements in the DOM <dfn id="represents">represent</dfn> things; that is, they have
  intrinsic <em>meaning</em>, also known as semantics.</p>

  <p class="example">For example, an <code id="elements-in-the-dom:the-ol-element"><a href="/breakup/specs/html-tables/#the-ol-element">ol</a></code> element represents an ordered list.</p>

  <p>The basic interface, from which all the <a href="/breakup/specs/core-algorithms/#html-elements" id="elements-in-the-dom:html-elements-3">HTML elements</a>' interfaces inherit, and which must be used by elements that have no additional requirements, is
  the <code id="elements-in-the-dom:htmlelement"><a href="/breakup/specs/html-scripting/#htmlelement">HTMLElement</a></code> interface.</p>

  <pre class="idl">interface <dfn id="htmlelement">HTMLElement</dfn> : <a href="/breakup/specs/core-algorithms/#element" id="elements-in-the-dom:element">Element</a> {
  // metadata attributes
  attribute DOMString <a href="/breakup/specs/html-attributes/#dom-title" id="elements-in-the-dom:dom-title">title</a>;
  attribute DOMString <a href="/breakup/specs/html-attributes/#dom-lang" id="elements-in-the-dom:dom-lang">lang</a>;
  attribute boolean <a href="/breakup/specs/html-attributes/#dom-translate" id="elements-in-the-dom:dom-translate">translate</a>;
  attribute DOMString <a href="/breakup/specs/html-attributes/#dom-dir" id="elements-in-the-dom:dom-dir">dir</a>;
  [SameObject] readonly attribute <a href="/breakup/specs/core-algorithms/#domstringmap" id="elements-in-the-dom:domstringmap">DOMStringMap</a> <a href="/breakup/specs/html-attributes/#dom-dataset" id="elements-in-the-dom:dom-dataset">dataset</a>;

  // <a href="http://www.w3.org/TR/microdata/#microdata" id="elements-in-the-dom:microdata">microdata</a>
  attribute boolean <a href="http://www.w3.org/TR/microdata/#dom-itemscope" id="elements-in-the-dom:dom-itemscope">itemScope</a>;
  [PutForwards=<a href="/breakup/specs/core-algorithms/#dom-domsettabletokenlist-value" id="elements-in-the-dom:dom-domsettabletokenlist-value">value</a>] readonly attribute <a href="/breakup/specs/core-algorithms/#domsettabletokenlist" id="elements-in-the-dom:domsettabletokenlist">DOMSettableTokenList</a> <a href="http://www.w3.org/TR/microdata/#dom-itemtype" id="elements-in-the-dom:dom-itemtype">itemType</a>;
  attribute DOMString <a href="http://www.w3.org/TR/microdata/#dom-itemid" id="elements-in-the-dom:dom-itemid">itemId</a>;
  [PutForwards=<a href="/breakup/specs/core-algorithms/#dom-domsettabletokenlist-value" id="elements-in-the-dom:dom-domsettabletokenlist-value-2">value</a>] readonly attribute <a href="/breakup/specs/core-algorithms/#domsettabletokenlist" id="elements-in-the-dom:domsettabletokenlist-2">DOMSettableTokenList</a> <a href="http://www.w3.org/TR/microdata/#dom-itemref" id="elements-in-the-dom:dom-itemref">itemRef</a>;
  [PutForwards=<a href="/breakup/specs/core-algorithms/#dom-domsettabletokenlist-value" id="elements-in-the-dom:dom-domsettabletokenlist-value-3">value</a>] readonly attribute <a href="/breakup/specs/core-algorithms/#domsettabletokenlist" id="elements-in-the-dom:domsettabletokenlist-3">DOMSettableTokenList</a> <a href="http://www.w3.org/TR/microdata/#dom-itemprop" id="elements-in-the-dom:dom-itemprop">itemProp</a>;
  readonly attribute <a href="/breakup/specs/core-algorithms/#htmlpropertiescollection" id="elements-in-the-dom:htmlpropertiescollection">HTMLPropertiesCollection</a> <a href="http://www.w3.org/TR/microdata/#dom-properties" id="elements-in-the-dom:dom-properties">properties</a>;
  attribute any <a href="http://www.w3.org/TR/microdata/#dom-itemvalue" id="elements-in-the-dom:dom-itemvalue">itemValue</a>; // acts as DOMString on setting

  // <a href="#editing" id="elements-in-the-dom:editing">user interaction</a>
  attribute boolean <a href="/breakup/specs/html-ui/#dom-hidden" id="elements-in-the-dom:dom-hidden">hidden</a>;
  void <a href="/breakup/specs/html-ui/#dom-click" id="elements-in-the-dom:dom-click">click</a>();
  attribute long <a href="/breakup/specs/html-ui/#dom-tabindex" id="elements-in-the-dom:dom-tabindex">tabIndex</a>;
  void <a href="/breakup/specs/html-ui/#dom-focus" id="elements-in-the-dom:dom-focus">focus</a>();
  void <a href="/breakup/specs/html-ui/#dom-blur" id="elements-in-the-dom:dom-blur">blur</a>();
  attribute DOMString <a href="/breakup/specs/html-ui/#dom-accesskey" id="elements-in-the-dom:dom-accesskey">accessKey</a>;
  readonly attribute DOMString <a href="/breakup/specs/html-ui/#dom-accesskeylabel" id="elements-in-the-dom:dom-accesskeylabel">accessKeyLabel</a>;
  attribute boolean <a href="/breakup/specs/dnd/#dom-draggable" id="elements-in-the-dom:dom-draggable">draggable</a>;
  [PutForwards=<a href="/breakup/specs/core-algorithms/#dom-domsettabletokenlist-value" id="elements-in-the-dom:dom-domsettabletokenlist-value-4">value</a>] readonly attribute <a href="/breakup/specs/core-algorithms/#domsettabletokenlist" id="elements-in-the-dom:domsettabletokenlist-4">DOMSettableTokenList</a> <a href="/breakup/specs/dnd/#dom-dropzone" id="elements-in-the-dom:dom-dropzone">dropzone</a>;
  attribute <a href="/breakup/specs/html-ui/#htmlmenuelement" id="elements-in-the-dom:htmlmenuelement">HTMLMenuElement</a>? <a href="/breakup/specs/html-ui/#dom-contextmenu" id="elements-in-the-dom:dom-contextmenu">contextMenu</a>;
  attribute boolean <a href="/breakup/specs/html-editing/#dom-spellcheck" id="elements-in-the-dom:dom-spellcheck">spellcheck</a>;
  void <a href="/breakup/specs/html-editing/#dom-forcespellcheck" id="elements-in-the-dom:dom-forcespellcheck">forceSpellCheck</a>();

  // <a href="/breakup/specs/html-ui/#command-api" id="elements-in-the-dom:command-api">command API</a>
  readonly attribute DOMString? <a href="/breakup/specs/html-ui/#dom-command-ro-commandtype" id="elements-in-the-dom:dom-command-ro-commandtype">commandType</a>;
  readonly attribute DOMString? <a href="/breakup/specs/html-ui/#dom-command-ro-commandlabel" id="elements-in-the-dom:dom-command-ro-commandlabel">commandLabel</a>;
  readonly attribute DOMString? <a href="/breakup/specs/html-ui/#dom-command-ro-commandicon" id="elements-in-the-dom:dom-command-ro-commandicon">commandIcon</a>;
  readonly attribute boolean? <a href="/breakup/specs/html-ui/#dom-command-ro-commandhidden" id="elements-in-the-dom:dom-command-ro-commandhidden">commandHidden</a>;
  readonly attribute boolean? <a href="/breakup/specs/html-ui/#dom-command-ro-commanddisabled" id="elements-in-the-dom:dom-command-ro-commanddisabled">commandDisabled</a>;
  readonly attribute boolean? <a href="/breakup/specs/html-ui/#dom-command-ro-commandchecked" id="elements-in-the-dom:dom-command-ro-commandchecked">commandChecked</a>;
};
<a href="/breakup/specs/html-scripting/#htmlelement" id="elements-in-the-dom:htmlelement-2">HTMLElement</a> implements <a href="/breakup/specs/browser-dom/#globaleventhandlers" id="elements-in-the-dom:globaleventhandlers">GlobalEventHandlers</a>;
<a href="/breakup/specs/html-scripting/#htmlelement" id="elements-in-the-dom:htmlelement-3">HTMLElement</a> implements <span>ElementContentEditable</span>;

interface <dfn id="htmlunknownelement">HTMLUnknownElement</dfn> : <a href="/breakup/specs/html-scripting/#htmlelement" id="elements-in-the-dom:htmlelement-4">HTMLElement</a> { };</pre>

  <p>The <code id="elements-in-the-dom:htmlelement-5"><a href="/breakup/specs/html-scripting/#htmlelement">HTMLElement</a></code> interface holds methods and attributes related to a number of
  disparate features, and the members of this interface are therefore described in various different
  sections of this specification.</p>

  

  <p>The <code id="elements-in-the-dom:htmlunknownelement"><a href="/breakup/specs/html-scripting/#htmlunknownelement">HTMLUnknownElement</a></code> interface must be used for <a href="/breakup/specs/core-algorithms/#html-elements" id="elements-in-the-dom:html-elements-4">HTML elements</a> that
  are not defined by this specification (or <a href="/breakup/specs/core-algorithms/#other-applicable-specifications" id="elements-in-the-dom:other-applicable-specifications">other applicable specifications</a>).</p></section><section><h2>The <dfn id="script"><code>script</code></dfn> element</h2>

  <dl class="element"><dt><a href="/breakup/specs/html/#concept-element-categories" id="the-script-element:concept-element-categories">Categories</a>:</dt><dd><a href="/breakup/specs/html/#metadata-content-2" id="the-script-element:metadata-content-2">Metadata content</a>.</dd><dd><a href="/breakup/specs/html/#flow-content-2" id="the-script-element:flow-content-2">Flow content</a>.</dd><dd><a href="/breakup/specs/html/#phrasing-content-2" id="the-script-element:phrasing-content-2">Phrasing content</a>.</dd><dd><a href="/breakup/specs/html/#script-supporting-elements-2" id="the-script-element:script-supporting-elements-2">Script-supporting element</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-contexts" id="the-script-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>Where <a href="/breakup/specs/html/#metadata-content-2" id="the-script-element:metadata-content-2-2">metadata content</a> is expected.</dd><dd>Where <a href="/breakup/specs/html/#phrasing-content-2" id="the-script-element:phrasing-content-2-2">phrasing content</a> is expected.</dd><dd>Where <a href="/breakup/specs/html/#script-supporting-elements-2" id="the-script-element:script-supporting-elements-2-2">script-supporting elements</a> are expected.</dd><dt><a href="/breakup/specs/html/#concept-element-content-model" id="the-script-element:concept-element-content-model">Content model</a>:</dt><dd>If there is no <code id="the-script-element:attr-script-src"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code>
   attribute, depends on the value of the <code id="the-script-element:attr-script-type"><a href="/breakup/specs/html-scripting/#attr-script-type">type</a></code> attribute, but must match
   <a href="/breakup/specs/html-scripting/#restrictions-for-contents-of-script-elements" id="the-script-element:restrictions-for-contents-of-script-elements">script content restrictions</a>.</dd><dd>If there <em>is</em> a <code id="the-script-element:attr-script-src-2"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code>
   attribute, the element must be either empty or contain only
   <a href="/breakup/specs/html-scripting/#inline-documentation-for-external-scripts" id="the-script-element:inline-documentation-for-external-scripts">script documentation</a> that also matches <a href="/breakup/specs/html-scripting/#restrictions-for-contents-of-script-elements" id="the-script-element:restrictions-for-contents-of-script-elements-2">script
   content restrictions</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-tag-omission" id="the-script-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>Neither tag is omissible.</dd><dt><a href="/breakup/specs/html/#concept-element-attributes" id="the-script-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-script-element:global-attributes">Global attributes</a></dd><dd><code id="the-script-element:attr-script-src-3"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> — Address of the resource</dd><dd><code id="the-script-element:attr-script-type-2"><a href="/breakup/specs/html-scripting/#attr-script-type">type</a></code> — Type of embedded resource</dd><dd><code id="the-script-element:attr-script-charset"><a href="/breakup/specs/html-scripting/#attr-script-charset">charset</a></code> — Character encoding of the external script resource</dd><dd><code id="the-script-element:attr-script-async"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code> — Execute script when available, without blocking</dd><dd><code id="the-script-element:attr-script-defer"><a href="/breakup/specs/html-scripting/#attr-script-defer">defer</a></code> — Defer script execution</dd><dd><code id="the-script-element:attr-script-crossorigin"><a href="/breakup/specs/html-scripting/#attr-script-crossorigin">crossorigin</a></code> — How the element handles crossorigin requests</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#aria-role-attribute">ARIA role attribute</a> values:</dt><dd>None</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-global">Global aria-* attributes</a></dd><dt><a href="/breakup/specs/html/#concept-element-dom" id="the-script-element:concept-element-dom">DOM interface</a>:</dt><dd>
<pre class="idl">interface <dfn id="htmlscriptelement">HTMLScriptElement</dfn> : <a href="/breakup/specs/html-scripting/#htmlelement" id="the-script-element:htmlelement">HTMLElement</a> {
  attribute DOMString <a href="/breakup/specs/html-scripting/#dom-script-src" id="the-script-element:dom-script-src">src</a>;
  attribute DOMString <a href="/breakup/specs/html-scripting/#dom-script-type" id="the-script-element:dom-script-type">type</a>;
  attribute DOMString <a href="/breakup/specs/html-scripting/#dom-script-charset" id="the-script-element:dom-script-charset">charset</a>;
  attribute boolean <a href="/breakup/specs/html-scripting/#dom-script-async" id="the-script-element:dom-script-async">async</a>;
  attribute boolean <a href="/breakup/specs/html-scripting/#dom-script-defer" id="the-script-element:dom-script-defer">defer</a>;
  attribute DOMString? <a href="/breakup/specs/html-scripting/#dom-script-crossorigin" id="the-script-element:dom-script-crossorigin">crossOrigin</a>;
  attribute DOMString <a href="/breakup/specs/html-scripting/#dom-script-text" id="the-script-element:dom-script-text">text</a>;

  // <a href="/breakup/specs/html-obsolete/#HTMLScriptElement-partial">also has obsolete members</a>
};</pre>
   </dd></dl>

  <p>The <code id="the-script-element:the-script-element"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element allows authors to include dynamic script and data blocks in
  their documents. The element does not <a href="/breakup/specs/html-scripting/#represents" id="the-script-element:represents">represent</a> content for the
  user.</p>

  <p>When used to include dynamic scripts, the scripts may either be embedded inline or may be
  imported from an external file using the <code id="the-script-element:attr-script-src-4"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute. If
  the language is not that described by "<code>text/javascript</code>", then the <code id="the-script-element:attr-script-type-3"><a href="/breakup/specs/html-scripting/#attr-script-type">type</a></code> attribute must be present, as described below. Whatever
  language is used, the contents of the <code id="the-script-element:the-script-element-2"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element must conform with the
  requirements of that language's specification.</p>

  <p>When used to include data blocks (as opposed to scripts), the data must be embedded inline, the
  format of the data must be given using the <code id="the-script-element:attr-script-type-4"><a href="/breakup/specs/html-scripting/#attr-script-type">type</a></code> attribute,
  the <code id="the-script-element:attr-script-src-5"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute must not be specified, and the contents of
  the <code id="the-script-element:the-script-element-3"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element must conform to the requirements defined for the format used.</p>

  <p>The <dfn id="attr-script-type"><code>type</code></dfn> attribute gives the language of the
  script or format of the data. If the attribute is present, its value must be a <a href="/breakup/specs/core-algorithms/#valid-mime-type" id="the-script-element:valid-mime-type">valid MIME
  type</a>. The <code>charset</code> parameter must not be specified. The default, which
  is used if the attribute is absent, is "<code>text/javascript</code>".</p>

  <p>The <dfn id="attr-script-src"><code>src</code></dfn> attribute, if specified, gives the
  address of the external script resource to use. The value of the attribute must be a <a href="/breakup/specs/core-algorithms/#valid-non-empty-url-potentially-surrounded-by-spaces" id="the-script-element:valid-non-empty-url-potentially-surrounded-by-spaces">valid
  non-empty URL potentially surrounded by spaces</a> identifying a script resource of the type
  given by the <code id="the-script-element:attr-script-type-5"><a href="/breakup/specs/html-scripting/#attr-script-type">type</a></code> attribute, if the attribute is present, or
  of the type "<code>text/javascript</code>", if the attribute is absent. A resource is a
  script resource of a given type if that type identifies a scripting language and the resource
  conforms with the requirements of that language's specification.</p>

  <p>The <dfn id="attr-script-charset"><code>charset</code></dfn> attribute gives the character
  encoding of the external script resource. The attribute must not be specified if the <code id="the-script-element:attr-script-src-6"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute is not present. If the attribute is set, its value
  must be an <a href="/breakup/specs/core-algorithms/#ascii-case-insensitive" id="the-script-element:ascii-case-insensitive">ASCII case-insensitive</a> match for one of the <a href="/breakup/specs/core-algorithms/#encoding-label" id="the-script-element:encoding-label">labels</a> of an <a href="/breakup/specs/core-algorithms/#encoding" id="the-script-element:encoding">encoding</a>, and must specify the same <a href="/breakup/specs/core-algorithms/#encoding" id="the-script-element:encoding-2">encoding</a> as
  the <code>charset</code> parameter of the <a href="/breakup/specs/core-algorithms/#content-type" id="the-script-element:content-type">Content-Type
  metadata</a> of the external file, if any. [[!ENCODING]]</p>

  <p>The <dfn id="attr-script-async"><code>async</code></dfn> and <dfn id="attr-script-defer"><code>defer</code></dfn> attributes are <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="the-script-element:boolean-attribute">boolean attributes</a> that indicate how the script should be executed. The <code id="the-script-element:attr-script-defer-2"><a href="/breakup/specs/html-scripting/#attr-script-defer">defer</a></code> and <code id="the-script-element:attr-script-async-2"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code> attributes
  must not be specified if the <code id="the-script-element:attr-script-src-7"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute is not
  present.</p>

  <p>There are three possible modes that can be selected using these attributes. If the <code id="the-script-element:attr-script-async-3"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code> attribute is present, then the script will be executed
  as soon as it is available, but without blocking further parsing of the page. If the <code id="the-script-element:attr-script-async-4"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code>
  attribute is not present but the <code id="the-script-element:attr-script-defer-3"><a href="/breakup/specs/html-scripting/#attr-script-defer">defer</a></code> attribute is
  present, then the script is executed when the page has finished parsing. If neither attribute is
  present, then the script is fetched and executed immediately, before the user agent continues
  parsing the page.</p>

  <p class="note">The exact processing details for these attributes are, for mostly historical
  reasons, somewhat non-trivial, involving a number of aspects of HTML. The implementation
  requirements are therefore by necessity scattered throughout the specification. The algorithms
  below (in this section) describe the core of this processing, but these algorithms reference and
  are referenced by the parsing rules for <code id="the-script-element:the-script-element-4"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> <a href="/breakup/specs/html-syntax/#scriptTag">start</a> and <a href="/breakup/specs/html-syntax/#scriptEndTag">end</a> tags in HTML, <a href="/breakup/specs/html-syntax/#scriptForeignEndTag">in foreign content</a>,
  and <a href="/breakup/specs/xhtml-syntax/#scriptTagXML">in XML</a>, the rules for the <code id="the-script-element:dom-document-write"><a href="/breakup/specs/browser-dom/#dom-document-write">document.write()</a></code> method, the handling of <a href="/breakup/specs/browser-dom/#scripting">scripting</a>, etc.</p>

  <p>The <code id="the-script-element:attr-script-defer-4"><a href="/breakup/specs/html-scripting/#attr-script-defer">defer</a></code> attribute may be specified even if the <code id="the-script-element:attr-script-async-5"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code> attribute is specified, to cause legacy Web browsers that
  only support <code id="the-script-element:attr-script-defer-5"><a href="/breakup/specs/html-scripting/#attr-script-defer">defer</a></code> (and not <code id="the-script-element:attr-script-async-6"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code>) to fall back to the <code id="the-script-element:attr-script-defer-6"><a href="/breakup/specs/html-scripting/#attr-script-defer">defer</a></code> behaviour instead of the blocking behaviour that
  is the default.</p>

  <p>The <dfn id="attr-script-crossorigin"><code>crossorigin</code></dfn> attribute is a
  <a href="/breakup/specs/core-algorithms/#cors-settings-attribute" id="the-script-element:cors-settings-attribute">CORS settings attribute</a>. It controls, for scripts that are obtained from other <a href="/breakup/specs/browser-dom/#origin-2" id="the-script-element:origin-2">origins</a>, whether error information will be exposed.</p>

  <p>Changing the <code id="the-script-element:attr-script-src-8"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code>, <code id="the-script-element:attr-script-type-6"><a href="/breakup/specs/html-scripting/#attr-script-type">type</a></code>, <code id="the-script-element:attr-script-charset-2"><a href="/breakup/specs/html-scripting/#attr-script-charset">charset</a></code>, <code id="the-script-element:attr-script-async-7"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code>, <code id="the-script-element:attr-script-defer-7"><a href="/breakup/specs/html-scripting/#attr-script-defer">defer</a></code>, and <code id="the-script-element:attr-script-crossorigin-2"><a href="/breakup/specs/html-scripting/#attr-script-crossorigin">crossorigin</a></code> attributes dynamically has no direct effect;
  these attribute are only used at specific times described below.</p> 

  

  <p>A <code id="the-script-element:the-script-element-5"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element has several associated pieces of state.</p>

  <p>The first is a flag indicating whether or not the script block has been <dfn id="already-started">"already
  started"</dfn>. Initially, <code id="the-script-element:the-script-element-6"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements must have this flag unset (script blocks,
  when created, are not "already started"). The <a href="/breakup/specs/core-algorithms/#concept-node-clone-ext" id="the-script-element:concept-node-clone-ext">cloning
  steps</a> for <code id="the-script-element:the-script-element-7"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements must set the "already started" flag on the copy if
  it is set on the element being cloned.</p>

  <p>The second is a flag indicating whether the element was <dfn id="parser-inserted">"parser-inserted"</dfn>.
  Initially, <code id="the-script-element:the-script-element-8"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements must have this flag unset. It is set by the <a href="/breakup/specs/html-syntax/#html-parser" id="the-script-element:html-parser">HTML
  parser</a> and the <a href="/breakup/specs/xhtml-syntax/#xml-parser" id="the-script-element:xml-parser">XML parser</a> on <code id="the-script-element:the-script-element-9"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements they insert and
  affects the processing of those elements.</p>

  <p>The third is a flag indicating whether the element will <dfn id="non-blocking">"non-blocking"</dfn>. Initially,
  <code id="the-script-element:the-script-element-10"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements must have this flag set. It is unset by the <a href="/breakup/specs/html-syntax/#html-parser" id="the-script-element:html-parser-2">HTML parser</a>
  and the <a href="/breakup/specs/xhtml-syntax/#xml-parser" id="the-script-element:xml-parser-2">XML parser</a> on <code id="the-script-element:the-script-element-11"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements they insert. In addition, whenever
  a <code id="the-script-element:the-script-element-12"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element whose <a href="/breakup/specs/html-scripting/#non-blocking" id="the-script-element:non-blocking">"non-blocking"</a> flag is set has a <code id="the-script-element:attr-script-async-8"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code> content attribute added, the element's
  <a href="/breakup/specs/html-scripting/#non-blocking" id="the-script-element:non-blocking-2">"non-blocking"</a> flag must be unset.</p> 

  <p>The fourth is a flag indicating whether or not the script block is <dfn id="ready-to-be-parser-executed">"ready to be
  parser-executed"</dfn>. Initially, <code id="the-script-element:the-script-element-13"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements must have this flag unset (script
  blocks, when created, are not "ready to be parser-executed"). This flag is used only for elements
  that are also <a href="/breakup/specs/html-scripting/#parser-inserted" id="the-script-element:parser-inserted">"parser-inserted"</a>, to let the parser know when to execute the
  script.</p>

  <p>The last few pieces of state are <dfn id="concept-script-type"><var>the script block's
  type</var></dfn>, <dfn id="concept-script-encoding"><var>the script block's character
  encoding</var></dfn>, and <dfn id="concept-script-fallback-encoding"><var>the script block's
  fallback character encoding</var></dfn>. They are determined when the script is prepared, based on
  the attributes on the element at that time, and the
  <code id="the-script-element:the-script-element-14"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element's <a id="the-script-element:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>.</p>

  <p>When a <code id="the-script-element:the-script-element-15"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element that is not marked as being <a href="/breakup/specs/html-scripting/#parser-inserted" id="the-script-element:parser-inserted-2">"parser-inserted"</a>
  experiences one of the events listed in the following list, the user agent must <a href="/breakup/specs/core-algorithms/#immediately" id="the-script-element:immediately">immediately</a>
  <a href="/breakup/specs/html-scripting/#prepare-a-script" id="the-script-element:prepare-a-script">prepare</a> the <code id="the-script-element:the-script-element-16"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element:</p>

  <ul><li>The <code id="the-script-element:the-script-element-17"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element gets <a href="/breakup/specs/core-algorithms/#insert-an-element-into-a-document" id="the-script-element:insert-an-element-into-a-document">inserted
   into a document</a>, at the time the <a href="/breakup/specs/core-algorithms/#nodes-are-inserted" id="the-script-element:nodes-are-inserted">node is inserted</a>
   according to the DOM, after any other <code id="the-script-element:the-script-element-18"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements inserted at the same time that
   are earlier in the <code id="the-script-element:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> in <a href="/breakup/specs/core-algorithms/#tree-order" id="the-script-element:tree-order">tree order</a>.</li><li>The <code id="the-script-element:the-script-element-19"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element is <a href="/breakup/specs/core-algorithms/#in-a-document" id="the-script-element:in-a-document">in a <code>Document</code></a> and a node or
   document fragment is <a href="/breakup/specs/core-algorithms/#nodes-are-inserted" id="the-script-element:nodes-are-inserted-2">inserted</a> into the
   <code id="the-script-element:the-script-element-20"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element, after any <code id="the-script-element:the-script-element-21"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements <a href="/breakup/specs/core-algorithms/#nodes-are-inserted" id="the-script-element:nodes-are-inserted-3">inserted</a> at that time.</li><li>The <code id="the-script-element:the-script-element-22"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element is <a href="/breakup/specs/core-algorithms/#in-a-document" id="the-script-element:in-a-document-2">in a <code>Document</code></a> and has a <code id="the-script-element:attr-script-src-9"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute set where previously the element had no such
   attribute.</li></ul>

  <p>To <dfn id="prepare-a-script">prepare a script</dfn>, the user agent must act as
  follows:</p>

  <ol><li>

    <p>If the <code id="the-script-element:the-script-element-23"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element is marked as having <a href="/breakup/specs/html-scripting/#already-started" id="the-script-element:already-started">"already started"</a>, then
    the user agent must abort these steps at this point. The script is not executed.</p>

   </li><li>

    <p>If the element has its <a href="/breakup/specs/html-scripting/#parser-inserted" id="the-script-element:parser-inserted-3">"parser-inserted"</a> flag set, then set <var>was-parser-inserted</var> to true and unset the element's
    <a href="/breakup/specs/html-scripting/#parser-inserted" id="the-script-element:parser-inserted-4">"parser-inserted"</a> flag. Otherwise, set <var>was-parser-inserted</var> to
    false.</p>

    <p class="note">This is done so that if parser-inserted <code id="the-script-element:the-script-element-24"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements fail to run
    when the parser tries to run them, e.g. because they are empty or specify an unsupported
    scripting language, another script can later mutate them and cause them to run again.</p>

    

   </li><li>

    <p>If <var>was-parser-inserted</var> is true and the element does not have an <code id="the-script-element:attr-script-async-9"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code> attribute, then set the element's
    <a href="/breakup/specs/html-scripting/#non-blocking" id="the-script-element:non-blocking-3">"non-blocking"</a> flag to true.</p>

    <p class="note">This is done so that if a parser-inserted <code id="the-script-element:the-script-element-25"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element fails to
    run when the parser tries to run it, but it is later executed after a script dynamically updates
    it, it will execute in a non-blocking fashion even if the <code id="the-script-element:attr-script-async-10"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code>
    attribute isn't set.</p>

   </li><li id="script-processing-empty">

    <p>If the element has no <code id="the-script-element:attr-script-src-10"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute, and its child
    nodes, if any, consist only of comment nodes and empty <code id="the-script-element:text"><a href="/breakup/specs/core-algorithms/#text">Text</a></code> nodes, then the user
    agent must abort these steps at this point. The script is not executed.</p>

   </li><li>

    <p>If the element is not <a href="/breakup/specs/core-algorithms/#in-a-document" id="the-script-element:in-a-document-3">in a <code>Document</code></a>, then the user agent must abort
    these steps at this point. The script is not executed.</p>

   </li><li id="script-processing-prepare">

    <p>If either:</p>

    <ul class="brief"><li>the <code id="the-script-element:the-script-element-26"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element has a <code id="the-script-element:attr-script-type-7"><a href="/breakup/specs/html-scripting/#attr-script-type">type</a></code> attribute
     and its value is the empty string, or</li><li>the <code id="the-script-element:the-script-element-27"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element has no <code id="the-script-element:attr-script-type-8"><a href="/breakup/specs/html-scripting/#attr-script-type">type</a></code> attribute
     but it has a <code id="the-script-element:attr-script-language"><a href="/breakup/specs/html-obsolete/#attr-script-language">language</a></code> attribute and <em>that</em>
     attribute's value is the empty string, or</li><li>the <code id="the-script-element:the-script-element-28"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element has neither a <code id="the-script-element:attr-script-type-9"><a href="/breakup/specs/html-scripting/#attr-script-type">type</a></code>
     attribute nor a <code id="the-script-element:attr-script-language-2"><a href="/breakup/specs/html-obsolete/#attr-script-language">language</a></code> attribute, then</li></ul>

    <p>...let <var id="the-script-element:concept-script-type"><a href="/breakup/specs/html-scripting/#concept-script-type">the script block's type</a></var> for this
    <code id="the-script-element:the-script-element-29"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element be "<code>text/javascript</code>".</p>

    <p>Otherwise, if the <code id="the-script-element:the-script-element-30"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element has a <code id="the-script-element:attr-script-type-10"><a href="/breakup/specs/html-scripting/#attr-script-type">type</a></code> attribute, let <var id="the-script-element:concept-script-type-2"><a href="/breakup/specs/html-scripting/#concept-script-type">the
    script block's type</a></var> for this <code id="the-script-element:the-script-element-31"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element be the value of that attribute
    with any leading or trailing sequences of <a href="/breakup/specs/core-algorithms/#space-character" id="the-script-element:space-character">space characters</a>
    removed.</p> 

    <p>Otherwise, the element has a non-empty <code id="the-script-element:attr-script-language-3"><a href="/breakup/specs/html-obsolete/#attr-script-language">language</a></code>
    attribute; let <var id="the-script-element:concept-script-type-3"><a href="/breakup/specs/html-scripting/#concept-script-type">the script block's type</a></var> for this
    <code id="the-script-element:the-script-element-32"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element be the concatenation of the string "<code>text/</code>"
    followed by the value of the <code id="the-script-element:attr-script-language-4"><a href="/breakup/specs/html-obsolete/#attr-script-language">language</a></code> attribute.</p>
    

    <p class="note">The <code id="the-script-element:attr-script-language-5"><a href="/breakup/specs/html-obsolete/#attr-script-language">language</a></code> attribute is never
    conforming, and is always ignored if there is a <code id="the-script-element:attr-script-type-11"><a href="/breakup/specs/html-scripting/#attr-script-type">type</a></code>
    attribute present.</p>

   </li><li>

    <p>If the user agent does not <a href="/breakup/specs/html-scripting/#support-the-scripting-language" id="the-script-element:support-the-scripting-language">support the scripting language</a> given by <var id="the-script-element:concept-script-type-4"><a href="/breakup/specs/html-scripting/#concept-script-type">the script block's type</a></var> for this <code id="the-script-element:the-script-element-33"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element,
    then the user agent must abort these steps at this point. The script is not executed.</p>

   </li><li>

    <p>If <var>was-parser-inserted</var> is true, then flag the element as
    <a href="/breakup/specs/html-scripting/#parser-inserted" id="the-script-element:parser-inserted-5">"parser-inserted"</a> again, and set the element's <a href="/breakup/specs/html-scripting/#non-blocking" id="the-script-element:non-blocking-4">"non-blocking"</a> flag to
    false.</p>

   </li><li id="script-processing-start">

    <p>The user agent must set the element's <a href="/breakup/specs/html-scripting/#already-started" id="the-script-element:already-started-2">"already started"</a> flag.</p>

    <p class="note">The state of the element at this moment <a href="/breakup/specs/html-scripting/#establish-script-block-source">is later used</a> to determine the script source.</p>

   </li><li>

    <p>If the element is flagged as <a href="/breakup/specs/html-scripting/#parser-inserted" id="the-script-element:parser-inserted-6">"parser-inserted"</a>, but the element's
    <a id="the-script-element:node-document-2" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> is not the <code id="the-script-element:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> of the parser that created the element,
    then abort these steps.</p>

   </li><li id="script-processing-noscript">

    <p>If <a href="/breakup/specs/browser-dom/#concept-n-noscript" id="the-script-element:concept-n-noscript">scripting is disabled</a> for the <code id="the-script-element:the-script-element-34"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code>
    element, then the user agent must abort these steps at this point. The script is not
    executed.</p>

    <p class="note">The definition of <a href="/breakup/specs/browser-dom/#concept-n-noscript" id="the-script-element:concept-n-noscript-2">scripting is disabled</a>
    means that, amongst others, the following scripts will not execute: scripts in
    <code id="the-script-element:xmlhttprequest"><a href="/breakup/specs/core-algorithms/#xmlhttprequest">XMLHttpRequest</a></code>'s <code id="the-script-element:dom-xmlhttprequest-responsexml"><a href="/breakup/specs/core-algorithms/#dom-xmlhttprequest-responsexml">responseXML</a></code>
    documents, scripts in <code id="the-script-element:domparser"><a data-x-internal="domparser" href="https://dvcs.w3.org/hg/innerhtml/raw-file/tip/index.html#the-domparser-interface">DOMParser</a></code>-created documents, scripts in documents created by
    <code id="the-script-element:xsltprocessor"><a href="/breakup/specs/core-algorithms/#xsltprocessor">XSLTProcessor</a></code>'s <code id="the-script-element:dom-xsltprocessor-transformtodocument"><a href="/breakup/specs/core-algorithms/#dom-xsltprocessor-transformtodocument">transformToDocument</a></code> feature, and scripts
    that are first inserted by a script into a <code id="the-script-element:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code> that was created using the
    <code id="the-script-element:dom-domimplementation-createdocument"><a href="/breakup/specs/core-algorithms/#dom-domimplementation-createdocument">createDocument()</a></code> API. [[!XHR]]
    [[!DOMPARSING]]  [[!DOM]]</p>


   </li><li id="script-processing-for">

    <p>If the <code id="the-script-element:the-script-element-35"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element has an <code id="the-script-element:attr-script-event"><a href="/breakup/specs/html-obsolete/#attr-script-event">event</a></code>
    attribute and a <code id="the-script-element:attr-script-for"><a href="/breakup/specs/html-obsolete/#attr-script-for">for</a></code> attribute, then run these substeps:</p>

    <ol><li><p>Let <var>for</var> be the value of the <code id="the-script-element:attr-script-for-2"><a href="/breakup/specs/html-obsolete/#attr-script-for">for</a></code>
     attribute.</p></li><li><p>Let <var>event</var> be the value of the <code id="the-script-element:attr-script-event-2"><a href="/breakup/specs/html-obsolete/#attr-script-event">event</a></code> attribute.</p></li><li><p><a href="/breakup/specs/core-algorithms/#strip-leading-and-trailing-whitespace" id="the-script-element:strip-leading-and-trailing-whitespace">Strip leading and trailing whitespace</a> from <var>event</var> and
     <var>for</var>.</p></li><li><p>If <var>for</var> is not an <a href="/breakup/specs/core-algorithms/#ascii-case-insensitive" id="the-script-element:ascii-case-insensitive-2">ASCII case-insensitive</a> match for the
     string "<code>window</code>", then the user agent must abort these steps at this
     point. The script is not executed.</p></li><li><p>If <var>event</var> is not an <a href="/breakup/specs/core-algorithms/#ascii-case-insensitive" id="the-script-element:ascii-case-insensitive-3">ASCII case-insensitive</a> match for
     either the string "<code>onload</code>" or the string "<code>onload()</code>", then the user agent must abort these steps at this point. The script
     is not executed.</p></li></ol>

   </li><li id="script-processing-encoding">

    <p>If the <code id="the-script-element:the-script-element-36"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element has a <code id="the-script-element:attr-script-charset-3"><a href="/breakup/specs/html-scripting/#attr-script-charset">charset</a></code>
    attribute, then let <var id="the-script-element:concept-script-encoding"><a href="/breakup/specs/html-scripting/#concept-script-encoding">the script block's character
    encoding</a></var> for this <code id="the-script-element:the-script-element-37"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element be the result of <a id="the-script-element:getting-an-encoding" href="https://encoding.spec.whatwg.org/#concept-encoding-get" data-x-internal="getting-an-encoding">getting an
    encoding</a> from the value of the <code id="the-script-element:attr-script-charset-4"><a href="/breakup/specs/html-scripting/#attr-script-charset">charset</a></code>
    attribute.</p>

    <p>Otherwise, let <var id="the-script-element:concept-script-fallback-encoding"><a href="/breakup/specs/html-scripting/#concept-script-fallback-encoding">the script block's fallback
    character encoding</a></var> for this <code id="the-script-element:the-script-element-38"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element be the same as <a href="/breakup/specs/core-algorithms/#document's-character-encoding" id="the-script-element:document's-character-encoding">the encoding of the document itself</a>.</p>

    <p class="note">Only one of these two pieces of state is set.</p>

   </li><li id="script-processing-src-prepare">

    <p>If the element has a <code id="the-script-element:attr-script-src-11"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> content attribute, run these
    substeps:</p>

    <ol><li><p>Let <var>src</var> be the value of the element's <code id="the-script-element:attr-script-src-12"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute.</p></li><li><p>If <var>src</var> is the empty string, <a href="/breakup/specs/browser-dom/#queue-a-task" id="the-script-element:queue-a-task">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="the-script-element:fire-a-simple-event">fire
     a simple event</a> named <code id="the-script-element:event-error"><a href="/breakup/specs/html/#event-error">error</a></code> at the element, and abort
     these steps.</p></li><li><p><a href="/breakup/specs/core-algorithms/#resolve-a-url" id="the-script-element:resolve-a-url">Resolve</a> <var>src</var> relative to the
     element.</p></li><li><p>If the previous step failed, <a href="/breakup/specs/browser-dom/#queue-a-task" id="the-script-element:queue-a-task-2">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="the-script-element:fire-a-simple-event-2">fire a simple
     event</a> named <code id="the-script-element:event-error-2"><a href="/breakup/specs/html/#event-error">error</a></code> at the element, and abort these
     steps.</p></li><li>

      <p>Do a <a href="/breakup/specs/core-algorithms/#potentially-cors-enabled-fetch" id="the-script-element:potentially-cors-enabled-fetch">potentially CORS-enabled fetch</a> of the resulting
      <a href="/breakup/specs/core-algorithms/#absolute-url" id="the-script-element:absolute-url">absolute URL</a>, with the <i>mode</i> being the current state of the element's <code id="the-script-element:attr-script-crossorigin-3"><a href="/breakup/specs/html-scripting/#attr-script-crossorigin">crossorigin</a></code> content attribute, the <i>origin</i> being
      the <a href="/breakup/specs/browser-dom/#origin-2" id="the-script-element:origin-2-2">origin</a> of the <code id="the-script-element:the-script-element-39"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element's <a id="the-script-element:node-document-3" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>, and the
      <i>default origin behaviour</i> set to <i>taint</i>.</p>

      <p>The resource obtained in this fashion can be either <a href="/breakup/specs/core-algorithms/#cors-same-origin" id="the-script-element:cors-same-origin">CORS-same-origin</a> or
      <a href="/breakup/specs/core-algorithms/#cors-cross-origin" id="the-script-element:cors-cross-origin">CORS-cross-origin</a>. This only affects how error reporting happens.</p>

      <p>For performance reasons, user agents may start fetching the script (as defined above) as
      soon as the <code id="the-script-element:attr-script-src-13"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute is set, instead, in the hope
      that the element will be inserted into the document (and that the <code id="the-script-element:attr-script-crossorigin-4"><a href="/breakup/specs/html-scripting/#attr-script-crossorigin">crossorigin</a></code> attribute won't change value in the
      meantime). Either way, once the element is <a href="/breakup/specs/core-algorithms/#insert-an-element-into-a-document" id="the-script-element:insert-an-element-into-a-document-2">inserted into the document</a>, the load must have started as described in this
      step. If the UA performs such prefetching, but the element is never inserted in the document,
      or the <code id="the-script-element:attr-script-src-14"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute is dynamically changed, or the <code id="the-script-element:attr-script-crossorigin-5"><a href="/breakup/specs/html-scripting/#attr-script-crossorigin">crossorigin</a></code> attribute is dynamically changed, then the
      user agent will not execute the script so obtained, and the fetching process will have been
      effectively wasted.</p>

     </li></ol>

   </li><li>

    <p>Then, the first of the following options that describes the situation must be followed:</p>

    <dl class="switch"><dt id="script-processing-defer">If the element has a <code id="the-script-element:attr-script-src-15"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code>
     attribute, and the element has a <code id="the-script-element:attr-script-defer-8"><a href="/breakup/specs/html-scripting/#attr-script-defer">defer</a></code> attribute, and
     the element has been flagged as <a href="/breakup/specs/html-scripting/#parser-inserted" id="the-script-element:parser-inserted-7">"parser-inserted"</a>, and the element does not have
     an <code id="the-script-element:attr-script-async-11"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code> attribute</dt><dd>

      <p>The element must be added to the end of the <dfn id="list-of-scripts-that-will-execute-when-the-document-has-finished-parsing">list of scripts that will execute when the
      document has finished parsing</dfn> associated with the <code id="the-script-element:document-4"><a href="/breakup/specs/browser-dom/#document">Document</a></code> of the parser
      that created the element.</p>

      <p>The <a href="/breakup/specs/browser-dom/#concept-task" id="the-script-element:concept-task">task</a> that the <a href="/breakup/specs/browser-dom/#networking-task-source" id="the-script-element:networking-task-source">networking task source</a>
      places on the <a href="/breakup/specs/browser-dom/#task-queue" id="the-script-element:task-queue">task queue</a> once the <a href="/breakup/specs/core-algorithms/#fetch" id="the-script-element:fetch">fetching algorithm</a>
      has completed must set the element's <a href="/breakup/specs/html-scripting/#ready-to-be-parser-executed" id="the-script-element:ready-to-be-parser-executed">"ready to be parser-executed"</a> flag. The
      parser will handle executing the script.</p>

     </dd><dt id="script-processing-parser-inserted">If the element has a <code id="the-script-element:attr-script-src-16"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute, and the element has been flagged as
     <a href="/breakup/specs/html-scripting/#parser-inserted" id="the-script-element:parser-inserted-8">"parser-inserted"</a>, and the element does not have an <code id="the-script-element:attr-script-async-12"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code> attribute</dt><dd>

      <p>The element is the <a href="/breakup/specs/html-scripting/#pending-parsing-blocking-script" id="the-script-element:pending-parsing-blocking-script">pending parsing-blocking script</a> of the
      <code id="the-script-element:document-5"><a href="/breakup/specs/browser-dom/#document">Document</a></code> of the parser that created the element. (There can only be one such
      script per <code id="the-script-element:document-6"><a href="/breakup/specs/browser-dom/#document">Document</a></code> at a time.)</p>

      <p>The <a href="/breakup/specs/browser-dom/#concept-task" id="the-script-element:concept-task-2">task</a> that the <a href="/breakup/specs/browser-dom/#networking-task-source" id="the-script-element:networking-task-source-2">networking task source</a>
      places on the <a href="/breakup/specs/browser-dom/#task-queue" id="the-script-element:task-queue-2">task queue</a> once the <a href="/breakup/specs/core-algorithms/#fetch" id="the-script-element:fetch-2">fetching algorithm</a>
      has completed must set the element's <a href="/breakup/specs/html-scripting/#ready-to-be-parser-executed" id="the-script-element:ready-to-be-parser-executed-2">"ready to be parser-executed"</a> flag. The
      parser will handle executing the script.</p>

     </dd><dt id="script-processing-style-delayed">If the element does not have a <code id="the-script-element:attr-script-src-17"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute, and the element has been flagged as
     <a href="/breakup/specs/html-scripting/#parser-inserted" id="the-script-element:parser-inserted-9">"parser-inserted"</a>, and either the parser that created the <code id="the-script-element:the-script-element-40"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> is
     an <a href="/breakup/specs/xhtml-syntax/#xml-parser" id="the-script-element:xml-parser-3">XML parser</a> or it's an <a href="/breakup/specs/html-syntax/#html-parser" id="the-script-element:html-parser-3">HTML parser</a> whose <a href="/breakup/specs/html-syntax/#script-nesting-level" id="the-script-element:script-nesting-level">script nesting
     level</a> is not greater than one, and the <code id="the-script-element:document-7"><a href="/breakup/specs/browser-dom/#document">Document</a></code> of the <a href="/breakup/specs/html-syntax/#html-parser" id="the-script-element:html-parser-4">HTML
     parser</a> or <a href="/breakup/specs/xhtml-syntax/#xml-parser" id="the-script-element:xml-parser-4">XML parser</a> that created the <code id="the-script-element:the-script-element-41"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element <a href="/breakup/specs/html-styling/#has-a-style-sheet-that-is-blocking-scripts" id="the-script-element:has-a-style-sheet-that-is-blocking-scripts">has
     a style sheet that is blocking scripts</a></dt><dd>

      <p>The element is the <a href="/breakup/specs/html-scripting/#pending-parsing-blocking-script" id="the-script-element:pending-parsing-blocking-script-2">pending parsing-blocking script</a> of the
      <code id="the-script-element:document-8"><a href="/breakup/specs/browser-dom/#document">Document</a></code> of the parser that created the element. (There can only be one such
      script per <code id="the-script-element:document-9"><a href="/breakup/specs/browser-dom/#document">Document</a></code> at a time.)</p>

      <p>Set the element's <a href="/breakup/specs/html-scripting/#ready-to-be-parser-executed" id="the-script-element:ready-to-be-parser-executed-3">"ready to be parser-executed"</a> flag. The parser will handle
      executing the script.</p>

     </dd><dt id="script-processing-src-sync">If the element has a <code id="the-script-element:attr-script-src-18"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute, does not have an <code id="the-script-element:attr-script-async-13"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code> attribute, and does not have the
     <a href="/breakup/specs/html-scripting/#non-blocking" id="the-script-element:non-blocking-5">"non-blocking"</a> flag set</dt><dd>

      <p>The element must be added to the end of the <dfn id="list-of-scripts-that-will-execute-in-order-as-soon-as-possible">list of scripts that will execute in order
      as soon as possible</dfn> associated with the <a id="the-script-element:node-document-4" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> of the <code id="the-script-element:the-script-element-42"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code>
      element at the time the <a href="/breakup/specs/html-scripting/#prepare-a-script" id="the-script-element:prepare-a-script-2">prepare a script</a> algorithm started.</p>

      <p>The <a href="/breakup/specs/browser-dom/#concept-task" id="the-script-element:concept-task-3">task</a> that the <a href="/breakup/specs/browser-dom/#networking-task-source" id="the-script-element:networking-task-source-3">networking task source</a>
      places on the <a href="/breakup/specs/browser-dom/#task-queue" id="the-script-element:task-queue-3">task queue</a> once the <a href="/breakup/specs/core-algorithms/#fetch" id="the-script-element:fetch-3">fetching algorithm</a>
      has completed must run the following steps:</p>

      <ol><li><p>If the element is not now the first element in the <a href="/breakup/specs/html-scripting/#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="the-script-element:list-of-scripts-that-will-execute-in-order-as-soon-as-possible">list of scripts that will
       execute in order as soon as possible</a> to which it was added above, then mark the
       element as ready but abort these steps without executing the script yet.</p></li><li><p><i>Execution</i>: <a href="/breakup/specs/html-scripting/#execute-the-script-block" id="the-script-element:execute-the-script-block">Execute the script block</a> corresponding to the first
       script element in this <a href="/breakup/specs/html-scripting/#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="the-script-element:list-of-scripts-that-will-execute-in-order-as-soon-as-possible-2">list of scripts that will execute in order as soon as
       possible</a>.</p></li><li><p>Remove the first element from this <a href="/breakup/specs/html-scripting/#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="the-script-element:list-of-scripts-that-will-execute-in-order-as-soon-as-possible-3">list of scripts that will execute in order as
       soon as possible</a>.</p></li><li><p>If this <a href="/breakup/specs/html-scripting/#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="the-script-element:list-of-scripts-that-will-execute-in-order-as-soon-as-possible-4">list of scripts that will execute in order as soon as possible</a> is
       still not empty and the first entry has already been marked as ready, then jump back to the
       step labeled <i>execution</i>.</p></li></ol>

     </dd><dt id="script-processing-src">If the element has a <code id="the-script-element:attr-script-src-19"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code>
     attribute</dt><dd>

      <p>The element must be added to the <dfn id="set-of-scripts-that-will-execute-as-soon-as-possible">set of scripts that will execute as soon as
      possible</dfn> of the <a id="the-script-element:node-document-5" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> of the <code id="the-script-element:the-script-element-43"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element at the time the
      <a href="/breakup/specs/html-scripting/#prepare-a-script" id="the-script-element:prepare-a-script-3">prepare a script</a> algorithm started.</p>

      <p>The <a href="/breakup/specs/browser-dom/#concept-task" id="the-script-element:concept-task-4">task</a> that the <a href="/breakup/specs/browser-dom/#networking-task-source" id="the-script-element:networking-task-source-4">networking task source</a>
      places on the <a href="/breakup/specs/browser-dom/#task-queue" id="the-script-element:task-queue-4">task queue</a> once the <a href="/breakup/specs/core-algorithms/#fetch" id="the-script-element:fetch-4">fetching algorithm</a>
      has completed must <a href="/breakup/specs/html-scripting/#execute-the-script-block" id="the-script-element:execute-the-script-block-2">execute the script block</a> and then remove the element from the
      <a href="/breakup/specs/html-scripting/#set-of-scripts-that-will-execute-as-soon-as-possible" id="the-script-element:set-of-scripts-that-will-execute-as-soon-as-possible">set of scripts that will execute as soon as possible</a>.</p>

     </dd><dt id="script-processing-inline">Otherwise</dt><dd>The user agent must <a href="/breakup/specs/core-algorithms/#immediately" id="the-script-element:immediately-2">immediately</a> <a href="/breakup/specs/html-scripting/#execute-the-script-block" id="the-script-element:execute-the-script-block-3">execute the script block</a>, even if other
     scripts are already executing.</dd></dl>

   </li></ol>

  
  <p>Fetching an external script must <a href="/breakup/specs/html-syntax/#delay-the-load-event" id="the-script-element:delay-the-load-event">delay the load event</a> of the element's <a id="the-script-element:node-document-6" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>
  until the <a href="/breakup/specs/browser-dom/#concept-task" id="the-script-element:concept-task-5">task</a> that is <a href="/breakup/specs/browser-dom/#queue-a-task" id="the-script-element:queue-a-task-3">queued</a>
  by the <a href="/breakup/specs/browser-dom/#networking-task-source" id="the-script-element:networking-task-source-5">networking task source</a> once the resource has been <a href="/breakup/specs/core-algorithms/#fetch" id="the-script-element:fetch-5">fetched</a> (defined above) has been run.</p>

  <p>The <dfn id="pending-parsing-blocking-script">pending parsing-blocking script</dfn> of a <code id="the-script-element:document-10"><a href="/breakup/specs/browser-dom/#document">Document</a></code> is used by the
  <code id="the-script-element:document-11"><a href="/breakup/specs/browser-dom/#document">Document</a></code>'s parser(s).</p>

  <p class="note">If a <code id="the-script-element:the-script-element-44"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element that blocks a parser gets moved to another
  <code id="the-script-element:document-12"><a href="/breakup/specs/browser-dom/#document">Document</a></code> before it would normally have stopped blocking that parser, it nonetheless
  continues blocking that parser until the condition that causes it to be blocking the parser no
  longer applies (e.g. if the script is a <a href="/breakup/specs/html-scripting/#pending-parsing-blocking-script" id="the-script-element:pending-parsing-blocking-script-3">pending parsing-blocking script</a> because there
  was <a href="/breakup/specs/html-styling/#a-style-sheet-that-is-blocking-scripts" id="the-script-element:a-style-sheet-that-is-blocking-scripts">a style sheet that is blocking scripts</a> when it was parsed, but then the script is
  moved to another <code id="the-script-element:document-13"><a href="/breakup/specs/browser-dom/#document">Document</a></code> before the style sheet loads, the script still blocks the
  parser until the style sheets are all loaded, at which time the script executes and the parser is
  unblocked).</p>

  

  <p>When the user agent is required to <dfn id="execute-the-script-block">execute a script
  block</dfn>, it must run the following steps:</p>

  <ol><li>

    <p>If the element is flagged as <a href="/breakup/specs/html-scripting/#parser-inserted" id="the-script-element:parser-inserted-10">"parser-inserted"</a>, but the element's
    <a id="the-script-element:node-document-7" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> is not the <code id="the-script-element:document-14"><a href="/breakup/specs/browser-dom/#document">Document</a></code> of the parser that created the element,
    then abort these steps.</p>

   </li><li>

    <p>Jump to the appropriate set of steps from the list below:</p>

    <dl class="switch"><dt>If the load resulted in an error (for example a DNS error, or an HTTP 404 error)</dt><dd><p>Executing the script block must just consist of <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="the-script-element:fire-a-simple-event-3">firing
     a simple event</a> named <code id="the-script-element:event-error-3"><a href="/breakup/specs/html/#event-error">error</a></code> at the element.</p></dd><dt>If the load was successful</dt><dd>

      <p>Executing the script block must consist of running the following steps. For the purposes of
      these steps, the script is considered to be from an <i>external file</i> if, while the
      <a href="/breakup/specs/html-scripting/#prepare-a-script" id="the-script-element:prepare-a-script-4">prepare a script</a> algorithm above was running for this script, the
      <code id="the-script-element:the-script-element-45"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element had a <code id="the-script-element:attr-script-src-20"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute
      specified.</p>

      <ol><li id="establish-script-block-source">

        <p>Initialise <dfn id="concept-script-source"><var>the script block's source</var></dfn>
        as follows:</p>

        <dl class="switch"><dt>If the script is from an external file and <var id="the-script-element:concept-script-type-5"><a href="/breakup/specs/html-scripting/#concept-script-type">the script
         block's type</a></var> is a text-based language</dt><dd>

          <p>The contents of that file, interpreted as a Unicode string, are the script source.</p>

          <p>To obtain the Unicode string, the user agent run the following steps:</p>

          <ol><li><p>If the resource's <a href="/breakup/specs/core-algorithms/#content-type" id="the-script-element:content-type-2">Content Type metadata</a>, if any,
           specifies a character encoding, and the user agent supports that encoding, then let <var>character encoding</var> be that encoding, and jump to the bottom step in this
           series of steps.</p></li><li><p>If the algorithm above set <var id="the-script-element:concept-script-encoding-2"><a href="/breakup/specs/html-scripting/#concept-script-encoding">the script
           block's character encoding</a></var>, then let <var>character encoding</var> be
           that encoding, and jump to the bottom step in this series of steps.</p></li><li><p>Let <var>character encoding</var> be <var id="the-script-element:concept-script-fallback-encoding-2"><a href="/breakup/specs/html-scripting/#concept-script-fallback-encoding">the script block's fallback character
           encoding</a></var>.</p></li><li>

            <p>If the specification for <var id="the-script-element:concept-script-type-6"><a href="/breakup/specs/html-scripting/#concept-script-type">the script block's
            type</a></var> gives specific rules for decoding files in that format to Unicode, follow
            them, using <var>character encoding</var> as the character encoding specified by
            higher-level protocols, if necessary.</p> 

            <p>Otherwise, <a href="/breakup/specs/core-algorithms/#decode" id="the-script-element:decode">decode</a> the file to Unicode, using <var>character
            encoding</var> as the fallback encoding.</p>

            <p class="note">The <a href="/breakup/specs/core-algorithms/#decode" id="the-script-element:decode-2">decode</a> algorithm overrides <var>character
            encoding</var> if the file contains a BOM.</p>

           </li></ol>

         </dd><dt>If the script is from an external file and <var id="the-script-element:concept-script-type-7"><a href="/breakup/specs/html-scripting/#concept-script-type">the script
         block's type</a></var> is an XML-based language</dt><dd>

          <p>The external file is the script source. When it is later executed, it must be
          interpreted in a manner consistent with the specification defining the language given by
          <var id="the-script-element:concept-script-type-8"><a href="/breakup/specs/html-scripting/#concept-script-type">the script block's type</a></var>.</p>

         </dd><dt>If the script is inline and <var id="the-script-element:concept-script-type-9"><a href="/breakup/specs/html-scripting/#concept-script-type">the script block's
         type</a></var> is a text-based language</dt><dd>

          <p>The value of the <code id="the-script-element:dom-script-text-2"><a href="/breakup/specs/html-scripting/#dom-script-text">text</a></code> IDL attribute at the time
          the element's <a href="/breakup/specs/html-scripting/#already-started" id="the-script-element:already-started-3">"already started"</a> flag was last set is the script source.</p>

         </dd><dt>If the script is inline and <var id="the-script-element:concept-script-type-10"><a href="/breakup/specs/html-scripting/#concept-script-type">the script block's
         type</a></var> is an XML-based language</dt><dd>

          <p>The child nodes of the <code id="the-script-element:the-script-element-46"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element at the time the element's
          <a href="/breakup/specs/html-scripting/#already-started" id="the-script-element:already-started-4">"already started"</a> flag was last set are the script source.</p>

         </dd></dl>

       </li><li>

        <p><a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="the-script-element:fire-a-simple-event-4">Fire a simple event</a> named <code id="the-script-element:event-beforescriptexecute"><a href="/breakup/specs/html/#event-beforescriptexecute">beforescriptexecute</a></code> that bubbles and is cancelable
        at the <code id="the-script-element:the-script-element-47"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element.</p>

        <p>If the event is canceled, then abort these steps.</p>

       </li><li>

        <p>If the script is from an external file, then increment the
        <a href="/breakup/specs/browser-dom/#ignore-destructive-writes-counter" id="the-script-element:ignore-destructive-writes-counter">ignore-destructive-writes counter</a> of the <code id="the-script-element:the-script-element-48"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element's
        <a id="the-script-element:node-document-8" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>. Let <var>neutralised doc</var> be that
        <code id="the-script-element:document-15"><a href="/breakup/specs/browser-dom/#document">Document</a></code>.</p>

       </li><li>

        <p>Let <var>old script element</var> be the value to which the <code id="the-script-element:the-script-element-49"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code>
        element's <a id="the-script-element:node-document-9" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>'s <code id="the-script-element:dom-document-currentscript"><a href="/breakup/specs/browser-dom/#dom-document-currentscript">currentScript</a></code> object was most recently
        initialised.</p>

       </li><li>

        <p>Initialise the <code id="the-script-element:the-script-element-50"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element's <a id="the-script-element:node-document-10" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>'s <code id="the-script-element:dom-document-currentscript-2"><a href="/breakup/specs/browser-dom/#dom-document-currentscript">currentScript</a></code> object to the <code id="the-script-element:the-script-element-51"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code>
        element.</p>

       </li><li>

        <p><a href="/breakup/specs/browser-dom/#create-a-script" id="the-script-element:create-a-script">Create a script</a>, using <var id="the-script-element:concept-script-source"><a href="/breakup/specs/html-scripting/#concept-script-source">the script
        block's source</a></var>, the <a href="/breakup/specs/core-algorithms/#url" id="the-script-element:url">URL</a> from which the script was obtained, <var id="the-script-element:concept-script-type-11"><a href="/breakup/specs/html-scripting/#concept-script-type">the script block's type</a></var> as the scripting language, and
        the <a href="/breakup/specs/browser-dom/#environment-settings-object" id="the-script-element:environment-settings-object">environment settings object</a> of the <code id="the-script-element:the-script-element-52"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element's
        <a id="the-script-element:node-document-11" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>'s <code id="the-script-element:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object.</p>

        <p>If the script came from a resource that was <a href="/breakup/specs/core-algorithms/#fetch" id="the-script-element:fetch-6">fetched</a> in the
        steps above, and the resource was <a href="/breakup/specs/core-algorithms/#cors-cross-origin" id="the-script-element:cors-cross-origin-2">CORS-cross-origin</a>, then pass the <var>muted errors</var> flag to the <a href="/breakup/specs/browser-dom/#create-a-script" id="the-script-element:create-a-script-2">create a script</a> algorithm as well.</p>

        <p class="note">This is where the script is compiled and actually executed.</p>

       </li><li>

        <p>Initialise the <code id="the-script-element:the-script-element-53"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element's <a id="the-script-element:node-document-12" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>'s <code id="the-script-element:dom-document-currentscript-3"><a href="/breakup/specs/browser-dom/#dom-document-currentscript">currentScript</a></code> object to <var>old script
        element</var>.</p>

       </li><li>

        <p>Decrement the <a href="/breakup/specs/browser-dom/#ignore-destructive-writes-counter" id="the-script-element:ignore-destructive-writes-counter-2">ignore-destructive-writes counter</a> of <var>neutralised doc</var>, if it was incremented in the earlier step.</p>

       </li><li>

        <p><a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="the-script-element:fire-a-simple-event-5">Fire a simple event</a> named <code id="the-script-element:event-afterscriptexecute"><a href="/breakup/specs/html/#event-afterscriptexecute">afterscriptexecute</a></code> that bubbles (but is not
        cancelable) at the <code id="the-script-element:the-script-element-54"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element.</p>

       </li><li>

        <p>If the script is from an external file, <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="the-script-element:fire-a-simple-event-6">fire a simple event</a> named <code id="the-script-element:event-load"><a href="/breakup/specs/html/#event-load">load</a></code> at the <code id="the-script-element:the-script-element-55"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element.</p>

        <p>Otherwise, the script is internal; <a href="/breakup/specs/browser-dom/#queue-a-task" id="the-script-element:queue-a-task-4">queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="the-script-element:fire-a-simple-event-7">fire a simple
        event</a> named <code id="the-script-element:event-load-2"><a href="/breakup/specs/html/#event-load">load</a></code> at the <code id="the-script-element:the-script-element-56"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code>
        element.</p>

       </li></ol>

     </dd></dl>

   </li></ol>

  <p>The IDL attributes <dfn id="dom-script-src"><code>src</code></dfn>, <dfn id="dom-script-type"><code>type</code></dfn>, <dfn id="dom-script-charset"><code>charset</code></dfn>, <dfn id="dom-script-defer"><code>defer</code></dfn>, each must <a href="/breakup/specs/core-algorithms/#reflect" id="the-script-element:reflect">reflect</a> the respective
  content attributes of the same name.</p>

  <p>The <dfn id="dom-script-crossorigin"><code>crossOrigin</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="the-script-element:reflect-2">reflect</a> the <code id="the-script-element:attr-script-crossorigin-6"><a href="/breakup/specs/html-scripting/#attr-script-crossorigin">crossorigin</a></code> content attribute.</p>

  <p>The <dfn id="dom-script-async"><code>async</code></dfn> IDL attribute controls whether the
  element will execute asynchronously or not. If the element's <a href="/breakup/specs/html-scripting/#non-blocking" id="the-script-element:non-blocking-6">"non-blocking"</a> flag is
  set, then, on getting, the <code id="the-script-element:dom-script-async-2"><a href="/breakup/specs/html-scripting/#dom-script-async">async</a></code> IDL attribute must return
  true, and on setting, the <a href="/breakup/specs/html-scripting/#non-blocking" id="the-script-element:non-blocking-7">"non-blocking"</a> flag must first be unset, and then the
  content attribute must be removed if the IDL attribute's new value is false, and must be set to
  the empty string if the IDL attribute's new value is true. If the element's
  <a href="/breakup/specs/html-scripting/#non-blocking" id="the-script-element:non-blocking-8">"non-blocking"</a> flag is <em>not</em> set, the IDL attribute must <a href="/breakup/specs/core-algorithms/#reflect" id="the-script-element:reflect-3">reflect</a>
  the <code id="the-script-element:attr-script-async-14"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code> content attribute.</p>

  


  <dl class="domintro"><dt><var>script</var> . <code id="the-script-element:dom-script-text-3"><a href="/breakup/specs/html-scripting/#dom-script-text">text</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the contents of the element, ignoring child nodes that aren't <code id="the-script-element:text-2"><a href="/breakup/specs/core-algorithms/#text">Text</a></code>
    nodes.</p>

    <p>Can be set, to replace the element's children with the given value.</p>

   </dd></dl>

  

  <p>The IDL attribute <dfn id="dom-script-text"><code>text</code></dfn> must return a
  concatenation of the contents of all the <code id="the-script-element:text-3"><a href="/breakup/specs/core-algorithms/#text">Text</a></code> nodes that are children of the
  <code id="the-script-element:the-script-element-57"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element (ignoring any other nodes such as comments or elements), in tree
  order. On setting, it must act the same way as the <code id="the-script-element:textcontent"><a href="/breakup/specs/core-algorithms/#textcontent">textContent</a></code> IDL attribute.</p>

  


  <p class="note">When inserted using the <code id="the-script-element:dom-document-write-2"><a href="/breakup/specs/browser-dom/#dom-document-write">document.write()</a></code>
  method, <code id="the-script-element:the-script-element-58"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements execute (typically blocking further script execution or HTML parsing), but when inserted using
  <code id="the-script-element:dom-innerhtml"><a href="/breakup/specs/core-algorithms/#dom-innerhtml">innerHTML</a></code> and <code id="the-script-element:dom-outerhtml"><a href="/breakup/specs/core-algorithms/#dom-outerhtml">outerHTML</a></code>
  attributes, they do not execute at all.</p>

  <div class="example">

   <p>In this example, two <code id="the-script-element:the-script-element-59"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements are used. One embeds an external script, and
   the other includes some data.</p>

   <pre>&lt;script src="game-engine.js"&gt;&lt;/script&gt;
&lt;script type="text/x-game-map"&gt;
........U.........e
o............A....e
.....A.....AAA....e
.A..AAA...AAAAA...e
&lt;/script&gt;</pre>

   <p>The data in this case might be used by the script to generate the map of a video game. The
   data doesn't have to be used that way, though; maybe the map data is actually embedded in other
   parts of the page's markup, and the data block here is just used by the site's search engine to
   help users who are looking for particular features in their game maps.</p>

  </div>

  <div class="example">

   <p>The following sample shows how a script element can be used to define a function that is then
   used by other parts of the document. It also shows how a <code id="the-script-element:the-script-element-60"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element can be used
   to invoke script while the document is being parsed, in this case to initialise the form's
   output.</p>

   <pre>&lt;script&gt;
 function calculate(form) {
   var price = 52000;
   if (form.elements.brakes.checked)
     price += 1000;
   if (form.elements.radio.checked)
     price += 2500;
   if (form.elements.turbo.checked)
     price += 5000;
   if (form.elements.sticker.checked)
     price += 250;
   form.elements.result.value = price;
 }
&lt;/script&gt;
&lt;form name="pricecalc" onsubmit="return false" onchange="calculate(this)"&gt;
 &lt;fieldset&gt;
  &lt;legend&gt;Work out the price of your car&lt;/legend&gt;
  &lt;p&gt;Base cost: £52000.&lt;/p&gt;
  &lt;p&gt;Select additional options:&lt;/p&gt;
  &lt;ul&gt;
   &lt;li&gt;&lt;label&gt;&lt;input type=checkbox name=brakes&gt; Ceramic brakes (£1000)&lt;/label&gt;&lt;/li&gt;
   &lt;li&gt;&lt;label&gt;&lt;input type=checkbox name=radio&gt; Satellite radio (£2500)&lt;/label&gt;&lt;/li&gt;
   &lt;li&gt;&lt;label&gt;&lt;input type=checkbox name=turbo&gt; Turbo charger (£5000)&lt;/label&gt;&lt;/li&gt;
   &lt;li&gt;&lt;label&gt;&lt;input type=checkbox name=sticker&gt; "XZ" sticker (£250)&lt;/label&gt;&lt;/li&gt;
  &lt;/ul&gt;
  &lt;p&gt;Total: £&lt;output name=result&gt;&lt;/output&gt;&lt;/p&gt;
 &lt;/fieldset&gt;
 &lt;script&gt;
  calculate(document.forms.pricecalc);
 &lt;/script&gt;
&lt;/form&gt;</pre>

  </div>



  <section><h2>Scripting languages</h2>

  

  <p>A user agent is said to <dfn id="support-the-scripting-language">support the scripting language</dfn> if each component of <var id="scriptingLanguages:concept-script-type"><a href="/breakup/specs/html-scripting/#concept-script-type">the script block's type</a></var> is an <a href="/breakup/specs/core-algorithms/#ascii-case-insensitive" id="scriptingLanguages:ascii-case-insensitive">ASCII
  case-insensitive</a> match for the corresponding component in the <a href="/breakup/specs/core-algorithms/#mime-type" id="scriptingLanguages:mime-type">MIME type</a> string
  of a scripting language that the user agent implements.</p>

  

  <p>The following lists the <a href="/breakup/specs/core-algorithms/#mime-type" id="scriptingLanguages:mime-type-2">MIME type</a> strings that user agents must recognize, and the
  languages to which they refer:</p>

  <dl><dt><code id="scriptingLanguages:application/ecmascript"><a href="#application/ecmascript">application/ecmascript</a></code></dt><dt><code id="scriptingLanguages:application/javascript"><a href="#application/javascript">application/javascript</a></code></dt><dt><code id="scriptingLanguages:application/x-ecmascript"><a href="#application/x-ecmascript">application/x-ecmascript</a></code></dt><dt><code id="scriptingLanguages:application/x-javascript"><a href="#application/x-javascript">application/x-javascript</a></code></dt><dt><code id="scriptingLanguages:text/ecmascript"><a href="#text/ecmascript">text/ecmascript</a></code></dt><dt><code id="scriptingLanguages:text/javascript"><a href="#text/javascript">text/javascript</a></code></dt><dt><code id="scriptingLanguages:text/javascript1.0"><a href="#text/javascript1.0">text/javascript1.0</a></code></dt><dt><code id="scriptingLanguages:text/javascript1.1"><a href="#text/javascript1.1">text/javascript1.1</a></code></dt><dt><code id="scriptingLanguages:text/javascript1.2"><a href="#text/javascript1.2">text/javascript1.2</a></code></dt><dt><code id="scriptingLanguages:text/javascript1.3"><a href="#text/javascript1.3">text/javascript1.3</a></code></dt><dt><code id="scriptingLanguages:text/javascript1.4"><a href="#text/javascript1.4">text/javascript1.4</a></code></dt><dt><code id="scriptingLanguages:text/javascript1.5"><a href="#text/javascript1.5">text/javascript1.5</a></code></dt><dt><code id="scriptingLanguages:text/jscript"><a href="#text/jscript">text/jscript</a></code></dt><dt><code id="scriptingLanguages:text/livescript"><a href="#text/livescript">text/livescript</a></code></dt><dt><code id="scriptingLanguages:text/x-ecmascript"><a href="#text/x-ecmascript">text/x-ecmascript</a></code></dt><dt><code id="scriptingLanguages:text/x-javascript"><a href="#text/x-javascript">text/x-javascript</a></code></dt><dd>JavaScript. [[!ECMA262]]</dd></dl>

  

  <p>User agents may support other <a href="/breakup/specs/core-algorithms/#mime-type" id="scriptingLanguages:mime-type-3">MIME types</a> for other languages,
  but must not support other <a href="/breakup/specs/core-algorithms/#mime-type" id="scriptingLanguages:mime-type-4">MIME types</a> for the languages in the list
  above. User agents are not required to support the languages listed above.</p>

  <p>The following <a href="/breakup/specs/core-algorithms/#mime-type" id="scriptingLanguages:mime-type-5">MIME types</a> (with or without parameters) must not
  be interpreted as scripting languages:</p>

  <ul class="brief"><li><code id="scriptingLanguages:text/plain"><a data-x-internal="text/plain" href="http://tools.ietf.org/html/rfc2046#section-4.1.3">text/plain</a></code>
   </li><li><code id="scriptingLanguages:text/xml"><a href="#text/xml">text/xml</a></code>
   
   </li><li><code id="scriptingLanguages:application/octet-stream"><a data-x-internal="application/octet-stream" href="http://tools.ietf.org/html/rfc2046#section-4.5.1">application/octet-stream</a></code>
   </li><li><code id="scriptingLanguages:application/xml"><a href="#application/xml">application/xml</a></code>
   
   

   

  </li></ul>

  <p class="note">These types are explicitly listed here because they are poorly-defined types that
  are nonetheless likely to be used as formats for data blocks, and it would be problematic if they
  were suddenly to be interpreted as script by a user agent.</p>

  

  <p>When examining types to determine if they represent supported languages, user agents must not
  ignore MIME parameters. Types are to be compared including all parameters.</p> 

  <p class="note">For example, types that include the <code>charset</code> parameter will
  not be recognised as referencing any of the scripting languages listed above.</p></section>

  


  <section><h2><dfn>Restrictions for contents of <code>script</code> elements</dfn></h2>

  <p class="note">The easiest and safest way to avoid the rather strange restrictions described in
  this section is to always escape "<code>&lt;!--</code>" as "<code>&lt;\!--</code>", "<code>&lt;script</code>" as "<code>&lt;\script</code>", and "<code>&lt;/script</code>" as "<code>&lt;\/script</code>" when these sequences appear in literals in scripts (e.g. in
  strings, regular expressions, or comments), and to avoid writing code that uses such constructs in
  expressions. Doing so avoids the pitfalls that the restrictions in this section are prone to
  triggering: namely, that, for historical reasons, parsing of <code id="restrictions-for-contents-of-script-elements:the-script-element"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> blocks in HTML is
  a strange and exotic practice that acts unintuitively in the face of these sequences.</p>

  <p>The <code id="restrictions-for-contents-of-script-elements:textcontent"><a href="/breakup/specs/core-algorithms/#textcontent">textContent</a></code> of a <code id="restrictions-for-contents-of-script-elements:the-script-element-2"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element must match the <code>script</code> production in the following ABNF, the character set for which is Unicode.
  [[!ABNF]]</p>

  <pre>script        = outer *( comment-open inner comment-close outer )

outer         = &lt; any string that doesn't contain a substring that matches not-in-outer &gt;
not-in-outer  = comment-open
inner         = &lt; any string that doesn't contain a substring that matches not-in-inner &gt;
not-in-inner  = comment-close / script-open

comment-open  = "&lt;!--"
comment-close = "--&gt;"
script-open   = "&lt;" s c r i p t tag-end

s             =  %x0053 ; U+0053 LATIN CAPITAL LETTER S
s             =/ %x0073 ; U+0073 LATIN SMALL LETTER S
c             =  %x0043 ; U+0043 LATIN CAPITAL LETTER C
c             =/ %x0063 ; U+0063 LATIN SMALL LETTER C
r             =  %x0052 ; U+0052 LATIN CAPITAL LETTER R
r             =/ %x0072 ; U+0072 LATIN SMALL LETTER R
i             =  %x0049 ; U+0049 LATIN CAPITAL LETTER I
i             =/ %x0069 ; U+0069 LATIN SMALL LETTER I
p             =  %x0050 ; U+0050 LATIN CAPITAL LETTER P
p             =/ %x0070 ; U+0070 LATIN SMALL LETTER P
t             =  %x0054 ; U+0054 LATIN CAPITAL LETTER T
t             =/ %x0074 ; U+0074 LATIN SMALL LETTER T

tag-end       =  %x0009 ; U+0009 CHARACTER TABULATION (tab)
tag-end       =/ %x000A ; U+000A LINE FEED (LF)
tag-end       =/ %x000C ; U+000C FORM FEED (FF)
tag-end       =/ %x0020 ; U+0020 SPACE
tag-end       =/ %x002F ; U+002F SOLIDUS (/)
tag-end       =/ %x003E ; U+003E GREATER-THAN SIGN (&gt;)</pre>

  <p>When a <code id="restrictions-for-contents-of-script-elements:the-script-element-3"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element contains <a href="/breakup/specs/html-scripting/#inline-documentation-for-external-scripts" id="restrictions-for-contents-of-script-elements:inline-documentation-for-external-scripts">script documentation</a>, there are
  further restrictions on the contents of the element, as described in the section below.</p>

  <div class="example">

   <p>The following script illustrates this issue. Suppose you have a script that contains a string,
   as in:</p>

   <pre>var example = 'Consider this string: &lt;!-- &lt;script&gt;';
console.log(example);</pre>

   <p>If one were to put this string directly in a <code id="restrictions-for-contents-of-script-elements:the-script-element-4"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> block, it would violate the
   restrictions above:</p>

   <pre>&lt;script&gt;
  var example = 'Consider this string: &lt;!-- &lt;script&gt;';
  console.log(example);
&lt;/script&gt;</pre>

   <p>The bigger problem, though, and the reason why it would violate those restrictions, is that
   actually the script would get parsed weirdly: <em>the script block above is not terminated</em>.
   That is, what looks like a "<code>&lt;/script&gt;</code>" end tag in this snippet is
   actually still part of the <code id="restrictions-for-contents-of-script-elements:the-script-element-5"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> block. The script doesn't execute (since it's not
   terminated); if it somehow were to execute, as it might if the markup looked as follows, it would
   fail because the script (highlighted here) is not valid JavaScript:</p>

   <pre>&lt;script&gt;<mark>
  var example = 'Consider this string: &lt;!-- &lt;script&gt;';
  console.log(example);
&lt;/script&gt;
&lt;!-- despite appearances, this is actually part of the script still! --&gt;
&lt;script&gt;
 ... // this is the same script block still...
</mark>&lt;/script&gt;</pre>

   <p>What is going on here is that for legacy reasons, "<code>&lt;!--</code>" and "<code>&lt;script</code>" strings in <code id="restrictions-for-contents-of-script-elements:the-script-element-6"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements in HTML need to be balanced
   in order for the parser to consider closing the block.</p>

   <p>By escaping the problematic strings as mentioned at the top of this section, the problem is
   avoided entirely:</p>

   <pre>&lt;script&gt;<mark>
  var example = 'Consider this string: &lt;\!-- &lt;\script&gt;';
  console.log(example);
</mark>&lt;/script&gt;
&lt;!-- this is just a comment between script blocks --&gt;
&lt;script&gt;<mark>
 ... // this is a new script block
</mark>&lt;/script&gt;</pre>

   <p>It is possible for these sequences to naturally occur in script expressions, as in the
   following examples:</p>

   <pre>if (x&lt;!--y) { ... }
if ( player&lt;script ) { ... }</pre>

   <p>In such cases the characters cannot be escaped, but the expressions can be rewritten so that
   the sequences don't occur, as in:</p>

   <pre>if (x &lt; !--y) { ... }
if (!--y &gt; x) { ... }
if (!(--y) &gt; x) { ... }
if (player &lt; script) { ... }
if (script &gt; player) { ... }</pre>

   <p>Doing this also avoids a different pitfall as well: for related historical reasons, the string
   "&lt;!--" in JavaScript is actually treated as a line comment start, just like "//".</p>

  </div></section>


  <section><h2><dfn>Inline documentation for external scripts</dfn></h2>

  <p>If a <code id="inline-documentation-for-external-scripts:the-script-element"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element's <code id="inline-documentation-for-external-scripts:attr-script-src"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute is
  specified, then the contents of the <code id="inline-documentation-for-external-scripts:the-script-element-2"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element, if any, must be such that the
  value of the <code id="inline-documentation-for-external-scripts:dom-script-text"><a href="/breakup/specs/html-scripting/#dom-script-text">text</a></code> IDL attribute, which is derived from the
  element's contents, matches the <code>documentation</code> production in the following
  ABNF, the character set for which is Unicode. [[!ABNF]]</p>

  <pre>documentation = *( *( space / tab / comment ) [ line-comment ] newline )
comment       = slash star *( not-star / star not-slash ) 1*star slash
line-comment  = slash slash *not-newline

; characters
tab           = %x0009 ; U+0009 CHARACTER TABULATION (tab)
newline       = %x000A ; U+000A LINE FEED (LF)
space         = %x0020 ; U+0020 SPACE
star          = %x002A ; U+002A ASTERISK (*)
slash         = %x002F ; U+002F SOLIDUS (/)
not-newline   = %x0000-0009 / %x000B-10FFFF
                ; a <a href="/breakup/specs/core-algorithms/#unicode-character" id="inline-documentation-for-external-scripts:unicode-character">Unicode character</a> other than U+000A LINE FEED (LF)
not-star      = %x0000-0029 / %x002B-10FFFF
                ; a <a href="/breakup/specs/core-algorithms/#unicode-character" id="inline-documentation-for-external-scripts:unicode-character-2">Unicode character</a> other than U+002A ASTERISK (*)
not-slash     = %x0000-002E / %x0030-10FFFF
                ; a <a href="/breakup/specs/core-algorithms/#unicode-character" id="inline-documentation-for-external-scripts:unicode-character-3">Unicode character</a> other than U+002F SOLIDUS (/)</pre>

  <p class="note">This corresponds to putting the contents of the element in JavaScript
  comments.</p>

  <p class="note">This requirement is in addition to the earlier restrictions on the syntax of
  contents of <code id="inline-documentation-for-external-scripts:the-script-element-3"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements.</p>

  <div class="example">

   <p>This allows authors to include documentation, such as license information or API information,
   inside their documents while still referring to external script files. The syntax is constrained
   so that authors don't accidentally include what looks like valid script while also providing a
   <code id="inline-documentation-for-external-scripts:attr-script-src-2"><a href="/breakup/specs/html-scripting/#attr-script-src">src</a></code> attribute.</p>

   <pre>&lt;script src="cool-effects.js"&gt;
 // create new instances using:
 //    var e = new Effect();
 // start the effect using .play, stop using .stop:
 //    e.play();
 //    e.stop();
&lt;/script&gt;</pre>

  </div></section>


  

  <section><h2>Interaction of <code id="scriptTagXSLT:the-script-element"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements and XSLT</h2>

  <p><i>This section is non-normative.</i></p>

  <p>This specification does not define how XSLT interacts with the <code id="scriptTagXSLT:the-script-element-2"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element.
  However, in the absence of another specification actually defining this, here are some guidelines
  for implementors, based on existing implementations:</p>

  <ul><li><p>When an XSLT transformation program is triggered by an <code>&lt;?xml-stylesheet?&gt;</code> processing instruction and the browser implements a
   direct-to-DOM transformation, <code id="scriptTagXSLT:the-script-element-3"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements created by the XSLT processor need to
   be marked <a href="/breakup/specs/html-scripting/#parser-inserted" id="scriptTagXSLT:parser-inserted">"parser-inserted"</a> and run in document order (modulo scripts marked <code id="scriptTagXSLT:attr-script-defer"><a href="/breakup/specs/html-scripting/#attr-script-defer">defer</a></code> or <code id="scriptTagXSLT:attr-script-async"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code>),
   <a href="/breakup/specs/core-algorithms/#immediately" id="scriptTagXSLT:immediately">immediately</a>, as the transformation is occurring.</p></li><li><p>The <code id="scriptTagXSLT:dom-xsltprocessor-transformtodocument"><a href="/breakup/specs/core-algorithms/#dom-xsltprocessor-transformtodocument">XSLTProcessor.transformToDocument()</a></code> method
   adds elements to a <code id="scriptTagXSLT:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> that is not in a <a href="/breakup/specs/browser-dom/#browsing-context" id="scriptTagXSLT:browsing-context">browsing context</a>, and,
   accordingly, any <code id="scriptTagXSLT:the-script-element-4"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements they create need to have their <a href="/breakup/specs/html-scripting/#already-started" id="scriptTagXSLT:already-started">"already
   started"</a> flag set in the <a href="/breakup/specs/html-scripting/#prepare-a-script" id="scriptTagXSLT:prepare-a-script">prepare a script</a> algorithm and never get executed
   (<a href="/breakup/specs/browser-dom/#concept-bc-noscript" id="scriptTagXSLT:concept-bc-noscript">scripting is disabled</a>). Such <code id="scriptTagXSLT:the-script-element-5"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code>
   elements still need to be marked <a href="/breakup/specs/html-scripting/#parser-inserted" id="scriptTagXSLT:parser-inserted-2">"parser-inserted"</a>, though, such that their <code id="scriptTagXSLT:dom-script-async"><a href="/breakup/specs/html-scripting/#dom-script-async">async</a></code> IDL attribute will return false in the absence of an <code id="scriptTagXSLT:attr-script-async-2"><a href="/breakup/specs/html-scripting/#attr-script-async">async</a></code> content attribute.</p></li><li><p>The <code id="scriptTagXSLT:dom-xsltprocessor-transformtofragment"><a href="/breakup/specs/core-algorithms/#dom-xsltprocessor-transformtofragment">XSLTProcessor.transformToFragment()</a></code> method
   needs to create a fragment that is equivalent to one built manually by creating the elements
   using <code id="scriptTagXSLT:dom-document-createelementns"><a href="/breakup/specs/core-algorithms/#dom-document-createelementns">document.createElementNS()</a></code>. For instance,
   it needs to create <code id="scriptTagXSLT:the-script-element-6"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements that aren't <a href="/breakup/specs/html-scripting/#parser-inserted" id="scriptTagXSLT:parser-inserted-3">"parser-inserted"</a> and
   that don't have their <a href="/breakup/specs/html-scripting/#already-started" id="scriptTagXSLT:already-started-2">"already started"</a> flag set, so that they will execute when the
   fragment is inserted into a document.</p></li></ul>

  <p>The main distinction between the first two cases and the last case is that the first two
  operate on <code id="scriptTagXSLT:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code>s and the last operates on a fragment.</p></section></section><section><h2>The <dfn><code>noscript</code></dfn> element</h2>

  <dl class="element"><dt><a href="/breakup/specs/html/#concept-element-categories" id="the-noscript-element:concept-element-categories">Categories</a>:</dt><dd><a href="/breakup/specs/html/#metadata-content-2" id="the-noscript-element:metadata-content-2">Metadata content</a>.</dd><dd><a href="/breakup/specs/html/#flow-content-2" id="the-noscript-element:flow-content-2">Flow content</a>.</dd><dd><a href="/breakup/specs/html/#phrasing-content-2" id="the-noscript-element:phrasing-content-2">Phrasing content</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-contexts" id="the-noscript-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>In a <code id="the-noscript-element:the-head-element"><a href="/breakup/specs/html-structure/#the-head-element">head</a></code> element of an <a href="/breakup/specs/core-algorithms/#html-documents" id="the-noscript-element:html-documents">HTML document</a>, if there are no ancestor <code id="the-noscript-element:the-noscript-element"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> elements.</dd><dd>Where <a href="/breakup/specs/html/#phrasing-content-2" id="the-noscript-element:phrasing-content-2-2">phrasing content</a> is expected in <a href="/breakup/specs/core-algorithms/#html-documents" id="the-noscript-element:html-documents-2">HTML documents</a>, if there are no ancestor <code id="the-noscript-element:the-noscript-element-2"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> elements.</dd><dt><a href="/breakup/specs/html/#concept-element-content-model" id="the-noscript-element:concept-element-content-model">Content model</a>:</dt><dd>When <a href="/breakup/specs/browser-dom/#concept-n-noscript" id="the-noscript-element:concept-n-noscript">scripting is disabled</a>, in a <code id="the-noscript-element:the-head-element-2"><a href="/breakup/specs/html-structure/#the-head-element">head</a></code> element: in any order, zero or more <code id="the-noscript-element:the-link-element"><a href="/breakup/specs/html-metadata/#the-link-element">link</a></code> elements, zero or more <code id="the-noscript-element:the-style-element"><a href="/breakup/specs/html-styling/#the-style-element">style</a></code> elements, and zero or more <code id="the-noscript-element:the-meta-element"><a href="/breakup/specs/html-metadata/#the-meta-element">meta</a></code> elements.</dd><dd>When <a href="/breakup/specs/browser-dom/#concept-n-noscript" id="the-noscript-element:concept-n-noscript-2">scripting is disabled</a>, not in a <code id="the-noscript-element:the-head-element-3"><a href="/breakup/specs/html-structure/#the-head-element">head</a></code> element: <a href="/breakup/specs/html/#transparent" id="the-noscript-element:transparent">transparent</a>, but there must be no <code id="the-noscript-element:the-noscript-element-3"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element descendants.</dd><dd>Otherwise: text that conforms to the requirements given in the prose.</dd><dt><a href="/breakup/specs/html/#concept-element-tag-omission" id="the-noscript-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>Neither tag is omissible.</dd><dt><a href="/breakup/specs/html/#concept-element-attributes" id="the-noscript-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-noscript-element:global-attributes">Global attributes</a></dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#aria-role-attribute">ARIA role attribute</a> values:</dt><dd>None</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-global">Global aria-* attributes</a></dd><dt><a href="/breakup/specs/html/#concept-element-dom" id="the-noscript-element:concept-element-dom">DOM interface</a>:</dt><dd>Uses <code id="the-noscript-element:htmlelement"><a href="/breakup/specs/html-scripting/#htmlelement">HTMLElement</a></code>.</dd></dl>

  <p>The <code id="the-noscript-element:the-noscript-element-4"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element <a href="/breakup/specs/html-scripting/#represents" id="the-noscript-element:represents">represents</a> nothing if <a href="/breakup/specs/browser-dom/#concept-n-script" id="the-noscript-element:concept-n-script">scripting is enabled</a>, and <a href="/breakup/specs/html-scripting/#represents" id="the-noscript-element:represents-2">represents</a> its children if
  <a href="/breakup/specs/browser-dom/#concept-n-noscript" id="the-noscript-element:concept-n-noscript-3">scripting is disabled</a>. It is used to present different
  markup to user agents that support scripting and those that don't support scripting, by affecting
  how the document is parsed.</p>

  <p>When used in <a href="/breakup/specs/core-algorithms/#html-documents" id="the-noscript-element:html-documents-3">HTML documents</a>, the allowed content model is as follows:</p>

  <dl><dt>In a <code id="the-noscript-element:the-head-element-4"><a href="/breakup/specs/html-structure/#the-head-element">head</a></code> element, if <a href="/breakup/specs/browser-dom/#concept-n-noscript" id="the-noscript-element:concept-n-noscript-4">scripting is
   disabled</a> for the <code id="the-noscript-element:the-noscript-element-5"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element</dt><dd><p>The <code id="the-noscript-element:the-noscript-element-6"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element must contain only <code id="the-noscript-element:the-link-element-2"><a href="/breakup/specs/html-metadata/#the-link-element">link</a></code>, <code id="the-noscript-element:the-style-element-2"><a href="/breakup/specs/html-styling/#the-style-element">style</a></code>,
   and <code id="the-noscript-element:the-meta-element-2"><a href="/breakup/specs/html-metadata/#the-meta-element">meta</a></code> elements.</p></dd><dt>In a <code id="the-noscript-element:the-head-element-5"><a href="/breakup/specs/html-structure/#the-head-element">head</a></code> element, if <a href="/breakup/specs/browser-dom/#concept-n-script" id="the-noscript-element:concept-n-script-2">scripting is enabled</a>
   for the <code id="the-noscript-element:the-noscript-element-7"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element</dt><dd><p>The <code id="the-noscript-element:the-noscript-element-8"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element must contain only text, except that invoking the
   <a href="/breakup/specs/html-syntax/#html-fragment-parsing-algorithm" id="the-noscript-element:html-fragment-parsing-algorithm">HTML fragment parsing algorithm</a>  with
   the <code id="the-noscript-element:the-noscript-element-9"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element as the <var id="the-noscript-element:concept-frag-parse-context"><a href="/breakup/specs/html-syntax/#concept-frag-parse-context">context</a></var>
   element and the text contents as the <var>input</var> must result in a list of nodes
   that consists only of <code id="the-noscript-element:the-link-element-3"><a href="/breakup/specs/html-metadata/#the-link-element">link</a></code>, <code id="the-noscript-element:the-style-element-3"><a href="/breakup/specs/html-styling/#the-style-element">style</a></code>, and <code id="the-noscript-element:the-meta-element-3"><a href="/breakup/specs/html-metadata/#the-meta-element">meta</a></code> elements that
   would be conforming if they were children of the <code id="the-noscript-element:the-noscript-element-10"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element, and no <a href="/breakup/specs/html-syntax/#parse-error" id="the-noscript-element:parse-error">parse errors</a>.</p></dd><dt>Outside of <code id="the-noscript-element:the-head-element-6"><a href="/breakup/specs/html-structure/#the-head-element">head</a></code> elements, if <a href="/breakup/specs/browser-dom/#concept-n-noscript" id="the-noscript-element:concept-n-noscript-5">scripting is
   disabled</a> for the <code id="the-noscript-element:the-noscript-element-11"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element</dt><dd><p>The <code id="the-noscript-element:the-noscript-element-12"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element's content model is <a href="/breakup/specs/html/#transparent" id="the-noscript-element:transparent-2">transparent</a>, with the
   additional restriction that a <code id="the-noscript-element:the-noscript-element-13"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element must not have a <code id="the-noscript-element:the-noscript-element-14"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code>
   element as an ancestor (that is, <code id="the-noscript-element:the-noscript-element-15"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> can't be nested).</p></dd><dt>Outside of <code id="the-noscript-element:the-head-element-7"><a href="/breakup/specs/html-structure/#the-head-element">head</a></code> elements, if <a href="/breakup/specs/browser-dom/#concept-n-script" id="the-noscript-element:concept-n-script-3">scripting is
   enabled</a> for the <code id="the-noscript-element:the-noscript-element-16"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element</dt><dd>

    <p>The <code id="the-noscript-element:the-noscript-element-17"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element must contain only text, except that the text must be such
    that running the following algorithm results in a conforming document with no
    <code id="the-noscript-element:the-noscript-element-18"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> elements and no <code id="the-noscript-element:the-script-element"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> elements, and such that no step in the
    algorithm throws an exception or causes an <a href="/breakup/specs/html-syntax/#html-parser" id="the-noscript-element:html-parser">HTML parser</a> to flag a <a href="/breakup/specs/html-syntax/#parse-error" id="the-noscript-element:parse-error-2">parse
    error</a>:</p>
    
    
    <ol><li>Remove every <code id="the-noscript-element:the-script-element-2"><a href="/breakup/specs/html-scripting/#the-script-element">script</a></code> element from the document.</li><li>Make a list of every <code id="the-noscript-element:the-noscript-element-19"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element in the document. For every
     <code id="the-noscript-element:the-noscript-element-20"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element in that list, perform the following steps:

      <ol><li>Let <var>s</var> be the concatenation of all the <code id="the-noscript-element:text"><a href="/breakup/specs/core-algorithms/#text">Text</a></code> node
       children of the <code id="the-noscript-element:the-noscript-element-21"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element.</li><li>Set the <code id="the-noscript-element:dom-outerhtml"><a href="/breakup/specs/core-algorithms/#dom-outerhtml">outerHTML</a></code> attribute of the
       <code id="the-noscript-element:the-noscript-element-22"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element to the value of <var>s</var>. (This, as a
       side-effect, causes the <code id="the-noscript-element:the-noscript-element-23"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element to be removed from the document.) [[!DOMPARSING]]</li></ol>

     </li></ol>

   </dd></dl>

  <p class="note">All these contortions are required because, for historical reasons, the
  <code id="the-noscript-element:the-noscript-element-24"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element is handled differently by the <a href="/breakup/specs/html-syntax/#html-parser" id="the-noscript-element:html-parser-2">HTML parser</a> based on
  whether <a href="/breakup/specs/html-syntax/#scripting-flag" id="the-noscript-element:scripting-flag">scripting was enabled or not</a> when the parser was
  invoked.</p>

  <p>The <code id="the-noscript-element:the-noscript-element-25"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element must not be used in <a href="/breakup/specs/core-algorithms/#xml-documents" id="the-noscript-element:xml-documents">XML documents</a>.</p>

  <p class="note">The <code id="the-noscript-element:the-noscript-element-26"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element is only effective in <a href="#syntax" id="the-noscript-element:syntax">the HTML
  syntax</a>, it has no effect in <a href="#the-xhtml-syntax" id="the-noscript-element:the-xhtml-syntax">the XHTML syntax</a>. This is because the way it works
  is by essentially "turning off" the parser when scripts are enabled, so that the contents of the
  element are treated as pure text and not as real elements. XML does not define a mechanism by
  which to do this.</p>

  

  <p>The <code id="the-noscript-element:the-noscript-element-27"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element has no other requirements. In particular, children of the
  <code id="the-noscript-element:the-noscript-element-28"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element are not exempt from <a href="/breakup/specs/html-forms/#form-submission-2" id="the-noscript-element:form-submission-2">form submission</a>, scripting, and so
  forth, even when <a href="/breakup/specs/browser-dom/#concept-n-script" id="the-noscript-element:concept-n-script-4">scripting is enabled</a> for the element.</p>

  

  <div class="example">

   <p>In the following example, a <code id="the-noscript-element:the-noscript-element-29"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element is
   used to provide fallback for a script.</p>

   <pre>&lt;form action="calcSquare.php"&gt;
 &lt;p&gt;
  &lt;label for=x&gt;Number&lt;/label&gt;:
  &lt;input id="x" name="x" type="number"&gt;
 &lt;/p&gt;
 &lt;script&gt;
  var x = document.getElementById('x');
  var output = document.createElement('p');
  output.textContent = 'Type a number; it will be squared right then!';
  x.form.appendChild(output);
  x.form.onsubmit = function () { return false; }
  x.oninput = function () {
    var v = x.valueAsNumber;
    output.textContent = v + ' squared is ' + v * v;
  };
 &lt;/script&gt;
 &lt;noscript&gt;
  &lt;input type=submit value="Calculate Square"&gt;
 &lt;/noscript&gt;
&lt;/form&gt;</pre>

   <p>When script is disabled, a button appears to do the calculation on the server side. When
   script is enabled, the value is computed on-the-fly instead.</p>

   <p>The <code id="the-noscript-element:the-noscript-element-30"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> element is a blunt instrument. Sometimes, scripts might be enabled,
   but for some reason the page's script might fail. For this reason, it's generally better to avoid
   using <code id="the-noscript-element:the-noscript-element-31"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code>, and to instead design the script to change the page from being a
   scriptless page to a scripted page on the fly, as in the next example:</p>

   <pre>&lt;form action="calcSquare.php"&gt;
 &lt;p&gt;
  &lt;label for=x&gt;Number&lt;/label&gt;:
  &lt;input id="x" name="x" type="number"&gt;
 &lt;/p&gt;
 <strong>&lt;input id="submit" type=submit value="Calculate Square"&gt;</strong>
 &lt;script&gt;
  var x = document.getElementById('x');
  var output = document.createElement('p');
  output.textContent = 'Type a number; it will be squared right then!';
  x.form.appendChild(output);
  x.form.onsubmit = function () { return false; }
  x.oninput = function () {
    var v = x.valueAsNumber;
    output.textContent = v + ' squared is ' + v * v;
  };
<strong>  var submit = document.getElementById('submit');
  submit.parentNode.removeChild(submit);</strong>
 &lt;/script&gt;
&lt;/form&gt;</pre>

   <p>The above technique is also useful in XHTML, since <code id="the-noscript-element:the-noscript-element-32"><a href="/breakup/specs/html-scripting/#the-noscript-element">noscript</a></code> is not supported in
   <a href="#the-xhtml-syntax" id="the-noscript-element:the-xhtml-syntax-2">the XHTML syntax</a>.</p>

  </div></section></body></html>