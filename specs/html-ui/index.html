<html lang="en"><head>
    <meta charset="utf-8">
    <title>HTML User Interfaces</title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove"></script>
    <script class="remove">
      var respecConfig = {
              specStatus:     "ED"
          ,   shortName:      "html-ui"
          ,   editors:      [{ name: "Up for the taking" }]
          ,   wg:             "HTML Working Group"
          ,   wgURI:          "http://www.w3.org/html/wg/"
          ,   wgPublicList:   "public-html"
          ,   wgPatentURI:    "http://www.w3.org/2004/01/pp-impl/40318/status"
          ,   license:        "cc-by"
          ,   processVersion: "2014"
        };
    </script>
  </head>
  <body>
    <section id="abstract">
      <p>
        UI Elements.
      </p>
    </section>
    <section id="sotd">
      <p>
        This specification is an experimental breakup of the
        <a href="http://www.w3.org/TR/html51/">HTML specification</a>. You can see the full list on
        <a href="https://darobin.github.io/breakup/specs/">the index page</a> and take part in the
        discussion in <a href="https://github.com/darobin/breakup/">the repository</a>.
      </p>
    </section>
  

<section><h2>The <dfn><code>details</code></dfn> element</h2>

  <dl class="element"><dt><a href="/breakup/specs/html/#concept-element-categories" id="the-details-element:concept-element-categories">Categories</a>:</dt><dd><a href="/breakup/specs/html/#flow-content-2" id="the-details-element:flow-content-2">Flow content</a>.</dd><dd><a href="/breakup/specs/html-structure/#sectioning-root" id="the-details-element:sectioning-root">Sectioning root</a>.</dd><dd><a href="/breakup/specs/html/#interactive-content-2" id="the-details-element:interactive-content-2">Interactive content</a>.</dd><dd><a href="/breakup/specs/html/#palpable-content-2" id="the-details-element:palpable-content-2">Palpable content</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-contexts" id="the-details-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>Where <a href="/breakup/specs/html/#flow-content-2" id="the-details-element:flow-content-2-2">flow content</a> is expected.</dd><dt><a href="/breakup/specs/html/#concept-element-content-model" id="the-details-element:concept-element-content-model">Content model</a>:</dt><dd>One <code id="the-details-element:the-summary-element"><a href="/breakup/specs/html-ui/#the-summary-element">summary</a></code> element followed by <a href="/breakup/specs/html/#flow-content-2" id="the-details-element:flow-content-2-3">flow content</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-tag-omission" id="the-details-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>Neither tag is omissible.</dd><dt><a href="/breakup/specs/html/#concept-element-attributes" id="the-details-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-details-element:global-attributes">Global attributes</a></dd><dd><code id="the-details-element:attr-details-open"><a href="/breakup/specs/html-ui/#attr-details-open">open</a></code> — Whether the details are visible</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#aria-role-attribute">ARIA role attribute</a> values:</dt><dd><a href="/breakup/specs/html-aria-integration/#allowed-aria-roles,-states-and-properties">Any role</a> that supports 
   <code title="">aria-expanded</code>.</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-global">Global aria-* attributes</a></dd><dd>Any <code title="">aria-*</code> attributes 
   <a href="/breakup/specs/html-aria-integration/#allowed-aria-roles,-states-and-properties">applicable to the allowed roles</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-dom" id="the-details-element:concept-element-dom">DOM interface</a>:</dt><dd>
<pre class="idl">interface <dfn id="htmldetailselement">HTMLDetailsElement</dfn> : <a href="/breakup/specs/html-scripting/#htmlelement" id="the-details-element:htmlelement">HTMLElement</a> {
  attribute boolean <a href="/breakup/specs/html-ui/#dom-details-open" id="the-details-element:dom-details-open">open</a>;
};</pre>
   </dd></dl>

  <p>The <code id="the-details-element:the-details-element"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code> element <a href="/breakup/specs/html-scripting/#represents" id="the-details-element:represents">represents</a> a disclosure widget from which the
  user can obtain additional information or controls.</p>

  <p class="note">The <code id="the-details-element:the-details-element-2"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code> element is not appropriate for footnotes. Please see <a href="/breakup/specs/html/#footnotes">the section on footnotes</a> for details on how to mark up footnotes.</p>

  <p>The first <code id="the-details-element:the-summary-element-2"><a href="/breakup/specs/html-ui/#the-summary-element">summary</a></code> element child of the element, if any,
  <a href="/breakup/specs/html-scripting/#represents" id="the-details-element:represents-2">represents</a> the summary or legend of the details. If there is no
  child <code id="the-details-element:the-summary-element-3"><a href="/breakup/specs/html-ui/#the-summary-element">summary</a></code> element, the user agent should provide its own legend (e.g.
  "Details").</p>

  <p>The rest of the element's contents <a href="/breakup/specs/html-scripting/#represents" id="the-details-element:represents-3">represents</a> the additional information or
  controls.</p>

  <p>The <dfn id="attr-details-open"><code>open</code></dfn> content attribute is a <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="the-details-element:boolean-attribute">boolean
  attribute</a>. If present, it indicates that both the summary and the additional information is
  to be shown to the user. If the attribute is absent, only the summary is to be shown.</p>

  

  <p>When the element is created, if the attribute is absent, the additional information should be
  hidden; if the attribute is present, that information should be shown. Subsequently, if the
  attribute is removed, then the information should be hidden; if the attribute is added, the
  information should be shown.</p>

  <p>The user agent should allow the user to request that the additional information be shown or
  hidden. To honor a request for the details to be shown, the user agent must set the <code id="the-details-element:attr-details-open-2"><a href="/breakup/specs/html-ui/#attr-details-open">open</a></code> attribute on the element to the value <code>open</code>. To honor a request for the information to be hidden, the user agent must
  remove the <code id="the-details-element:attr-details-open-3"><a href="/breakup/specs/html-ui/#attr-details-open">open</a></code> attribute from the element.</p>

  <p>Whenever the <code id="the-details-element:attr-details-open-4"><a href="/breakup/specs/html-ui/#attr-details-open">open</a></code> attribute is added to or removed from
  a <code id="the-details-element:the-details-element-3"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code> element, the user agent must <a href="/breakup/specs/browser-dom/#queue-a-task" id="the-details-element:queue-a-task">queue a task</a> that runs the
  following steps, which are known as the <dfn id="details-notification-task-steps">details notification task steps</dfn>, for this
  <code id="the-details-element:the-details-element-4"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code> element:</p>

  <ol><li>

    <p>If another <a href="/breakup/specs/browser-dom/#concept-task" id="the-details-element:concept-task">task</a> has been <a href="/breakup/specs/browser-dom/#queue-a-task" id="the-details-element:queue-a-task-2">queued</a> to run the <a href="/breakup/specs/html-ui/#details-notification-task-steps" id="the-details-element:details-notification-task-steps">details notification task steps</a> for this
    <code id="the-details-element:the-details-element-5"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code> element, then abort these steps.</p>

    <p class="note">When the <code id="the-details-element:attr-details-open-5"><a href="/breakup/specs/html-ui/#attr-details-open">open</a></code> attribute is toggled
    several times in succession, these steps essentially get coalesced so that only one event is
    fired.</p>

   </li><li><p><a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="the-details-element:fire-a-simple-event">Fire a simple event</a> named <code id="the-details-element:event-toggle"><a href="/breakup/specs/html/#event-toggle">toggle</a></code> at the
   <code id="the-details-element:the-details-element-6"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code> element.</p></li></ol>

  <p>The <a href="/breakup/specs/browser-dom/#task-source" id="the-details-element:task-source">task source</a> for this task must be the <a href="/breakup/specs/browser-dom/#dom-manipulation-task-source" id="the-details-element:dom-manipulation-task-source">DOM manipulation task
  source</a>.</p>

  <p>The <dfn id="dom-details-open"><code>open</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="the-details-element:reflect">reflect</a> the <code id="the-details-element:attr-details-open-6"><a href="/breakup/specs/html-ui/#attr-details-open">open</a></code> content attribute.</p>

  

  <div class="example">

   <p>The following example shows the <code id="the-details-element:the-details-element-7"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code> element being used to hide technical
   details in a progress report.</p>

   <pre>&lt;section class="progress window"&gt;
 &lt;h1&gt;Copying "Really Achieving Your Childhood Dreams"&lt;/h1&gt;
 &lt;details&gt;
  &lt;summary&gt;Copying... &lt;progress max="375505392" value="97543282"&gt;&lt;/progress&gt; 25%&lt;/summary&gt;
  &lt;dl&gt;
   &lt;dt&gt;Transfer rate:&lt;/dt&gt; &lt;dd&gt;452KB/s&lt;/dd&gt;
   &lt;dt&gt;Local filename:&lt;/dt&gt; &lt;dd&gt;/home/rpausch/raycd.m4v&lt;/dd&gt;
   &lt;dt&gt;Remote filename:&lt;/dt&gt; &lt;dd&gt;/var/www/lectures/raycd.m4v&lt;/dd&gt;
   &lt;dt&gt;Duration:&lt;/dt&gt; &lt;dd&gt;01:16:27&lt;/dd&gt;
   &lt;dt&gt;Colour profile:&lt;/dt&gt; &lt;dd&gt;SD (6-1-6)&lt;/dd&gt;
   &lt;dt&gt;Dimensions:&lt;/dt&gt; &lt;dd&gt;320×240&lt;/dd&gt;
  &lt;/dl&gt;
 &lt;/details&gt;
&lt;/section&gt;</pre>

  </div>

  <div class="example">

   <p>The following shows how a <code id="the-details-element:the-details-element-8"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code> element can be used to hide some controls by
   default:</p>

   <pre>&lt;details&gt;
 &lt;summary&gt;&lt;label for=fn&gt;Name &amp; Extension:&lt;/label&gt;&lt;/summary&gt;
 &lt;p&gt;&lt;input type=text id=fn name=fn value="Pillar Magazine.pdf"&gt;
 &lt;p&gt;&lt;label&gt;&lt;input type=checkbox name=ext checked&gt; Hide extension&lt;/label&gt;
&lt;/details&gt;</pre>

   <p>One could use this in conjunction with other <code id="the-details-element:the-details-element-9"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code> in a list to allow the user
   to collapse a set of fields down to a small set of headings, with the ability to open each
   one.</p>

   <p class="details-example"><img src="img/sample-details-1.png" width="345" alt="" height="611"><img src="img/sample-details-2.png" width="345" alt="" height="666"></p>

   <p>In these examples, the summary really just summarises what the controls can change, and not
   the actual values, which is less than ideal.</p>

  </div>

  <div class="example">

   <p>Because the <code id="the-details-element:attr-details-open-7"><a href="/breakup/specs/html-ui/#attr-details-open">open</a></code> attribute is added and removed
   automatically as the user interacts with the control, it can be used in CSS to style the element
   differently based on its state. Here, a stylesheet is used to animate the colour of the summary
   when the element is opened or closed:</p>

   <pre>&lt;style&gt;
 details &gt; summary { transition: color 1s; color: black; }
 details[open] &gt; summary { color: red; }
&lt;/style&gt;
&lt;details&gt;
 &lt;summary&gt;Automated Status: Operational&lt;/summary&gt;
 &lt;p&gt;Velocity: 12m/s&lt;/p&gt;
 &lt;p&gt;Direction: North&lt;/p&gt;
&lt;/details&gt;</pre>

  </div></section><section><h2>The <dfn><code>summary</code></dfn> element</h2>

  <dl class="element"><dt><a href="/breakup/specs/html/#concept-element-categories" id="the-summary-element:concept-element-categories">Categories</a>:</dt><dd>None.</dd><dt><a href="/breakup/specs/html/#concept-element-contexts" id="the-summary-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>As the first child of a <code id="the-summary-element:the-details-element"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code> element.</dd><dt><a href="/breakup/specs/html/#concept-element-content-model" id="the-summary-element:concept-element-content-model">Content model</a>:</dt><dd>Either: <a href="/breakup/specs/html/#phrasing-content-2" id="the-summary-element:phrasing-content-2">phrasing content</a>.</dd><dd>Or: one element of <a href="/breakup/specs/html/#heading-content-2" id="the-summary-element:heading-content-2">heading content</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-tag-omission" id="the-summary-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>Neither tag is omissible.</dd><dt><a href="/breakup/specs/html/#concept-element-attributes" id="the-summary-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-summary-element:global-attributes">Global attributes</a></dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#aria-role-attribute">ARIA role attribute</a> values:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-button"><code title="">button</code></a>.</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-global">Global aria-* attributes</a></dd><dd>Any <code title="">aria-*</code> attributes 
   <a href="/breakup/specs/html-aria-integration/#allowed-aria-roles,-states-and-properties">applicable to the allowed roles</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-dom" id="the-summary-element:concept-element-dom">DOM interface</a>:</dt><dd>Uses <code id="the-summary-element:htmlelement"><a href="/breakup/specs/html-scripting/#htmlelement">HTMLElement</a></code>.</dd></dl>

  <p>The <code id="the-summary-element:the-summary-element"><a href="/breakup/specs/html-ui/#the-summary-element">summary</a></code> element <a href="/breakup/specs/html-scripting/#represents" id="the-summary-element:represents">represents</a> a summary, caption, or legend for the
  rest of the contents of the <code id="the-summary-element:the-summary-element-2"><a href="/breakup/specs/html-ui/#the-summary-element">summary</a></code> element's parent <code id="the-summary-element:the-details-element-2"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code>
  element, if any.</p></section><section><h2>The <dfn id="menus"><code>menu</code></dfn> element</h2>

  <dl class="element"><dt><a href="/breakup/specs/html/#concept-element-categories" id="the-menu-element:concept-element-categories">Categories</a>:</dt><dd><a href="/breakup/specs/html/#flow-content-2" id="the-menu-element:flow-content-2">Flow content</a>.</dd><dd>If the element's <code id="the-menu-element:attr-menu-type"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attribute is in the <a href="/breakup/specs/html-ui/#toolbar-state" id="the-menu-element:toolbar-state">toolbar</a> state: <a href="/breakup/specs/html/#palpable-content-2" id="the-menu-element:palpable-content-2">Palpable content</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-contexts" id="the-menu-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>Where <a href="/breakup/specs/html/#flow-content-2" id="the-menu-element:flow-content-2-2">flow content</a> is expected.</dd><dd>If the element's <code id="the-menu-element:attr-menu-type-2"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attribute is in the <a href="/breakup/specs/html-ui/#popup-menu-state" id="the-menu-element:popup-menu-state">popup menu</a> state: as the child of a <code id="the-menu-element:the-menu-element"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element whose <code id="the-menu-element:attr-menu-type-3"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attribute is in the <a href="/breakup/specs/html-ui/#popup-menu-state" id="the-menu-element:popup-menu-state-2">popup menu</a> state.</dd><dt><a href="/breakup/specs/html/#concept-element-content-model" id="the-menu-element:concept-element-content-model">Content model</a>:</dt><dd>If the element's <code id="the-menu-element:attr-menu-type-4"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attribute is in the <a href="/breakup/specs/html-ui/#toolbar-state" id="the-menu-element:toolbar-state-2">toolbar</a> state: either zero or more <code id="the-menu-element:the-li-element"><a href="/breakup/specs/html-tables/#the-li-element">li</a></code> and <a href="/breakup/specs/html/#script-supporting-elements-2" id="the-menu-element:script-supporting-elements-2">script-supporting</a> elements, or, <a href="/breakup/specs/html/#flow-content-2" id="the-menu-element:flow-content-2-3">flow content</a>.</dd><dd>If the element's <code id="the-menu-element:attr-menu-type-5"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attribute is in the <a href="/breakup/specs/html-ui/#popup-menu-state" id="the-menu-element:popup-menu-state-3">popup menu</a> state: in any order, zero or more <code id="the-menu-element:the-menuitem-element"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> elements, zero or more <code id="the-menu-element:the-hr-element"><a href="/breakup/specs/html-structure/#the-hr-element">hr</a></code> elements, zero or more <code id="the-menu-element:the-menu-element-2"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> elements whose <code id="the-menu-element:attr-menu-type-6"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attributes are in the <a href="/breakup/specs/html-ui/#popup-menu-state" id="the-menu-element:popup-menu-state-4">popup menu</a> state, and zero or more <a href="/breakup/specs/html/#script-supporting-elements-2" id="the-menu-element:script-supporting-elements-2-2">script-supporting</a> elements.</dd><dt><a href="/breakup/specs/html/#concept-element-tag-omission" id="the-menu-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>Neither tag is omissible.</dd><dt><a href="/breakup/specs/html/#concept-element-attributes" id="the-menu-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-menu-element:global-attributes">Global attributes</a></dd><dd><code id="the-menu-element:attr-menu-type-7"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> — Type of menu</dd><dd><code id="the-menu-element:attr-menu-label"><a href="/breakup/specs/html-ui/#attr-menu-label">label</a></code> — User-visible label</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#aria-role-attribute">ARIA role attribute</a> values:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-menu"><code title="">menu</code></a> 
   (default - <a href="/breakup/specs/html-aria-integration/#aria-usage-note"><em>do not set</em></a>), 
   <a href="/breakup/specs/html-aria-integration/#index-aria-directory"><code title="">directory</code></a>, 
   <a href="/breakup/specs/html-aria-integration/#index-aria-list"><code title="">list</code></a>, 
   <a href="/breakup/specs/html-aria-integration/#index-aria-listbox"><code title="">listbox</code></a>, 
   <a href="/breakup/specs/html-aria-integration/#index-aria-menubar"><code title="">menubar</code></a>, 
   <a href="/breakup/specs/html-aria-integration/#index-aria-tablist"><code title="">tablist</code></a>,
   <a href="/breakup/specs/html-aria-integration/#index-aria-tabpanel"><code title="">tabpanel</code></a>   
   or <a href="/breakup/specs/html-aria-integration/#index-aria-tree"><code title="">tree</code></a>.</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-global">Global aria-* attributes</a></dd><dd>Any <code title="">aria-*</code> attributes 
   <a href="/breakup/specs/html-aria-integration/#allowed-aria-roles,-states-and-properties">applicable to the allowed roles</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-dom" id="the-menu-element:concept-element-dom">DOM interface</a>:</dt><dd>
<pre class="idl">interface <dfn id="htmlmenuelement">HTMLMenuElement</dfn> : <a href="/breakup/specs/html-scripting/#htmlelement" id="the-menu-element:htmlelement">HTMLElement</a> {
  attribute DOMString <a href="/breakup/specs/html-ui/#dom-menu-type" id="the-menu-element:dom-menu-type">type</a>;
  attribute DOMString <a href="/breakup/specs/html-ui/#dom-menu-label" id="the-menu-element:dom-menu-label">label</a>;

  // <a href="/breakup/specs/html-obsolete/#HTMLMenuElement-partial">also has obsolete members</a>
};</pre>
  </dd></dl>

  <p>The <code id="the-menu-element:the-menu-element-3"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element represents a list of commands.</p>

  

  <p>The <dfn id="attr-menu-type"><code>type</code></dfn> attribute is an <a href="/breakup/specs/core-algorithms/#enumerated-attribute" id="the-menu-element:enumerated-attribute">enumerated
  attribute</a> indicating the kind of menu being declared. The attribute has two states. The
  "<dfn id="attr-menu-type-popup"><code>popup</code></dfn>" keyword maps to the <dfn id="popup-menu-state">popup menu</dfn> state, in which the element is declaring a context menu
  or the menu for a <a href="/breakup/specs/html-forms/#attr-button-type-menu-state" id="the-menu-element:attr-button-type-menu-state">menu button</a>. The "<dfn id="attr-menu-type-toolbar"><code>toolbar</code></dfn>" keyword maps to the <dfn id="toolbar-state">toolbar</dfn> state, in which the element is declaring a toolbar. The attribute may also be
  omitted. The <i id="the-menu-element:missing-value-default"><a href="/breakup/specs/core-algorithms/#missing-value-default">missing value default</a></i> is the <a href="/breakup/specs/html-ui/#popup-menu-state" id="the-menu-element:popup-menu-state-5">popup menu</a>
  state if the parent element is a <code id="the-menu-element:the-menu-element-4"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element whose <code id="the-menu-element:attr-menu-type-8"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attribute is in the <a href="/breakup/specs/html-ui/#popup-menu-state" id="the-menu-element:popup-menu-state-6">popup
  menu</a> state; otherwise, it is the <a href="/breakup/specs/html-ui/#toolbar-state" id="the-menu-element:toolbar-state-3">toolbar</a> state.</p>

  <p>If a <code id="the-menu-element:the-menu-element-5"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element's <code id="the-menu-element:attr-menu-type-9"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attribute is in the
  <a href="/breakup/specs/html-ui/#popup-menu-state" id="the-menu-element:popup-menu-state-7">popup menu</a> state, then the element <a href="/breakup/specs/html-scripting/#represents" id="the-menu-element:represents">represents</a>
  the commands of a popup menu, and the user can only examine and interact with the commands if that
  popup menu is activated through some other element, either via the <code id="the-menu-element:attr-contextmenu"><a href="/breakup/specs/html-ui/#attr-contextmenu">contextmenu</a></code> attribute or the <code id="the-menu-element:the-button-element"><a href="/breakup/specs/html-forms/#the-button-element">button</a></code> element's <code id="the-menu-element:attr-button-menu"><a href="/breakup/specs/html-forms/#attr-button-menu">menu</a></code> attribute.</p>

  <p>If a <code id="the-menu-element:the-menu-element-6"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element's <code id="the-menu-element:attr-menu-type-10"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attribute is in the
  <a href="/breakup/specs/html-ui/#toolbar-state" id="the-menu-element:toolbar-state-4">toolbar</a> state, then the element <a href="/breakup/specs/html-scripting/#represents" id="the-menu-element:represents-2">represents</a> a
  toolbar consisting of its contents, in the form of either an unordered list of items (represented
  by <code id="the-menu-element:the-li-element-2"><a href="/breakup/specs/html-tables/#the-li-element">li</a></code> elements), each of which represents a command that the user can perform or
  activate, or, if the element has no <code id="the-menu-element:the-li-element-3"><a href="/breakup/specs/html-tables/#the-li-element">li</a></code> element children, <a href="/breakup/specs/html/#flow-content-2" id="the-menu-element:flow-content-2-4">flow content</a>
  describing available commands.</p>

  <p>The <dfn id="attr-menu-label"><code>label</code></dfn> attribute gives the label of the
  menu. It is used by user agents to display nested menus in the UI: a context menu containing
  another menu would use the nested menu's <code id="the-menu-element:attr-menu-label-2"><a href="/breakup/specs/html-ui/#attr-menu-label">label</a></code> attribute for
  the submenu's menu label. The <code id="the-menu-element:attr-menu-label-3"><a href="/breakup/specs/html-ui/#attr-menu-label">label</a></code> attribute must only be
  specified on <code id="the-menu-element:the-menu-element-7"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> elements whose parent element is a <code id="the-menu-element:the-menu-element-8"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element whose
  <code id="the-menu-element:attr-menu-type-11"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attribute is in the <a href="/breakup/specs/html-ui/#popup-menu-state" id="the-menu-element:popup-menu-state-8">popup
  menu</a> state.</p>

  

  <hr>

  <p>A <code id="the-menu-element:the-menu-element-9"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> is a <dfn id="currently-relevant-menu-element">currently relevant <code>menu</code> element</dfn> if it is the
  child of a <a href="/breakup/specs/html-ui/#currently-relevant-menu-element" id="the-menu-element:currently-relevant-menu-element">currently relevant <code>menu</code> element</a>, or if it is the
  <a href="/breakup/specs/html-forms/#designated-pop-up-menu" id="the-menu-element:designated-pop-up-menu">designated pop-up menu</a> of a <code id="the-menu-element:the-button-element-2"><a href="/breakup/specs/html-forms/#the-button-element">button</a></code> element that is not
  <a href="/breakup/specs/html-ui/#inert" id="the-menu-element:inert">inert</a>, does not have a <code id="the-menu-element:the-hidden-attribute"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute, and is not
  the descendant of an element with a <code id="the-menu-element:the-hidden-attribute-2"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute.</p>

  <hr>

  <p>A <dfn id="menu-construct">menu construct</dfn> consists of an ordered list of zero or more <dfn id="menu-item-construct">menu item constructs</dfn>, which can be any of:</p>

  <ul class="brief"><li><a href="/breakup/specs/html-ui/#concept-command" id="the-menu-element:concept-command">Commands</a>, which can be marked as <dfn id="default-command">default commands</dfn> (<code id="the-menu-element:the-menuitem-element-2"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code>)</li><li><dfn id="concept-separator">Separators</dfn> (<code id="the-menu-element:the-hr-element-2"><a href="/breakup/specs/html-structure/#the-hr-element">hr</a></code>)</li><li>Other <a href="/breakup/specs/html-ui/#menu-construct" id="the-menu-element:menu-construct">menu constructs</a>, each with an associated <dfn id="submenu-label">submenu label</dfn>, which allows the list to be nested (<code id="the-menu-element:the-menu-element-10"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code>)</li></ul>

  <p>To <dfn id="build-and-show-a-menu">build and show a menu</dfn> for a particular <code id="the-menu-element:the-menu-element-11"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element
  <var>source</var> and with a particular element <var>subject</var> as a subject, the user agent
  must run the following steps:</p>

  <ol><li><p>Let <var>pop-up menu</var> be the <a href="/breakup/specs/html-ui/#menu-construct" id="the-menu-element:menu-construct-2">menu construct</a> created by the <a href="/breakup/specs/html-ui/#build-a-menu-construct" id="the-menu-element:build-a-menu-construct">build a
   menu construct</a> algorithm when passed the <var>source</var> element.</p>

   </li><li>

    <p>Display <var>pop-up menu</var> to the user, and let the algorithm that invoked this one continue.</p>

    <p>If the user selects a <a href="/breakup/specs/html-ui/#menu-item-construct" id="the-menu-element:menu-item-construct">menu item construct</a> that corresponds to an element that still represents a <a href="/breakup/specs/html-ui/#concept-command" id="the-menu-element:concept-command-2">command</a> when the user selects it, then the UA must invoke that
    command's <a href="/breakup/specs/html-ui/#command-facet-action" id="the-menu-element:command-facet-action">Action</a>. If the command's <a href="/breakup/specs/html-ui/#command-facet-action" id="the-menu-element:command-facet-action-2">Action</a> is defined as <a href="/breakup/specs/browser-dom/#fire-a-click-event" id="the-menu-element:fire-a-click-event">firing
    a <code>click</code> event</a>, either directly or via the <a href="/breakup/specs/html-ui/#run-synthetic-click-activation-steps" id="the-menu-element:run-synthetic-click-activation-steps">run
    synthetic click activation steps</a> algorithm, then the <code id="the-menu-element:dom-mouseevent-relatedtarget"><a href="/breakup/specs/core-algorithms/#dom-mouseevent-relatedtarget">relatedTarget</a></code> attribute of that <code id="the-menu-element:event-click"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code> event must be initialised to <var>subject</var>.</p>

    <p>Pop-up menus must not, while being shown, reflect changes in the DOM. The menu is constructed
    from the DOM before being shown, and is then immutable.</p>

   </li></ol>

  <p>To <dfn id="build-a-menu-construct">build a menu construct</dfn> for an element <var>source</var>, the user agent must run
  the following steps, which return a <a href="/breakup/specs/html-ui/#menu-construct" id="the-menu-element:menu-construct-3">menu construct</a>:</p>

  <ol><li><p>Let <var>generated menu</var> be an empty <a href="/breakup/specs/html-ui/#menu-construct" id="the-menu-element:menu-construct-4">menu construct</a>.</p></li><li>

    <p>Run the <a href="/breakup/specs/html-ui/#menu-item-generator" id="the-menu-element:menu-item-generator">menu item generator</a> steps for the <code id="the-menu-element:the-menu-element-12"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element using <var>generated menu</var>
    as the output.</p>

    <p>The <dfn id="menu-item-generator">menu item generator</dfn> steps for a <code id="the-menu-element:the-menu-element-13"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element using a specific <a href="/breakup/specs/html-ui/#menu-construct" id="the-menu-element:menu-construct-5">menu construct</a> <var>output</var> as
    output are as follows: For each child node of the <code id="the-menu-element:the-menu-element-14"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> in <a href="/breakup/specs/core-algorithms/#tree-order" id="the-menu-element:tree-order">tree order</a>,
    run the appropriate steps from the following list:</p>

    <dl class="switch"><dt>If the child is a <code id="the-menu-element:the-menuitem-element-3"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element that <a href="/breakup/specs/html-ui/#concept-command" id="the-menu-element:concept-command-3">defines
     a command</a></dt><dd>Append the <a href="/breakup/specs/html-ui/#concept-command" id="the-menu-element:concept-command-4">command</a> to <var>output</var>, respecting the command's <a href="/breakup/specs/html-ui/#concept-facet" id="the-menu-element:concept-facet">facets</a>. If the <code id="the-menu-element:the-menuitem-element-4"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element has a <code id="the-menu-element:attr-menuitem-default"><a href="/breakup/specs/html-ui/#attr-menuitem-default">default</a></code> attribute, mark the <span>command</span> as being a <a href="/breakup/specs/html-ui/#default-command" id="the-menu-element:default-command">default
     command</a>.</dd><dt>If the child is an <code id="the-menu-element:the-hr-element-3"><a href="/breakup/specs/html-structure/#the-hr-element">hr</a></code> element</dt><dd>Append a <a href="/breakup/specs/html-ui/#concept-separator" id="the-menu-element:concept-separator">separator</a> to <var>output</var>.</dd><dt>If the child is a <code id="the-menu-element:the-menu-element-15"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element with no <code id="the-menu-element:attr-menu-label-4"><a href="/breakup/specs/html-ui/#attr-menu-label">label</a></code> attribute</dt><dd>Append a <a href="/breakup/specs/html-ui/#concept-separator" id="the-menu-element:concept-separator-2">separator</a> to <var>output</var>, then run
     the <a href="/breakup/specs/html-ui/#menu-item-generator" id="the-menu-element:menu-item-generator-2">menu item generator</a> steps for this child <code id="the-menu-element:the-menu-element-16"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element, using
     <var>output</var> as the output, then append another <a href="/breakup/specs/html-ui/#concept-separator" id="the-menu-element:concept-separator-3">separator</a> to <var>output</var>.</dd><dt>If the child is a <code id="the-menu-element:the-menu-element-17"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element with a <code id="the-menu-element:attr-menu-label-5"><a href="/breakup/specs/html-ui/#attr-menu-label">label</a></code> attribute</dt><dd>Let <var>submenu</var> be the result of running the <a href="/breakup/specs/html-ui/#build-a-menu-construct" id="the-menu-element:build-a-menu-construct-2">build a menu construct</a> steps for the child <code id="the-menu-element:the-menu-element-18"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element. Then, append <var>submenu</var> to <var>output</var>, using the value of the child
     <code id="the-menu-element:the-menu-element-19"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element's <code id="the-menu-element:attr-menu-label-6"><a href="/breakup/specs/html-ui/#attr-menu-label">label</a></code> attribute as the <a href="/breakup/specs/html-ui/#submenu-label" id="the-menu-element:submenu-label">submenu label</a>.</dd><dt>Otherwise</dt><dd><a href="/breakup/specs/core-algorithms/#ignore" id="the-menu-element:ignore">Ignore</a> the child node.</dd></dl>

   </li><li><p>Remove from <var>output</var> any <a href="/breakup/specs/html-ui/#menu-construct" id="the-menu-element:menu-construct-6">menu construct</a> whose <a href="/breakup/specs/html-ui/#submenu-label" id="the-menu-element:submenu-label-2">submenu
   label</a> is the empty string.</p></li><li><p>Remove from <var>output</var> any <a href="/breakup/specs/html-ui/#menu-item-construct" id="the-menu-element:menu-item-construct-2">menu item construct</a> representing a <a href="/breakup/specs/html-ui/#concept-command" id="the-menu-element:concept-command-5">command</a> whose <a href="/breakup/specs/html-ui/#command-facet-label" id="the-menu-element:command-facet-label">Label</a> is
   the empty string.</p></li><li><p>Collapse all sequences of two or more adjacent <a href="/breakup/specs/html-ui/#concept-separator" id="the-menu-element:concept-separator-4">separators</a> in <var>output</var> to a single <a href="/breakup/specs/html-ui/#concept-separator" id="the-menu-element:concept-separator-5">separator</a>.</p></li><li><p>If the first <a href="/breakup/specs/html-ui/#menu-item-construct" id="the-menu-element:menu-item-construct-3">menu item construct</a> in <var>output</var> is a <a href="/breakup/specs/html-ui/#concept-separator" id="the-menu-element:concept-separator-6">separator</a>, then remove it.</p></li><li><p>If the last <a href="/breakup/specs/html-ui/#menu-item-construct" id="the-menu-element:menu-item-construct-4">menu item construct</a> in <var>output</var> is a <a href="/breakup/specs/html-ui/#concept-separator" id="the-menu-element:concept-separator-7">separator</a>, then remove it.</p></li><li><p>Return <var>output</var>.</p></li></ol>

  <hr>

  <p>The <dfn id="dom-menu-type"><code>type</code></dfn> IDL attribute must <a href="/breakup/specs/core-algorithms/#reflect" id="the-menu-element:reflect">reflect</a>
  the content attribute of the same name, <a href="/breakup/specs/core-algorithms/#limited-to-only-known-values" id="the-menu-element:limited-to-only-known-values">limited to only known values</a>.</p>

  <p>The <dfn id="dom-menu-label"><code>label</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="the-menu-element:reflect-2">reflect</a> the content attribute of the same name.</p>

  

  <div class="example">

   <p>In this example, the <code id="the-menu-element:the-menu-element-20"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element is used to describe a toolbar with three menu
   buttons on it, each of which has a dropdown menu with a series of options:</p>

  <pre>&lt;menu&gt; 
 &lt;li&gt;
  &lt;button type=menu value="File" menu="filemenu"&gt;
  &lt;menu id="filemenu" type="popup"&gt;
   &lt;menuitem onclick="fnew()" label="New..."&gt;
   &lt;menuitem onclick="fopen()" label="Open..."&gt;
   &lt;menuitem onclick="fsave()" label="Save"&gt;
   &lt;menuitem onclick="fsaveas()" label="Save as..."&gt;
  &lt;/menu&gt;
 &lt;/li&gt;
 &lt;li&gt;
  &lt;button type=menu value="Edit" menu="editmenu"&gt;
  &lt;menu id="editmenu" type="popup"&gt;
   &lt;menuitem onclick="ecopy()" label="Copy"&gt;
   &lt;menuitem onclick="ecut()" label="Cut"&gt;
   &lt;menuitem onclick="epaste()" label="Paste"&gt;
  &lt;/menu&gt;
 &lt;/li&gt;
 &lt;li&gt;
  &lt;button type=menu value="Help" menu="helpmenu"&gt;
  &lt;menu id="helpmenu" type="popup"&gt;
   &lt;menuitem onclick="location='help.html'" label="Help"&gt;
   &lt;menuitem onclick="location='about.html'" label="About"&gt;
  &lt;/menu&gt;
 &lt;/li&gt;
&lt;/menu&gt;</pre>

   <p>In a supporting user agent, this might look like this (assuming the user has just activated the
   second button):</p>

   <p><img src="img/sample-toolbar-1.png" width="303" alt="A toolbar with three buttons, labeled 'File', 'Edit', and 'Help'; where if you select the 'Edit' button you get a drop-down menu with three more options, 'Copy', 'Cut', and 'Paste'." height="101"></p>

  </div></section><section><h2>The <dfn><code>menuitem</code></dfn> element</h2>

  <dl class="element"><dt><a href="/breakup/specs/html/#concept-element-categories" id="the-menuitem-element:concept-element-categories">Categories</a>:</dt><dd>None.</dd><dt><a href="/breakup/specs/html/#concept-element-contexts" id="the-menuitem-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>As a child of a <code id="the-menuitem-element:the-menu-element"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element whose <code id="the-menuitem-element:attr-menu-type"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attribute is in the <a href="/breakup/specs/html-ui/#popup-menu-state" id="the-menuitem-element:popup-menu-state">popup menu</a> state.</dd><dt><a href="/breakup/specs/html/#concept-element-content-model" id="the-menuitem-element:concept-element-content-model">Content model</a>:</dt><dd><a href="/breakup/specs/html/#concept-content-nothing" id="the-menuitem-element:concept-content-nothing">Nothing</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-tag-omission" id="the-menuitem-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>No <a href="/breakup/specs/html-syntax/#syntax-end-tag" id="the-menuitem-element:syntax-end-tag">end tag</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-attributes" id="the-menuitem-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-menuitem-element:global-attributes">Global attributes</a></dd><dd><code id="the-menuitem-element:attr-menuitem-type"><a href="/breakup/specs/html-ui/#attr-menuitem-type">type</a></code> — Type of command</dd><dd><code id="the-menuitem-element:attr-menuitem-label"><a href="/breakup/specs/html-ui/#attr-menuitem-label">label</a></code> — User-visible label</dd><dd><code id="the-menuitem-element:attr-menuitem-icon"><a href="/breakup/specs/html-ui/#attr-menuitem-icon">icon</a></code> — Icon for the command</dd><dd><code id="the-menuitem-element:attr-menuitem-disabled"><a href="/breakup/specs/html-ui/#attr-menuitem-disabled">disabled</a></code> — Whether the form control is disabled</dd><dd><code id="the-menuitem-element:attr-menuitem-checked"><a href="/breakup/specs/html-ui/#attr-menuitem-checked">checked</a></code> — Whether the command or control is checked</dd><dd><code id="the-menuitem-element:attr-menuitem-radiogroup"><a href="/breakup/specs/html-ui/#attr-menuitem-radiogroup">radiogroup</a></code> — Name of group of commands to treat as a radio button group</dd><dd><code id="the-menuitem-element:attr-menuitem-default"><a href="/breakup/specs/html-ui/#attr-menuitem-default">default</a></code> — Mark the command as being a default command</dd><dd><code id="the-menuitem-element:attr-menuitem-command"><a href="/breakup/specs/html-ui/#attr-menuitem-command">command</a></code> — Command definition</dd><dd>Also, the <code id="the-menuitem-element:attr-menuitem-title"><a href="/breakup/specs/html-ui/#attr-menuitem-title">title</a></code> attribute <a href="/breakup/specs/html-ui/#attr-menuitem-title" id="the-menuitem-element:attr-menuitem-title-2">has special semantics</a> on this element: Hint describing the command.</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#aria-role-attribute">ARIA role attribute</a> values:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-menuitem"><code title="">menuitem</code></a> 
   (default - <a href="/breakup/specs/html-aria-integration/#aria-usage-note"><em>do not set</em></a>).</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-global">Global aria-* attributes</a></dd><dd>Any <code title="">aria-*</code> attributes 
   <a href="/breakup/specs/html-aria-integration/#allowed-aria-roles,-states-and-properties">applicable to the allowed roles</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-dom" id="the-menuitem-element:concept-element-dom">DOM interface</a>:</dt><dd>
<pre class="idl">interface <dfn id="htmlmenuitemelement">HTMLMenuItemElement</dfn> : <a href="/breakup/specs/html-scripting/#htmlelement" id="the-menuitem-element:htmlelement">HTMLElement</a> {
  attribute DOMString <a href="/breakup/specs/html-ui/#dom-menuitem-type" id="the-menuitem-element:dom-menuitem-type">type</a>;
  attribute DOMString <a href="/breakup/specs/html-ui/#dom-menuitem-label" id="the-menuitem-element:dom-menuitem-label">label</a>;
  attribute DOMString <a href="/breakup/specs/html-ui/#dom-menuitem-icon" id="the-menuitem-element:dom-menuitem-icon">icon</a>;
  attribute boolean <a href="/breakup/specs/html-ui/#dom-menuitem-disabled" id="the-menuitem-element:dom-menuitem-disabled">disabled</a>;
  attribute boolean <a href="/breakup/specs/html-ui/#dom-menuitem-checked" id="the-menuitem-element:dom-menuitem-checked">checked</a>;
  attribute DOMString <a href="/breakup/specs/html-ui/#dom-menuitem-radiogroup" id="the-menuitem-element:dom-menuitem-radiogroup">radiogroup</a>;
  attribute boolean <a href="/breakup/specs/html-ui/#dom-menuitem-default" id="the-menuitem-element:dom-menuitem-default">default</a>;
  readonly attribute <a href="/breakup/specs/html-scripting/#htmlelement" id="the-menuitem-element:htmlelement-2">HTMLElement</a>? <a href="/breakup/specs/html-ui/#dom-menuitem-command" id="the-menuitem-element:dom-menuitem-command">command</a>;
};</pre>
   </dd></dl>

  <p>The <code id="the-menuitem-element:the-menuitem-element"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element represents a command that the user can invoke from a popup
  menu (either a <a href="/breakup/specs/html-ui/#attr-contextmenu" id="the-menuitem-element:attr-contextmenu">context menu</a> or the menu of a <a href="/breakup/specs/html-forms/#attr-button-type-menu-state" id="the-menuitem-element:attr-button-type-menu-state">menu button</a>).</p>

  <p>A <code id="the-menuitem-element:the-menuitem-element-2"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element that uses one or more of the
   <code id="the-menuitem-element:attr-menuitem-type-2"><a href="/breakup/specs/html-ui/#attr-menuitem-type">type</a></code>,
   <code id="the-menuitem-element:attr-menuitem-label-2"><a href="/breakup/specs/html-ui/#attr-menuitem-label">label</a></code>,
   <code id="the-menuitem-element:attr-menuitem-icon-2"><a href="/breakup/specs/html-ui/#attr-menuitem-icon">icon</a></code>,
   <code id="the-menuitem-element:attr-menuitem-disabled-2"><a href="/breakup/specs/html-ui/#attr-menuitem-disabled">disabled</a></code>,
   <code id="the-menuitem-element:attr-menuitem-checked-2"><a href="/breakup/specs/html-ui/#attr-menuitem-checked">checked</a></code>, and
   <code id="the-menuitem-element:attr-menuitem-radiogroup-2"><a href="/breakup/specs/html-ui/#attr-menuitem-radiogroup">radiogroup</a></code>
  attributes defines a new command.</p>

  <p>A <code id="the-menuitem-element:the-menuitem-element-3"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element that uses the <code id="the-menuitem-element:attr-menuitem-command-2"><a href="/breakup/specs/html-ui/#attr-menuitem-command">command</a></code> attribute defines a command by reference to another
  one. This allows authors to define a command once, and set its state (e.g. whether it is active or
  disabled) in one place, and have all references to that command in the user interface change at
  the same time.</p>

  <p>If the <code id="the-menuitem-element:attr-menuitem-command-3"><a href="/breakup/specs/html-ui/#attr-menuitem-command">command</a></code> attribute is specified, the element
  is in the <dfn id="indirect-command">indirect command</dfn> mode. If it is not specified, it is in the <dfn id="explicit-command">explicit
  command</dfn> mode. When the element is in the <a href="/breakup/specs/html-ui/#indirect-command" id="the-menuitem-element:indirect-command">indirect command</a> mode, the element
  must not have any of the following attributes specified:
   <code id="the-menuitem-element:attr-menuitem-type-3"><a href="/breakup/specs/html-ui/#attr-menuitem-type">type</a></code>,
   <code id="the-menuitem-element:attr-menuitem-label-3"><a href="/breakup/specs/html-ui/#attr-menuitem-label">label</a></code>,
   <code id="the-menuitem-element:attr-menuitem-icon-3"><a href="/breakup/specs/html-ui/#attr-menuitem-icon">icon</a></code>,
   <code id="the-menuitem-element:attr-menuitem-disabled-3"><a href="/breakup/specs/html-ui/#attr-menuitem-disabled">disabled</a></code>,
   <code id="the-menuitem-element:attr-menuitem-checked-3"><a href="/breakup/specs/html-ui/#attr-menuitem-checked">checked</a></code>,
   <code id="the-menuitem-element:attr-menuitem-radiogroup-3"><a href="/breakup/specs/html-ui/#attr-menuitem-radiogroup">radiogroup</a></code>.
  </p>

  <hr>

  <p>The <dfn id="attr-menuitem-type"><code>type</code></dfn> attribute indicates the kind of
  command: either a normal command with an associated action, or a state or option that can be
  toggled, or a selection of one item from a list of items.</p>

  <p>The attribute is an <a href="/breakup/specs/core-algorithms/#enumerated-attribute" id="the-menuitem-element:enumerated-attribute">enumerated attribute</a> with three keywords and states. The
  "<dfn id="attr-menuitem-type-keyword-command"><code>command</code></dfn>" keyword maps to the
  <a href="/breakup/specs/html-ui/#attr-menuitem-type-state-command" id="the-menuitem-element:attr-menuitem-type-state-command">Command</a> state, the "<dfn id="attr-menuitem-type-keyword-checkbox"><code>checkbox</code></dfn>" keyword maps to the <a href="/breakup/specs/html-ui/#attr-menuitem-type-state-checkbox" id="the-menuitem-element:attr-menuitem-type-state-checkbox">Checkbox</a> state, and the "<dfn id="attr-menuitem-type-keyword-radio"><code>radio</code></dfn>" keyword maps to the <a href="/breakup/specs/html-ui/#attr-menuitem-type-state-radio" id="the-menuitem-element:attr-menuitem-type-state-radio">Radio</a> state. The <i id="the-menuitem-element:missing-value-default"><a href="/breakup/specs/core-algorithms/#missing-value-default">missing value default</a></i> is the <a href="/breakup/specs/html-ui/#attr-menuitem-type-state-command" id="the-menuitem-element:attr-menuitem-type-state-command-2">Command</a> state.</p>

  <dl><dt>The <dfn id="attr-menuitem-type-state-command">Command</dfn> state</dt><dd><p>The element <a href="/breakup/specs/html-scripting/#represents" id="the-menuitem-element:represents">represents</a> a normal command with an associated action.</p></dd><dt>The <dfn id="attr-menuitem-type-state-checkbox">Checkbox</dfn> state</dt><dd><p>The element <a href="/breakup/specs/html-scripting/#represents" id="the-menuitem-element:represents-2">represents</a> a state or option that can be toggled.</p></dd><dt>The <dfn id="attr-menuitem-type-state-radio">Radio</dfn> state</dt><dd><p>The element <a href="/breakup/specs/html-scripting/#represents" id="the-menuitem-element:represents-3">represents</a> a selection of one item from a list of items.</p></dd></dl>

  <p>The <dfn id="attr-menuitem-label"><code>label</code></dfn> attribute gives the name of the
  command, as shown to the user. The <code id="the-menuitem-element:attr-menuitem-label-4"><a href="/breakup/specs/html-ui/#attr-menuitem-label">label</a></code> attribute must
  be specified if the element is in the <a href="/breakup/specs/html-ui/#explicit-command" id="the-menuitem-element:explicit-command">explicit command</a> mode. If the attribute is
  specified, it must have a value that is not the empty string.</p>

  <p>The <dfn id="attr-menuitem-icon"><code>icon</code></dfn> attribute gives a picture that
  represents the command. If the attribute is specified, the attribute's value must contain a
  <a href="/breakup/specs/core-algorithms/#valid-non-empty-url-potentially-surrounded-by-spaces" id="the-menuitem-element:valid-non-empty-url-potentially-surrounded-by-spaces">valid non-empty URL potentially surrounded by spaces</a>. To obtain
  the <a href="/breakup/specs/core-algorithms/#absolute-url" id="the-menuitem-element:absolute-url">absolute URL</a> of the icon when the attribute's value is not the empty string, the
  attribute's value must be <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="the-menuitem-element:resolve-a-url">resolved</a> relative to the element.
  When the attribute is absent, or its value is the empty string, or <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="the-menuitem-element:resolve-a-url-2">resolving</a> its value fails, there is no icon.</p> 

  <p>The <dfn id="attr-menuitem-disabled"><code>disabled</code></dfn> attribute is a
  <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="the-menuitem-element:boolean-attribute">boolean attribute</a> that, if present, indicates that the command is not available in
  the current state.</p>

  <p class="note">The distinction between <code id="the-menuitem-element:attr-menuitem-disabled-4"><a href="/breakup/specs/html-ui/#attr-menuitem-disabled">disabled</a></code> and
  <code id="the-menuitem-element:the-hidden-attribute"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> is subtle. A command would be disabled if, in the same
  context, it could be enabled if only certain aspects of the situation were changed. A command
  would be marked as hidden if, in that situation, the command will never be enabled. For example,
  in the context menu for a water faucet, the command "open" might be disabled if the faucet is
  already open, but the command "eat" would be marked hidden since the faucet could never be
  eaten.</p>

  <p>The <dfn id="attr-menuitem-checked"><code>checked</code></dfn> attribute is a <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="the-menuitem-element:boolean-attribute-2">boolean
  attribute</a> that, if present, indicates that the command is selected. The attribute must be
  omitted unless the <code id="the-menuitem-element:attr-menuitem-type-4"><a href="/breakup/specs/html-ui/#attr-menuitem-type">type</a></code> attribute is in either the <a href="/breakup/specs/html-ui/#attr-menuitem-type-state-checkbox" id="the-menuitem-element:attr-menuitem-type-state-checkbox-2">Checkbox</a> state or the <a href="/breakup/specs/html-ui/#attr-menuitem-type-state-radio" id="the-menuitem-element:attr-menuitem-type-state-radio-2">Radio</a> state.</p>

  <p>The <dfn id="attr-menuitem-radiogroup"><code>radiogroup</code></dfn> attribute gives the
  name of the group of commands that will be toggled when the command itself is toggled, for
  commands whose <code id="the-menuitem-element:attr-menuitem-type-5"><a href="/breakup/specs/html-ui/#attr-menuitem-type">type</a></code> attribute has the value "<code>radio</code>". The scope of the name is the child list of the parent element. The
  attribute must be omitted unless the <code id="the-menuitem-element:attr-menuitem-type-6"><a href="/breakup/specs/html-ui/#attr-menuitem-type">type</a></code> attribute is in
  the <a href="/breakup/specs/html-ui/#attr-menuitem-type-state-radio" id="the-menuitem-element:attr-menuitem-type-state-radio-3">Radio</a> state. When specified, the
  attribute's value must be a non-empty string.</p>

  <hr>

  <p>If a <code id="the-menuitem-element:the-menuitem-element-4"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element <var>slave</var> has a <dfn id="attr-menuitem-command"><code>command</code></dfn> attribute, and there is an element in
  <var>slave</var>'s <a href="/breakup/specs/core-algorithms/#home-subtree" id="the-menuitem-element:home-subtree">home subtree</a> whose <a href="/breakup/specs/core-algorithms/#concept-id" id="the-menuitem-element:concept-id">ID</a> has
  a value equal to the value of <var>slave</var>'s <code id="the-menuitem-element:attr-menuitem-command-4"><a href="/breakup/specs/html-ui/#attr-menuitem-command">command</a></code> attribute, and the first such element in <a href="/breakup/specs/core-algorithms/#tree-order" id="the-menuitem-element:tree-order">tree
  order</a>, hereafter <var>master</var>, itself <a href="/breakup/specs/html-ui/#concept-command" id="the-menuitem-element:concept-command">defines a
  command</a> and either is not a <code id="the-menuitem-element:the-menuitem-element-5"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element or does not itself have a <code id="the-menuitem-element:attr-menuitem-command-5"><a href="/breakup/specs/html-ui/#attr-menuitem-command">command</a></code> attribute, then the <dfn id="master-command">master command</dfn> of <var>slave</var> is <var>master</var>.</p>

  <p>A <code id="the-menuitem-element:the-menuitem-element-6"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element with a <code id="the-menuitem-element:attr-menuitem-command-6"><a href="/breakup/specs/html-ui/#attr-menuitem-command">command</a></code>
  attribute must have a <a href="/breakup/specs/html-ui/#master-command" id="the-menuitem-element:master-command">master command</a>.</p>

  <p class="note">This effectively defines the syntax of the attribute's value as being the ID of
  another element that <a href="/breakup/specs/html-ui/#concept-command" id="the-menuitem-element:concept-command-2">defines a command</a>.</p>

  <hr>

  <p>The <dfn id="attr-menuitem-title"><code>title</code></dfn> attribute gives a hint describing
  the command, which might be shown to the user to help him.</p>

  <p>The <dfn id="attr-menuitem-default"><code>default</code></dfn> attribute indicates, if
  present, that the command is the one that would have been invoked if the user had directly
  activated the menu's subject instead of using the menu. The <code id="the-menuitem-element:attr-menuitem-default-2"><a href="/breakup/specs/html-ui/#attr-menuitem-default">default</a></code> attribute is a <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="the-menuitem-element:boolean-attribute-3">boolean attribute</a>.</p>

  <div class="example">

   <p>In this trivial example, a submit button is given a context menu that has two options, one to
   reset the form, and one to submit the form. The submit command is marked as being the default.</p>

   <pre>&lt;form action="dosearch.pl"&gt;
 &lt;p&gt;&lt;label&gt;Enter search terms: &lt;input type="text" name="terms"&gt;&lt;/label&gt;&lt;/p&gt;
 &lt;p&gt;&lt;input type=submit contextmenu=formmenu id="submitbutton"&gt;&lt;/p&gt;
 &lt;p hidden&gt;&lt;input type=reset id="resetbutton"&gt;&lt;/p&gt;
 &lt;menu type=popup id=formmenu&gt;
  &lt;menuitem command="submitbutton" default&gt;
  &lt;menuitem command="resetbutton"&gt;
 &lt;/menu&gt;
&lt;/form&gt;</pre>

  </div>

  

  <hr>

  <p>The <dfn id="dom-menuitem-type"><code>type</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="the-menuitem-element:reflect">reflect</a> the content attribute of the same name, <a href="/breakup/specs/core-algorithms/#limited-to-only-known-values" id="the-menuitem-element:limited-to-only-known-values">limited to only known
  values</a>.</p>

  <p>The <dfn id="dom-menuitem-label"><code>label</code></dfn>, <dfn id="dom-menuitem-icon"><code>icon</code></dfn>, <dfn id="dom-menuitem-disabled"><code>disabled</code></dfn>, <dfn id="dom-menuitem-checked"><code>checked</code></dfn>, and <dfn id="dom-menuitem-radiogroup"><code>radiogroup</code></dfn>, and <dfn id="dom-menuitem-default"><code>default</code></dfn> IDL attributes must <a href="/breakup/specs/core-algorithms/#reflect" id="the-menuitem-element:reflect-2">reflect</a>
  the respective content attributes of the same name.</p>

  <p>The <dfn id="dom-menuitem-command"><code>command</code></dfn> IDL attribute must return the
  <a href="/breakup/specs/html-ui/#master-command" id="the-menuitem-element:master-command-2">master command</a>, if any, or null otherwise.</p>

  <hr>

  <p>If the element's <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="the-menuitem-element:command-facet-disabledstate">Disabled State</a> is false
  (enabled) then the element's <a href="/breakup/specs/html-ui/#activation-behaviour" id="the-menuitem-element:activation-behaviour">activation behaviour</a> depends on the element's <code id="the-menuitem-element:attr-menuitem-type-7"><a href="/breakup/specs/html-ui/#attr-menuitem-type">type</a></code> and <code id="the-menuitem-element:attr-menuitem-command-7"><a href="/breakup/specs/html-ui/#attr-menuitem-command">command</a></code>
  attributes, as follows:</p>

  <dl class="switch"><dt>If the element has a <a href="/breakup/specs/html-ui/#master-command" id="the-menuitem-element:master-command-3">master command</a> set by its <code id="the-menuitem-element:attr-menuitem-command-8"><a href="/breakup/specs/html-ui/#attr-menuitem-command">command</a></code> attribute</dt><dd><p>The user agent must <a href="/breakup/specs/html-ui/#run-synthetic-click-activation-steps" id="the-menuitem-element:run-synthetic-click-activation-steps">run synthetic click activation steps</a> on the element's
   <a href="/breakup/specs/html-ui/#master-command" id="the-menuitem-element:master-command-4">master command</a>.</p></dd><dt>If the <code id="the-menuitem-element:attr-menuitem-type-8"><a href="/breakup/specs/html-ui/#attr-menuitem-type">type</a></code> attribute is in the <a href="/breakup/specs/html-ui/#attr-menuitem-type-state-checkbox" id="the-menuitem-element:attr-menuitem-type-state-checkbox-3">Checkbox</a> state</dt><dd><p>If the element has a <code id="the-menuitem-element:attr-menuitem-checked-4"><a href="/breakup/specs/html-ui/#attr-menuitem-checked">checked</a></code> attribute, the UA
   must remove that attribute. Otherwise, the UA must add a <code id="the-menuitem-element:attr-menuitem-checked-5"><a href="/breakup/specs/html-ui/#attr-menuitem-checked">checked</a></code> attribute, with the literal value "<code>checked</code>".</p></dd><dt>If the <code id="the-menuitem-element:attr-menuitem-type-9"><a href="/breakup/specs/html-ui/#attr-menuitem-type">type</a></code> attribute is in the <a href="/breakup/specs/html-ui/#attr-menuitem-type-state-radio" id="the-menuitem-element:attr-menuitem-type-state-radio-4">Radio</a> state</dt><dd><p>If the element has a parent, then the UA must walk the list of child nodes of that parent
   element, and for each node that is a <code id="the-menuitem-element:the-menuitem-element-7"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element, if that element has a <code id="the-menuitem-element:attr-menuitem-radiogroup-4"><a href="/breakup/specs/html-ui/#attr-menuitem-radiogroup">radiogroup</a></code> attribute whose value exactly matches the
   current element's (treating missing <code id="the-menuitem-element:attr-menuitem-radiogroup-5"><a href="/breakup/specs/html-ui/#attr-menuitem-radiogroup">radiogroup</a></code>
   attributes as if they were the empty string), and has a <code id="the-menuitem-element:attr-menuitem-checked-6"><a href="/breakup/specs/html-ui/#attr-menuitem-checked">checked</a></code> attribute, must remove that attribute.</p>

   <p>Then, the element's <code id="the-menuitem-element:attr-menuitem-checked-7"><a href="/breakup/specs/html-ui/#attr-menuitem-checked">checked</a></code> attribute must be set
   to the literal value "<code>checked</code>".</p></dd><dt>Otherwise</dt><dd><p>The element's <a href="/breakup/specs/html-ui/#activation-behaviour" id="the-menuitem-element:activation-behaviour-2">activation behaviour</a> is to do nothing.</p></dd></dl>

  <p class="note">Firing a synthetic <code id="the-menuitem-element:event-click"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code> event at the element
  does not cause any of the actions described above to happen.</p>

  

  <p>If the element's <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="the-menuitem-element:command-facet-disabledstate-2">Disabled State</a> is true
  (disabled) then the element has no <a href="/breakup/specs/html-ui/#activation-behaviour" id="the-menuitem-element:activation-behaviour-3">activation behaviour</a>.</p>

  

  <p class="note">The <code id="the-menuitem-element:the-menuitem-element-8"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element is not rendered except as <a href="/breakup/specs/html-ui/#the-menu-element" id="the-menuitem-element:the-menu-element-2">part of a popup menu</a>.</p>

  <div class="example">

   <p>Here is an example of a pop-up menu button with three options that let the user toggle between
   left, center, and right alignment. One could imagine such a toolbar as part of a text editor. The
   menu also has a separator followed by another menu item labeled "Publish", though that menu item
   is disabled.</p>

   <pre>&lt;button type=menu menu=editmenu&gt;Commands...&lt;/button&gt;
&lt;menu type="popup" id="editmenu"&gt;
 &lt;menuitem type="radio" radiogroup="alignment" checked="checked"
          label="Left" icon="icons/alL.png" onclick="setAlign('left')"&gt;
 &lt;menuitem type="radio" radiogroup="alignment"
          label="Center" icon="icons/alC.png" onclick="setAlign('center')"&gt;
 &lt;menuitem type="radio" radiogroup="alignment"
          label="Right" icon="icons/alR.png" onclick="setAlign('right')"&gt;
 &lt;hr&gt;
 &lt;menuitem type="command" disabled
          label="Publish" icon="icons/pub.png" onclick="publish()"&gt;
&lt;/menu&gt;</pre>

  </div></section><section><h2>Context menus</h2>

  <section><h2>Declaring a context menu</h2>

  <p>The <dfn id="attr-contextmenu"><code>contextmenu</code></dfn> attribute gives the element's
  context menu. The value must be the <a href="/breakup/specs/core-algorithms/#concept-id" id="declaring-a-context-menu:concept-id">ID</a> of a <code id="declaring-a-context-menu:the-menu-element"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code>
  element in the same <a href="/breakup/specs/core-algorithms/#home-subtree" id="declaring-a-context-menu:home-subtree">home subtree</a> whose <code id="declaring-a-context-menu:attr-menu-type"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code>
  attribute is in the <a href="/breakup/specs/html-ui/#popup-menu-state" id="declaring-a-context-menu:popup-menu-state">popup menu</a> state.</p>

  <p class="note">When a user right-clicks on an element with a <code id="declaring-a-context-menu:attr-contextmenu"><a href="/breakup/specs/html-ui/#attr-contextmenu">contextmenu</a></code> attribute, the user agent will first fire a <code id="declaring-a-context-menu:event-contextmenu"><a href="/breakup/specs/html/#event-contextmenu">contextmenu</a></code> event at the element, and then, if that event is not
  canceled, a <code id="declaring-a-context-menu:event-show"><a href="/breakup/specs/html/#event-show">show</a></code> event at the <code id="declaring-a-context-menu:the-menu-element-2"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element.</p>

  <div class="example">

   <p>Here is an example of a context menu for an input control:</p>

   <pre>&lt;form name="npc"&gt;
 &lt;label&gt;Character name: &lt;input name=char type=text contextmenu=namemenu required&gt;&lt;/label&gt;
 &lt;menu type=popup id=namemenu&gt;
  &lt;menuitem label="Pick random name" onclick="document.forms.npc.elements.char.value = getRandomName()"&gt;
  &lt;menuitem label="Prefill other fields based on name" onclick="prefillFields(document.forms.npc.elements.char.value)"&gt;
 &lt;/menu&gt;
&lt;/form&gt;</pre>

   <p>This adds two items to the control's context menu, one called "Pick random name", and one
   called "Prefill other fields based on name". They invoke scripts that are not shown in the
   example above.</p>

  </div></section>



  

  <section><h2>Processing model</h2>

  <p>Each element has an <dfn id="assigned-context-menu">assigned context menu</dfn>, which can be null. If an element <var>A</var> has a <code id="processing-model-5:attr-contextmenu"><a href="/breakup/specs/html-ui/#attr-contextmenu">contextmenu</a></code> attribute, and there is
  an element with the ID given by <var>A</var>'s <code id="processing-model-5:attr-contextmenu-2"><a href="/breakup/specs/html-ui/#attr-contextmenu">contextmenu</a></code> attribute's value in <var>A</var>'s
  <a href="/breakup/specs/core-algorithms/#home-subtree" id="processing-model-5:home-subtree">home subtree</a>, and the first such element in <a href="/breakup/specs/core-algorithms/#tree-order" id="processing-model-5:tree-order">tree order</a> is a
  <code id="processing-model-5:the-menu-element"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element whose <code id="processing-model-5:attr-menu-type"><a href="/breakup/specs/html-ui/#attr-menu-type">type</a></code> attribute is in the <a href="/breakup/specs/html-ui/#popup-menu-state" id="processing-model-5:popup-menu-state">popup menu</a> state, then <var>A</var>'s <a href="/breakup/specs/html-ui/#assigned-context-menu" id="processing-model-5:assigned-context-menu">assigned
  context menu</a> is that element. Otherwise, if <var>A</var> has a parent element,
  then <var>A</var>'s <a href="/breakup/specs/html-ui/#assigned-context-menu" id="processing-model-5:assigned-context-menu-2">assigned context menu</a> is the <a href="/breakup/specs/html-ui/#assigned-context-menu" id="processing-model-5:assigned-context-menu-3">assigned context
  menu</a> of its parent element. Otherwise, <var>A</var>'s <a href="/breakup/specs/html-ui/#assigned-context-menu" id="processing-model-5:assigned-context-menu-4">assigned context
  menu</a> is null.</p>

  <p>When an element's context menu is requested (e.g. by the user right-clicking the element, or
  pressing a context menu key), the user agent must apply the appropriate rules from the following
  list:</p>

  <dl class="switch"><dt>If the user requested a context menu using a pointing device</dt><dd><p>The user agent must <a href="/breakup/specs/core-algorithms/#concept-event-fire" id="processing-model-5:concept-event-fire">fire</a> a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="processing-model-5:concept-events-trusted">trusted</a> event with the name <code id="processing-model-5:event-contextmenu"><a href="/breakup/specs/html/#event-contextmenu">contextmenu</a></code>, that bubbles and is cancelable, and that uses the
   <code id="processing-model-5:mouseevent"><a href="/breakup/specs/core-algorithms/#mouseevent">MouseEvent</a></code> interface, at the element for which the menu was requested. The context
   information of the event must be initialised to the same values as the last
   <code id="processing-model-5:mouseevent-2"><a href="/breakup/specs/core-algorithms/#mouseevent">MouseEvent</a></code> user interaction event that was fired as part of the gesture that was
   interpreted as a request for the context menu.</p></dd><dt>Otherwise</dt><dd><p>The user agent must <a href="/breakup/specs/browser-dom/#fire-a-synthetic-mouse-event" id="processing-model-5:fire-a-synthetic-mouse-event">fire a synthetic mouse
   event named <code>contextmenu</code></a> that bubbles and is
   cancelable at the element for which the menu was requested.</p></dd></dl>

  <p class="note">Typically, therefore, the firing of the <code id="processing-model-5:event-contextmenu-2"><a href="/breakup/specs/html/#event-contextmenu">contextmenu</a></code> event will be the default action of a <code id="processing-model-5:event-mouseup"><a href="/breakup/specs/core-algorithms/#event-mouseup">mouseup</a></code> or <code id="processing-model-5:event-keyup"><a href="/breakup/specs/core-algorithms/#event-keyup">keyup</a></code> event. The exact
  sequence of events is UA-dependent, as it will vary based on platform conventions.</p>

  <p>The default action of the <code id="processing-model-5:event-contextmenu-3"><a href="/breakup/specs/html/#event-contextmenu">contextmenu</a></code> event depends on
  whether or not the element for which the menu was requested has a non-null <a href="/breakup/specs/html-ui/#assigned-context-menu" id="processing-model-5:assigned-context-menu-5">assigned context
  menu</a> when the event dispatch has completed, as follows.</p>

  <p>If the <a href="/breakup/specs/html-ui/#assigned-context-menu" id="processing-model-5:assigned-context-menu-6">assigned context menu</a> of the element for which the menu was requested is
  null, the default action must be for the user agent to show its default context menu, if it has
  one.</p>

  <p>Otherwise, let <var>subject</var> be the element for which the menu was requested, and let
  <var>menu</var> be the <a href="/breakup/specs/html-ui/#assigned-context-menu" id="processing-model-5:assigned-context-menu-7">assigned context menu</a> of <var>target</var> immediately after
  the <code id="processing-model-5:event-contextmenu-4"><a href="/breakup/specs/html/#event-contextmenu">contextmenu</a></code> event's dispatch has completed. The user
  agent must <a href="/breakup/specs/core-algorithms/#concept-event-fire" id="processing-model-5:concept-event-fire-2">fire</a> a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="processing-model-5:concept-events-trusted-2">trusted</a> event with the name <code id="processing-model-5:event-show"><a href="/breakup/specs/html/#event-show">show</a></code> at <var>menu</var>, using the <code id="processing-model-5:relatedevent"><a href="/breakup/specs/html-ui/#relatedevent">RelatedEvent</a></code> interface,
  with the <code id="processing-model-5:dom-relatedevent-relatedtarget"><a href="/breakup/specs/html-ui/#dom-relatedevent-relatedtarget">relatedTarget</a></code> attribute initialised
  to <var>subject</var>. The event must be cancelable. </p>

  <p>If <em>this</em> event (the <code id="processing-model-5:event-show-2"><a href="/breakup/specs/html/#event-show">show</a></code> event) is not canceled, then
  the user agent must <a href="/breakup/specs/html-ui/#build-and-show-a-menu" id="processing-model-5:build-and-show-a-menu">build and show</a> the menu for
  <var>menu</var> with <var>subject</var> as the subject.</p>

  <p>The user agent may also provide access to its default context menu, if any, with the context
  menu shown. For example, it could merge the menu items from the two menus together, or provide the
  page's context menu as a submenu of the default menu. In general, user agents are encouraged to
  de-emphasise their own contextual menu items, so as to give the author's context menu the
  appearance of legitimacy — to allow documents to feel like "applications" rather than "mere
  Web pages".</p>

  <p>User agents may provide means for bypassing the context menu processing model, ensuring that
  the user can always access the UA's default context menus. For example, the user agent could
  handle right-clicks that have the Shift key depressed in such a way that it does not fire the
  <code id="processing-model-5:event-contextmenu-5"><a href="/breakup/specs/html/#event-contextmenu">contextmenu</a></code> event and instead always shows the default
  context menu.</p>

  <hr>

  <p>The <dfn id="dom-contextmenu"><code>contextMenu</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="processing-model-5:reflect">reflect</a> the <code id="processing-model-5:attr-contextmenu-3"><a href="/breakup/specs/html-ui/#attr-contextmenu">contextmenu</a></code> content attribute.</p>

  

  <div class="example">

   <p>In this example, an image of cats is given a context menu with four possible commands:</p>

   <pre>&lt;img src="cats.jpeg" alt="Cats" contextmenu=catsmenu&gt;
&lt;menu type="popup" id="catsmenu"&gt;
 &lt;menuitem label="Pet the kittens" onclick="kittens.pet()"&gt;
 &lt;menuitem label="Cuddle with the kittens" onclick="kittens.cuddle()"&gt;
 &lt;menu label="Feed the kittens"&gt;
  &lt;menuitem label="Fish" onclick="kittens.feed(fish)"&gt;
  &lt;menuitem label="Chicken" onclick="kittens.feed(chicken)"&gt;
 &lt;/menu&gt;
&lt;/menu&gt;</pre>

   <p>When a user of a mouse-operated visual Web browser right-clicks on the image, the browser
   might pop up a context menu like this:</p>

   <p><img src="img/contextmenu-collapsed.png" alt="A context menu, shown over a picture of cats, with four lines: the first two offering the menu items described in the markup above ('Pet the kittens' and 'Cuddle with the kittens'), the third giving a submenu labeled 'Feed the kittens', and the fourth, after a horizontal splitter, consisting of only a downwards-pointing disclosure triangle.">

   </p><p>When the user clicks the disclosure triangle, such a user agent would expand the context menu
   in place, to show the browser's own commands:</p>

   <p><img src="img/contextmenu-expanded.png" alt="This would result in the same basic interface, but with a longer menu; the disclosure triangle having been replaced by items such as 'View Image', 'Copy Image', 'Copy Image Location', and so forth.">

  </p></div></section>


  <section><h2>The <code id="the-relatedevent-interfaces:relatedevent"><a href="/breakup/specs/html-ui/#relatedevent">RelatedEvent</a></code> interfaces</h2>

  <pre class="idl">[Constructor(DOMString type, optional <a href="/breakup/specs/html-ui/#relatedeventinit" id="the-relatedevent-interfaces:relatedeventinit">RelatedEventInit</a> eventInitDict)]
interface <dfn id="relatedevent">RelatedEvent</dfn> : <a href="/breakup/specs/core-algorithms/#event" id="the-relatedevent-interfaces:event">Event</a> {
  readonly attribute <a href="/breakup/specs/core-algorithms/#eventtarget" id="the-relatedevent-interfaces:eventtarget">EventTarget</a>? <a href="/breakup/specs/html-ui/#dom-relatedevent-relatedtarget" id="the-relatedevent-interfaces:dom-relatedevent-relatedtarget">relatedTarget</a>;
};

dictionary <dfn id="relatedeventinit">RelatedEventInit</dfn> : <a href="/breakup/specs/core-algorithms/#eventinit" id="the-relatedevent-interfaces:eventinit">EventInit</a> {
  <a href="/breakup/specs/core-algorithms/#eventtarget" id="the-relatedevent-interfaces:eventtarget-2">EventTarget</a>? relatedTarget;
};</pre>

  <dl class="domintro"><dt><var>event</var> . <code id="the-relatedevent-interfaces:dom-relatedevent-relatedtarget-2"><a href="/breakup/specs/html-ui/#dom-relatedevent-relatedtarget">relatedTarget</a></code></dt><dd>

    <p>Returns the other event target involved in this event. For example, when a <code id="the-relatedevent-interfaces:event-show"><a href="/breakup/specs/html/#event-show">show</a></code> event fires on a <code id="the-relatedevent-interfaces:the-menu-element"><a href="/breakup/specs/html-ui/#the-menu-element">menu</a></code> element, the other event
    target involved in the event would be the element for which the menu is being shown.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-relatedevent-relatedtarget"><code>relatedTarget</code></dfn> attribute must
  return the value it was initialised to. When the object is created, this attribute must be
  initialised to null. It represents the other event target that is related to the event.</p></section></section><section><h2>Commands</h2>

  <section><h2>Facets</h2>

  <p>A <dfn id="concept-command">command</dfn> is the abstraction behind menu items, buttons, and
  links. Once a command is defined, other parts of the interface can refer to the same command,
  allowing many access points to a single feature to share facets such as the <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="facets-2:command-facet-disabledstate">Disabled State</a>.</p>

  <p id="facets">Commands are defined to have the following <dfn id="concept-facet">facets</dfn>:</p>

  <dl><dt><dfn id="command-facet-type">Type</dfn></dt><dd>The kind of command: "command", meaning it is a normal command; "radio", meaning that
   triggering the command will, amongst other things, set the <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="facets-2:command-facet-checkedstate">Checked State</a> to true (and probably uncheck some other
   commands); or "checkbox", meaning that triggering the command will, amongst other things, toggle
   the value of the <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="facets-2:command-facet-checkedstate-2">Checked State</a>.</dd><dt><dfn id="command-facet-id">ID</dfn></dt><dd>The name of the command, for referring to the command from the markup or from script. If a
   command has no ID, it is an <dfn id="anonymous-command">anonymous command</dfn>.</dd><dt><dfn id="command-facet-label">Label</dfn></dt><dd>The name of the command as seen by the user.</dd><dt><dfn id="command-facet-hint">Hint</dfn></dt><dd>A helpful or descriptive string that can be shown to the user.</dd><dt><dfn id="command-facet-icon">Icon</dfn></dt><dd>An <a href="/breakup/specs/core-algorithms/#absolute-url" id="facets-2:absolute-url">absolute URL</a> identifying a graphical image that represents the action. A
   command might not have an Icon.</dd><dt><dfn id="command-facet-accesskey">Access Key</dfn></dt><dd>A key combination selected by the user agent that triggers the command. A command might not
   have an Access Key.</dd><dt><dfn id="command-facet-hiddenstate">Hidden State</dfn></dt><dd>Whether the command is hidden or not (basically, whether it should be shown in menus).</dd><dt><dfn id="command-facet-disabledstate">Disabled State</dfn></dt><dd>Whether the command is relevant and can be triggered or not.</dd><dt><dfn id="command-facet-checkedstate">Checked State</dfn></dt><dd>Whether the command is checked or not.</dd><dt><dfn id="command-facet-action">Action</dfn></dt><dd>The actual effect that triggering the command will have. This could be a scripted event
   handler, a <a href="/breakup/specs/core-algorithms/#url" id="facets-2:url">URL</a> to which to <a href="/breakup/specs/browser-dom/#navigate" id="facets-2:navigate">navigate</a>, or a form submission.</dd></dl>


  <p>These facets are exposed on elements using the <dfn id="command-api">command API</dfn>:</p>

  <dl class="domintro"><dt><var>element</var> . <code id="facets-2:dom-command-ro-commandtype"><a href="/breakup/specs/html-ui/#dom-command-ro-commandtype">commandType</a></code></dt><dd>

    <p>Exposes the <a href="/breakup/specs/html-ui/#command-facet-type" id="facets-2:command-facet-type">Type</a> facet of the command.</p>

   </dd><dt><var>element</var> . <code id="facets-2:dom-element-id"><a href="/breakup/specs/core-algorithms/#dom-element-id">id</a></code></dt><dd>

    <p>Exposes the <a href="/breakup/specs/html-ui/#command-facet-id" id="facets-2:command-facet-id">ID</a> facet of the command.</p>

   </dd><dt><var>element</var> . <code id="facets-2:dom-command-ro-commandlabel"><a href="/breakup/specs/html-ui/#dom-command-ro-commandlabel">commandLabel</a></code></dt><dd>

    <p>Exposes the <a href="/breakup/specs/html-ui/#command-facet-label" id="facets-2:command-facet-label">Label</a> facet of the command.</p>

   </dd><dt><var>element</var> . <code id="facets-2:dom-title"><a href="/breakup/specs/html-attributes/#dom-title">title</a></code></dt><dd>

    <p>Exposes the <a href="/breakup/specs/html-ui/#command-facet-hint" id="facets-2:command-facet-hint">Hint</a> facet of the command.</p>

   </dd><dt><var>element</var> . <code id="facets-2:dom-command-ro-commandicon"><a href="/breakup/specs/html-ui/#dom-command-ro-commandicon">commandIcon</a></code></dt><dd>

    <p>Exposes the <a href="/breakup/specs/html-ui/#command-facet-icon" id="facets-2:command-facet-icon">Icon</a> facet of the command.</p>

   </dd><dt><var>element</var> . <code id="facets-2:dom-accesskeylabel"><a href="/breakup/specs/html-ui/#dom-accesskeylabel">accessKeyLabel</a></code></dt><dd>

    <p>Exposes the <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="facets-2:command-facet-accesskey">Access Key</a> facet of the command.</p>

   </dd><dt><var>element</var> . <code id="facets-2:dom-command-ro-commandhidden"><a href="/breakup/specs/html-ui/#dom-command-ro-commandhidden">commandHidden</a></code></dt><dd>

    <p>Exposes the <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="facets-2:command-facet-hiddenstate">Hidden State</a> facet of the command.</p>

   </dd><dt><var>element</var> . <code id="facets-2:dom-command-ro-commanddisabled"><a href="/breakup/specs/html-ui/#dom-command-ro-commanddisabled">commandDisabled</a></code></dt><dd>

    <p>Exposes the <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="facets-2:command-facet-disabledstate-2">Disabled State</a> facet of the command.</p>

   </dd><dt><var>element</var> . <code id="facets-2:dom-command-ro-commandchecked"><a href="/breakup/specs/html-ui/#dom-command-ro-commandchecked">commandChecked</a></code></dt><dd>

    <p>Exposes the <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="facets-2:command-facet-checkedstate-3">Checked State</a> facet of the command.</p>

   </dd><dt><var>element</var> . <code id="facets-2:dom-click"><a href="/breakup/specs/html-ui/#dom-click">click</a></code>()</dt><dd>

    <p>Triggers the <a href="/breakup/specs/html-ui/#command-facet-action" id="facets-2:command-facet-action">Action</a> of the command.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-command-ro-commandtype"><code>commandType</code></dfn> attribute must
  return a string whose value is either "<code>command</code>", "<code>radio</code>", or "<code>checkbox</code>", depending on whether the <a href="/breakup/specs/html-ui/#command-facet-type" id="facets-2:command-facet-type-2">Type</a> of the command defined by the element is "command",
  "radio", or "checkbox" respectively. If the element does not define a command, it must return
  null.</p>

  <p>The <dfn id="dom-command-ro-commandlabel"><code>commandLabel</code></dfn> attribute must
  return the command's <a href="/breakup/specs/html-ui/#command-facet-label" id="facets-2:command-facet-label-2">Label</a>, or null if the element does
  not define a command or does not specify a <a href="/breakup/specs/html-ui/#command-facet-label" id="facets-2:command-facet-label-3">Label</a>.</p>

  <p>The <dfn id="dom-command-ro-commandicon"><code>commandIcon</code></dfn> attribute must
  return the <a href="/breakup/specs/core-algorithms/#absolute-url" id="facets-2:absolute-url-2">absolute URL</a> of the command's <a href="/breakup/specs/html-ui/#command-facet-icon" id="facets-2:command-facet-icon-2">Icon</a>. If the element does not specify an icon, or if the element
  does not define a command, then the attribute must return null.</p>

  <p>The <dfn id="dom-command-ro-commandhidden"><code>commandHidden</code></dfn> attribute must
  return true if the command's <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="facets-2:command-facet-hiddenstate-2">Hidden State</a> is that
  the command is hidden, and false if the command is not hidden. If the element does not define a
  command, the attribute must return null.</p>

  <p>The <dfn id="dom-command-ro-commanddisabled"><code>commandDisabled</code></dfn> attribute
  must return true if the command's <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="facets-2:command-facet-disabledstate-3">Disabled State</a>
  is that the command is disabled, and false if the command is not disabled. This attribute is not
  affected by the command's <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="facets-2:command-facet-hiddenstate-3">Hidden State</a>. If the
  element does not define a command, the attribute must return null.</p>

  <p>The <dfn id="dom-command-ro-commandchecked"><code>commandChecked</code></dfn> attribute must
  return true if the command's <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="facets-2:command-facet-checkedstate-4">Checked State</a> is that
  the command is checked, and false if it is that the command is not checked. If the element does
  not define a command, the attribute must return null.</p>



  <p class="note">The <a href="/breakup/specs/html-ui/#command-facet-id" id="facets-2:command-facet-id-2">ID</a> facet is exposed by the <code id="facets-2:dom-element-id-2"><a href="/breakup/specs/core-algorithms/#dom-element-id">id</a></code> IDL attribute, the <a href="/breakup/specs/html-ui/#command-facet-hint" id="facets-2:command-facet-hint-2">Hint</a>
  facet is exposed by the <code id="facets-2:dom-title-2"><a href="/breakup/specs/html-attributes/#dom-title">title</a></code> IDL attribute, and the <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="facets-2:command-facet-accesskey-2">AccessKey</a> facet is exposed by the <code id="facets-2:dom-accesskeylabel-2"><a href="/breakup/specs/html-ui/#dom-accesskeylabel">accessKeyLabel</a></code> IDL attribute.</p>

  

  <hr>

  <dl class="domintro"><dt><var>document</var> . <code id="facets-2:dom-document-commands"><a href="/breakup/specs/html-ui/#dom-document-commands">commands</a></code></dt><dd>
    <p>Returns an <code id="facets-2:htmlcollection"><a href="/breakup/specs/core-algorithms/#htmlcollection">HTMLCollection</a></code> of the elements in the <code id="facets-2:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> that
    define commands and have IDs.</p>
   </dd></dl>

  

  <p>The <dfn id="dom-document-commands"><code>commands</code></dfn> attribute of the document's
  <code id="facets-2:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> interface must return an <code id="facets-2:htmlcollection-2"><a href="/breakup/specs/core-algorithms/#htmlcollection">HTMLCollection</a></code> rooted at the
  <code id="facets-2:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code> node, whose filter matches only elements that <a href="/breakup/specs/html-ui/#concept-command" id="facets-2:concept-command">define commands</a> and have <a href="/breakup/specs/html-ui/#command-facet-id" id="facets-2:command-facet-id-3">IDs</a>.</p>

  


  <hr>

  <p id="expose-commands-in-ui">User agents may expose the <a href="/breakup/specs/html-ui/#concept-command" id="facets-2:concept-command-2">commands</a> that match the following criteria:</p>

  <ul class="brief"><li>The <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="facets-2:command-facet-hiddenstate-4">Hidden State</a> facet is false (visible)</li><li>The element is <a href="/breakup/specs/core-algorithms/#in-a-document" id="facets-2:in-a-document">in a <code>Document</code></a> that has an associated <a href="/breakup/specs/browser-dom/#browsing-context" id="facets-2:browsing-context">browsing
   context</a>.</li><li>Neither the element nor any of its ancestors has a <code id="facets-2:the-hidden-attribute"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code>
   attribute specified.</li><li>The element is not a <code id="facets-2:the-menuitem-element"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element, or it is a child of a <a href="/breakup/specs/html-ui/#currently-relevant-menu-element" id="facets-2:currently-relevant-menu-element">currently
   relevant <code>menu</code> element</a>, or it has an <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="facets-2:command-facet-accesskey-3">Access Key</a>.</li></ul>

  <p>User agents are encouraged to do this especially for commands that have <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="facets-2:command-facet-accesskey-4">Access Keys</a>, as a way to advertise those keys to the
  user.</p>

  <p class="example">For example, such commands could be listed in the user agent's menu bar.</p></section>


  

  <section><h2><dfn>Using the <code>a</code> element to define a command</dfn></h2>

  <p>An <code id="using-the-a-element-to-define-a-command:the-a-element"><a href="/breakup/specs/html-linking/#the-a-element">a</a></code> element with an <code id="using-the-a-element-to-define-a-command:attr-hyperlink-href"><a href="/breakup/specs/html-linking/#attr-hyperlink-href">href</a></code> attribute <a href="/breakup/specs/html-ui/#concept-command" id="using-the-a-element-to-define-a-command:concept-command">defines a command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-a-element-to-define-a-command:command-facet-type">Type</a> of the command is "command".</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-id" id="using-the-a-element-to-define-a-command:command-facet-id">ID</a> of the command is the value of the <code id="using-the-a-element-to-define-a-command:the-id-attribute"><a href="/breakup/specs/html-attributes/#the-id-attribute">id</a></code> attribute of the element, if the attribute is present and not empty.
  Otherwise the command is an <a href="/breakup/specs/html-ui/#anonymous-command" id="using-the-a-element-to-define-a-command:anonymous-command">anonymous command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-a-element-to-define-a-command:command-facet-label">Label</a> of the command is the string given by the
  element's <code id="using-the-a-element-to-define-a-command:textcontent"><a href="/breakup/specs/core-algorithms/#textcontent">textContent</a></code> IDL attribute.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-a-element-to-define-a-command:command-facet-hint">Hint</a> of the command is the value of the <code id="using-the-a-element-to-define-a-command:attr-title"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attribute of the element. If the attribute is not present, the
  <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-a-element-to-define-a-command:command-facet-hint-2">Hint</a> is the empty string.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-a-element-to-define-a-command:command-facet-icon">Icon</a> of the command is the <a href="/breakup/specs/core-algorithms/#absolute-url" id="using-the-a-element-to-define-a-command:absolute-url">absolute
  URL</a> obtained from <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="using-the-a-element-to-define-a-command:resolve-a-url">resolving</a> the value of the <code id="using-the-a-element-to-define-a-command:attr-img-src"><a href="/breakup/specs/html-images/#attr-img-src">src</a></code> attribute of the first <code id="using-the-a-element-to-define-a-command:the-img-element"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> element descendant of the
  element in <a href="/breakup/specs/core-algorithms/#tree-order" id="using-the-a-element-to-define-a-command:tree-order">tree order</a>, relative to that element, if there is such an element and
  resolving its attribute is successful. Otherwise, there is no <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-a-element-to-define-a-command:command-facet-icon-2">Icon</a> for the command.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="using-the-a-element-to-define-a-command:command-facet-accesskey">AccessKey</a> of the command is the element's
  <a href="/breakup/specs/html-ui/#assigned-access-key" id="using-the-a-element-to-define-a-command:assigned-access-key">assigned access key</a>, if any.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="using-the-a-element-to-define-a-command:command-facet-hiddenstate">Hidden State</a> of the command is true (hidden)
  if the element has a <code id="using-the-a-element-to-define-a-command:the-hidden-attribute"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute, and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="using-the-a-element-to-define-a-command:command-facet-disabledstate">Disabled State</a> facet of the command is
  true if the element or one of its ancestors is <a href="/breakup/specs/html-ui/#inert" id="using-the-a-element-to-define-a-command:inert">inert</a>, and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="using-the-a-element-to-define-a-command:command-facet-checkedstate">Checked State</a> of the command is always
  false. (The command is never checked.)</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-action" id="using-the-a-element-to-define-a-command:command-facet-action">Action</a> of the command, if the element has a
  defined <a href="/breakup/specs/html-ui/#activation-behaviour" id="using-the-a-element-to-define-a-command:activation-behaviour">activation behaviour</a>, is to <a href="/breakup/specs/html-ui/#run-synthetic-click-activation-steps" id="using-the-a-element-to-define-a-command:run-synthetic-click-activation-steps">run synthetic click activation steps</a>
  on the element. Otherwise, it is just to <a href="/breakup/specs/browser-dom/#fire-a-click-event" id="using-the-a-element-to-define-a-command:fire-a-click-event">fire a <code>click</code>
  event</a> at the element.</p></section>


  <section><h2><dfn>Using the <code>button</code> element to define a command</dfn></h2>

  <p>A <code id="using-the-button-element-to-define-a-command:the-button-element"><a href="/breakup/specs/html-forms/#the-button-element">button</a></code> element always <a href="/breakup/specs/html-ui/#concept-command" id="using-the-button-element-to-define-a-command:concept-command">defines a
  command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-button-element-to-define-a-command:command-facet-type">Type</a>, <a href="/breakup/specs/html-ui/#command-facet-id" id="using-the-button-element-to-define-a-command:command-facet-id">ID</a>,
  <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-button-element-to-define-a-command:command-facet-label">Label</a>, <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-button-element-to-define-a-command:command-facet-hint">Hint</a>,
  <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-button-element-to-define-a-command:command-facet-icon">Icon</a>, <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="using-the-button-element-to-define-a-command:command-facet-accesskey">Access
  Key</a>, <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="using-the-button-element-to-define-a-command:command-facet-hiddenstate">Hidden State</a>, <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="using-the-button-element-to-define-a-command:command-facet-checkedstate">Checked State</a>, and <a href="/breakup/specs/html-ui/#command-facet-action" id="using-the-button-element-to-define-a-command:command-facet-action">Action</a> facets of the command are determined <a href="/breakup/specs/html-ui/#using-the-a-element-to-define-a-command" id="using-the-button-element-to-define-a-command:using-the-a-element-to-define-a-command">as for <code>a</code> elements</a> (see the previous section).</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="using-the-button-element-to-define-a-command:command-facet-disabledstate">Disabled State</a> of the command is true if
  the element or one of its ancestors is <a href="/breakup/specs/html-ui/#inert" id="using-the-button-element-to-define-a-command:inert">inert</a>, or if the element's <a href="/breakup/specs/html-forms/#concept-fe-disabled" id="using-the-button-element-to-define-a-command:concept-fe-disabled">disabled</a> state is set, and false otherwise.</p></section>


  <section><h2><dfn>Using the <code>input</code> element to define a command</dfn></h2>

  <p>An <code id="using-the-input-element-to-define-a-command:the-input-element"><a href="/breakup/specs/html-forms/#the-input-element">input</a></code> element whose <code id="using-the-input-element-to-define-a-command:attr-input-type"><a href="/breakup/specs/html-forms/#attr-input-type">type</a></code> attribute is in
  one of the <a href="/breakup/specs/html-forms/#submit-button-state-(type=submit)" id="using-the-input-element-to-define-a-command:submit-button-state-(type=submit)">Submit Button</a>, <a href="/breakup/specs/html-forms/#reset-button-state-(type=reset)" id="using-the-input-element-to-define-a-command:reset-button-state-(type=reset)">Reset Button</a>, <a href="/breakup/specs/html-forms/#image-button-state-(type=image)" id="using-the-input-element-to-define-a-command:image-button-state-(type=image)">Image
  Button</a>, <a href="/breakup/specs/html-forms/#button-state-(type=button)" id="using-the-input-element-to-define-a-command:button-state-(type=button)">Button</a>, <a href="/breakup/specs/html-forms/#radio-button-state-(type=radio)" id="using-the-input-element-to-define-a-command:radio-button-state-(type=radio)">Radio Button</a>, or <a href="/breakup/specs/html-forms/#checkbox-state-(type=checkbox)" id="using-the-input-element-to-define-a-command:checkbox-state-(type=checkbox)">Checkbox</a> states <a href="/breakup/specs/html-ui/#concept-command" id="using-the-input-element-to-define-a-command:concept-command">defines a
  command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-input-element-to-define-a-command:command-facet-type">Type</a> of the command is "radio" if the <code id="using-the-input-element-to-define-a-command:attr-input-type-2"><a href="/breakup/specs/html-forms/#attr-input-type">type</a></code> attribute is in the <a href="/breakup/specs/html-forms/#radio-button-state-(type=radio)" id="using-the-input-element-to-define-a-command:radio-button-state-(type=radio)-2">Radio
  Button</a> state, "checkbox" if the <code id="using-the-input-element-to-define-a-command:attr-input-type-3"><a href="/breakup/specs/html-forms/#attr-input-type">type</a></code> attribute is in
  the <a href="/breakup/specs/html-forms/#checkbox-state-(type=checkbox)" id="using-the-input-element-to-define-a-command:checkbox-state-(type=checkbox)-2">Checkbox</a> state, and "command" otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-id" id="using-the-input-element-to-define-a-command:command-facet-id">ID</a> of the command is the value of the <code id="using-the-input-element-to-define-a-command:the-id-attribute"><a href="/breakup/specs/html-attributes/#the-id-attribute">id</a></code> attribute of the element, if the attribute is present and not empty.
  Otherwise the command is an <a href="/breakup/specs/html-ui/#anonymous-command" id="using-the-input-element-to-define-a-command:anonymous-command">anonymous command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-input-element-to-define-a-command:command-facet-label">Label</a> of the command depends on the Type of the
  command:</p>

  <p>If the <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-input-element-to-define-a-command:command-facet-type-2">Type</a> is "command", then it is the string given
  by the <code id="using-the-input-element-to-define-a-command:attr-input-value"><a href="/breakup/specs/html-forms/#attr-input-value">value</a></code> attribute, if any, and a UA-dependent,
  locale-dependent value that the UA uses to label the button itself if the attribute is absent.</p>

  <p>Otherwise, the <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-input-element-to-define-a-command:command-facet-type-3">Type</a> is "radio" or "checkbox". If the
  element is a <a href="/breakup/specs/html-forms/#labeled-control" id="using-the-input-element-to-define-a-command:labeled-control">labeled control</a>, the <code id="using-the-input-element-to-define-a-command:textcontent"><a href="/breakup/specs/core-algorithms/#textcontent">textContent</a></code> of the first
  <code id="using-the-input-element-to-define-a-command:the-label-element"><a href="/breakup/specs/html-forms/#the-label-element">label</a></code> element in <a href="/breakup/specs/core-algorithms/#tree-order" id="using-the-input-element-to-define-a-command:tree-order">tree order</a> whose <a href="/breakup/specs/html-forms/#labeled-control" id="using-the-input-element-to-define-a-command:labeled-control-2">labeled control</a> is the
  element in question is the <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-input-element-to-define-a-command:command-facet-label-2">Label</a> (in DOM terms, this is
  the string given by <code><var>element</var>.labels[0].textContent</code>). Otherwise,
  the value of the <code id="using-the-input-element-to-define-a-command:attr-input-value-2"><a href="/breakup/specs/html-forms/#attr-input-value">value</a></code> attribute, if present, is the <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-input-element-to-define-a-command:command-facet-label-3">Label</a>. Otherwise, the <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-input-element-to-define-a-command:command-facet-label-4">Label</a> is the empty string.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-input-element-to-define-a-command:command-facet-hint">Hint</a> of the command is the value of the <code id="using-the-input-element-to-define-a-command:attr-title"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attribute of the <code id="using-the-input-element-to-define-a-command:the-input-element-2"><a href="/breakup/specs/html-forms/#the-input-element">input</a></code> element. If the attribute is
  not present, the <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-input-element-to-define-a-command:command-facet-hint-2">Hint</a> is the empty string.</p>

  <p>If the element's <code id="using-the-input-element-to-define-a-command:attr-input-type-4"><a href="/breakup/specs/html-forms/#attr-input-type">type</a></code> attribute is in the <a href="/breakup/specs/html-forms/#image-button-state-(type=image)" id="using-the-input-element-to-define-a-command:image-button-state-(type=image)-2">Image Button</a> state, and the element has a <code id="using-the-input-element-to-define-a-command:attr-img-src"><a href="/breakup/specs/html-images/#attr-img-src">src</a></code> attribute, and that attribute's value can be successfully <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="using-the-input-element-to-define-a-command:resolve-a-url">resolved</a> relative to the element, then the <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-input-element-to-define-a-command:command-facet-icon">Icon</a> of the command is the <a href="/breakup/specs/core-algorithms/#absolute-url" id="using-the-input-element-to-define-a-command:absolute-url">absolute URL</a> obtained
  from resolving that attribute that way. Otherwise, there is no <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-input-element-to-define-a-command:command-facet-icon-2">Icon</a> for the command.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="using-the-input-element-to-define-a-command:command-facet-accesskey">AccessKey</a> of the command is the element's
  <a href="/breakup/specs/html-ui/#assigned-access-key" id="using-the-input-element-to-define-a-command:assigned-access-key">assigned access key</a>, if any.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="using-the-input-element-to-define-a-command:command-facet-hiddenstate">Hidden State</a> of the command is true (hidden)
  if the element has a <code id="using-the-input-element-to-define-a-command:the-hidden-attribute"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute, and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="using-the-input-element-to-define-a-command:command-facet-disabledstate">Disabled State</a> of the command is true if
  the element or one of its ancestors is <a href="/breakup/specs/html-ui/#inert" id="using-the-input-element-to-define-a-command:inert">inert</a>, or if the element's <a href="/breakup/specs/html-forms/#concept-fe-disabled" id="using-the-input-element-to-define-a-command:concept-fe-disabled">disabled</a> state is set, and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="using-the-input-element-to-define-a-command:command-facet-checkedstate">Checked State</a> of the command is true if the
  command is of <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-input-element-to-define-a-command:command-facet-type-4">Type</a> "radio" or "checkbox" and the element
  is <a href="/breakup/specs/html-forms/#concept-fe-checked" id="using-the-input-element-to-define-a-command:concept-fe-checked">checked</a> attribute, and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-action" id="using-the-input-element-to-define-a-command:command-facet-action">Action</a> of the command, if the element has a
  defined <a href="/breakup/specs/html-ui/#activation-behaviour" id="using-the-input-element-to-define-a-command:activation-behaviour">activation behaviour</a>, is to <a href="/breakup/specs/html-ui/#run-synthetic-click-activation-steps" id="using-the-input-element-to-define-a-command:run-synthetic-click-activation-steps">run synthetic click activation steps</a>
  on the element. Otherwise, it is just to <a href="/breakup/specs/browser-dom/#fire-a-click-event" id="using-the-input-element-to-define-a-command:fire-a-click-event">fire a <code>click</code>
  event</a> at the element.</p></section>


  <section><h2><dfn>Using the <code>option</code> element to define a command</dfn></h2>

  <p>An <code id="using-the-option-element-to-define-a-command:the-option-element"><a href="/breakup/specs/html-forms/#the-option-element">option</a></code> element with an ancestor <code id="using-the-option-element-to-define-a-command:the-select-element"><a href="/breakup/specs/html-forms/#the-select-element">select</a></code> element and either no <code id="using-the-option-element-to-define-a-command:attr-option-value"><a href="/breakup/specs/html-forms/#attr-option-value">value</a></code> attribute or a <code id="using-the-option-element-to-define-a-command:attr-option-value-2"><a href="/breakup/specs/html-forms/#attr-option-value">value</a></code>
  attribute that is not the empty string <a href="/breakup/specs/html-ui/#concept-command" id="using-the-option-element-to-define-a-command:concept-command">defines a command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-option-element-to-define-a-command:command-facet-type">Type</a> of the command is "radio" if the
  <code id="using-the-option-element-to-define-a-command:the-option-element-2"><a href="/breakup/specs/html-forms/#the-option-element">option</a></code>'s nearest ancestor <code id="using-the-option-element-to-define-a-command:the-select-element-2"><a href="/breakup/specs/html-forms/#the-select-element">select</a></code> element has no <code id="using-the-option-element-to-define-a-command:attr-select-multiple"><a href="/breakup/specs/html-forms/#attr-select-multiple">multiple</a></code> attribute, and "checkbox" if it does.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-id" id="using-the-option-element-to-define-a-command:command-facet-id">ID</a> of the command is the value of the <code id="using-the-option-element-to-define-a-command:the-id-attribute"><a href="/breakup/specs/html-attributes/#the-id-attribute">id</a></code> attribute of the element, if the attribute is present and not empty.
  Otherwise the command is an <a href="/breakup/specs/html-ui/#anonymous-command" id="using-the-option-element-to-define-a-command:anonymous-command">anonymous command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-option-element-to-define-a-command:command-facet-label">Label</a> of the command is the value of the
  <code id="using-the-option-element-to-define-a-command:the-option-element-3"><a href="/breakup/specs/html-forms/#the-option-element">option</a></code> element's <code id="using-the-option-element-to-define-a-command:attr-option-label"><a href="/breakup/specs/html-forms/#attr-option-label">label</a></code> attribute, if there is
  one, or else the value of <code id="using-the-option-element-to-define-a-command:the-option-element-4"><a href="/breakup/specs/html-forms/#the-option-element">option</a></code> element's <code id="using-the-option-element-to-define-a-command:textcontent"><a href="/breakup/specs/core-algorithms/#textcontent">textContent</a></code> IDL attribute,
  with <a href="/breakup/specs/core-algorithms/#strip-leading-and-trailing-whitespace" id="using-the-option-element-to-define-a-command:strip-leading-and-trailing-whitespace">leading and trailing whitespace
  stripped</a>, and with any sequences of two or more <a href="/breakup/specs/core-algorithms/#space-character" id="using-the-option-element-to-define-a-command:space-character">space
  characters</a> replaced by a single U+0020 SPACE character.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-option-element-to-define-a-command:command-facet-hint">Hint</a> of the command is the string given by the
  element's <code id="using-the-option-element-to-define-a-command:attr-title"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attribute, if any, and the empty string if the
  attribute is absent.</p>

  <p>There is no <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-option-element-to-define-a-command:command-facet-icon">Icon</a> for the command.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="using-the-option-element-to-define-a-command:command-facet-accesskey">AccessKey</a> of the command is the element's
  <a href="/breakup/specs/html-ui/#assigned-access-key" id="using-the-option-element-to-define-a-command:assigned-access-key">assigned access key</a>, if any.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="using-the-option-element-to-define-a-command:command-facet-hiddenstate">Hidden State</a> of the command is true (hidden)
  if the element has a <code id="using-the-option-element-to-define-a-command:the-hidden-attribute"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute, and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="using-the-option-element-to-define-a-command:command-facet-disabledstate">Disabled State</a> of the command is true if
  the element is <a href="/breakup/specs/html-forms/#concept-option-disabled" id="using-the-option-element-to-define-a-command:concept-option-disabled">disabled</a>, or if its nearest ancestor
  <code id="using-the-option-element-to-define-a-command:the-select-element-3"><a href="/breakup/specs/html-forms/#the-select-element">select</a></code> element is <a href="/breakup/specs/html-forms/#concept-fe-disabled" id="using-the-option-element-to-define-a-command:concept-fe-disabled">disabled</a>, or if it or one
  of its ancestors is <a href="/breakup/specs/html-ui/#inert" id="using-the-option-element-to-define-a-command:inert">inert</a>, and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="using-the-option-element-to-define-a-command:command-facet-checkedstate">Checked State</a> of the command is true
  (checked) if the element's <a href="/breakup/specs/html-forms/#concept-option-selectedness" id="using-the-option-element-to-define-a-command:concept-option-selectedness">selectedness</a> is true,
  and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-action" id="using-the-option-element-to-define-a-command:command-facet-action">Action</a> of the command depends on its <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-option-element-to-define-a-command:command-facet-type-2">Type</a>. If the command is of <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-option-element-to-define-a-command:command-facet-type-3">Type</a> "radio" then it must <a href="/breakup/specs/html-forms/#concept-select-pick" id="using-the-option-element-to-define-a-command:concept-select-pick">pick</a> the <code id="using-the-option-element-to-define-a-command:the-option-element-5"><a href="/breakup/specs/html-forms/#the-option-element">option</a></code> element. Otherwise, it must <a href="/breakup/specs/html-forms/#concept-select-toggle" id="using-the-option-element-to-define-a-command:concept-select-toggle">toggle</a> the <code id="using-the-option-element-to-define-a-command:the-option-element-6"><a href="/breakup/specs/html-forms/#the-option-element">option</a></code> element.</p></section>



  <section><h2>Using the <dfn><code>menuitem</code></dfn> element to define a
  command</h2>

  <p>A <code id="using-the-menuitem-element-to-define-a-command:the-menuitem-element"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element that does not have a <code id="using-the-menuitem-element-to-define-a-command:attr-menuitem-command"><a href="/breakup/specs/html-ui/#attr-menuitem-command">command</a></code> attribute <a href="/breakup/specs/html-ui/#concept-command" id="using-the-menuitem-element-to-define-a-command:concept-command">defines a
  command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-menuitem-element-to-define-a-command:command-facet-type">Type</a> of the command is "radio" if the
  <code id="using-the-menuitem-element-to-define-a-command:the-menuitem-element-2"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code>'s <code id="using-the-menuitem-element-to-define-a-command:attr-menuitem-type"><a href="/breakup/specs/html-ui/#attr-menuitem-type">type</a></code> attribute is "<code id="using-the-menuitem-element-to-define-a-command:attr-menuitem-type-keyword-radio"><a href="/breakup/specs/html-ui/#attr-menuitem-type-keyword-radio">radio</a></code>", "checkbox" if the attribute's value is
  "<code id="using-the-menuitem-element-to-define-a-command:attr-menuitem-type-keyword-checkbox"><a href="/breakup/specs/html-ui/#attr-menuitem-type-keyword-checkbox">checkbox</a></code>", and "command" otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-id" id="using-the-menuitem-element-to-define-a-command:command-facet-id">ID</a> of the command is the value of the <code id="using-the-menuitem-element-to-define-a-command:the-id-attribute"><a href="/breakup/specs/html-attributes/#the-id-attribute">id</a></code> attribute of the element, if the attribute is present and not empty.
  Otherwise the command is an <a href="/breakup/specs/html-ui/#anonymous-command" id="using-the-menuitem-element-to-define-a-command:anonymous-command">anonymous command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-menuitem-element-to-define-a-command:command-facet-label">Label</a> of the command is the value of the element's
  <code id="using-the-menuitem-element-to-define-a-command:attr-menuitem-label"><a href="/breakup/specs/html-ui/#attr-menuitem-label">label</a></code> attribute, if there is one, or the empty string if
  it doesn't.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-menuitem-element-to-define-a-command:command-facet-hint">Hint</a> of the command is the string given by the
  element's <code id="using-the-menuitem-element-to-define-a-command:attr-menuitem-title"><a href="/breakup/specs/html-ui/#attr-menuitem-title">title</a></code> attribute, if any, and the empty string
  if the attribute is absent.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-menuitem-element-to-define-a-command:command-facet-icon">Icon</a> for the command is the <a href="/breakup/specs/core-algorithms/#absolute-url" id="using-the-menuitem-element-to-define-a-command:absolute-url">absolute
  URL</a> obtained from <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="using-the-menuitem-element-to-define-a-command:resolve-a-url">resolving</a> the value of the element's
  <code id="using-the-menuitem-element-to-define-a-command:attr-menuitem-icon"><a href="/breakup/specs/html-ui/#attr-menuitem-icon">icon</a></code> attribute, relative to the element, if it has such an
  attribute and resolving it is successful. Otherwise, there is no <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-menuitem-element-to-define-a-command:command-facet-icon-2">Icon</a> for the command.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="using-the-menuitem-element-to-define-a-command:command-facet-accesskey">AccessKey</a> of the command is the element's
  <a href="/breakup/specs/html-ui/#assigned-access-key" id="using-the-menuitem-element-to-define-a-command:assigned-access-key">assigned access key</a>, if any.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="using-the-menuitem-element-to-define-a-command:command-facet-hiddenstate">Hidden State</a> of the command is true (hidden)
  if the element has a <code id="using-the-menuitem-element-to-define-a-command:the-hidden-attribute"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute, and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="using-the-menuitem-element-to-define-a-command:command-facet-disabledstate">Disabled State</a> of the command is true if
  the element or one of its ancestors is <a href="/breakup/specs/html-ui/#inert" id="using-the-menuitem-element-to-define-a-command:inert">inert</a>, or if the element has a <code id="using-the-menuitem-element-to-define-a-command:attr-menuitem-disabled"><a href="/breakup/specs/html-ui/#attr-menuitem-disabled">disabled</a></code> attribute, and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="using-the-menuitem-element-to-define-a-command:command-facet-checkedstate">Checked State</a> of the command is true
  (checked) if the element has a <code id="using-the-menuitem-element-to-define-a-command:attr-menuitem-checked"><a href="/breakup/specs/html-ui/#attr-menuitem-checked">checked</a></code> attribute, and
  false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-action" id="using-the-menuitem-element-to-define-a-command:command-facet-action">Action</a> of the command, if the element has a
  defined <a href="/breakup/specs/html-ui/#activation-behaviour" id="using-the-menuitem-element-to-define-a-command:activation-behaviour">activation behaviour</a>, is to
  <a href="/breakup/specs/html-ui/#run-synthetic-click-activation-steps" id="using-the-menuitem-element-to-define-a-command:run-synthetic-click-activation-steps">run synthetic click activation steps</a> on the element. Otherwise, it is just to
  <a href="/breakup/specs/browser-dom/#fire-a-click-event" id="using-the-menuitem-element-to-define-a-command:fire-a-click-event">fire a <code>click</code> event</a> at the element.</p></section>



  <section><h2><dfn>Using the <code>command</code> attribute on <code>menuitem</code> elements to define
  a command indirectly</dfn></h2>

  <p>A <code id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:the-menuitem-element"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> element with a <a href="/breakup/specs/html-ui/#master-command" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:master-command">master command</a> <a href="/breakup/specs/html-ui/#concept-command" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:concept-command">defines a command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-type">Type</a> of the command is the <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-type-2">Type</a> of the <a href="/breakup/specs/html-ui/#master-command" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:master-command-2">master command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-id" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-id">ID</a> of the command is the value of the <code id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:the-id-attribute"><a href="/breakup/specs/html-attributes/#the-id-attribute">id</a></code> attribute of the element, if the attribute is present and not empty.
  Otherwise the command is an <a href="/breakup/specs/html-ui/#anonymous-command" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:anonymous-command">anonymous command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-label">Label</a> of the command is the <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-label-2">Label</a> of the <a href="/breakup/specs/html-ui/#master-command" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:master-command-3">master command</a>.</p>

  <p>If the element has a <code id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:attr-title"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attribute, then the <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-hint">Hint</a> of the command is the value of that <code id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:attr-title-2"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attribute. Otherwise, the <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-hint-2">Hint</a> of the command is the <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-hint-3">Hint</a> of the <a href="/breakup/specs/html-ui/#master-command" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:master-command-4">master command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-icon">Icon</a> of the command is the <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-icon-2">Icon</a> of the <a href="/breakup/specs/html-ui/#master-command" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:master-command-5">master command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-accesskey">AccessKey</a> of the command is the element's
  <a href="/breakup/specs/html-ui/#assigned-access-key" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:assigned-access-key">assigned access key</a>, if any.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-hiddenstate">Hidden State</a> of the command is the <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-hiddenstate-2">Hidden State</a> of the <a href="/breakup/specs/html-ui/#master-command" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:master-command-6">master command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-disabledstate">Disabled State</a> of the command is the <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-disabledstate-2">Disabled State</a> of the <a href="/breakup/specs/html-ui/#master-command" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:master-command-7">master command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-checkedstate">Checked State</a> of the command is the <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-checkedstate-2">Checked State</a> of the <a href="/breakup/specs/html-ui/#master-command" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:master-command-8">master command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-action" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-action">Action</a> of the command is to invoke the <a href="/breakup/specs/html-ui/#command-facet-action" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:command-facet-action-2">Action</a> of the <a href="/breakup/specs/html-ui/#master-command" id="using-the-command-attribute-on-menuitem-elements-to-define-a-command-indirectly:master-command-9">master command</a>.</p></section>



  <section><h2><dfn>Using the <code>accesskey</code> attribute
  on a <code>label</code> element to define a command</dfn></h2>

  <p>A <code id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:the-label-element"><a href="/breakup/specs/html-forms/#the-label-element">label</a></code> element that has an <a href="/breakup/specs/html-ui/#assigned-access-key" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:assigned-access-key">assigned access key</a> and a <a href="/breakup/specs/html-forms/#labeled-control" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:labeled-control">labeled
  control</a> and whose <a href="/breakup/specs/html-forms/#labeled-control" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:labeled-control-2">labeled control</a> <a href="/breakup/specs/html-ui/#concept-command" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:concept-command">defines a
  command</a>, itself <a href="/breakup/specs/html-ui/#concept-command" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:concept-command-2">defines a command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:command-facet-type">Type</a> of the command is "command".</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-id" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:command-facet-id">ID</a> of the command is the value of the <code id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:the-id-attribute"><a href="/breakup/specs/html-attributes/#the-id-attribute">id</a></code> attribute of the element, if the attribute is present and not empty.
  Otherwise the command is an <a href="/breakup/specs/html-ui/#anonymous-command" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:anonymous-command">anonymous command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:command-facet-label">Label</a> of the command is the string given by the
  element's <code id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:textcontent"><a href="/breakup/specs/core-algorithms/#textcontent">textContent</a></code> IDL attribute.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:command-facet-hint">Hint</a> of the command is the value of the <code id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:attr-title"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attribute of the element.</p>

  <p>There is no <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:command-facet-icon">Icon</a> for the command.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:command-facet-accesskey">AccessKey</a> of the command is the element's
  <a href="/breakup/specs/html-ui/#assigned-access-key" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:assigned-access-key-2">assigned access key</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:command-facet-hiddenstate">Hidden State</a>, <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:command-facet-disabledstate">Disabled State</a>, and <a href="/breakup/specs/html-ui/#command-facet-action" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:command-facet-action">Action</a> facets of the command are the same as the respective
  facets of the element's <a href="/breakup/specs/html-forms/#labeled-control" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:labeled-control-3">labeled control</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="using-the-accesskey-attribute-on-a-label-element-to-define-a-command:command-facet-checkedstate">Checked State</a> of the command is always
  false. (The command is never checked.)</p></section>



  <section><h2><dfn>Using the <code>accesskey</code> attribute
  on a <code>legend</code> element to define a command</dfn></h2>

  <p>A <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:the-legend-element"><a href="/breakup/specs/html-forms/#the-legend-element">legend</a></code> element that has an <a href="/breakup/specs/html-ui/#assigned-access-key" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:assigned-access-key">assigned access key</a> and is a child of a
  <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:the-fieldset-element"><a href="/breakup/specs/html-forms/#the-fieldset-element">fieldset</a></code> element that has a descendant that is not a descendant of the
  <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:the-legend-element-2"><a href="/breakup/specs/html-forms/#the-legend-element">legend</a></code> element and is neither a <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:the-label-element"><a href="/breakup/specs/html-forms/#the-label-element">label</a></code> element nor a <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:the-legend-element-3"><a href="/breakup/specs/html-forms/#the-legend-element">legend</a></code>
  element but that <a href="/breakup/specs/html-ui/#concept-command" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:concept-command">defines a command</a>, itself <a href="/breakup/specs/html-ui/#concept-command" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:concept-command-2">defines a command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:command-facet-type">Type</a> of the command is "command".</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-id" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:command-facet-id">ID</a> of the command is the value of the <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:the-id-attribute"><a href="/breakup/specs/html-attributes/#the-id-attribute">id</a></code> attribute of the element, if the attribute is present and not empty.
  Otherwise the command is an <a href="/breakup/specs/html-ui/#anonymous-command" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:anonymous-command">anonymous command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:command-facet-label">Label</a> of the command is the string given by the
  element's <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:textcontent"><a href="/breakup/specs/core-algorithms/#textcontent">textContent</a></code> IDL attribute.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:command-facet-hint">Hint</a> of the command is the value of the <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:attr-title"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attribute of the element.</p>

  <p>There is no <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:command-facet-icon">Icon</a> for the command.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:command-facet-accesskey">AccessKey</a> of the command is the element's
  <a href="/breakup/specs/html-ui/#assigned-access-key" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:assigned-access-key-2">assigned access key</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:command-facet-hiddenstate">Hidden State</a>, <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:command-facet-disabledstate">Disabled State</a>, and <a href="/breakup/specs/html-ui/#command-facet-action" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:command-facet-action">Action</a> facets of the command are the same as the respective
  facets of the first element in <a href="/breakup/specs/core-algorithms/#tree-order" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:tree-order">tree order</a> that is a descendant of the parent of the
  <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:the-legend-element-4"><a href="/breakup/specs/html-forms/#the-legend-element">legend</a></code> element that <a href="/breakup/specs/html-ui/#concept-command" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:concept-command-3">defines a command</a> but is not
  a descendant of the <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:the-legend-element-5"><a href="/breakup/specs/html-forms/#the-legend-element">legend</a></code> element and is neither a <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:the-label-element-2"><a href="/breakup/specs/html-forms/#the-label-element">label</a></code> nor a
  <code id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:the-legend-element-6"><a href="/breakup/specs/html-forms/#the-legend-element">legend</a></code> element.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="using-the-accesskey-attribute-on-a-legend-element-to-define-a-command:command-facet-checkedstate">Checked State</a> of the command is always
  false. (The command is never checked.)</p></section>



  <section><h2><dfn>Using the <code>accesskey</code>
  attribute to define a command on other elements</dfn></h2>

  <p>An element that has an <a href="/breakup/specs/html-ui/#assigned-access-key" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:assigned-access-key">assigned access key</a> <a href="/breakup/specs/html-ui/#concept-command" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:concept-command">defines a
  command</a>.</p>

  <p>If one of the earlier sections that define elements that <a href="/breakup/specs/html-ui/#concept-command" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:concept-command-2">define
  commands</a> define that this element <a href="/breakup/specs/html-ui/#concept-command" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:concept-command-3">defines a command</a>,
  then that section applies to this element, and this section does not. Otherwise, this section
  applies to that element.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-type" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-type">Type</a> of the command is "command".</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-id" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-id">ID</a> of the command is the value of the <code id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:the-id-attribute"><a href="/breakup/specs/html-attributes/#the-id-attribute">id</a></code> attribute of the element, if the attribute is present and not empty.
  Otherwise the command is an <a href="/breakup/specs/html-ui/#anonymous-command" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:anonymous-command">anonymous command</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-label">Label</a> of the command depends on the element. If
  the element is a <a href="/breakup/specs/html-forms/#labeled-control" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:labeled-control">labeled control</a>, the <code id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:textcontent"><a href="/breakup/specs/core-algorithms/#textcontent">textContent</a></code> of the first
  <code id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:the-label-element"><a href="/breakup/specs/html-forms/#the-label-element">label</a></code> element in <a href="/breakup/specs/core-algorithms/#tree-order" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:tree-order">tree order</a> whose <a href="/breakup/specs/html-forms/#labeled-control" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:labeled-control-2">labeled control</a> is the
  element in question is the <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-label-2">Label</a> (in DOM terms, this is
  the string given by <code><var>element</var>.labels[0].textContent</code>). Otherwise,
  the <a href="/breakup/specs/html-ui/#command-facet-label" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-label-3">Label</a> is the <code id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:textcontent-2"><a href="/breakup/specs/core-algorithms/#textcontent">textContent</a></code> of the element
  itself.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-hint">Hint</a> of the command is the value of the <code id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:attr-title"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attribute of the element. If the attribute is not present, the
  <a href="/breakup/specs/html-ui/#command-facet-hint" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-hint-2">Hint</a> is the empty string.</p>

  <p>There is no <a href="/breakup/specs/html-ui/#command-facet-icon" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-icon">Icon</a> for the command.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-accesskey" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-accesskey">AccessKey</a> of the command is the element's
  <a href="/breakup/specs/html-ui/#assigned-access-key" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:assigned-access-key-2">assigned access key</a>.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-hiddenstate">Hidden State</a> of the command is true (hidden)
  if the element has a <code id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:the-hidden-attribute"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute, and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-disabledstate">Disabled State</a> of the command is true if
  the element or one of its ancestors is <a href="/breakup/specs/html-ui/#inert" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:inert">inert</a>, and false otherwise.</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-checkedstate" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-checkedstate">Checked State</a> of the command is always
  false. (The command is never checked.)</p>

  <p>The <a href="/breakup/specs/html-ui/#command-facet-action" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:command-facet-action">Action</a> of the command is to run the following
  steps:</p>

  <ol><li>Run the <a href="/breakup/specs/html-ui/#focusing-steps" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:focusing-steps">focusing steps</a> for the element.</li><li>If the element has a defined <a href="/breakup/specs/html-ui/#activation-behaviour" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:activation-behaviour">activation behaviour</a>, <a href="/breakup/specs/html-ui/#run-synthetic-click-activation-steps" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:run-synthetic-click-activation-steps">run synthetic click
   activation steps</a> on the element.</li><li>Otherwise, if the element does not have a defined <a href="/breakup/specs/html-ui/#activation-behaviour" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:activation-behaviour-2">activation behaviour</a>,
   <a href="/breakup/specs/browser-dom/#fire-a-click-event" id="using-the-accesskey-attribute-to-define-a-command-on-other-elements:fire-a-click-event">fire a <code>click</code> event</a> at the element.</li></ol></section></section><section><h2>The <dfn><code>dialog</code></dfn> element</h2>

  <dl class="element"><dt><a href="/breakup/specs/html/#concept-element-categories" id="the-dialog-element:concept-element-categories">Categories</a>:</dt><dd><a href="/breakup/specs/html/#flow-content-2" id="the-dialog-element:flow-content-2">Flow content</a>.</dd><dd><a href="/breakup/specs/html-structure/#sectioning-root" id="the-dialog-element:sectioning-root">Sectioning root</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-contexts" id="the-dialog-element:concept-element-contexts">Contexts in which this element can be used</a>:</dt><dd>Where <a href="/breakup/specs/html/#flow-content-2" id="the-dialog-element:flow-content-2-2">flow content</a> is expected.</dd><dt><a href="/breakup/specs/html/#concept-element-content-model" id="the-dialog-element:concept-element-content-model">Content model</a>:</dt><dd><a href="/breakup/specs/html/#flow-content-2" id="the-dialog-element:flow-content-2-3">Flow content</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-tag-omission" id="the-dialog-element:concept-element-tag-omission">Tag omission in text/html</a>:</dt><dd>Neither tag is omissible.</dd><dt><a href="/breakup/specs/html/#concept-element-attributes" id="the-dialog-element:concept-element-attributes">Content attributes</a>:</dt><dd><a href="/breakup/specs/html-attributes/#global-attributes" id="the-dialog-element:global-attributes">Global attributes</a></dd><dd><code id="the-dialog-element:attr-dialog-open"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code> — Whether the dialog box is showing</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#aria-role-attribute">ARIA role attribute</a> values:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-dialog"><code title="">dialog</code></a> 
   (default - <a href="/breakup/specs/html-aria-integration/#aria-usage-note"><em>do not set</em></a>), 
   <a href="/breakup/specs/html-aria-integration/#index-aria-alert"><code title="">alert</code></a>, 
   <a href="/breakup/specs/html-aria-integration/#index-aria-alertdialog"><code title="">alertdialog</code></a>, 
   <a href="/breakup/specs/html-aria-integration/#index-aria-application"><code title="">application</code></a>,  
   <a href="/breakup/specs/html-aria-integration/#index-aria-log"><code title="">log</code></a>, 
   <a href="/breakup/specs/html-aria-integration/#index-aria-marquee"><code title="">marquee</code></a>    
   or <a href="/breakup/specs/html-aria-integration/#index-aria-status"><code title="">status</code></a>.</dd><dt>Allowed <a href="/breakup/specs/html-aria-integration/#state-and-property-attributes">ARIA State and Property Attributes</a>:</dt><dd><a href="/breakup/specs/html-aria-integration/#index-aria-global">Global aria-* attributes</a></dd><dd>Any <code title="">aria-*</code> attributes 
   <a href="/breakup/specs/html-aria-integration/#allowed-aria-roles,-states-and-properties">applicable to the allowed roles</a>.</dd><dt><a href="/breakup/specs/html/#concept-element-dom" id="the-dialog-element:concept-element-dom">DOM interface</a>:</dt><dd>
<pre class="idl">interface <dfn id="htmldialogelement">HTMLDialogElement</dfn> : <a href="/breakup/specs/html-scripting/#htmlelement" id="the-dialog-element:htmlelement">HTMLElement</a> {
  attribute boolean <a href="/breakup/specs/html-ui/#dom-dialog-open" id="the-dialog-element:dom-dialog-open">open</a>;
  attribute DOMString <a href="/breakup/specs/html-ui/#dom-dialog-returnvalue" id="the-dialog-element:dom-dialog-returnvalue">returnValue</a>;
  void <a href="/breakup/specs/html-ui/#dom-dialog-show" id="the-dialog-element:dom-dialog-show">show</a>(optional (<a href="/breakup/specs/core-algorithms/#mouseevent" id="the-dialog-element:mouseevent">MouseEvent</a> or <a href="/breakup/specs/core-algorithms/#element" id="the-dialog-element:element">Element</a>) anchor);
  void <a href="/breakup/specs/html-ui/#dom-dialog-showmodal" id="the-dialog-element:dom-dialog-showmodal">showModal</a>(optional (<a href="/breakup/specs/core-algorithms/#mouseevent" id="the-dialog-element:mouseevent-2">MouseEvent</a> or <a href="/breakup/specs/core-algorithms/#element" id="the-dialog-element:element-2">Element</a>) anchor);
  void <a href="/breakup/specs/html-ui/#dom-dialog-close" id="the-dialog-element:dom-dialog-close">close</a>(optional DOMString returnValue);
};</pre>
   </dd></dl>

  <p>The <code id="the-dialog-element:the-dialog-element"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element represents a part of an application that a user interacts with
  to perform a task, for example a dialog box, inspector, or window.</p>

  <p>The <dfn id="attr-dialog-open"><code>open</code></dfn> attribute is a <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="the-dialog-element:boolean-attribute">boolean
  attribute</a>. When specified, it indicates that the <code id="the-dialog-element:the-dialog-element-2"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element is active and
  that the user can interact with it.</p>

  

  <p>A <code id="the-dialog-element:the-dialog-element-3"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element without an <code id="the-dialog-element:attr-dialog-open-2"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code> attribute
  specified should not be shown to the user. This requirement may be implemented indirectly through
  the style layer. For example, user agents that <a href="/breakup/specs/core-algorithms/#renderingUA">support the suggested
  default rendering</a> implement this requirement using the CSS rules described in the <a href="#rendering">rendering section</a>.</p>

  

  <p>The <code id="the-dialog-element:attr-tabindex"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute must not be specified on
  <code id="the-dialog-element:the-dialog-element-4"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> elements.</p>



  <dl class="domintro"><dt><var>dialog</var> . <code id="the-dialog-element:dom-dialog-show-2"><a href="/breakup/specs/html-ui/#dom-dialog-show">show</a></code>( [ <var>anchor</var> ] )</dt><dd>

    <p>Displays the <code id="the-dialog-element:the-dialog-element-5"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element.</p>

    <p>The argument, if provided, provides an anchor point to which the element will be fixed.</p>

   </dd><dt><var>dialog</var> . <code id="the-dialog-element:dom-dialog-showmodal-2"><a href="/breakup/specs/html-ui/#dom-dialog-showmodal">showModal</a></code>( [ <var>anchor</var> ] )</dt><dd>

    <p>Displays the <code id="the-dialog-element:the-dialog-element-6"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element and makes it the top-most modal dialog.</p>

    <p>The argument, if provided, provides an anchor point to which the element will be fixed.</p>

    <p>This method honors the <code id="the-dialog-element:attr-fe-autofocus"><a href="/breakup/specs/html-forms/#attr-fe-autofocus">autofocus</a></code> attribute.</p>

   </dd><dt><var>dialog</var> . <code id="the-dialog-element:dom-dialog-close-2"><a href="/breakup/specs/html-ui/#dom-dialog-close">close</a></code>( [ <var>result</var> ] )</dt><dd>

    <p>Closes the <code id="the-dialog-element:the-dialog-element-7"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element.</p>

    <p>The argument, if provided, provides a return value.</p>

   </dd><dt><var>dialog</var> . <code id="the-dialog-element:dom-dialog-returnvalue-2"><a href="/breakup/specs/html-ui/#dom-dialog-returnvalue">returnValue</a></code> [ = <var>result</var> ]</dt><dd>

    <p>Returns the <code id="the-dialog-element:the-dialog-element-8"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code>'s return value.</p>

    <p>Can be set, to update the return value.</p>

   </dd></dl>



  

  <p>When the <dfn id="dom-dialog-show"><code>show()</code></dfn> method is invoked, the user
  agent must run the following steps:</p>

  <ol><li><p>If the element already has an <code id="the-dialog-element:attr-dialog-open-3"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code> attribute, then
   abort these steps.</p></li><li><p>Add an <code id="the-dialog-element:attr-dialog-open-4"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code> attribute to the <code id="the-dialog-element:the-dialog-element-9"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code>
   element, whose value is the empty string.</p></li><li><p>If the <code id="the-dialog-element:dom-dialog-show-3"><a href="/breakup/specs/html-ui/#dom-dialog-show">show()</a></code> method was invoked with an argument,
   <a href="/breakup/specs/html-ui/#set-up-the-position" id="the-dialog-element:set-up-the-position">set up the position</a> of the <code id="the-dialog-element:the-dialog-element-10"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element, using that argument as the
   anchor. Otherwise, set the <code id="the-dialog-element:the-dialog-element-11"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> to the <a href="/breakup/specs/html-ui/#normal-alignment" id="the-dialog-element:normal-alignment">normal alignment</a> mode.</p></li><li><p>Run the <a href="/breakup/specs/html-ui/#dialog-focusing-steps" id="the-dialog-element:dialog-focusing-steps">dialog focusing steps</a> for the <code id="the-dialog-element:the-dialog-element-12"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element.</p></li></ol>

  <hr>

  <p>Each <code id="the-dialog-element:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> has a stack of <code id="the-dialog-element:the-dialog-element-13"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> elements known as the
  <dfn id="pending-dialog-stack">pending dialog stack</dfn>. When a <code id="the-dialog-element:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> is created, this stack must be
  initialised to be empty.</p>

  <p>When an element is added to the <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack">pending dialog stack</a>, it must also be added to the
  <a href="/breakup/specs/core-algorithms/#top-layer" id="the-dialog-element:top-layer">top layer</a> layer. When an element is removed from the <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-2">pending dialog
  stack</a>, it must be removed from the <a href="/breakup/specs/core-algorithms/#top-layer" id="the-dialog-element:top-layer-2">top layer</a>. [[!FULLSCREEN]]</p>

  <p>When the <dfn id="dom-dialog-showmodal"><code>showModal()</code></dfn> method is invoked,
  the user agent must run the following steps:</p>

  <ol><li><p>Let <var>subject</var> be the <code id="the-dialog-element:the-dialog-element-14"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element on which the method was
   invoked.</p></li><li><p>If <var>subject</var> already has an <code id="the-dialog-element:attr-dialog-open-5"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code>
   attribute, then throw an <code id="the-dialog-element:invalidstateerror"><a href="/breakup/specs/core-algorithms/#invalidstateerror">InvalidStateError</a></code> exception and abort these steps.</p></li><li><p>If <var>subject</var> is not <a href="/breakup/specs/core-algorithms/#in-a-document" id="the-dialog-element:in-a-document">in a <code>Document</code></a>, then throw
   an <code id="the-dialog-element:invalidstateerror-2"><a href="/breakup/specs/core-algorithms/#invalidstateerror">InvalidStateError</a></code> exception and abort these steps.</p></li><li><p>Add an <code id="the-dialog-element:attr-dialog-open-6"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code> attribute to <var>subject</var>, whose value is the empty string.</p></li><li><p>If the <code id="the-dialog-element:dom-dialog-showmodal-3"><a href="/breakup/specs/html-ui/#dom-dialog-showmodal">showModal()</a></code> method was invoked with an
   argument, <a href="/breakup/specs/html-ui/#set-up-the-position" id="the-dialog-element:set-up-the-position-2">set up the position</a> of <var>subject</var>, using that argument
   as the anchor. Otherwise, set the <code id="the-dialog-element:the-dialog-element-15"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> to the <a href="/breakup/specs/html-ui/#centered-alignment" id="the-dialog-element:centered-alignment">centered alignment</a>
   mode.</p></li><li><p>Let <var>subject</var>'s <a id="the-dialog-element:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> be <a href="/breakup/specs/html-ui/#blocked-by-a-modal-dialog" id="the-dialog-element:blocked-by-a-modal-dialog">blocked by the modal dialog</a> <var>subject</var>.</p></li><li><p>Push <var>subject</var> onto <var>subject</var>'s
   <a id="the-dialog-element:node-document-2" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-3">pending dialog stack</a>.</p></li><li><p>Run the <a href="/breakup/specs/html-ui/#dialog-focusing-steps" id="the-dialog-element:dialog-focusing-steps-2">dialog focusing steps</a> for <var>subject</var>.</p></li></ol>

  <p>The <dfn id="dialog-focusing-steps">dialog focusing steps</dfn> for a <code id="the-dialog-element:the-dialog-element-16"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element <var>subject</var> are as follows:</p>

  <ol><li><p>If for some reason <var>subject</var> is not a <a href="/breakup/specs/html-ui/#control-group-owner" id="the-dialog-element:control-group-owner">control group owner</a>
   at this point, or if it is <a href="/breakup/specs/html-ui/#inert" id="the-dialog-element:inert">inert</a>, abort these steps.</p></li><li>

    <p>Let <var>control</var> be the first non-<a href="/breakup/specs/html-ui/#inert" id="the-dialog-element:inert-2">inert</a> <a href="/breakup/specs/html-ui/#focusable-area" id="the-dialog-element:focusable-area">focusable area</a> in
    <var>subject</var>'s <a href="/breakup/specs/html-ui/#control-group" id="the-dialog-element:control-group">control group</a> whose <a href="/breakup/specs/html-ui/#dom-anchor" id="the-dialog-element:dom-anchor">DOM anchor</a> has an <code id="the-dialog-element:attr-fe-autofocus-2"><a href="/breakup/specs/html-forms/#attr-fe-autofocus">autofocus</a></code> attribute specified.</p>

    <p>If there isn't one, then let <var>control</var> be the first non-<a href="/breakup/specs/html-ui/#inert" id="the-dialog-element:inert-3">inert</a>
    <a href="/breakup/specs/html-ui/#focusable-area" id="the-dialog-element:focusable-area-2">focusable area</a> in <var>subject</var>'s <a href="/breakup/specs/html-ui/#control-group" id="the-dialog-element:control-group-2">control group</a>.</p>

    <p>If there isn't one of those either, then let <var>control</var> be <var>subject</var>.</p>

   </li><li><p>Run the <a href="/breakup/specs/html-ui/#focusing-steps" id="the-dialog-element:focusing-steps">focusing steps</a> for <var>control</var>.</p></li></ol>

  <p>If at any time a <code id="the-dialog-element:the-dialog-element-17"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element is <a href="/breakup/specs/core-algorithms/#remove-an-element-from-a-document" id="the-dialog-element:remove-an-element-from-a-document">removed from a <code>Document</code></a>, then if that <code id="the-dialog-element:the-dialog-element-18"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> is in that
  <code id="the-dialog-element:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code>'s <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-4">pending dialog stack</a>, the following steps must be run:</p>

  <ol><li><p>Let <var>subject</var> be that <code id="the-dialog-element:the-dialog-element-19"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element and <var>document</var> be the <code id="the-dialog-element:document-4"><a href="/breakup/specs/browser-dom/#document">Document</a></code> from which it is being removed.</p></li><li><p>Remove <var>subject</var> from <var>document</var>'s <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-5">pending
   dialog stack</a>.</p></li><li><p>If <var>document</var>'s <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-6">pending dialog stack</a> is not empty, then let
   <var>document</var> be <a href="/breakup/specs/html-ui/#blocked-by-a-modal-dialog" id="the-dialog-element:blocked-by-a-modal-dialog-2">blocked by the modal
   dialog</a> that is at the top of <var>document</var>'s <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-7">pending dialog
   stack</a>. Otherwise, let <var>document</var> be no longer <a href="/breakup/specs/html-ui/#blocked-by-a-modal-dialog" id="the-dialog-element:blocked-by-a-modal-dialog-3">blocked by a modal
   dialog</a> at all.</p></li></ol>

  <p>When the <dfn id="dom-dialog-close"><code>close()</code></dfn> method is invoked, the user
  agent must <a href="/breakup/specs/html-ui/#close-the-dialog" id="the-dialog-element:close-the-dialog">close the dialog</a> that the method was invoked on. If the method was invoked
  with an argument, that argument must be used as the return value; otherwise, there is no return
  value.</p>



  <p>When a <code id="the-dialog-element:the-dialog-element-20"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element <var>subject</var> is to be <dfn id="close-the-dialog">closed</dfn>, optionally with a return value <var>result</var>, the user agent
  must run the following steps:</p>

  <ol><li><p>If <var>subject</var> does not have an <code id="the-dialog-element:attr-dialog-open-7"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code>
   attribute, then abort these steps.</p></li><li><p>Remove <var>subject</var>'s <code id="the-dialog-element:attr-dialog-open-8"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code>
   attribute.</p></li><li><p>If the argument <var>result</var> was provided, then set the <code id="the-dialog-element:dom-dialog-returnvalue-3"><a href="/breakup/specs/html-ui/#dom-dialog-returnvalue">returnValue</a></code> attribute to the value of <var>result</var>.</p></li><li>

    <p>If <var>subject</var> is in its <code id="the-dialog-element:document-5"><a href="/breakup/specs/browser-dom/#document">Document</a></code>'s <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-8">pending dialog
    stack</a>, then run these substeps:</p>

    <ol><li><p>Remove <var>subject</var> from that <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-9">pending dialog stack</a>.</p></li><li><p>If that <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-10">pending dialog stack</a> is not empty, then let <var>subject</var>'s <a id="the-dialog-element:node-document-3" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> be <a href="/breakup/specs/html-ui/#blocked-by-a-modal-dialog" id="the-dialog-element:blocked-by-a-modal-dialog-4">blocked by the modal dialog</a> that is at the top of the <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-11">pending dialog
     stack</a>. Otherwise, let <var>document</var> be no longer <a href="/breakup/specs/html-ui/#blocked-by-a-modal-dialog" id="the-dialog-element:blocked-by-a-modal-dialog-5">blocked by a modal
     dialog</a> at all.</p></li></ol>

   </li><li><p><a href="/breakup/specs/browser-dom/#queue-a-task" id="the-dialog-element:queue-a-task">Queue a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="the-dialog-element:fire-a-simple-event">fire a simple event</a> named <code id="the-dialog-element:event-close"><a href="/breakup/specs/html/#event-close">close</a></code> at <var>subject</var>.</p></li></ol>


  <p>The <dfn id="dom-dialog-returnvalue"><code>returnValue</code></dfn> IDL attribute, on
  getting, must return the last value to which it was set. On setting, it must be set to the new
  value. When the element is created, it must be set to the empty string.</p>


  <hr>

  <p><strong>Canceling dialogs</strong>: When a <code id="the-dialog-element:document-6"><a href="/breakup/specs/browser-dom/#document">Document</a></code>'s <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-12">pending dialog
  stack</a> is not empty, user agents may provide a user interface that, upon activation, <a href="/breakup/specs/browser-dom/#queue-a-task" id="the-dialog-element:queue-a-task-2">queues a task</a> to <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="the-dialog-element:fire-a-simple-event-2">fire a simple event</a> named <code id="the-dialog-element:event-cancel"><a href="/breakup/specs/html/#event-cancel">cancel</a></code> that is cancelable at the top <code id="the-dialog-element:the-dialog-element-21"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element on
  the <code id="the-dialog-element:document-7"><a href="/breakup/specs/browser-dom/#document">Document</a></code>'s <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-13">pending dialog stack</a>. The default action of this event
  must be to check if that element has an <code id="the-dialog-element:attr-dialog-open-9"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code> attribute, and
  if it does, <a href="/breakup/specs/html-ui/#close-the-dialog" id="the-dialog-element:close-the-dialog-2">close the dialog</a> with no return value.</p>

  <p class="note">An example of such a UI mechanism would be the user pressing the "Escape" key.</p>

  <hr>

  <p>All <code id="the-dialog-element:the-dialog-element-22"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> elements are always in one of three modes: <dfn id="normal-alignment">normal alignment</dfn>,
  <dfn id="centered-alignment">centered alignment</dfn>, and <dfn id="magic-alignment">magic alignment</dfn>. When a <code id="the-dialog-element:the-dialog-element-23"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element
  is created, it must be placed in the <a href="/breakup/specs/html-ui/#normal-alignment" id="the-dialog-element:normal-alignment-2">normal alignment</a> mode. In this mode, normal CSS
  requirements apply to the element. The <a href="/breakup/specs/html-ui/#centered-alignment" id="the-dialog-element:centered-alignment-2">centered alignment</a> mode is only used for
  <code id="the-dialog-element:the-dialog-element-24"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> elements that are in the <a href="/breakup/specs/core-algorithms/#top-layer" id="the-dialog-element:top-layer-3">top layer</a>. [[!FULLSCREEN]] [[!CSS]]</p>

  <p>When an element <var>subject</var> is placed in <a href="/breakup/specs/html-ui/#centered-alignment" id="the-dialog-element:centered-alignment-3">centered alignment</a> mode,
  and when it is in that mode and has new rendering boxes created, the user agent must set up the
  element such that its top static position, for the purposes of calculating the used value of the
  'top' property, is the value that would place the element's top margin edge as far from the top of
  the viewport as the element's bottom margin edge from the bottom of the viewport, if the element's
  height is less than the height of the viewport, and otherwise is the value that would place the
  element's top margin edge at the top of the viewport.</p>

  <p>If there is a <code id="the-dialog-element:the-dialog-element-25"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element with <a href="/breakup/specs/html-ui/#centered-alignment" id="the-dialog-element:centered-alignment-4">centered alignment</a> and that is
  <a href="/breakup/specs/rendering-html/#being-rendered" id="the-dialog-element:being-rendered">being rendered</a> when its <a href="/breakup/specs/browser-dom/#browsing-context" id="the-dialog-element:browsing-context">browsing context</a> changes viewport width (as
  measured in CSS pixels), then the user agent must recreate the element's boxes, recalculating its
  top static position as in the previous paragraph.</p>

  <p>This top static position of a <code id="the-dialog-element:the-dialog-element-26"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element with <a href="/breakup/specs/html-ui/#centered-alignment" id="the-dialog-element:centered-alignment-5">centered alignment</a>
  must remain the element's top static position until its boxes are recreated. (The element's static
  position is only used in calculating the used value of the 'top' property in certain situations;
  it's not used, for instance, to position the element if its 'position' property is set to
  'static'.)</p>

  <p>When a user agent is to <dfn id="set-up-the-position">set up the position</dfn> of an element <var>subject</var> using an anchor <var>anchor</var>, it must run the following
  steps:</p>

  <ol><li>

    <p>If <var>anchor</var> is a <code id="the-dialog-element:mouseevent-3"><a href="/breakup/specs/core-algorithms/#mouseevent">MouseEvent</a></code> object, then run these
    substeps:</p>

    <ol><li><p>If <var>anchor</var>'s target element does not have a rendered box, or is in a
     different document than <var>subject</var>, then let <var>subject</var> be
     in the <a href="/breakup/specs/html-ui/#centered-alignment" id="the-dialog-element:centered-alignment-6">centered alignment</a> mode, and abort the <a href="/breakup/specs/html-ui/#set-up-the-position" id="the-dialog-element:set-up-the-position-3">set up the position</a>
     steps.</p></li><li><p>Let <var>anchor element</var> be an anonymous element rendered as a box with
     zero height and width (so its margin and border boxes both just form a point), positioned so
     that its top and left are at the coordinate identified by the event, and whose properties all
     compute to their initial values.</p></li></ol>

    <p>Otherwise, let <var>anchor element</var> be <var>anchor</var>.</p>

   </li><li><p>Put <var>subject</var> in the <a href="/breakup/specs/html-ui/#magic-alignment" id="the-dialog-element:magic-alignment">magic alignment</a> mode, aligned to <var>anchor element</var>.</p></li></ol>

  <p>While an element <var>A</var> has <a href="/breakup/specs/html-ui/#magic-alignment" id="the-dialog-element:magic-alignment-2">magic alignment</a>, aligned to an element
  <var>B</var>, the following requirements apply:</p>

  <ul><li>

    <p>If at any time either <var>A</var> or <var>B</var> cease having rendered
    boxes, <var>A</var> and <var>B</var> cease being in the same
    <code id="the-dialog-element:document-8"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, or <var>B</var> ceases being earlier than <var>A</var> in <a href="/breakup/specs/core-algorithms/#tree-order" id="the-dialog-element:tree-order">tree order</a>, then, if <var>subject</var> is in the
    <a href="/breakup/specs/html-ui/#pending-dialog-stack" id="the-dialog-element:pending-dialog-stack-14">pending dialog stack</a>, let <var>subject</var>'s mode become <a href="/breakup/specs/html-ui/#centered-alignment" id="the-dialog-element:centered-alignment-7">centered
    alignment</a>, otherwise, let <var>subject</var>'s mode become <a href="/breakup/specs/html-ui/#normal-alignment" id="the-dialog-element:normal-alignment-3">normal
    alignment</a>.</p>

   </li><li>

    <p><var>A</var>'s 'position' property must compute to the keyword '<a href="/breakup/specs/html-ui/#css-position-absolute-anchored" id="the-dialog-element:css-position-absolute-anchored">absolute-anchored</a>' rather than whatever it would
    otherwise compute to (i.e. the 'position' property's specified value is ignored).</p>

    <p class="note">The '<a href="/breakup/specs/html-ui/#css-position-absolute-anchored" id="the-dialog-element:css-position-absolute-anchored-2">absolute-anchored</a>'
    keyword's requirements are described below.</p>

   </li><li>

    <p>The anchor points for <var>A</var> and <var>B</var> are defined as per the
    appropriate entry in the following list:</p>

    <dl class="switch"><dt>If the computed value of 'anchor-point' is 'none' on both <var>A</var> and <var>B</var>

     </dt><dd>
      <p>The anchor points of <var>A</var> and <var>B</var> are the center points
      of their respective first boxes' border boxes.


     </p></dd><dt>If the computed value of 'anchor-point' is 'none' on <var>A</var> and a specific
     point on <var>B</var>

     </dt><dd>
      <p>The anchor point of <var>B</var> is the point given by its 'anchor-point'
      property.

      </p><p>If the anchor point of <var>B</var> is the center point of <var>B</var>'s
      first box's border box, then <var>A</var>'s anchor point is the center point of its
      first box's margin box.

      </p><p>Otherwise, <var>A</var>'s anchor point is on one of its margin edges. Consider
      four hypothetical half-infinite lines L1, L2, L3, and L4 that each start in the center of <var>B</var>'s first box's border box, and that extend respectively through the top left
      corner, top right corner, bottom right corner, and bottom left corner of <var>B</var>'s first box's border box. <var>A</var>'s anchor point is determined
      by the location of <var>B</var>'s anchor point relative to these four hypothetical
      lines, as follows:

      </p><p>If the anchor point of <var>B</var> lies on L1 or L2, or inside the area bounded
      by L1 and L2 that also contains the points above <var>B</var>'s first box's border
      box, then let <var>A</var>'s anchor point be the horizontal center of <var>A</var>'s bottom margin edge.</p>

      <p>Otherwise, if the anchor point of <var>B</var> lies on L3 or L4, or inside the
      area bounded by L4 and L4 that also contains the points below <var>B</var>'s first
      box's border box, then let <var>A</var>'s anchor point be the horizontal center of
      <var>A</var>'s top margin edge.</p>

      <p>Otherwise, if the anchor point of <var>B</var> lies inside the area bounded by L4
      and L1 that also contains the points to the left of <var>B</var>'s first box's border
      box, then let <var>A</var>'s anchor point be the vertical center of <var>A</var>'s right margin edge.</p>

      <p>Otherwise, the anchor point of <var>B</var> lies inside the area bounded by L2 and
      L3 that also contains the points to the right of <var>B</var>'s first box's border
      box; let <var>A</var>'s anchor point be the vertical center of <var>A</var>'s left margin edge.</p>


     </dd><dt>If the computed value of 'anchor-point' is a specific point on <var>A</var> and
     'none' on <var>B</var>

     </dt><dd>
      <p>The anchor point of <var>A</var> is the point given by its 'anchor-point'
      property.

      </p><p>If the anchor point of <var>A</var> is the center point of <var>A</var>'s
      first box's margin box, then <var>B</var>'s anchor point is the center point of its
      first box's border box.

      </p><p>Otherwise, <var>B</var>'s anchor point is on one of its border edges. Consider
      four hypothetical half-infinite lines L1, L2, L3, and L4 that each start in the center of <var>A</var>'s first box's margin box, and that extend respectively through the top left
      corner, top right corner, bottom right corner, and bottom left corner of <var>A</var>'s first box's margin box. <var>B</var>'s anchor point is determined
      by the location of <var>A</var>'s anchor point relative to these four hypothetical
      lines, as follows:

      </p><p>If the anchor point of <var>A</var> lies on L1 or L2, or inside the area bounded
      by L1 and L2 that also contains the points above <var>A</var>'s first box's margin
      box, then let <var>B</var>'s anchor point be the horizontal center of <var>B</var>'s bottom border edge.</p>

      <p>Otherwise, if the anchor point of <var>A</var> lies on L3 or L4, or inside the
      area bounded by L4 and L4 that also contains the points below <var>A</var>'s first
      box's margin box, then let <var>B</var>'s anchor point be the horizontal center of
      <var>B</var>'s top border edge.</p>

      <p>Otherwise, if the anchor point of <var>A</var> lies inside the area bounded by L4
      and L1 that also contains the points to the left of <var>A</var>'s first box's margin
      box, then let <var>B</var>'s anchor point be the vertical center of <var>B</var>'s right border edge.</p>

      <p>Otherwise, the anchor point of <var>A</var> lies inside the area bounded by L2 and
      L3 that also contains the points to the right of <var>A</var>'s first box's margin
      box; let <var>B</var>'s anchor point be the vertical center of <var>B</var>'s left border edge.</p>


     </dd><dt>If the computed value of 'anchor-point' is a specific point on both <var>A</var>
     and <var>B</var>

     </dt><dd>
      <p>The anchor points of <var>A</var> and <var>B</var> are the points given
      by their respective 'anchor-point' properties.

    </p></dd></dl>

    <p class="note">The rules above generally use <var>A</var>'s <em>margin</em> box, but
    <var>B</var>'s <em>border</em> box. This is because while <var>A</var> always
    has a margin box, and using the margin box allows for the dialog to be positioned offset from
    the box it is annotating, <var>B</var> sometimes does not have a margin box (e.g. if it
    is a table-cell), or has a margin box whose position may be not entirely clear (e.g. in the face
    of margin collapsing and 'clear' handling of in-flow blocks).</p>

    <p>In cases where <var>B</var> does not have a border box but its border box is used by
    the algorithm above, user agents must use its first box's content area instead. (This is in
    particular an issue with boxes in tables that have 'border-collapse' set to 'collapse'.)</p>

   </li><li>

    <p>When an element's 'position' property computes to '<dfn id="css-position-absolute-anchored">absolute-anchored</dfn>', the 'float' property does not
    apply and must compute to 'none', the 'display' property must compute to a value as described by
    the table in <a href="http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo">the section of CSS
    2.1 describing the <cite>relationships between 'display', 'position', and 'float'</cite></a>,
    and the element's box must be positioned using the rules for absolute positioning but with its
    static position set such that if the box is positioned in its static position, its anchor point
    is exactly aligned over the anchor point of the element to which it is <a href="/breakup/specs/html-ui/#magic-alignment" id="the-dialog-element:magic-alignment-3">magically aligned</a>. Elements aligned in this way are <i>absolutely
    positioned</i>. For the purposes of determining the containing block of other elements, the
    '<a href="/breakup/specs/html-ui/#css-position-absolute-anchored" id="the-dialog-element:css-position-absolute-anchored-3">absolute-anchored</a>' keyword must be treated
    like the 'absolute' keyword.</p>

   </li></ul>

  <p class="note">The trivial example of an element that does not have a rendered box is one whose
  'display' property computes to 'none'. However, there are many other cases; e.g. table columns do
  not have boxes (their properties merely affect other boxes).</p>

  <p class="note">If an element to which another element is anchored changes rendering, the anchored
  element will be be repositioned accordingly. (In other words, the requirements above are live,
  they are not just calculated once per anchored element.)</p>

  <p class="note">The '<a href="/breakup/specs/html-ui/#css-position-absolute-anchored" id="the-dialog-element:css-position-absolute-anchored-4">absolute-anchored</a>'
  keyword is not a keyword that can be specified in CSS; the 'position' property can only compute to
  this value if the <code id="the-dialog-element:the-dialog-element-27"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element is positioned via the APIs described above.</p>

  <p>User agents in visual interactive media should allow the user to pan the viewport to access all
  parts of a <code id="the-dialog-element:the-dialog-element-28"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element's border box, even if the element is larger than the
  viewport and the viewport would otherwise not have a scroll mechanism (e.g. because the viewport's
  'overflow' property is set to 'hidden').</p>

  <hr>


  <p>The <dfn id="dom-dialog-open"><code>open</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="the-dialog-element:reflect">reflect</a> the <code id="the-dialog-element:attr-dialog-open-10"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code> content attribute.</p>


  

  <div class="example">

   <p>This dialog box has some small print. The <code id="the-dialog-element:the-main-element"><a href="/breakup/specs/html-structure/#the-main-element">main</a></code> element is used to draw the user's
   attention to the more important parts.</p>

   <pre>&lt;dialog&gt;
 &lt;h1&gt;Add to Wallet&lt;/h1&gt;
 &lt;main&gt;
  &lt;p&gt;How many gold coins do you want to add to your wallet?&lt;/p&gt;
  &lt;p&gt;&lt;input name=amt type=number min=0 step=0.01 value=100&gt;&lt;/p&gt;
 &lt;/main&gt;
 &lt;p&gt;&lt;small&gt;You add coins at your own risk.&lt;/small&gt;&lt;/p&gt;
 &lt;p&gt;&lt;label&gt;&lt;input name=round type=checkbox&gt; Only add perfectly round coins &lt;/label&gt;
 &lt;p&gt;&lt;input type=button onclick="submit()" value="Add Coins"&gt;&lt;/p&gt;
&lt;/dialog&gt;</pre>

  </div>



  <section><h2>Anchor points</h2>

  <p class="critical">This section will eventually be moved to a CSS specification; it is specified
  here only on an interim basis until an editor can be found to own this.</p>

  <table class="css-property"><caption>'anchor-point'</caption><tbody><tr><th>Value:
    </th><td> none | &lt;position&gt;
   </td></tr><tr><th>Initial:
    </th><td> none
   </td></tr><tr><th>Applies to:
    </th><td> all elements
   </td></tr><tr><th>Inherited:
    </th><td> no
   </td></tr><tr><th>Percentages:
    </th><td> refer to width or height of box; see prose
   </td></tr><tr><th>Media:
    </th><td> visual
   </td></tr><tr><th>Computed value:
    </th><td> The specified value, but with any lengths replaced by their corresponding absolute length
   </td></tr><tr><th>Animatable:
    </th><td> no
   </td></tr><tr><th>Canonical order:
    </th><td> per grammar
  </td></tr></tbody></table>

  <p>The 'anchor-point' property specifies a point to which dialog boxes are to be aligned.</p>

  <p>If the value is a &lt;position&gt;, the anchor point is the point given by the value, which
  must be interpreted relative to the element's first rendered box's margin box. Percentages must be
  calculated relative to the element's first rendered box's margin box (specifically, its width for
  the horizontal position and its height for the vertical position). [[!CSSVALUES]] [[!CSS]]</p>

  <p>If the value is the keyword 'none', then no explicit anchor point is defined. The user agent
  will pick an anchor point automatically if necessary (as described in the definition of the
  <code id="anchor-points:dom-dialog-open"><a href="/breakup/specs/html-ui/#dom-dialog-open">open()</a></code> method above).</p></section></section><section><h2>The <dfn><code>hidden</code></dfn> attribute</h2>

  <p>All <a href="/breakup/specs/core-algorithms/#html-elements" id="the-hidden-attribute:html-elements">HTML elements</a> may have the <code id="the-hidden-attribute:the-hidden-attribute"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> content
  attribute set. The <code id="the-hidden-attribute:the-hidden-attribute-2"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute is a <a href="/breakup/specs/core-algorithms/#boolean-attribute" id="the-hidden-attribute:boolean-attribute">boolean
  attribute</a>. When specified on an element, it indicates that the element is not yet, or is no
  longer, directly relevant to the page's current state, or that it is being used to declare content
  to be reused by other parts of the page as opposed to being directly accessed by the user. User agents should not render elements that have the <code id="the-hidden-attribute:the-hidden-attribute-3"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute specified. This requirement may be implemented
  indirectly through the style layer. For example, an HTML+CSS user agent could implement these
  requirements <a href="/breakup/specs/rendering-html/#hiddenCSS">using the rules suggested in the Rendering
  section</a>.</p>

  <p class="note">Because this attribute is typically implemented using CSS, it's also possible to
  override it using CSS. For instance, a rule that applies 'display: block' to all elements will
  cancel the effects of the <code id="the-hidden-attribute:the-hidden-attribute-4"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute. Authors therefore
  have to take care when writing their style sheets to make sure that the attribute is still styled
  as expected.</p>

  <div class="example">

   <p>In the following skeletal example, the attribute is used to hide the Web game's main screen
   until the user logs in:</p>

   <pre>  &lt;h1&gt;The Example Game&lt;/h1&gt;
  &lt;section id="login"&gt;
   &lt;h2&gt;Login&lt;/h2&gt;
   &lt;form&gt;
    ...
    &lt;!-- calls login() once the user's credentials have been checked --&gt;
   &lt;/form&gt;
   &lt;script&gt;
    function login() {
      // switch screens
      document.getElementById('login').hidden = true;
      document.getElementById('game').hidden = false;
    }
   &lt;/script&gt;
  &lt;/section&gt;
  &lt;section id="game" hidden&gt;
   ...
  &lt;/section&gt;</pre>

  </div>

  <p>The <code id="the-hidden-attribute:the-hidden-attribute-5"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute must not be used to hide content that
  could legitimately be shown in another presentation. For example, it is incorrect to use <code id="the-hidden-attribute:the-hidden-attribute-6"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> to hide panels in a tabbed dialog, because the tabbed interface
  is merely a kind of overflow presentation — one could equally well just show all the form
  controls in one big page with a scrollbar. It is similarly incorrect to use this attribute to hide
  content just from one presentation — if something is marked <code id="the-hidden-attribute:the-hidden-attribute-7"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code>, it is hidden from all presentations, including, for instance,
  screen readers.</p>

  
  

  <p>Elements that are not themselves <code id="the-hidden-attribute:the-hidden-attribute-8"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> must not
  <a href="/breakup/specs/html-linking/#hyperlink" id="the-hidden-attribute:hyperlink">hyperlink</a> to elements that are <code id="the-hidden-attribute:the-hidden-attribute-9"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code>. The <code>for</code> attributes of <code id="the-hidden-attribute:the-label-element"><a href="/breakup/specs/html-forms/#the-label-element">label</a></code> and <code id="the-hidden-attribute:the-output-element"><a href="/breakup/specs/html-forms/#the-output-element">output</a></code> elements that are not
  themselves <code id="the-hidden-attribute:the-hidden-attribute-10"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> must similarly not refer to elements that are
  <code id="the-hidden-attribute:the-hidden-attribute-11"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code>. In both cases, such references would cause user
  confusion.</p>

  <p>Elements and scripts may, however, refer to elements that are <code id="the-hidden-attribute:the-hidden-attribute-12"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> in other contexts.</p>

  <div class="example">

   <p>For example, it would be incorrect to use the <code id="the-hidden-attribute:attr-hyperlink-href"><a href="/breakup/specs/html-linking/#attr-hyperlink-href">href</a></code>
   attribute to link to a section marked with the <code id="the-hidden-attribute:the-hidden-attribute-13"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute.
   If the content is not applicable or relevant, then there is no reason to link to it.</p>

   <p>It would be fine, however, to use the ARIA <code id="the-hidden-attribute:attr-aria-describedby"><a data-x-internal="attr-aria-describedby" href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-describedby">aria-describedby</a></code> attribute to refer to descriptions that are
   themselves <code id="the-hidden-attribute:the-hidden-attribute-14"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code>. While hiding the descriptions implies that
   they are not useful alone, they could be written in such a way that they are useful in the
   specific context of being referenced from the images that they describe.</p>

   <p>Similarly, a <code id="the-hidden-attribute:the-canvas-element"><a href="/breakup/specs/html-canvas/#the-canvas-element">canvas</a></code> element with the <code id="the-hidden-attribute:the-hidden-attribute-15"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code>
   attribute could be used by a scripted graphics engine as an off-screen buffer, and a form control
   could refer to a hidden <code id="the-hidden-attribute:the-form-element"><a href="/breakup/specs/html-forms/#the-form-element">form</a></code> element using its <code id="the-hidden-attribute:attr-fae-form"><a href="/breakup/specs/html-forms/#attr-fae-form">form</a></code> attribute.</p>

  </div>

  <p>Elements in a section hidden by the <code id="the-hidden-attribute:the-hidden-attribute-16"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute are still
  active, e.g. scripts and form controls in such sections still execute and submit respectively.
  Only their presentation to the user changes.</p>

  

  <p>The <dfn id="dom-hidden"><code>hidden</code></dfn> IDL attribute must <a href="/breakup/specs/core-algorithms/#reflect" id="the-hidden-attribute:reflect">reflect</a>
  the content attribute of the same name.</p></section><section><h2>Inert subtrees</h2>

  <p>A node (in particular elements and text nodes) can be marked as <dfn id="inert">inert</dfn>. When a node
  is <a href="/breakup/specs/html-ui/#inert" id="inert-subtrees:inert">inert</a>, then the user agent must act as if the node was absent for the purposes of
  targeting user interaction events, may ignore the node for the purposes of text search user
  interfaces (commonly known as "find in page"), and may prevent the user from selecting text in
  that node. User agents should allow the user to override the restrictions on search and text
  selection, however.</p>

  <p class="example">For example, consider a page that consists of just a single <a href="/breakup/specs/html-ui/#inert" id="inert-subtrees:inert-2">inert</a>
  paragraph positioned in the middle of a <code id="inert-subtrees:the-body-element"><a href="/breakup/specs/html-structure/#the-body-element">body</a></code>. If a user moves their pointing device
  from the <code id="inert-subtrees:the-body-element-2"><a href="/breakup/specs/html-structure/#the-body-element">body</a></code> over to the <a href="/breakup/specs/html-ui/#inert" id="inert-subtrees:inert-3">inert</a> paragraph and clicks on the paragraph,
  no <code id="inert-subtrees:event-mouseover"><a href="/breakup/specs/core-algorithms/#event-mouseover">mouseover</a></code> event would be fired, and the <code id="inert-subtrees:event-mousemove"><a href="/breakup/specs/core-algorithms/#event-mousemove">mousemove</a></code> and <code id="inert-subtrees:event-click"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code> events would
  be fired on the <code id="inert-subtrees:the-body-element-3"><a href="/breakup/specs/html-structure/#the-body-element">body</a></code> element rather than the paragraph.</p>

  <p class="note">When a node is inert, it generally cannot be focused. Inert nodes that are <a href="/breakup/specs/html-ui/#concept-command" id="inert-subtrees:concept-command">commands</a> will also get disabled.</p>

  <p>While a <a href="/breakup/specs/browser-dom/#browsing-context-container" id="inert-subtrees:browsing-context-container">browsing context container</a> is marked as <a href="/breakup/specs/html-ui/#inert" id="inert-subtrees:inert-4">inert</a>, its
  <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="inert-subtrees:nested-browsing-context">nested browsing context</a>'s <a href="/breakup/specs/browser-dom/#active-document" id="inert-subtrees:active-document">active document</a>, and all nodes in that
  <code id="inert-subtrees:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, must be marked as <a href="/breakup/specs/html-ui/#inert" id="inert-subtrees:inert-5">inert</a>.</p>

  <p>An entire <code id="inert-subtrees:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> can be marked as <dfn id="blocked-by-a-modal-dialog">blocked by a modal dialog</dfn> <var>subject</var>. While a <code id="inert-subtrees:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code> is so marked, every node that is <a href="/breakup/specs/core-algorithms/#in-a-document" id="inert-subtrees:in-a-document">in the <code>Document</code></a>, with the exception of the <var>subject</var> element and its descendants, must be marked <a href="/breakup/specs/html-ui/#inert" id="inert-subtrees:inert-6">inert</a>. (The
  elements excepted by this paragraph can additionally be marked <a href="/breakup/specs/html-ui/#inert" id="inert-subtrees:inert-7">inert</a> through other
  means; being part of a modal dialog does not "protect" a node from being marked
  <a href="/breakup/specs/html-ui/#inert" id="inert-subtrees:inert-8">inert</a>.)</p>

  <p>Only one element at a time can mark a <code id="inert-subtrees:document-4"><a href="/breakup/specs/browser-dom/#document">Document</a></code> as being <a href="/breakup/specs/html-ui/#blocked-by-a-modal-dialog" id="inert-subtrees:blocked-by-a-modal-dialog">blocked by a modal
  dialog</a>. When a new <code id="inert-subtrees:the-dialog-element"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> is made to <a href="/breakup/specs/html-ui/#blocked-by-a-modal-dialog" id="inert-subtrees:blocked-by-a-modal-dialog-2">block</a> a <code id="inert-subtrees:document-5"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, the previous element, if any, stops blocking the
  <code id="inert-subtrees:document-6"><a href="/breakup/specs/browser-dom/#document">Document</a></code>.</p>

  <p class="note">The <code id="inert-subtrees:the-dialog-element-2"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element's <code id="inert-subtrees:dom-dialog-showmodal"><a href="/breakup/specs/html-ui/#dom-dialog-showmodal">showModal()</a></code> method makes use of this mechanism.</p></section><section><h2>Activation</h2>

  <p>Certain elements in HTML have an <a href="/breakup/specs/html-ui/#activation-behaviour" id="activation:activation-behaviour">activation behaviour</a>, which means that the user
  can activate them. This triggers a sequence of events dependent on the activation mechanism, and
  normally culminating in a <code id="activation:event-click"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code> event, as
  described below.</p>

  

  <p>The user agent should allow the user to manually trigger elements that have an <a href="/breakup/specs/html-ui/#activation-behaviour" id="activation:activation-behaviour-2">activation
  behaviour</a>, for instance using keyboard or voice input, or through mouse clicks. When the
  user triggers an element with a defined <a href="/breakup/specs/html-ui/#activation-behaviour" id="activation:activation-behaviour-3">activation behaviour</a> in a manner other than
  clicking it, the default action of the interaction event must be to <a href="/breakup/specs/html-ui/#run-synthetic-click-activation-steps" id="activation:run-synthetic-click-activation-steps">run synthetic click
  activation steps</a> on the element.</p> 

  <p>Each element has a <var>click in progress</var> flag, initially set to false.</p>

  <p>When a user agent is to <dfn id="run-synthetic-click-activation-steps">run synthetic click activation steps</dfn> on an element, the user
  agent must run the following steps:</p>

  <ol><li><p>If the element's <var>click in progress</var> flag is set to true, then abort
   these steps.</p></li><li><p>Set the <var>click in progress</var> flag on the element to true.</p></li><li><p><a href="/breakup/specs/html-ui/#run-pre-click-activation-steps" id="activation:run-pre-click-activation-steps">Run pre-click activation steps</a> on the element.</p></li><li><p><a href="/breakup/specs/browser-dom/#fire-a-click-event" id="activation:fire-a-click-event">Fire a <code>click</code> event</a> at the element. If the
   <a href="/breakup/specs/html-ui/#run-synthetic-click-activation-steps" id="activation:run-synthetic-click-activation-steps-2">run synthetic click activation steps</a> algorithm was invoked because the <code id="activation:dom-click"><a href="/breakup/specs/html-ui/#dom-click">click()</a></code> method was invoked, then the <code id="activation:dom-event-istrusted"><a href="/breakup/specs/core-algorithms/#dom-event-istrusted">isTrusted</a></code> attribute must be initialised to false.</p></li><li>

    <p>If this <code id="activation:event-click-2"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code> event is not canceled, <a href="/breakup/specs/html-ui/#run-post-click-activation-steps" id="activation:run-post-click-activation-steps">run post-click
    activation steps</a> on the element.</p>

    <p>If the event <em>is</em> canceled, the user agent must <a href="/breakup/specs/html-ui/#run-canceled-activation-steps" id="activation:run-canceled-activation-steps">run canceled activation
    steps</a> on the element instead.</p>

   </li><li><p>Set the <var>click in progress</var> flag on the element to false.</p></li></ol>

  <p>When a pointing device is clicked, the user agent must <a href="/breakup/specs/html-ui/#run-authentic-click-activation-steps" id="activation:run-authentic-click-activation-steps">run authentic click activation
  steps</a> instead of firing the click event. When a user
  agent is to <dfn id="run-authentic-click-activation-steps">run authentic click activation steps</dfn> for a given event <var>event</var>, it must follow these steps:</p>

  <ol><li><p>Let <var>target</var> be the element designated by the user (the target of <var>event</var>).</p></li><li><p>If <var>target</var> is a <code id="activation:the-canvas-element"><a href="/breakup/specs/html-canvas/#the-canvas-element">canvas</a></code> element, run the <a href="http://www.w3.org/html/wg/drafts/2dcontext/master/#canvas-mouseevent-rerouting-steps" id="activation:canvas-mouseevent-rerouting-steps">canvas
   <code>MouseEvent</code> rerouting steps</a>. If this changes <var>event</var>'s
   target, then let <var>target</var> be the new target.</p></li><li><p>Set the <var>click in progress</var> flag on <var>target</var> to
   true.</p></li><li><p>Let <var>e</var> be the <a href="/breakup/specs/html-ui/#nearest-activatable-element" id="activation:nearest-activatable-element">nearest activatable element</a> of <var>target</var> (defined below), if any.</p></li><li><p>If there is an element <var>e</var>, <a href="/breakup/specs/html-ui/#run-pre-click-activation-steps" id="activation:run-pre-click-activation-steps-2">run pre-click activation steps</a>
   on it.</p></li><li>

    <p><a href="/breakup/specs/core-algorithms/#concept-event-dispatch" id="activation:concept-event-dispatch">Dispatch</a> <var>event</var> (the
    required <code id="activation:event-click-3"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code> event) at <var>target</var>.</p> 

    <p>If there is an element <var>e</var> and the <code id="activation:event-click-4"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code>
    event is not canceled, <a href="/breakup/specs/html-ui/#run-post-click-activation-steps" id="activation:run-post-click-activation-steps-2">run post-click activation steps</a> on element <var>e</var>.</p>

    <p>If there is an element <var>e</var> and the event <em>is</em> canceled, <a href="/breakup/specs/html-ui/#run-canceled-activation-steps" id="activation:run-canceled-activation-steps-2">run
    canceled activation steps</a> on element <var>e</var>.</p>

   </li><li><p>Set the <var>click in progress</var> flag on <var>target</var> to
   false.</p></li></ol>

  <p class="note">The algorithms above don't run for arbitrary synthetic events dispatched by author
  script. The <code id="activation:dom-click-2"><a href="/breakup/specs/html-ui/#dom-click">click()</a></code> method can be used to make the <a href="/breakup/specs/html-ui/#run-synthetic-click-activation-steps" id="activation:run-synthetic-click-activation-steps-3">run
  synthetic click activation steps</a> algorithm happen programmatically.</p>

  <p class="note">Click-focusing behaviour (e.g. the focusing of a text field when user clicks in
  one) typically happens before the click, when the mouse button is first depressed, and is
  therefore not discussed here.</p> 

  <p>Given an element <var>target</var>, the <dfn id="nearest-activatable-element">nearest activatable element</dfn> is the
  element returned by the following algorithm:</p>

  <ol><li><p>If <var>target</var> has a defined <a href="/breakup/specs/html-ui/#activation-behaviour" id="activation:activation-behaviour-4">activation behaviour</a>, then return
   <var>target</var> and abort these steps.</p></li><li><p>If <var>target</var> has a parent element, then set <var>target</var> to
   that parent element and return to the first step.</p></li><li><p>Otherwise, there is no <a href="/breakup/specs/html-ui/#nearest-activatable-element" id="activation:nearest-activatable-element-2">nearest activatable element</a>.</p></li></ol>

  <p>When a user agent is to <dfn id="run-pre-click-activation-steps">run pre-click activation steps</dfn> on an element, it must run
  the <dfn id="pre-click-activation-steps">pre-click activation steps</dfn> defined for that element, if any.</p>

  <p>When a user agent is to <dfn id="run-canceled-activation-steps">run canceled activation steps</dfn> on an element, it must run the
  <dfn id="canceled-activation-steps">canceled activation steps</dfn> defined for that element, if any.</p>

  <p>When a user agent is to <dfn id="run-post-click-activation-steps">run post-click activation steps</dfn> on an element, it must run
  the <dfn id="activation-behaviour">activation behaviour</dfn> defined for that element, if any. Activation behaviours can
  refer to the <code id="activation:event-click-5"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code> event that was fired by the steps above
  leading up to this point.</p>

  



  

  <dl class="domintro"><dt><var>element</var> . <code id="activation:dom-click-3"><a href="/breakup/specs/html-ui/#dom-click">click</a></code>()</dt><dd>

    <p>Acts as if the element was clicked.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-click"><code>click()</code></dfn> method must run the following steps:</p>

  <ol><li><p>If the element is a form control that is <a href="/breakup/specs/html-forms/#concept-fe-disabled" id="activation:concept-fe-disabled">disabled</a>, abort these steps.</p></li><li><p><a href="/breakup/specs/html-ui/#run-synthetic-click-activation-steps" id="activation:run-synthetic-click-activation-steps-4">Run synthetic click activation steps</a> on the element.</p></li></ol></section><section><h2>Focus</h2>

  
  
  
  

  

  <section><h2>Introduction</h2>

  <p><i>This section is non-normative.</i></p>

  <p>An HTML user interface typically consists of multiple interactive widgets, such as form
  controls, scrollable regions, links, dialog boxes, browser tabs, and so forth. These widgets form
  a hierarchy, with some (e.g. browser tabs, dialog boxes) containing others (e.g. links, form
  controls).</p>

  <p>When interacting with an interface using a keyboard, key input is channeled from the system,
  through the hierarchy of interactive widgets, to an active widget, which is said to be
  <a href="/breakup/specs/html-ui/#focused" id="introduction-8:focused">focused</a>.</p>

  <div class="example">

   <p>Consider an HTML application running in a browser tab running in a graphical environment.
   Suppose this application had a page with some text fields and links, and was currently showing a
   modal dialog, which itself had a text field and a button.</p>

   <p>The hierarchy of focusable widgets, in this scenario, would include the browser window, which
   would have, amongst its children, the browser tab containing the HTML application. The tab itself
   would have as its children the various links and text fields, as well as the dialog. The dialog
   itself would have as its children the text field and the button.</p>

   <p><img width="800" src="img/focus-tree.png" height="450" alt=""> 

   </p><p>If the widget with <span>focus</span> in this example was the text field in the dialog box, then key
   input would be channeled from the graphical system to ① the Web browser, then to ②
   the tab, then to ③ the dialog, and finally to ④ the text field.</p>

  </div>

  <p>Keyboard <em>events</em> are always targetted at this <a href="/breakup/specs/html-ui/#focused" id="introduction-8:focused-2">focused</a> element.</p></section>


  <section><h2>Data model</h2>

  <p>The term <dfn id="focusable-area">focusable area</dfn> is used to refer to regions of the interface that can become
  the target of keyboard input. Focusable areas can be elements, parts of elements, or other regions
  managed by the user agent.</p>

  <p>Each <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area">focusable area</a> has a <dfn id="dom-anchor">DOM anchor</dfn>, which is a <code id="data-model:node"><a href="/breakup/specs/core-algorithms/#node">Node</a></code> object
  that represents the position of the <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-2">focusable area</a> in the DOM. (When the <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-3">focusable
  area</a> is itself a <code id="data-model:node-2"><a href="/breakup/specs/core-algorithms/#node">Node</a></code>, it is its own <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor">DOM anchor</a>.) The <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-2">DOM anchor</a> is
  used in some APIs as a substitute for the <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-4">focusable area</a> when there is no other DOM object
  to represent the <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-5">focusable area</a>.</p>

  <p>The following table describes what objects can be <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-6">focusable
  areas</a>. The cells in the left column describe objects that can be <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-7">focusable areas</a>; the cells in the right column describe the <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-3">DOM
  anchors</a> for those elements. (The cells that span both columns are non-normative examples.)</p>

  <table id="table-fa"><thead><tr><th id="th-fa-area"><a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-8">Focusable area</a>
     </th><th id="th-fa-dom-rep"><a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-4">DOM anchor</a>
    </th></tr><tr><th colspan="2" id="th-fa-examples">Examples

   </th></tr></thead><tbody><tr><th headers="th-fa-area" id="td-fa-1" class="data-header">
     Elements that have their <a href="/breakup/specs/html-ui/#specially-focusable" id="data-model:specially-focusable">tabindex focus flag</a> set, that are not <a href="/breakup/specs/html-styling/#concept-element-disabled" id="data-model:concept-element-disabled">actually disabled</a>, that are not <a href="/breakup/specs/html-ui/#expressly-inert-control" id="data-model:expressly-inert-control">expressly inert</a>, and that are either <a href="/breakup/specs/rendering-html/#being-rendered" id="data-model:being-rendered">being
     rendered</a> or <a href="/breakup/specs/html-canvas/#being-used-as-relevant-canvas-fallback-content" id="data-model:being-used-as-relevant-canvas-fallback-content">being used as relevant canvas fallback content</a>. 
     </th><td headers="td-fa-1 th-fa-dom-rep">
     The element itself.
    </td></tr><tr><td colspan="2" headers="td-fa-1 th-fa-examples">
     <p class="example"><code id="data-model:the-iframe-element"><a href="/breakup/specs/html-embedding/#the-iframe-element">iframe</a></code>, <code id="data-model:text-(type=text)-state-and-search-state-(type=search)"><a href="/breakup/specs/html-forms/#text-(type=text)-state-and-search-state-(type=search)">&lt;input
     type=text&gt;</a></code>, sometimes <code id="data-model:the-a-element"><a href="/breakup/specs/html-linking/#the-a-element">&lt;a href=""&gt;</a></code> (depending on platform
     conventions).

   </p></td></tr></tbody><tbody><tr><th headers="th-fa-area" id="td-fa-2" class="data-header">
     The shapes of <code id="data-model:the-area-element"><a href="/breakup/specs/html-linking/#the-area-element">area</a></code> elements in an <a href="/breakup/specs/html-linking/#image-map" id="data-model:image-map">image map</a> associated with an
     <code id="data-model:the-img-element"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> element that is <a href="/breakup/specs/rendering-html/#being-rendered" id="data-model:being-rendered-2">being rendered</a> and is not <a href="/breakup/specs/html-ui/#expressly-inert-control" id="data-model:expressly-inert-control-2">expressly inert</a>.
     </th><td headers="td-fa-2 th-fa-dom-rep">
     The <code id="data-model:the-img-element-2"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> element.
    </td></tr><tr><td colspan="2" headers="td-fa-2 th-fa-examples">
     <div class="example">
      <p>In the following example, the <code id="data-model:the-area-element-2"><a href="/breakup/specs/html-linking/#the-area-element">area</a></code> element creates two shapes, one on each
      image. The <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-5">DOM anchor</a> of the first shape is the first <code id="data-model:the-img-element-3"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> element, and the
      <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-6">DOM anchor</a> of the second shape is the second <code id="data-model:the-img-element-4"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> element.</p>
      <pre>&lt;map id=wallmap&gt;&lt;area alt="Enter Door" coords="10,10,100,200" href="door.html"&gt;&lt;/map&gt;
...
&lt;img src="images/innerwall.jpeg" alt="There is a white wall here, with a door." usemap="#wallmap"&gt;
...
&lt;img src="images/outerwall.jpeg" alt="There is a red wall here, with a door." usemap="#wallmap"&gt;</pre>
     </div>

   </td></tr></tbody><tbody><tr><th headers="th-fa-area" id="td-fa-3" class="data-header">
     The user-agent provided subwidgets of elements that are <a href="/breakup/specs/rendering-html/#being-rendered" id="data-model:being-rendered-3">being rendered</a> and are not
     <a href="/breakup/specs/html-styling/#concept-element-disabled" id="data-model:concept-element-disabled-2">actually disabled</a> or <a href="/breakup/specs/html-ui/#expressly-inert-control" id="data-model:expressly-inert-control-3">expressly inert</a>.
     </th><td headers="td-fa-3 th-fa-dom-rep">
     The element for which the <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-9">focusable area</a> is a subwidget.
    </td></tr><tr><td colspan="2" headers="td-fa-3 th-fa-examples">
     <p class="example">The <a href="/breakup/specs/html-media/#expose-a-user-interface-to-the-user" id="data-model:expose-a-user-interface-to-the-user">controls in the user
     interface that is exposed to the user</a> for a <code id="data-model:the-video-element"><a href="/breakup/specs/html-media/#the-video-element">video</a></code> element, the up and down
     buttons in a spin-control version of <code id="data-model:number-state-(type=number)"><a href="/breakup/specs/html-forms/#number-state-(type=number)">&lt;input
     type=number&gt;</a></code>, the two range control widgets in a <code id="data-model:range-state-(type=range)"><a href="/breakup/specs/html-forms/#range-state-(type=range)">&lt;input type=range multiple&gt;</a></code>, the part of a
     <code id="data-model:the-details-element"><a href="/breakup/specs/html-ui/#the-details-element">details</a></code> element's rendering that enabled the element to be opened or closed using
     keyboard input.</p>

   </td></tr></tbody><tbody><tr><th headers="th-fa-area" id="td-fa-4" class="data-header">
     The scrollable regions of elements that are <a href="/breakup/specs/rendering-html/#being-rendered" id="data-model:being-rendered-4">being rendered</a> are not <a href="/breakup/specs/html-ui/#expressly-inert-control" id="data-model:expressly-inert-control-4">expressly inert</a>. 
     </th><td headers="td-fa-4 th-fa-dom-rep">
     The element for which the box that the scrollable region scrolls was created.
    </td></tr><tr><td colspan="2" headers="td-fa-4 th-fa-examples">
     <p class="example">The CSS 'overflow' property's 'scroll' value typically creates a scrollable
     region.</p>

   </td></tr></tbody><tbody><tr><th headers="th-fa-area" id="td-fa-5" class="data-header">
     The viewport of a <code id="data-model:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code> that is in a <a href="/breakup/specs/browser-dom/#browsing-context" id="data-model:browsing-context">browsing context</a> and is not
     <a href="/breakup/specs/html-ui/#inert" id="data-model:inert">inert</a>.
     </th><td headers="td-fa-5 th-fa-dom-rep">
     The <code id="data-model:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> for which the viewport was created.
    </td></tr><tr><td colspan="2" headers="td-fa-5 th-fa-examples">
     <p class="example">The contents of an <code id="data-model:the-iframe-element-2"><a href="/breakup/specs/html-embedding/#the-iframe-element">iframe</a></code>.</p>

   </td></tr></tbody><tbody><tr><th headers="th-fa-area" id="td-fa-6" class="data-header">
     Any other element or part of an element, especially to aid with accessibility or to better
     match platform conventions.
     </th><td headers="td-fa-6 th-fa-dom-rep">
     The element.
    </td></tr><tr><td colspan="2" headers="td-fa-6 th-fa-examples">
     <p class="example">A user agent could make all list item bullets focusable, so that a user can
     more easily navigate lists.</p>
     <p class="example">Similarly, a user agent could make all elements with <code id="data-model:attr-title"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attributes focusable, so that their advisory information can
     be accessed.</p>

  </td></tr></tbody></table>

  <p id="bc-focus-ergo-bcc-focus" class="note">A <a href="/breakup/specs/browser-dom/#browsing-context-container" id="data-model:browsing-context-container">browsing context container</a> (e.g. an
  <code id="data-model:the-iframe-element-3"><a href="/breakup/specs/html-embedding/#the-iframe-element">iframe</a></code>) is a <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-10">focusable area</a>, but key events routed to a <a href="/breakup/specs/browser-dom/#browsing-context-container" id="data-model:browsing-context-container-2">browsing context
  container</a> get immediately routed to the <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="data-model:nested-browsing-context">nested browsing context</a>'s <a href="/breakup/specs/browser-dom/#active-document" id="data-model:active-document">active
  document</a>. Similarly, in sequential focus navigation a <a href="/breakup/specs/browser-dom/#browsing-context-container" id="data-model:browsing-context-container-3">browsing context
  container</a> essentially acts merely as a placeholder for its <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="data-model:nested-browsing-context-2">nested browsing
  context</a>'s <a href="/breakup/specs/browser-dom/#active-document" id="data-model:active-document-2">active document</a>.</p>

  <p>Each <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-11">focusable area</a> belongs to a <dfn id="control-group">control group</dfn>. Each <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group">control group</a> has
  an <dfn id="control-group-owner">owner</dfn>. <a href="/breakup/specs/html-ui/#control-group-owner" id="data-model:control-group-owner">Control group
  owners</a> are <dfn id="control-group-owner-object">control group owner objects</dfn>. The
  following are <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object">control group owner objects</a>:</p>

  <ul class="brief"><li><code id="data-model:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object in <a href="/breakup/specs/browser-dom/#browsing-context" id="data-model:browsing-context-2">browsing contexts</a>.</li><li><code id="data-model:the-dialog-element"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> elements that have an <code id="data-model:attr-dialog-open"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code>
   attribute specified and that are <a href="/breakup/specs/rendering-html/#being-rendered" id="data-model:being-rendered-5">being rendered</a>.</li></ul>

  <p>Each <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-2">control group owner object</a> owns one <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-2">control group</a> (though that
  group might be empty).</p>

  <p>If the <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-7">DOM anchor</a> of a <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-12">focusable area</a> is a <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-3">control group owner
  object</a>, then that <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-13">focusable area</a> belongs to that <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-4">control group owner
  object</a>'s <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-3">control group</a>. Otherwise, the <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-14">focusable area</a> belongs to its
  <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-8">DOM anchor</a>'s nearest ancestor <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-5">control group owner object</a>.</p>

  <div class="example">

   <p>Thus, a viewport always belongs to the <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-4">control group</a> of the <code id="data-model:document-4"><a href="/breakup/specs/browser-dom/#document">Document</a></code>
   for which the viewport was created, an <code id="data-model:the-input-element"><a href="/breakup/specs/html-forms/#the-input-element">input</a></code> control belongs to the <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-5">control
   group</a> of its nearest ancestor <code id="data-model:the-dialog-element-2"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> or <code id="data-model:document-5"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, and an image
   map's shapes belong to the nearest ancestor <code id="data-model:the-dialog-element-3"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> or <code id="data-model:document-6"><a href="/breakup/specs/browser-dom/#document">Document</a></code> of the
   <code id="data-model:the-img-element-5"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> elements (not the <code id="data-model:the-area-element-3"><a href="/breakup/specs/html-linking/#the-area-element">area</a></code> elements — this means one
   <code id="data-model:the-area-element-4"><a href="/breakup/specs/html-linking/#the-area-element">area</a></code> element might create multiple shapes in different <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-6">control groups</a>).</p>

  </div>

  <p>An element is <dfn id="expressly-inert-control">expressly inert</dfn> if it is
  <a href="/breakup/specs/html-ui/#inert" id="data-model:inert-2">inert</a> but it is not a <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-6">control group owner object</a> and its nearest
  ancestor <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-7">control group owner object</a> is not <a href="/breakup/specs/html-ui/#inert" id="data-model:inert-3">inert</a>.</p>

  <p>One <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-15">focusable area</a> in each non-empty <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-7">control group</a> is designated the
  <dfn id="focused-area-of-the-control-group">focused area of the control group</dfn>. Which control is so designated changes over time,
  based on algorithms in this specification. If a <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-8">control group</a> is empty, it has no <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="data-model:focused-area-of-the-control-group">focused area</a>.</p>

  <p>Each <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-8">control group owner object</a> can also act as the <dfn id="dialog-group-manager">manager</dfn> of a <dfn id="dialog-group">dialog group</dfn>.</p>

  <p>Each <code id="data-model:the-dialog-element-4"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element that has an <code id="data-model:attr-dialog-open-2"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code>
  attribute specified and that is <a href="/breakup/specs/rendering-html/#being-rendered" id="data-model:being-rendered-6">being rendered</a> (i.e. that is a <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-9">control group
  owner object</a>) and is not <a href="/breakup/specs/html-ui/#expressly-inert-dialog" id="data-model:expressly-inert-dialog">expressly inert</a>
  belongs to the <a href="/breakup/specs/html-ui/#dialog-group" id="data-model:dialog-group">dialog group</a> whose <a href="/breakup/specs/html-ui/#dialog-group-manager" id="data-model:dialog-group-manager">manager</a> is
  the <code id="data-model:the-dialog-element-5"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element's nearest ancestor <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-10">control group owner object</a>.</p>

  <p>A <code id="data-model:the-dialog-element-6"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> is <dfn id="expressly-inert-dialog">expressly inert</dfn> if it is
  <a href="/breakup/specs/html-ui/#inert" id="data-model:inert-4">inert</a> but its nearest ancestor <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-11">control group owner object</a> is not.</p>

  <p>If no <code id="data-model:the-dialog-element-7"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element has a particular <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-12">control group owner object</a> as
  its nearest ancestor <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-13">control group owner object</a>, then that <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-14">control group owner
  object</a> has no <a href="/breakup/specs/html-ui/#dialog-group" id="data-model:dialog-group-2">dialog group</a>.</p>

  <p>Each <a href="/breakup/specs/html-ui/#dialog-group" id="data-model:dialog-group-3">dialog group</a> can have a <code id="data-model:the-dialog-element-8"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> designated as the <dfn id="focused-dialog-of-the-dialog-group">focused
  dialog of the dialog group</dfn>. Which <code id="data-model:the-dialog-element-9"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> is so designated changes over time,
  based on algorithms in this specification.</p>

  <hr>

  <p><a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-16">Focusable areas</a> in <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-9">control groups</a>
  are ordered relative to the <a href="/breakup/specs/core-algorithms/#tree-order" id="data-model:tree-order">tree order</a> of their <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-9">DOM
  anchors</a>. <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-17">Focusable areas</a> with the same <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-10">DOM anchor</a> in a
  <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-10">control group</a> are ordered relative to their CSS box's relative positions in a pre-order,
  depth-first traversal of the box tree. [[!CSS]]</p>

  <p>Elements in <a href="/breakup/specs/html-ui/#dialog-group" id="data-model:dialog-group-4">dialog groups</a> are ordered in <a href="/breakup/specs/core-algorithms/#tree-order" id="data-model:tree-order-2">tree
  order</a>.</p>

  <hr>

  <p>The <dfn id="currently-focused-area-of-a-top-level-browsing-context">currently focused area of a top-level browsing context</dfn> at any particular time is
  the <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-18">focusable area</a> or <code id="data-model:the-dialog-element-10"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> returned by this algorithm:</p>

  <ol><li><p>Let <var>candidate</var> be the <code id="data-model:document-7"><a href="/breakup/specs/browser-dom/#document">Document</a></code> of the <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="data-model:top-level-browsing-context">top-level
   browsing context</a>.</p></li><li>

    <p>If <var>candidate</var> has a <a href="/breakup/specs/html-ui/#dialog-group" id="data-model:dialog-group-5">dialog group</a> with a designated
    <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="data-model:focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a>, then let <var>candidate</var> be the
    designated <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="data-model:focused-dialog-of-the-dialog-group-2">focused dialog of the dialog group</a>, and redo this step.</p>

    <p>Otherwise, if <var>candidate</var> has a non-empty <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-11">control group</a>, and the
    designated <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="data-model:focused-area-of-the-control-group-2">focused area of the control group</a> is a <a href="/breakup/specs/browser-dom/#browsing-context-container" id="data-model:browsing-context-container-4">browsing context
    container</a>, then let <var>candidate</var> be the <a href="/breakup/specs/browser-dom/#active-document" id="data-model:active-document-3">active document</a> of
    that <a href="/breakup/specs/browser-dom/#browsing-context-container" id="data-model:browsing-context-container-5">browsing context container</a>'s <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="data-model:nested-browsing-context-3">nested browsing context</a>, and redo
    this step.</p>

    <p>Otherwise, if <var>candidate</var> has a non-empty <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-12">control group</a>, let
    <var>candidate</var> be the designated <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="data-model:focused-area-of-the-control-group-3">focused area of the control
    group</a>.</p>

   </li><li><p>Return <var>candidate</var>.</p></li></ol>

  <p>An element that is the <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-11">DOM anchor</a> of a <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-19">focusable area</a> is said to <dfn id="gains-focus">gain focus</dfn> when that <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-20">focusable area</a> becomes the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="data-model:currently-focused-area-of-a-top-level-browsing-context">currently
  focused area of a top-level browsing context</a>. When an element is the <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-12">DOM anchor</a> of a
  <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-21">focusable area</a> of the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="data-model:currently-focused-area-of-a-top-level-browsing-context-2">currently focused area of a top-level browsing context</a>,
  it is <dfn id="focused">focused</dfn>.</p>

  

  <p>The <dfn id="focus-chain">focus chain</dfn> of a <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-22">focusable area</a> or <a href="/breakup/specs/html-ui/#control-group-owner-object" id="data-model:control-group-owner-object-15">control group owner
  object</a> <var>subject</var> is the ordered list constructed as follows:</p>

  <ol><li><p>Let <var>current object</var> be <var>subject</var>.</p></li><li><p>Let <var>output</var> be an empty list.</p></li><li><p><i>Loop</i>: Append <var>current object</var> to <var>output</var>.</p></li><li>

    <p>If <var>current object</var> is an <code id="data-model:the-area-element-5"><a href="/breakup/specs/html-linking/#the-area-element">area</a></code> element's shape, append
    that <code id="data-model:the-area-element-6"><a href="/breakup/specs/html-linking/#the-area-element">area</a></code> element to <var>output</var>.</p>

    <p>Otherwise, if <var>current object</var> is a <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-23">focusable area</a> whose <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-13">DOM
    anchor</a> is an element that is not <var>current object</var> itself, append that
    <a href="/breakup/specs/html-ui/#dom-anchor" id="data-model:dom-anchor-14">DOM anchor</a> element to <var>output</var>.</p>

   </li><li>

    <p>If <var>current object</var> is a <code id="data-model:the-dialog-element-11"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> object in a <a href="/breakup/specs/html-ui/#dialog-group" id="data-model:dialog-group-6">dialog group</a>,
    let <var>current object</var> be that <a href="/breakup/specs/html-ui/#dialog-group" id="data-model:dialog-group-7">dialog group</a>'s <a href="/breakup/specs/html-ui/#dialog-group-manager" id="data-model:dialog-group-manager-2">manager</a>, and return to the step labeled <i>loop</i>.</p>

    <p>Otherwise, if <var>current object</var> is a <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-24">focusable area</a>, let <var>current
    object</var> be that <a href="/breakup/specs/html-ui/#focusable-area" id="data-model:focusable-area-25">focusable area</a>'s <a href="/breakup/specs/html-ui/#control-group" id="data-model:control-group-13">control group</a>'s <a href="/breakup/specs/html-ui/#control-group-owner" id="data-model:control-group-owner-2">owner</a>, and return to the step labeled <i>loop</i>.</p>

    <p>Otherwise, if <var>current object</var> is a <code id="data-model:document-8"><a href="/breakup/specs/browser-dom/#document">Document</a></code> in a <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="data-model:nested-browsing-context-4">nested browsing
    context</a>, let <var>current object</var> be its <a href="/breakup/specs/browser-dom/#browsing-context-container" id="data-model:browsing-context-container-6">browsing context container</a>,
    and return to the step labeled <i>loop</i>.</p>

   </li><li>

    <p>Return <var>output</var>.</p>

    <p class="note">The chain starts with <var>subject</var> and (if <var>subject</var> is or can be the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="data-model:currently-focused-area-of-a-top-level-browsing-context-3">currently focused area of a top-level browsing
    context</a>) continues up the focus hierarchy up to the <code id="data-model:document-9"><a href="/breakup/specs/browser-dom/#document">Document</a></code> of the
    <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="data-model:top-level-browsing-context-2">top-level browsing context</a>.</p>

   </li></ol></section>

  


  <section><h2>The <code id="the-tabindex-attribute:attr-tabindex"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute</h2>

  <p>The <dfn id="attr-tabindex"><code>tabindex</code></dfn> content attribute allows authors to
  indicate that an element is supposed to be <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area">focusable</a>, and
  whether it is supposed to be reachable using <a href="/breakup/specs/html-ui/#sequential-focus-navigation" id="the-tabindex-attribute:sequential-focus-navigation">sequential focus navigation</a> and, if so,
  what is to be the relative order of the element for the purposes of sequential focus navigation.
  The name "tab index" comes from the common use of the "tab" key to navigate through the focusable
  elements. The term "tabbing" refers to moving forward through the focusable elements that can be
  reached using sequential focus navigation.</p>

  <p>When the attribute is omitted, the user agent applies defaults. (There is no way to make an
  element that is <a href="/breakup/specs/rendering-html/#being-rendered" id="the-tabindex-attribute:being-rendered">being rendered</a> be not focusable at all without <a href="/breakup/specs/html-styling/#concept-element-disabled" id="the-tabindex-attribute:concept-element-disabled">disabling</a> it or making it <a href="/breakup/specs/html-ui/#inert" id="the-tabindex-attribute:inert">inert</a>.)</p>

  <p>The <code id="the-tabindex-attribute:attr-tabindex-2"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute, if specified, must have a value
  that is a <a href="/breakup/specs/core-algorithms/#valid-integer" id="the-tabindex-attribute:valid-integer">valid integer</a>. Positive numbers specify the relative position of the
  element's <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-2">focusable areas</a> in the <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="the-tabindex-attribute:sequential-focus-navigation-order">sequential focus
  navigation order</a>, and negative numbers indicate that the control is to be unreachable by
  <a href="/breakup/specs/html-ui/#sequential-focus-navigation" id="the-tabindex-attribute:sequential-focus-navigation-2">sequential focus navigation</a>.</p>

  

  <p>Each element can have a <dfn id="specially-focusable">tabindex focus flag</dfn> set, as defined
  below. This flag is a factor that contributes towards determining whether an element is a
  <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-3">focusable area</a>, as described in the previous section.</p>

  <p>If the <code id="the-tabindex-attribute:attr-tabindex-3"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute is specified on an element, it
  must be parsed using the <a href="/breakup/specs/core-algorithms/#rules-for-parsing-integers" id="the-tabindex-attribute:rules-for-parsing-integers">rules for parsing integers</a>. The attribute's values, or lack
  thereof, must be interpreted as follows:</p>

  <dl><dt>If the attribute is omitted or parsing the value returns an error</dt><dd>

    <p>The user agent should follow platform conventions to determine if the element's
    <a href="/breakup/specs/html-ui/#specially-focusable" id="the-tabindex-attribute:specially-focusable">tabindex focus flag</a> is set and, if so, whether the element and any <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-4">focusable areas</a> that have the element as their <a href="/breakup/specs/html-ui/#dom-anchor" id="the-tabindex-attribute:dom-anchor">DOM anchor</a> can
    be reached using <a href="/breakup/specs/html-ui/#sequential-focus-navigation" id="the-tabindex-attribute:sequential-focus-navigation-3">sequential focus navigation</a>, and if so, what their relative
    position in the <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="the-tabindex-attribute:sequential-focus-navigation-order-2">sequential focus navigation order</a> is to be.</p>

    <p>Modulo platform conventions, it is suggested that for the following elements, the
    <a href="/breakup/specs/html-ui/#specially-focusable" id="the-tabindex-attribute:specially-focusable-2">tabindex focus flag</a> be set:</p>

    <ul><li><code id="the-tabindex-attribute:the-a-element"><a href="/breakup/specs/html-linking/#the-a-element">a</a></code> elements that have an <code id="the-tabindex-attribute:attr-hyperlink-href"><a href="/breakup/specs/html-linking/#attr-hyperlink-href">href</a></code>
     attribute</li><li><code id="the-tabindex-attribute:the-link-element"><a href="/breakup/specs/html-metadata/#the-link-element">link</a></code> elements that have an <code id="the-tabindex-attribute:attr-link-href"><a href="/breakup/specs/html-metadata/#attr-link-href">href</a></code> attribute</li><li><code id="the-tabindex-attribute:the-button-element"><a href="/breakup/specs/html-forms/#the-button-element">button</a></code> elements</li><li><code id="the-tabindex-attribute:the-input-element"><a href="/breakup/specs/html-forms/#the-input-element">input</a></code> elements whose <code id="the-tabindex-attribute:attr-input-type"><a href="/breakup/specs/html-forms/#attr-input-type">type</a></code> attribute are
     not in the <a href="/breakup/specs/html-forms/#hidden-state-(type=hidden)" id="the-tabindex-attribute:hidden-state-(type=hidden)">Hidden</a> state</li><li><code id="the-tabindex-attribute:the-select-element"><a href="/breakup/specs/html-forms/#the-select-element">select</a></code> elements</li><li><code id="the-tabindex-attribute:the-textarea-element"><a href="/breakup/specs/html-forms/#the-textarea-element">textarea</a></code> elements</li><li><code id="the-tabindex-attribute:the-menuitem-element"><a href="/breakup/specs/html-ui/#the-menuitem-element">menuitem</a></code> elements</li><li>Elements with a <code id="the-tabindex-attribute:the-draggable-attribute"><a href="/breakup/specs/dnd/#the-draggable-attribute">draggable</a></code> attribute set, if that would
     enable the user agent to allow the user to begin a drag operations for those elements without
     the use of a pointing device</li><li><a href="/breakup/specs/html-editing/#editing-host" id="the-tabindex-attribute:editing-host">Editing hosts</a></li><li><a href="/breakup/specs/browser-dom/#browsing-context-container" id="the-tabindex-attribute:browsing-context-container">Browsing context containers</a></li><li><a href="/breakup/specs/sortable-tables/#sorting-interface-th-element" id="the-tabindex-attribute:sorting-interface-th-element">Sorting interface <code>th</code>
     elements</a></li></ul>

    <p class="note">One valid reason to ignore the platform conventions and always allow an element
    to be focused (by setting its <a href="/breakup/specs/html-ui/#specially-focusable" id="the-tabindex-attribute:specially-focusable-3">tabindex focus flag</a>) would be if the user's only
    mechanism for activating an element is through a keyboard action that triggers the focused
    element.</p>

   </dd><dt id="negative-tabindex">If the value is a negative integer</dt><dd>

    <p>The user agent must set the element's <a href="/breakup/specs/html-ui/#specially-focusable" id="the-tabindex-attribute:specially-focusable-4">tabindex focus flag</a>, but should omit the
    element from the <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="the-tabindex-attribute:sequential-focus-navigation-order-3">sequential focus navigation order</a>.</p>

    <p class="note">One valid reason to ignore the requirement that sequential focus navigation not
    allow the author to lead to the element would be if the user's only mechanism for moving the
    focus is sequential focus navigation. For instance, a keyboard-only user would be unable to
    click on a text field with a negative <code id="the-tabindex-attribute:attr-tabindex-4"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code>, so that
    user's user agent would be well justified in allowing the user to tab to the control
    regardless.</p>

   </dd><dt>If the value is a zero</dt><dd>

    <p>The user agent must set the element's <a href="/breakup/specs/html-ui/#specially-focusable" id="the-tabindex-attribute:specially-focusable-5">tabindex focus flag</a>, should allow the
    element and any <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-5">focusable areas</a> that have the element as their
    <a href="/breakup/specs/html-ui/#dom-anchor" id="the-tabindex-attribute:dom-anchor-2">DOM anchor</a> to be reached using <a href="/breakup/specs/html-ui/#sequential-focus-navigation" id="the-tabindex-attribute:sequential-focus-navigation-4">sequential focus navigation</a>, following
    platform conventions to determine the element's relative position in the <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="the-tabindex-attribute:sequential-focus-navigation-order-4">sequential focus
    navigation order</a>.</p>

   </dd><dt>If the value is greater than zero</dt><dd>

    <p>The user agent must set the element's <a href="/breakup/specs/html-ui/#specially-focusable" id="the-tabindex-attribute:specially-focusable-6">tabindex focus flag</a>, should allow the
    element and any <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-6">focusable areas</a> that have the element as their
    <a href="/breakup/specs/html-ui/#dom-anchor" id="the-tabindex-attribute:dom-anchor-3">DOM anchor</a> to be reached using sequential focus navigation, and should place the element
    — referenced as <var>candidate</var> below — and the aforementioned <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-7">focusable areas</a> in the <a href="/breakup/specs/html-ui/#sequential-focus-navigation" id="the-tabindex-attribute:sequential-focus-navigation-5">sequential focus navigation</a>
    order so that, relative to other <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-8">focusable areas</a> in the
    <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="the-tabindex-attribute:sequential-focus-navigation-order-5">sequential focus navigation order</a>, they are:</p>

    <ul><li>before any <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-9">focusable area</a> whose <a href="/breakup/specs/html-ui/#dom-anchor" id="the-tabindex-attribute:dom-anchor-4">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-5"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute has been omitted or whose value, when parsed,
     returns an error,</li><li>before any <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-10">focusable area</a> whose <a href="/breakup/specs/html-ui/#dom-anchor" id="the-tabindex-attribute:dom-anchor-5">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-6"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute has a value equal to or less than zero,</li><li>after any <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-11">focusable area</a> whose <a href="/breakup/specs/html-ui/#dom-anchor" id="the-tabindex-attribute:dom-anchor-6">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-7"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute has a value greater than zero but less than
     the value of the <code id="the-tabindex-attribute:attr-tabindex-8"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute on <var>candidate</var>,</li><li>after any <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-12">focusable area</a> whose <a href="/breakup/specs/html-ui/#dom-anchor" id="the-tabindex-attribute:dom-anchor-7">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-9"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute has a value equal to the value of the <code id="the-tabindex-attribute:attr-tabindex-10"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute on <var>candidate</var> but that is
     earlier in the document in <a href="/breakup/specs/core-algorithms/#tree-order" id="the-tabindex-attribute:tree-order">tree order</a> than <var>candidate</var>,</li><li>before any <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-13">focusable area</a> whose <a href="/breakup/specs/html-ui/#dom-anchor" id="the-tabindex-attribute:dom-anchor-8">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-11"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute has a value equal to the value of the <code id="the-tabindex-attribute:attr-tabindex-12"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute on <var>candidate</var> but that is
     later in the document in <a href="/breakup/specs/core-algorithms/#tree-order" id="the-tabindex-attribute:tree-order-2">tree order</a> than <var>candidate</var>, and</li><li>before any <a href="/breakup/specs/html-ui/#focusable-area" id="the-tabindex-attribute:focusable-area-14">focusable area</a> whose <a href="/breakup/specs/html-ui/#dom-anchor" id="the-tabindex-attribute:dom-anchor-9">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-13"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute has a value greater than the value of the
     <code id="the-tabindex-attribute:attr-tabindex-14"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute on <var>candidate</var>.</li></ul>

   </dd></dl>

  <p>An element that has its <a href="/breakup/specs/html-ui/#specially-focusable" id="the-tabindex-attribute:specially-focusable-7">tabindex focus flag</a> set but does not otherwise have an
  <a href="/breakup/specs/html-ui/#activation-behaviour" id="the-tabindex-attribute:activation-behaviour">activation behaviour</a> defined has an <a href="/breakup/specs/html-ui/#activation-behaviour" id="the-tabindex-attribute:activation-behaviour-2">activation behaviour</a> that does
  nothing.</p>

  <p class="note">This means that an element that is only focusable because of its <code id="the-tabindex-attribute:attr-tabindex-15"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute will fire a <code id="the-tabindex-attribute:event-click"><a href="/breakup/specs/core-algorithms/#event-click">click</a></code> event in response to a non-mouse activation (e.g. hitting the
  "enter" key while the element is <a href="/breakup/specs/html-ui/#focused" id="the-tabindex-attribute:focused">focused</a>).</p>

  <p>An element with the <code id="the-tabindex-attribute:attr-tabindex-16"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute specified is
  <a href="/breakup/specs/html/#interactive-content-2" id="the-tabindex-attribute:interactive-content-2">interactive content</a>.</p>

  <p>The <dfn id="dom-tabindex"><code>tabIndex</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="the-tabindex-attribute:reflect">reflect</a> the value of the <code id="the-tabindex-attribute:attr-tabindex-17"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> content
  attribute. Its default value is 0 for elements that are focusable and −1 for elements that
  are not focusable.</p></section>

  


  

  <section><h2>Processing model</h2>

  <p>The <dfn id="focusing-steps">focusing steps</dfn> for an object <var>new focus target</var> that is
  either a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area">focusable area</a>, or an element that is not a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-2">focusable area</a>, or a
  <a href="/breakup/specs/browser-dom/#browsing-context" id="processing-model-6:browsing-context">browsing context</a>, are as follows. They can optionally be run with a <i>fallback target</i>.</p>

  <ol><li>

    <p>If <var>new focus target</var> is neither a <code id="processing-model-6:the-dialog-element"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element that has an
    <code id="processing-model-6:attr-dialog-open"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code> attribute specified and that is <a href="/breakup/specs/rendering-html/#being-rendered" id="processing-model-6:being-rendered">being
    rendered</a> (i.e. that is a <a href="/breakup/specs/html-ui/#control-group-owner-object" id="processing-model-6:control-group-owner-object">control group owner object</a>), nor a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-3">focusable
    area</a>, then run the first matching set of steps from the following list:</p>

    <dl class="switch"><dt>If <var>new focus target</var> is an <code id="processing-model-6:the-area-element"><a href="/breakup/specs/html-linking/#the-area-element">area</a></code> element with one or more
     shapes that are <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-4">focusable areas</a></dt><dd>

      <p>Let <var>new focus target</var> be the shape corresponding to the first
      <code id="processing-model-6:the-img-element"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> element in <a href="/breakup/specs/core-algorithms/#tree-order" id="processing-model-6:tree-order">tree order</a> that uses the image map to which the <code id="processing-model-6:the-area-element-2"><a href="/breakup/specs/html-linking/#the-area-element">area</a></code>
      element belongs.</p>

     </dd><dt>If <var>new focus target</var> is an element with one or more scrollable regions
     that are <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-5">focusable areas</a></dt><dd>

      <p>Let <var>new focus target</var> be the element's first scrollable region,
      according to a pre-order, depth-first traversal of the box tree. [[!CSS]]</p>

     </dd><dt>If <var>new focus target</var> is the <a href="/breakup/specs/core-algorithms/#root-element" id="processing-model-6:root-element">root element</a> of its
     <code id="processing-model-6:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code></dt><dd>

      <p>Let <var>new focus target</var> be the <code id="processing-model-6:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code>'s viewport.</p>

     </dd><dt>If <var>new focus target</var> is a <a href="/breakup/specs/browser-dom/#browsing-context" id="processing-model-6:browsing-context-2">browsing context</a></dt><dd>

      <p>Let <var>new focus target</var> be the <a href="/breakup/specs/browser-dom/#browsing-context" id="processing-model-6:browsing-context-3">browsing context</a>'s
      <a href="/breakup/specs/browser-dom/#active-document" id="processing-model-6:active-document">active document</a>.</p>

     </dd><dt>If <var>new focus target</var> is a <a href="/breakup/specs/browser-dom/#browsing-context-container" id="processing-model-6:browsing-context-container">browsing context container</a></dt><dd>

      <p>Let <var>new focus target</var> be the <a href="/breakup/specs/browser-dom/#browsing-context-container" id="processing-model-6:browsing-context-container-2">browsing context container</a>'s <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="processing-model-6:nested-browsing-context">nested browsing context</a>'s
      <a href="/breakup/specs/browser-dom/#active-document" id="processing-model-6:active-document-2">active document</a>.</p>

     </dd><dt>Otherwise</dt><dd>

      <p>If no <i>fallback target</i> was specified, abort the <a href="/breakup/specs/html-ui/#focusing-steps" id="processing-model-6:focusing-steps">focusing steps</a>.</p>

      <p>Otherwise, let <var>new focus target</var> be the <i>fallback target</i>.</p>

     </dd></dl>

   </li><li>

    <p>If <var>new focus target</var> is a <a href="/breakup/specs/html-ui/#control-group-owner-object" id="processing-model-6:control-group-owner-object-2">control group owner object</a> that is
    not a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-6">focusable area</a>, but does have a <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group">dialog group</a>, and that <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-2">dialog group</a>
    has a designated <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="processing-model-6:focused-dialog-of-the-dialog-group">focused dialog</a>, then
    let <var>new focus target</var> be the <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="processing-model-6:focused-dialog-of-the-dialog-group-2">focused dialog of the dialog
    group</a>, and redo this step.</p>

    <p>Otherwise, if <var>new focus target</var> is a <a href="/breakup/specs/html-ui/#control-group-owner-object" id="processing-model-6:control-group-owner-object-3">control group owner
    object</a> that is not a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-7">focusable area</a>, and its <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group">control group</a> is not empty,
    then designate <var>new focus target</var> as the <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="processing-model-6:focused-area-of-the-control-group">focused area of the control
    group</a>, and redo this step.</p>

    
    <p>Otherwise, if <var>new focus target</var> is a <a href="/breakup/specs/browser-dom/#browsing-context-container" id="processing-model-6:browsing-context-container-3">browsing context
    container</a>, then let <var>new focus target</var> be the <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="processing-model-6:nested-browsing-context-2">nested browsing
    context</a>'s <a href="/breakup/specs/browser-dom/#active-document" id="processing-model-6:active-document-3">active document</a>, and redo this step.</p>

    <p class="note">A <code id="processing-model-6:the-dialog-element-2"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element can be both a <a href="/breakup/specs/html-ui/#control-group-owner-object" id="processing-model-6:control-group-owner-object-4">control group owner
    object</a> and a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-8">focusable area</a>, if it has both an <code id="processing-model-6:attr-dialog-open-2"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code> attribute specified and a <code id="processing-model-6:attr-tabindex"><a href="/breakup/specs/html-ui/#attr-tabindex">tabindex</a></code> attribute specified and is <a href="/breakup/specs/rendering-html/#being-rendered" id="processing-model-6:being-rendered-2">being
    rendered</a>.</p>

   </li><li><p>If <var>new focus target</var> is a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-9">focusable area</a> and its <a href="/breakup/specs/html-ui/#dom-anchor" id="processing-model-6:dom-anchor">DOM
   anchor</a> is <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert">inert</a>, then abort these steps.</p></li><li><p>If <var>new focus target</var> is the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context">currently focused area of a
   top-level browsing context</a>, then abort these steps.</p></li><li><p>Let <var>old chain</var> be the <a href="/breakup/specs/html-ui/#focus-chain" id="processing-model-6:focus-chain">focus chain</a> of the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-2">currently focused area of the
   top-level browsing context</a> in which <var>new focus target</var> finds
   itself.</p></li><li><p>Let <var>new chain</var> be the <a href="/breakup/specs/html-ui/#focus-chain" id="processing-model-6:focus-chain-2">focus chain</a> of <var>new
   focus target</var>.</p></li><li><p>Run the <a href="/breakup/specs/html-ui/#focus-update-steps" id="processing-model-6:focus-update-steps">focus update steps</a> with <var>old chain</var>, <var>new chain</var>, and <var>new focus target</var> respectively.</p></li></ol>

  <p>User agents must <a href="/breakup/specs/core-algorithms/#immediately" id="processing-model-6:immediately">immediately</a> run the <a href="/breakup/specs/html-ui/#focusing-steps" id="processing-model-6:focusing-steps-2">focusing steps</a> for a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-10">focusable area</a>,
  <code id="processing-model-6:the-dialog-element-3"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code>, or <a href="/breakup/specs/browser-dom/#browsing-context" id="processing-model-6:browsing-context-4">browsing context</a> <var>candidate</var> whenever the
  user attempts to move the focus to <var>candidate</var>.</p>

  <p>The <dfn id="unfocusing-steps">unfocusing steps</dfn> for an object <var>old focus target</var> that is
  either a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-11">focusable area</a> or an element that is not a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-12">focusable area</a> are as
  follows:</p>

  <ol><li><p>If <var>old focus target</var> is <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-2">inert</a>, then abort these
   steps.</p></li><li>

    <p>If <var>old focus target</var> is an <code id="processing-model-6:the-area-element-3"><a href="/breakup/specs/html-linking/#the-area-element">area</a></code> element and one of its shapes is the
    <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-3">currently focused area of a top-level browsing context</a>, or, if <var>old focus
    target</var> is an element with one or more scrollable regions, and one of them is the
    <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-4">currently focused area of a top-level browsing context</a>, then let <var>old focus
    target</var> be that <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-5">currently focused area of a top-level browsing context</a>.</p>

   </li><li><p>Let <var>old chain</var> be the <a href="/breakup/specs/html-ui/#focus-chain" id="processing-model-6:focus-chain-3">focus chain</a> of the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-6">currently
   focused area of a top-level browsing context</a>.</p></li><li><p>If <var>old focus target</var> is not one of the entries in <var>old
   chain</var>, then abort these steps.</p></li><li>

    <p>If <var>old focus target</var> is a <code id="processing-model-6:the-dialog-element-4"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> in a <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-3">dialog group</a>, and
    the <a href="/breakup/specs/html-ui/#dialog-group-manager" id="processing-model-6:dialog-group-manager">dialog group manager</a> has a non-empty <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-2">control group</a>, then let
    <var>new focus target</var> be the designated <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="processing-model-6:focused-area-of-the-control-group-2">focused area of that focus group</a>.</p>

    <p>Otherwise, if <var>old focus target</var> is a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-13">focusable area</a>, then let <var>new
    focus target</var> be the first <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-14">focusable area</a> of its <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-3">control group</a>
    (if the <a href="/breakup/specs/html-ui/#control-group-owner" id="processing-model-6:control-group-owner">control group owner</a> is a <code id="processing-model-6:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, this will always be a
    viewport).</p>

    <p>Otherwise, let <var>new focus target</var> be null.</p>

   </li><li><p>If <var>new focus target</var> is not null, then run the <a href="/breakup/specs/html-ui/#focusing-steps" id="processing-model-6:focusing-steps-3">focusing
   steps</a> for <var>new focus target</var>.</p></li></ol>

  <p>When the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-7">currently focused area of a top-level browsing context</a> is somehow
  unfocused without another element being explicitly focused in its stead, the user agent must
  <a href="/breakup/specs/core-algorithms/#immediately" id="processing-model-6:immediately-2">immediately</a> run the <a href="/breakup/specs/html-ui/#unfocusing-steps" id="processing-model-6:unfocusing-steps">unfocusing steps</a> for that object.</p>

  <p class="note">The <a href="/breakup/specs/html-ui/#unfocusing-steps" id="processing-model-6:unfocusing-steps-2">unfocusing steps</a> do not always result in the focus changing, even
  when applied to the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-8">currently focused area of a top-level browsing context</a>. For
  example, if the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-9">currently focused area of a top-level browsing context</a> is a viewport,
  then it will usually keep its focus regardless until another <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-15">focusable area</a> is explicitly
  focused with the <a href="/breakup/specs/html-ui/#focusing-steps" id="processing-model-6:focusing-steps-4">focusing steps</a>.</p>

  <hr>

  <p>When a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-16">focusable area</a> is added to an empty <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-4">control group</a>, it must be designated
  the <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="processing-model-6:focused-area-of-the-control-group-3">focused area of the control group</a>.</p>

  <p>When a <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-4">dialog group</a> is formed, if the <a href="/breakup/specs/html-ui/#dialog-group-manager" id="processing-model-6:dialog-group-manager-2">dialog group manager</a> has an empty
  <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-5">control group</a>, the first non-<a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-3">inert</a> <code id="processing-model-6:the-dialog-element-5"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> in the <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-5">dialog
  group</a>, if any, or else the first <code id="processing-model-6:the-dialog-element-6"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> in the <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-6">dialog group</a> regardless of
  <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-4">inertness</a>, must be designated the <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="processing-model-6:focused-dialog-of-the-dialog-group-3">focused dialog of the dialog
  group</a>.</p>

  <p><dfn id="focus-fixup-rule-one">Focus fixup rule one</dfn>: When the designated <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="processing-model-6:focused-area-of-the-control-group-4">focused area of a control group</a> is removed from that <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-6">control group</a> in
  some way (e.g. it stops being a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-17">focusable area</a>, it is removed from the DOM, it
  becomes <a href="/breakup/specs/html-ui/#expressly-inert-control" id="processing-model-6:expressly-inert-control">expressly inert</a>, etc), and the <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-7">control
  group</a> is still not empty: designate the first non-<a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-5">inert</a> <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="processing-model-6:focused-area-of-the-control-group-5">focused area</a> in that <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-8">control group</a> to be the new
  <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="processing-model-6:focused-area-of-the-control-group-6">focused area of the control group</a>, if any; if they are all <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-6">inert</a>, then
  designate the first <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="processing-model-6:focused-area-of-the-control-group-7">focused area</a> in that
  <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-9">control group</a> to be the new <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="processing-model-6:focused-area-of-the-control-group-8">focused area of the control group</a> regardless
  of <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-7">inertness</a>. If such a removal instead results in the <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-10">control
  group</a> being empty, then there is simply no longer a <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="processing-model-6:focused-area-of-the-control-group-9">focused area of the control
  group</a>.</p>

  <p class="example">For example, this might happen because an element is removed from its
  <code id="processing-model-6:document-4"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, or has a <code id="processing-model-6:the-hidden-attribute"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute added. It might
  also happen to an <code id="processing-model-6:the-input-element"><a href="/breakup/specs/html-forms/#the-input-element">input</a></code> element when the element gets <a href="/breakup/specs/html-forms/#concept-fe-disabled" id="processing-model-6:concept-fe-disabled">disabled</a>.</p>

  <p><dfn id="focus-fixup-rule-two">Focus fixup rule two</dfn>: When a <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-7">dialog group</a> has no designed <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="processing-model-6:focused-dialog-of-the-dialog-group-4">focused
  dialog of the dialog group</a>, and its <a href="/breakup/specs/html-ui/#dialog-group-manager" id="processing-model-6:dialog-group-manager-3">dialog group manager</a>'s <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-11">control
  group</a> changes from being non-empty to being empty, the first non-<a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-8">inert</a>
  <code id="processing-model-6:the-dialog-element-7"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> in the <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-8">dialog group</a>, if any, or else the first <code id="processing-model-6:the-dialog-element-8"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> in
  the <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-9">dialog group</a> regardless of <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-9">inertness</a>, must be designated
  the <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="processing-model-6:focused-dialog-of-the-dialog-group-5">focused dialog of the dialog group</a>.</p>

  <p><dfn id="focus-fixup-rule-three">Focus fixup rule three</dfn>: When the designated <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="processing-model-6:focused-dialog-of-the-dialog-group-6">focused dialog of a dialog group</a> is removed from that <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-10">dialog group</a> in
  some way (e.g. it stops <a href="/breakup/specs/rendering-html/#being-rendered" id="processing-model-6:being-rendered-3">being rendered</a>, it loses its <code id="processing-model-6:attr-dialog-open-3"><a href="/breakup/specs/html-ui/#attr-dialog-open">open</a></code> attribute, it becomes <a href="/breakup/specs/html-ui/#expressly-inert-dialog" id="processing-model-6:expressly-inert-dialog">expressly inert</a>, etc), and there is still a <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-11">dialog group</a> (because the
  <code id="processing-model-6:the-dialog-element-9"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> in question was not the last <code id="processing-model-6:the-dialog-element-10"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> in that <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-12">dialog group</a>):
  if the <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-13">dialog group</a>'s <a href="/breakup/specs/html-ui/#dialog-group-manager" id="processing-model-6:dialog-group-manager-4">manager</a>'s <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-12">control
  group</a> is non-empty, let there be no designated <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="processing-model-6:focused-dialog-of-the-dialog-group-7">focused dialog of the dialog group</a>
  any more; otherwise (in the case that the <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-13">control group</a> is empty), designate the first
  non-<a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-10">inert</a> <code id="processing-model-6:the-dialog-element-11"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> in the <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-14">dialog group</a> to be the <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="processing-model-6:focused-dialog-of-the-dialog-group-8">focused
  dialog of the dialog group</a>, or, if they are all <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-11">inert</a>, designate the first
  <code id="processing-model-6:the-dialog-element-12"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> in the <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-15">dialog group</a> to be the <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="processing-model-6:focused-dialog-of-the-dialog-group-9">focused dialog of the dialog
  group</a> regardless of <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-12">inertness</a>.</p>

  <p>When the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-10">currently focused area of a top-level browsing context</a> was a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-18">focusable
  area</a> but stops being a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-19">focusable area</a>, or when it was a <code id="processing-model-6:the-dialog-element-13"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> in a
  <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-16">dialog group</a> and stops being part of that <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-17">dialog group</a>, or when it
  starts being <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-13">inert</a>, the user agent must run the following steps:</p>

  <ol><li><p>Let <var>old focus target</var> be whatever the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-11">currently focused area of the top-level browsing
   context</a> was immediately before this algorithm became applicable (e.g. before the element
   was disabled, or the dialog was closed, or whatever caused this algorithm to run).</p></li><li><p>Let <var>old chain</var> be the <a href="/breakup/specs/html-ui/#focus-chain" id="processing-model-6:focus-chain-4">focus chain</a> of the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-12">currently focused area of the
   top-level browsing context</a> at the same time.</p></li><li><p>Make sure that the changes implied by the focus fixup rules <a href="/breakup/specs/html-ui/#focus-fixup-rule-one" id="processing-model-6:focus-fixup-rule-one">one</a>, <a href="/breakup/specs/html-ui/#focus-fixup-rule-two" id="processing-model-6:focus-fixup-rule-two">two</a>, and <a href="/breakup/specs/html-ui/#focus-fixup-rule-three" id="processing-model-6:focus-fixup-rule-three">three</a> above are applied.</p></li><li><p>Let <var>new focus target</var> be the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-13">currently focused area of a
   top-level browsing context</a>.</p></li><li><p>If <var>old focus target</var> and <var>new focus target</var> are the
   same, abort these steps.</p></li><li><p>Let <var>new chain</var> be the <a href="/breakup/specs/html-ui/#focus-chain" id="processing-model-6:focus-chain-5">focus chain</a> of <var>new
   focus target</var>.</p></li><li><p>Run the <a href="/breakup/specs/html-ui/#focus-update-steps" id="processing-model-6:focus-update-steps-2">focus update steps</a> with <var>old chain</var>, <var>new chain</var>, and <var>new focus target</var> respectively.</p></li></ol>

  <hr>

  <p>The <dfn id="focus-update-steps">focus update steps</dfn>, given an <var>old chain</var>, a <var>new chain</var>, and a <var>new focus target</var> respectively, are as
  follows:</p>

  <ol><li><p>Unset the <a href="/breakup/specs/html-ui/#sequential-focus-navigation-starting-point" id="processing-model-6:sequential-focus-navigation-starting-point">sequential focus navigation starting point</a>.</p></li><li><p>If the last entry in <var>old chain</var> and the last entry in <var>new chain</var> are the same, pop the last entry from <var>old chain</var>
   and the last entry from <var>new chain</var> and redo this step.</p></li><li>

    <p>For each entry <var>entry</var> in <var>old chain</var>, in order, run
    these substeps:</p>

    <ol><li id="unfocus-causes-change-event"><p>If <var>entry</var> is an <code id="processing-model-6:the-input-element-2"><a href="/breakup/specs/html-forms/#the-input-element">input</a></code>
     element, and the <code id="processing-model-6:event-input-change"><a href="/breakup/specs/html-forms/#event-input-change">change</a></code> event <a href="/breakup/specs/html-forms/#concept-input-apply" id="processing-model-6:concept-input-apply">applies</a> to the element, and the element does not have a
     defined <a href="/breakup/specs/html-ui/#activation-behaviour" id="processing-model-6:activation-behaviour">activation behaviour</a>, and the user has changed the element's <a href="/breakup/specs/html-forms/#concept-fe-value" id="processing-model-6:concept-fe-value">value</a> or its list of <a href="/breakup/specs/html-forms/#concept-input-type-file-selected" id="processing-model-6:concept-input-type-file-selected">selected files</a> while the control was focused
     without committing that change, then <a href="/breakup/specs/browser-dom/#fire-a-simple-event" id="processing-model-6:fire-a-simple-event">fire a simple event</a> that bubbles named <code id="processing-model-6:event-change"><a href="/breakup/specs/html/#event-change">change</a></code> at the element.</p>

     </li><li>

      <p>If <var>entry</var> is an element, let <var>blur event target</var> be
      <var>entry</var>.</p>

      <p>If <var>entry</var> is a <code id="processing-model-6:document-5"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object, let <var>blur
      event target</var> be that <code id="processing-model-6:document-6"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object's <code id="processing-model-6:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object.</p>

      <p>Otherwise, let <var>blur event target</var> be null.</p>

     </li><li><p>If <var>entry</var> is the last entry in <var>old chain</var>, and
     <var>entry</var> is an <code id="processing-model-6:element"><a href="/breakup/specs/core-algorithms/#element">Element</a></code>, and the last entry in <var>new
     chain</var> is also an <code id="processing-model-6:element-2"><a href="/breakup/specs/core-algorithms/#element">Element</a></code>, then let <var>related blur target</var>
     be the last entry in <var>new chain</var>. Otherwise, let <var>related blur
     target</var> be null.</p></li><li>

      <p>If <var>blur event target</var> is not null, <a href="/breakup/specs/html-ui/#fire-a-focus-event" id="processing-model-6:fire-a-focus-event">fire a focus event</a>
      named <code id="processing-model-6:event-blur"><a href="/breakup/specs/html/#event-blur">blur</a></code> at <var>blur event target</var>, with
      <var>related blur target</var> as the related target.</p>

      <p class="note">In some cases, e.g. if <var>entry</var> is an <code id="processing-model-6:the-area-element-4"><a href="/breakup/specs/html-linking/#the-area-element">area</a></code>
      element's shape, a scrollable region, or a viewport, no event is fired.</p>

     </li></ol>

   </li><li><p>Apply any relevant platform-specific conventions for focusing <var>new focus
   target</var>. (For example, some platforms select the contents of a text field when that field is
   focused.)</p></li><li>

    <p>For each entry <var>entry</var> in <var>new chain</var>, in reverse
    order, run these substeps:</p>

    <ol><li><p>If <var>entry</var> is a <code id="processing-model-6:the-dialog-element-14"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code> element: Let <var>entry</var> be the designated <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="processing-model-6:focused-dialog-of-the-dialog-group-10">focused dialog of its dialog group</a>.</p></li><li>

      <p>If <var>entry</var> is a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-20">focusable area</a>: Designate <var>entry</var> as the <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="processing-model-6:focused-area-of-the-control-group-10">focused area of the control group</a>. If its <a href="/breakup/specs/html-ui/#control-group" id="processing-model-6:control-group-14">control
      group</a>'s <a href="/breakup/specs/html-ui/#control-group-owner" id="processing-model-6:control-group-owner-2">owner</a> is also a <a href="/breakup/specs/html-ui/#dialog-group-manager" id="processing-model-6:dialog-group-manager-5">dialog group
      manager</a>, then let there be no designated <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="processing-model-6:focused-dialog-of-the-dialog-group-11">focused dialog</a> in that <a href="/breakup/specs/html-ui/#dialog-group" id="processing-model-6:dialog-group-18">dialog group</a>.</p>

      <p class="note">It is possible for <var>entry</var> to be both a <code id="processing-model-6:the-dialog-element-15"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code>
      element and a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-21">focusable area</a>, in which case it is its own <a href="/breakup/specs/html-ui/#control-group-owner" id="processing-model-6:control-group-owner-3">control group
      owner</a>.</p>

     </li><li>

      <p>If <var>entry</var> is an element, let <var>focus event target</var> be
      <var>entry</var>.</p>

      <p>If <var>entry</var> is a <code id="processing-model-6:document-7"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object, let <var>focus
      event target</var> be that <code id="processing-model-6:document-8"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object's <code id="processing-model-6:window-2"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object.</p>

      <p>Otherwise, let <var>focus event target</var> be null.</p>

     </li><li><p>If <var>entry</var> is the last entry in <var>new chain</var>, and
     <var>entry</var> is an <code id="processing-model-6:element-3"><a href="/breakup/specs/core-algorithms/#element">Element</a></code>, and the last entry in <var>old
     chain</var> is also an <code id="processing-model-6:element-4"><a href="/breakup/specs/core-algorithms/#element">Element</a></code>, then let <var>related focus target</var>
     be the last entry in <var>old chain</var>. Otherwise, let <var>related
     focus target</var> be null.</p></li><li>

      <p>If <var>focus event target</var> is not null, <a href="/breakup/specs/html-ui/#fire-a-focus-event" id="processing-model-6:fire-a-focus-event-2">fire a focus event</a>
      named <code id="processing-model-6:event-focus"><a href="/breakup/specs/html/#event-focus">focus</a></code> at <var>focus event target</var>, with
      <var>related focus target</var> as the related target.</p>

      <p class="note">In some cases, e.g. if <var>entry</var> is an <code id="processing-model-6:the-area-element-5"><a href="/breakup/specs/html-linking/#the-area-element">area</a></code>
      element's shape, a scrollable region, or a viewport, no event is fired.</p>

     </li></ol>

   </li></ol>

  <p>When a user agent is required to <dfn id="fire-a-focus-event">fire a focus event</dfn> named <var>e</var> at
  an element <var>t</var> and with a given related target <var>r</var>, the user
  agent must create a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="processing-model-6:concept-events-trusted">trusted</a> <code id="processing-model-6:focusevent"><a href="/breakup/specs/core-algorithms/#focusevent">FocusEvent</a></code>
  object, initialise it to have the given name <var>e</var>, to not bubble, to not be
  cancelable, and to have the <code id="processing-model-6:dom-focusevent-relatedtarget"><a href="/breakup/specs/core-algorithms/#dom-focusevent-relatedtarget">relatedTarget</a></code>
  attribute initialised to <var>r</var>, the <code id="processing-model-6:dom-uievent-view"><a href="/breakup/specs/core-algorithms/#dom-uievent-view">view</a></code> attribute initialised to the <code id="processing-model-6:window-3"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object of the <code id="processing-model-6:document-9"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object of <var>t</var>, and the <code id="processing-model-6:dom-uievent-detail"><a href="/breakup/specs/core-algorithms/#dom-uievent-detail">detail</a></code> attribute initialised to 0, and must then <a href="/breakup/specs/core-algorithms/#concept-event-dispatch" id="processing-model-6:concept-event-dispatch">dispatch</a> the newly created <code id="processing-model-6:focusevent-2"><a href="/breakup/specs/core-algorithms/#focusevent">FocusEvent</a></code> object
  at the specified target element <var>t</var>.</p>

  <hr>

  <p>When a key event is to be routed in a <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="processing-model-6:top-level-browsing-context">top-level browsing context</a>, the user agent
  must run the following steps:</p>

  <ol><li><p>Let <var>target area</var> be the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-14">currently focused area of the top-level browsing
   context</a>.</p></li><li><p>If <var>target area</var> is a <a href="/breakup/specs/html-ui/#focusable-area" id="processing-model-6:focusable-area-22">focusable area</a>, let <var>target
   node</var> be <var>target area</var>'s <a href="/breakup/specs/html-ui/#dom-anchor" id="processing-model-6:dom-anchor-2">DOM anchor</a>. Otherwise, <var>target area</var> is a <code id="processing-model-6:the-dialog-element-16"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code>; let <var>target node</var> be
   <var>target area</var>.</p></li><li>

    <p>If <var>target node</var> is a <code id="processing-model-6:document-10"><a href="/breakup/specs/browser-dom/#document">Document</a></code> that has a <a href="/breakup/specs/browser-dom/#the-body-element-2" id="processing-model-6:the-body-element-2">body element</a>, then let <var>target node</var> be <a href="/breakup/specs/browser-dom/#the-body-element-2" id="processing-model-6:the-body-element-2-2">the body
    element</a> of that <code id="processing-model-6:document-11"><a href="/breakup/specs/browser-dom/#document">Document</a></code>.</p>

    <p>Otherwise, if <var>target node</var> is a <code id="processing-model-6:document-12"><a href="/breakup/specs/browser-dom/#document">Document</a></code> that has a
    <a href="/breakup/specs/core-algorithms/#root-element" id="processing-model-6:root-element-2">root element</a>, then let <var>target node</var> be the <a href="/breakup/specs/core-algorithms/#root-element" id="processing-model-6:root-element-3">root
    element</a> of that <code id="processing-model-6:document-13"><a href="/breakup/specs/browser-dom/#document">Document</a></code>.</p>

   </li><li>

    <p>If <var>target node</var> is not <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-14">inert</a>, fire the event at <var>target node</var>.</p>

    <p class="note">It is possible for the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="processing-model-6:currently-focused-area-of-a-top-level-browsing-context-15">currently focused area of a top-level browsing
    context</a> to be <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-15">inert</a>, for example if a <a href="/breakup/specs/html-ui/#dom-dialog-showmodal" id="processing-model-6:dom-dialog-showmodal">modal dialog is shown</a>, and then that <code id="processing-model-6:the-dialog-element-17"><a href="/breakup/specs/html-ui/#the-dialog-element">dialog</a></code>
    element is made <a href="/breakup/specs/html-ui/#inert" id="processing-model-6:inert-16">inert</a>. It is likely to be the result of a logic error in the
    application, though.</p>

   </li><li><p>If the event was not canceled, then let <var>target area</var> handle the key
   event. This might include <a href="/breakup/specs/html-ui/#run-synthetic-click-activation-steps" id="processing-model-6:run-synthetic-click-activation-steps">running synthetic
   click activation steps</a> for <var>target node</var>.</p></li></ol></section>



  <section><h2><dfn>Sequential focus navigation</dfn></h2>

  <p>Each <a href="/breakup/specs/html-ui/#control-group" id="sequential-focus-navigation:control-group">control group</a> has a <dfn id="sequential-focus-navigation-order">sequential focus navigation order</dfn>, which orders some
  or all of the <a href="/breakup/specs/html-ui/#focusable-area" id="sequential-focus-navigation:focusable-area">focusable areas</a> in the <a href="/breakup/specs/html-ui/#control-group" id="sequential-focus-navigation:control-group-2">control group</a>
  relative to each other. The order in the <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order">sequential focus navigation order</a> does not
  have to be related to the order in the <a href="/breakup/specs/html-ui/#control-group" id="sequential-focus-navigation:control-group-3">control group</a> itself. If a <a href="/breakup/specs/html-ui/#focusable-area" id="sequential-focus-navigation:focusable-area-2">focusable area</a> is
  omitted from the <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-2">sequential focus navigation order</a> of its <a href="/breakup/specs/html-ui/#control-group" id="sequential-focus-navigation:control-group-4">control group</a>, then
  it is unreachable via <a href="/breakup/specs/html-ui/#sequential-focus-navigation" id="sequential-focus-navigation:sequential-focus-navigation">sequential focus navigation</a>.</p>

  <p>There can also be a <dfn id="sequential-focus-navigation-starting-point">sequential focus navigation starting point</dfn>. It is initially
  unset. The user agent may set it when the user indicates that it should be moved.</p>

  <p class="example">For example, the user agent could set it to the position of the user's click if
  the user clicks on the document contents.</p>

  <p>When the user requests that focus move from the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="sequential-focus-navigation:currently-focused-area-of-a-top-level-browsing-context">currently focused area of a top-level
  browsing context</a> to the next or previous <a href="/breakup/specs/html-ui/#focusable-area" id="sequential-focus-navigation:focusable-area-3">focusable area</a> (e.g. as the default action
  of pressing the <kbd>tab</kbd> key), or when the user requests that focus sequentially move to a
  <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="sequential-focus-navigation:top-level-browsing-context">top-level browsing context</a> in the first place (e.g. from the browser's location bar),
  the user agent must use the following algorithm:</p>

  <ol><li><p>Let <var>starting point</var> be the <a href="/breakup/specs/html-ui/#currently-focused-area-of-a-top-level-browsing-context" id="sequential-focus-navigation:currently-focused-area-of-a-top-level-browsing-context-2">currently focused area of a top-level
   browsing context</a>, if the user requested to move focus sequentially from there, or else the
   <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="sequential-focus-navigation:top-level-browsing-context-2">top-level browsing context</a> itself, if the user instead requested to move focus from
   outside the <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="sequential-focus-navigation:top-level-browsing-context-3">top-level browsing context</a>.</p></li><li><p>If there is a <a href="/breakup/specs/html-ui/#sequential-focus-navigation-starting-point" id="sequential-focus-navigation:sequential-focus-navigation-starting-point">sequential focus navigation starting point</a> defined and it is
   inside <var>starting point</var>, then let <var>starting point</var> be the <a href="/breakup/specs/html-ui/#sequential-focus-navigation-starting-point" id="sequential-focus-navigation:sequential-focus-navigation-starting-point-2">sequential
   focus navigation starting point</a> instead.</p></li><li>

    <p>Let <var>direction</var> be <i>forward</i> if the user requested the <em>next</em>
    control, and <i>backward</i> if the user requested the previous control.</p>

    <p class="note">Typically, pressing <kbd>tab</kbd> requests the next control, and pressing
    <kbd><kbd>shift</kbd>+<kbd>tab</kbd></kbd> requests the previous control.</p>

   </li><li>

    <p><i>Loop</i>: Let <var>selection mechanism</var> be <i>sequential</i> if the <var>starting
    point</var> is a <a href="/breakup/specs/browser-dom/#browsing-context" id="sequential-focus-navigation:browsing-context">browsing context</a> or if <var>starting point</var> is in its
    <a href="/breakup/specs/html-ui/#control-group" id="sequential-focus-navigation:control-group-5">control group</a>'s <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-3">sequential focus navigation order</a>.</p>

    <p>Otherwise, <var>starting point</var> is not in its <a href="/breakup/specs/html-ui/#control-group" id="sequential-focus-navigation:control-group-6">control group</a>'s
    <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-4">sequential focus navigation order</a>; let <var>selection mechanism</var> be
    <i>DOM</i>.</p>

   </li><li><p>Let <var>candidate</var> be the result of running the <a href="/breakup/specs/html-ui/#sequential-navigation-search-algorithm" id="sequential-focus-navigation:sequential-navigation-search-algorithm">sequential navigation search
   algorithm</a> with <var>starting point</var>, <var>direction</var>, and <var>selection
   mechanism</var> as the arguments.</p></li><li><p>If <var>candidate</var> is not null, then run the <a href="/breakup/specs/html-ui/#focusing-steps" id="sequential-focus-navigation:focusing-steps">focusing steps</a> for
   <var>candidate</var> and abort these steps.</p></li><li><p>Otherwise, unset the <a href="/breakup/specs/html-ui/#sequential-focus-navigation-starting-point" id="sequential-focus-navigation:sequential-focus-navigation-starting-point-3">sequential focus navigation starting point</a>.</p></li><li>

    <p>If <var>starting point</var> is the <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="sequential-focus-navigation:top-level-browsing-context-4">top-level browsing context</a>, or a
    <a href="/breakup/specs/html-ui/#focusable-area" id="sequential-focus-navigation:focusable-area-4">focusable area</a> in the <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="sequential-focus-navigation:top-level-browsing-context-5">top-level browsing context</a>, the user agent
    should transfer focus to its own controls appropriately (if any), honouring
    <var>direction</var>, and then abort these steps.</p>

    <p class="example">For example, if <var>direction</var> is <i>backward</i>, then the last
    focusable control before the browser's rendering area would be the control to focus.</p>

    <p>If the user agent has no focusable controls — a kiosk-mode browser, for instance
    — 
    then the user agent may instead restart these steps with the <var>starting point</var> being the
    <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="sequential-focus-navigation:top-level-browsing-context-6">top-level browsing context</a> itself.</p>

    

   </li><li><p>Otherwise, <var>starting point</var> is a <a href="/breakup/specs/html-ui/#focusable-area" id="sequential-focus-navigation:focusable-area-5">focusable area</a> in a
   <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="sequential-focus-navigation:nested-browsing-context">nested browsing context</a>. Let <var>starting point</var> be that
   <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="sequential-focus-navigation:nested-browsing-context-2">nested browsing context</a>'s <a href="/breakup/specs/browser-dom/#browsing-context-container" id="sequential-focus-navigation:browsing-context-container">browsing context container</a>, and return to the
   step labeled <i>loop</i>.</p>
    
   </li></ol>


  <p>The <dfn id="sequential-navigation-search-algorithm">sequential navigation search algorithm</dfn> consists of the following steps. This
  algorithm takes three arguments: <var>starting point</var>, <var>direction</var>,
  and <var>selection mechanism</var>.</p>

  <ol><li>

    <p>Pick the appropriate cell from the following table, and follow the instructions in that
    cell.</p>

    <p>The appropriate cell is the one that is from the column whose header describes <var>direction</var> and from the first row whose header describes <var>starting point</var> and <var>selection mechanism</var>.</p>

    <table><thead><tr><th>
       </th><th> <var>direction</var> is <i>forward</i>
       </th><th> <var>direction</var> is <i>backward</i>
     </th></tr></thead><tbody><tr><th><var>starting point</var> is a <a href="/breakup/specs/browser-dom/#browsing-context" id="sequential-focus-navigation:browsing-context-2">browsing context</a>
       </th><td>Let <var>candidate</var> be the first <a href="/breakup/specs/html-ui/#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area">suitable sequentially focusable area</a> in <var>starting point</var>'s <a href="/breakup/specs/browser-dom/#active-document" id="sequential-focus-navigation:active-document">active document</a>'s <a href="/breakup/specs/html-ui/#primary-control-group" id="sequential-focus-navigation:primary-control-group">primary control group</a>, if any; or else null
       </td><td>Let <var>candidate</var> be the last <a href="/breakup/specs/html-ui/#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area-2">suitable sequentially focusable area</a> in <var>starting point</var>'s <a href="/breakup/specs/browser-dom/#active-document" id="sequential-focus-navigation:active-document-2">active document</a>'s <a href="/breakup/specs/html-ui/#primary-control-group" id="sequential-focus-navigation:primary-control-group-2">primary control group</a>, if any; or else null
      </td></tr><tr><th><var>selection mechanism</var> is <i>DOM</i>
       </th><td>Let <var>candidate</var> be the first <a href="/breakup/specs/html-ui/#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area-3">suitable sequentially focusable area</a> in the <a href="/breakup/specs/html-ui/#home-control-group" id="sequential-focus-navigation:home-control-group">home control group</a> following <var>starting point</var>, if any; or else null
       </td><td>Let <var>candidate</var> be the last <a href="/breakup/specs/html-ui/#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area-4">suitable sequentially focusable area</a> in the <a href="/breakup/specs/html-ui/#home-control-group" id="sequential-focus-navigation:home-control-group-2">home control group</a> preceding <var>starting point</var>, if any; or else null
      </td></tr><tr><th><var>selection mechanism</var> is <i>sequential</i>
       </th><td>Let <var>candidate</var> be the first <a href="/breakup/specs/html-ui/#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area-5">suitable sequentially focusable area</a> in the <a href="/breakup/specs/html-ui/#home-sequential-focus-navigation-order" id="sequential-focus-navigation:home-sequential-focus-navigation-order">home sequential focus navigation order</a> following <var>starting point</var>, if any; or else null
       </td><td>Let <var>candidate</var> be the last <a href="/breakup/specs/html-ui/#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area-6">suitable sequentially focusable area</a> in the <a href="/breakup/specs/html-ui/#home-sequential-focus-navigation-order" id="sequential-focus-navigation:home-sequential-focus-navigation-order-2">home sequential focus navigation order</a> preceding <var>starting point</var>, if any; or else null

    </td></tr></tbody></table>

    <p>A <dfn id="suitable-sequentially-focusable-area">suitable sequentially focusable area</dfn> is a <a href="/breakup/specs/html-ui/#focusable-area" id="sequential-focus-navigation:focusable-area-6">focusable area</a> whose <a href="/breakup/specs/html-ui/#dom-anchor" id="sequential-focus-navigation:dom-anchor">DOM
    anchor</a> is not <a href="/breakup/specs/html-ui/#inert" id="sequential-focus-navigation:inert">inert</a> and that is in its <a href="/breakup/specs/html-ui/#control-group" id="sequential-focus-navigation:control-group-7">control group</a>'s <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-5">sequential
    focus navigation order</a>.</p>

    <p>The <dfn id="primary-control-group">primary control group</dfn> of a <a href="/breakup/specs/html-ui/#control-group-owner-object" id="sequential-focus-navigation:control-group-owner-object">control group owner object</a> <var>X</var> is the <a href="/breakup/specs/html-ui/#control-group" id="sequential-focus-navigation:control-group-8">control group</a> of <var>X</var> if <var>X</var> has no <a href="/breakup/specs/html-ui/#dialog-group" id="sequential-focus-navigation:dialog-group">dialog group</a> or if its <a href="/breakup/specs/html-ui/#dialog-group" id="sequential-focus-navigation:dialog-group-2">dialog group</a> has no
    designated <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="sequential-focus-navigation:focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a>, otherwise, it is the <a href="/breakup/specs/html-ui/#primary-control-group" id="sequential-focus-navigation:primary-control-group-3">primary
    control group</a> of <var>X</var>'s <a href="/breakup/specs/html-ui/#dialog-group" id="sequential-focus-navigation:dialog-group-3">dialog group</a>'s designated
    <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="sequential-focus-navigation:focused-dialog-of-the-dialog-group-2">focused dialog of the dialog group</a>.</p>

    <p>The <dfn id="home-control-group">home control group</dfn> is the <a href="/breakup/specs/html-ui/#control-group" id="sequential-focus-navigation:control-group-9">control group</a> to which <var>starting point</var> belongs.</p>

    <p>The <dfn id="home-sequential-focus-navigation-order">home sequential focus navigation order</dfn> is the <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-6">sequential focus
    navigation order</a> to which <var>starting point</var> belongs.</p>

    <p class="note">The <a href="/breakup/specs/html-ui/#home-sequential-focus-navigation-order" id="sequential-focus-navigation:home-sequential-focus-navigation-order-3">home sequential focus navigation order</a> is the <a href="/breakup/specs/html-ui/#home-control-group" id="sequential-focus-navigation:home-control-group-3">home
    control group</a>'s <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-7">sequential focus navigation order</a>, but is only used when the
    <var>starting point</var> is in that <a href="/breakup/specs/html-ui/#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-8">sequential focus navigation order</a>
    (when it's not, <var>selection mechanism</var> will be <i>DOM</i>).</p>

   </li><li>

    <p>If <var>candidate</var> is a <a href="/breakup/specs/browser-dom/#browsing-context-container" id="sequential-focus-navigation:browsing-context-container-2">browsing context container</a>, then let <var>new candidate</var> be the result of running the <a href="/breakup/specs/html-ui/#sequential-navigation-search-algorithm" id="sequential-focus-navigation:sequential-navigation-search-algorithm-2">sequential navigation search
    algorithm</a> with <var>candidate</var>'s <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="sequential-focus-navigation:nested-browsing-context-3">nested browsing context</a> as
    the first argument, <var>direction</var> as the second, and <i>sequential</i> 
    as the third.</p>

    <p>If <var>new candidate</var> is null, then let <var>starting point</var>
    be <var>candidate</var>, and return to the top of this algorithm. Otherwise, let <var>candidate</var> be <var>new candidate</var>.</p>

   </li><li><p>Return <var>candidate</var>.</p></li></ol></section>

  



  <section><h2>Focus management APIs</h2>

  <dl class="domintro"><dt><var>document</var> . <code id="focus-management-apis:dom-document-activeelement"><a href="/breakup/specs/html-ui/#dom-document-activeelement">activeElement</a></code></dt><dd>

    <p>Returns the deepest element in the document through which or to which key events are being
    routed. This is, roughly speaking, the focused element in the document.</p>

    <p>For the purposes of this API, when a <a href="/breakup/specs/browser-dom/#child-browsing-context" id="focus-management-apis:child-browsing-context">child browsing context</a> is focused, its
    <a href="/breakup/specs/browser-dom/#browsing-context-container" id="focus-management-apis:browsing-context-container">browsing context container</a> is <a href="/breakup/specs/html-ui/#bc-focus-ergo-bcc-focus">focused</a> in the
    <a href="/breakup/specs/browser-dom/#parent-browsing-context" id="focus-management-apis:parent-browsing-context">parent browsing context</a>. For example, if the user moves the focus to a text field
    in an <code id="focus-management-apis:the-iframe-element"><a href="/breakup/specs/html-embedding/#the-iframe-element">iframe</a></code>, the <code id="focus-management-apis:the-iframe-element-2"><a href="/breakup/specs/html-embedding/#the-iframe-element">iframe</a></code> is the element returned by the <code id="focus-management-apis:dom-document-activeelement-2"><a href="/breakup/specs/html-ui/#dom-document-activeelement">activeElement</a></code> API in the <code id="focus-management-apis:the-iframe-element-3"><a href="/breakup/specs/html-embedding/#the-iframe-element">iframe</a></code>'s
    <a id="focus-management-apis:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>.</p>

   </dd><dt><var>document</var> . <code id="focus-management-apis:dom-document-hasfocus"><a href="/breakup/specs/html-ui/#dom-document-hasfocus">hasFocus</a></code>()</dt><dd>

    <p>Returns true if key events are being routed through or to the document; otherwise, returns
    false. Roughly speaking, this corresponds to the document, or a documented nested inside this
    one, being focused.</p>

   </dd><dt><var>window</var> . <code id="focus-management-apis:dom-window-focus"><a href="/breakup/specs/html-ui/#dom-window-focus">focus</a></code>()</dt><dd>

    

    <p>Moves the focus to the window's <a href="/breakup/specs/browser-dom/#browsing-context" id="focus-management-apis:browsing-context">browsing context</a>, if any.</p>

   </dd><dt><var>element</var> . <code id="focus-management-apis:dom-focus"><a href="/breakup/specs/html-ui/#dom-focus">focus</a></code>()</dt><dd>

    <p>Moves the focus to the element.</p>

    <p>If the element is a <a href="/breakup/specs/browser-dom/#browsing-context-container" id="focus-management-apis:browsing-context-container-2">browsing context container</a>, moves the focus to the <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="focus-management-apis:nested-browsing-context">nested browsing context</a> instead.</p>

   </dd><dt><var>element</var> . <code id="focus-management-apis:dom-blur"><a href="/breakup/specs/html-ui/#dom-blur">blur</a></code>()</dt><dd>

    <p>Moves the focus to the viewport. Use of this method is discouraged; if you want to focus the
    viewport, call the <code id="focus-management-apis:dom-focus-2"><a href="/breakup/specs/html-ui/#dom-focus">focus()</a></code> method on the <code id="focus-management-apis:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code>'s root element.</p>

    <p>
  Do not use this method to hide the focus ring. Do not use any
  other method that hides the focus ring from keyboard users, in
  particular do not use a CSS rule to override the 'outline'
  property. Removal of the focus ring leads to serious accessibility
  issues for users who navigate and interact with interactive
  content using the keyboard.
</p>


    

    

   </dd></dl>

  

  <p>The <dfn id="dom-document-activeelement"><code>activeElement</code></dfn> attribute on
  <code id="focus-management-apis:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> objects must return the value returned by the following steps:</p>

  <ol><li><p>Let <var>candidate</var> be the <code id="focus-management-apis:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code> on which the method was
   invoked.</p></li><li><p>If <var>candidate</var> has a <a href="/breakup/specs/html-ui/#dialog-group" id="focus-management-apis:dialog-group">dialog group</a> with a designated
   <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="focus-management-apis:focused-dialog-of-the-dialog-group">focused dialog of the dialog group</a>, then let <var>candidate</var> be the
   designated <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="focus-management-apis:focused-dialog-of-the-dialog-group-2">focused dialog of the dialog group</a>, and redo this step.</p></li><li><p>If <var>candidate</var> has a non-empty <a href="/breakup/specs/html-ui/#control-group" id="focus-management-apis:control-group">control group</a>, let <var>candidate</var> be the designated <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="focus-management-apis:focused-area-of-the-control-group">focused area of the control
   group</a>.</p>

   </li><li><p>If <var>candidate</var> is a <a href="/breakup/specs/html-ui/#focusable-area" id="focus-management-apis:focusable-area">focusable area</a>, let <var>candidate</var> be <var>candidate</var>'s <a href="/breakup/specs/html-ui/#dom-anchor" id="focus-management-apis:dom-anchor">DOM anchor</a>.</p></li><li>

    <p>If <var>candidate</var> is a <code id="focus-management-apis:document-4"><a href="/breakup/specs/browser-dom/#document">Document</a></code> that has a <a href="/breakup/specs/browser-dom/#the-body-element-2" id="focus-management-apis:the-body-element-2">body element</a>, then let <var>candidate</var> be <a href="/breakup/specs/browser-dom/#the-body-element-2" id="focus-management-apis:the-body-element-2-2">the body
    element</a> of that <code id="focus-management-apis:document-5"><a href="/breakup/specs/browser-dom/#document">Document</a></code>.</p>

    <p>Otherwise, if <var>candidate</var> is a <code id="focus-management-apis:document-6"><a href="/breakup/specs/browser-dom/#document">Document</a></code> that has a <a href="/breakup/specs/core-algorithms/#root-element" id="focus-management-apis:root-element">root
    element</a>, then let <var>candidate</var> be the <a href="/breakup/specs/core-algorithms/#root-element" id="focus-management-apis:root-element-2">root element</a> of that
    <code id="focus-management-apis:document-7"><a href="/breakup/specs/browser-dom/#document">Document</a></code>.</p>

    <p>Otherwise, if <var>candidate</var> is a <code id="focus-management-apis:document-8"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, then let <var>candidate</var> be null.</p>

   </li><li><p>Return <var>candidate</var>.</p></li></ol>

  <p>The <dfn id="dom-document-hasfocus"><code>hasFocus()</code></dfn> method on
  <code id="focus-management-apis:document-9"><a href="/breakup/specs/browser-dom/#document">Document</a></code> objects must return the value returned by the following steps:</p>

  <ol><li><p>Let <var>target</var> be the <code id="focus-management-apis:document-10"><a href="/breakup/specs/browser-dom/#document">Document</a></code> on which the method was
   invoked.</p></li><li><p>Let <var>candidate</var> be the <code id="focus-management-apis:document-11"><a href="/breakup/specs/browser-dom/#document">Document</a></code> of the <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="focus-management-apis:top-level-browsing-context">top-level
   browsing context</a>.</p></li><li><p>If <var>candidate</var> is <var>target</var>, return true and abort
   these steps.</p></li><li>

    <p>If <var>candidate</var> has a <a href="/breakup/specs/html-ui/#dialog-group" id="focus-management-apis:dialog-group-2">dialog group</a> with a designated <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="focus-management-apis:focused-dialog-of-the-dialog-group-3">focused
    dialog of the dialog group</a>, then let <var>candidate</var> be the designated
    <a href="/breakup/specs/html-ui/#focused-dialog-of-the-dialog-group" id="focus-management-apis:focused-dialog-of-the-dialog-group-4">focused dialog of the dialog group</a>, and redo this step.</p>

    <p>Otherwise, if <var>candidate</var> has a non-empty <a href="/breakup/specs/html-ui/#control-group" id="focus-management-apis:control-group-2">control group</a>, and the
    designated <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="focus-management-apis:focused-area-of-the-control-group-2">focused area of the control group</a> is a <a href="/breakup/specs/browser-dom/#browsing-context-container" id="focus-management-apis:browsing-context-container-3">browsing context
    container</a>, and the <a href="/breakup/specs/browser-dom/#active-document" id="focus-management-apis:active-document">active document</a> of that <a href="/breakup/specs/browser-dom/#browsing-context-container" id="focus-management-apis:browsing-context-container-4">browsing context
    container</a>'s <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="focus-management-apis:nested-browsing-context-2">nested browsing context</a> is <var>target</var>, then
    return true and abort these steps.</p>

    <p>Otherwise, if <var>candidate</var> has a non-empty <a href="/breakup/specs/html-ui/#control-group" id="focus-management-apis:control-group-3">control group</a>, and the
    designated <a href="/breakup/specs/html-ui/#focused-area-of-the-control-group" id="focus-management-apis:focused-area-of-the-control-group-3">focused area of the control group</a> is a <a href="/breakup/specs/browser-dom/#browsing-context-container" id="focus-management-apis:browsing-context-container-5">browsing context
    container</a>, then let <var>candidate</var> be the <a href="/breakup/specs/browser-dom/#active-document" id="focus-management-apis:active-document-2">active document</a> of
    that <a href="/breakup/specs/browser-dom/#browsing-context-container" id="focus-management-apis:browsing-context-container-6">browsing context container</a>'s <a href="/breakup/specs/browser-dom/#nested-browsing-context" id="focus-management-apis:nested-browsing-context-3">nested browsing context</a>, and redo
    this step.</p>

    <p>Otherwise, return false and abort these steps.</p>

   </li></ol>

  <p>The <dfn id="dom-window-focus"><code>focus()</code></dfn> method on the <code id="focus-management-apis:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code>
  object, when invoked, must run the <a href="/breakup/specs/html-ui/#focusing-steps" id="focus-management-apis:focusing-steps">focusing steps</a> with the <code id="focus-management-apis:window-2"><a href="/breakup/specs/browser-dom/#window">Window</a></code>
  object's <a href="/breakup/specs/browser-dom/#browsing-context" id="focus-management-apis:browsing-context-2">browsing context</a>. Additionally, if this <a href="/breakup/specs/browser-dom/#browsing-context" id="focus-management-apis:browsing-context-3">browsing context</a> is a
  <a href="/breakup/specs/browser-dom/#top-level-browsing-context" id="focus-management-apis:top-level-browsing-context-2">top-level browsing context</a>, user agents are encouraged to trigger some sort of
  notification to indicate to the user that the page is attempting to gain focus.</p>

  <p>The <dfn id="dom-window-blur"><code>blur()</code></dfn> method on the <code id="focus-management-apis:window-3"><a href="/breakup/specs/browser-dom/#window">Window</a></code>
  object, when invoked, provides a hint to the user agent that the script believes the user probably
  is not currently interested in the contents of the <a href="/breakup/specs/browser-dom/#browsing-context" id="focus-management-apis:browsing-context-4">browsing context</a> of the
  <code id="focus-management-apis:window-4"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object on which the method was invoked, but that the contents might become
  interesting again in the future.</p>

  <p>User agents are encouraged to ignore calls to this <code id="focus-management-apis:dom-window-blur"><a href="/breakup/specs/html-ui/#dom-window-blur">blur()</a></code>
  method entirely.</p>

  <p class="note">Historically, the <code id="focus-management-apis:dom-window-blur-2"><a href="/breakup/specs/html-ui/#dom-window-blur">focus()</a></code> and <code id="focus-management-apis:dom-window-blur-3"><a href="/breakup/specs/html-ui/#dom-window-blur">blur()</a></code> methods actually affected the system-level focus of the
  system widget (e.g. tab or window) that contained the <a href="/breakup/specs/browser-dom/#browsing-context" id="focus-management-apis:browsing-context-5">browsing context</a>, but hostile
  sites widely abuse this behaviour to the user's detriment.</p>

  <p>The <dfn id="dom-focus"><code>focus()</code></dfn> method on elements, when invoked, must
  run the following algorithm:</p>

  <ol><li><p>If the element is marked as <i id="focus-management-apis:locked-for-focus"><a href="/breakup/specs/html-ui/#locked-for-focus">locked for focus</a></i>, then abort these steps.</p></li><li><p>Mark the element as <dfn id="locked-for-focus">locked for focus</dfn>.</p></li><li><p>Run the <a href="/breakup/specs/html-ui/#focusing-steps" id="focus-management-apis:focusing-steps-2">focusing steps</a> for the element.</p></li><li><p>Unmark the element as <i id="focus-management-apis:locked-for-focus-2"><a href="/breakup/specs/html-ui/#locked-for-focus">locked for focus</a></i>.</p></li></ol>

  <p>The <dfn id="dom-blur"><code>blur()</code></dfn> method, when invoked, should run the
  <a href="/breakup/specs/html-ui/#unfocusing-steps" id="focus-management-apis:unfocusing-steps">unfocusing steps</a> for the element on which the method was called. User agents may
  selectively or uniformly ignore calls to this method for usability reasons.</p>

  <p class="example">For example, if the <code id="focus-management-apis:dom-blur-2"><a href="/breakup/specs/html-ui/#dom-blur">blur()</a></code> method is unwisely
  being used to remove the focus ring for aesthetics reasons, the page would become unusable by
  keyboard users. Ignoring calls to this method would thus allow keyboard users to interact with the
  page.</p></section></section><section><h2>Assigning keyboard shortcuts</h2>

  <section><h2>Introduction</h2>

  <p><i>This section is non-normative.</i></p>

  <p>Each element that can be activated or focused can be assigned a single key combination to
  activate it, using the <code id="introduction-9:the-accesskey-attribute"><a href="/breakup/specs/html-ui/#the-accesskey-attribute">accesskey</a></code> attribute.</p>

  <p>The exact shortcut is determined by the user agent, based on information about the user's
  keyboard, what keyboard shortcuts already exist on the platform, and what other shortcuts have
  been specified on the page, using the information provided in the <code id="introduction-9:the-accesskey-attribute-2"><a href="/breakup/specs/html-ui/#the-accesskey-attribute">accesskey</a></code> attribute as a guide.</p>

  <p>In order to ensure that a relevant keyboard shortcut is available on a wide variety of input
  devices, the author can provide a number of alternatives in the <code id="introduction-9:the-accesskey-attribute-3"><a href="/breakup/specs/html-ui/#the-accesskey-attribute">accesskey</a></code> attribute.</p>

  <p>Each alternative consists of a single character, such as a letter or digit.</p>

  <p>User agents can provide users with a list of the keyboard shortcuts, but authors are encouraged
  to do so also. The <code id="introduction-9:dom-accesskeylabel"><a href="/breakup/specs/html-ui/#dom-accesskeylabel">accessKeyLabel</a></code> IDL attribute returns a
  string representing the actual key combination assigned by the user agent.</p>

  <div class="example">

   <p>In this example, an author has provided a button that can be invoked using a shortcut key. To
   support full keyboards, the author has provided "C" as a possible key. To support devices
   equipped only with numeric keypads, the author has provided "1" as another possibly key.</p>

   <pre>&lt;input type=button value=Collect onclick="collect()"
       <strong>accesskey="C 1"</strong> id=c&gt;</pre>

  </div>

  <div class="example">

   <p>To tell the user what the shortcut key is, the author has this script here opted to explicitly
   add the key combination to the button's label:</p>

   <pre>function addShortcutKeyLabel(button) {
<strong>  if (button.accessKeyLabel != '')
    button.value += ' (' + button.accessKeyLabel + ')';</strong>
}
addShortcutKeyLabel(document.getElementById('c'));</pre>

   <p>Browsers on different platforms will show different labels, even for the same key combination,
   based on the convention prevalent on that platform. For example, if the key combination is the
   Control key, the Shift key, and the letter C, a Windows browser might display
   "<samp>Ctrl+Shift+C</samp>", whereas a Mac browser might display "<samp>^⇧C</samp>", while
   an Emacs browser might just display "<samp>C-C</samp>". Similarly, if the key combination is the
   Alt key and the Escape key, Windows might use "<samp>Alt+Esc</samp>", Mac might use
   "<samp>⌥⎋</samp>", and an Emacs browser might use "<samp>M-ESC</samp>" or
   "<samp>ESC ESC</samp>".</p>

   <p>In general, therefore, it is unwise to attempt to parse the value returned from the <code id="introduction-9:dom-accesskeylabel-2"><a href="/breakup/specs/html-ui/#dom-accesskeylabel">accessKeyLabel</a></code> IDL attribute.</p>

  </div></section>


  <section><h2>The <dfn><code>accesskey</code></dfn> attribute</h2>

  <p>All <a href="/breakup/specs/core-algorithms/#html-elements" id="the-accesskey-attribute:html-elements">HTML elements</a> may have the <code id="the-accesskey-attribute:the-accesskey-attribute"><a href="/breakup/specs/html-ui/#the-accesskey-attribute">accesskey</a></code>
  content attribute set. The <code id="the-accesskey-attribute:the-accesskey-attribute-2"><a href="/breakup/specs/html-ui/#the-accesskey-attribute">accesskey</a></code> attribute's value is used
  by the user agent as a guide for creating a keyboard shortcut that activates or focuses the
  element.</p>

  <p>If specified, the value must be an <a href="/breakup/specs/core-algorithms/#ordered-set-of-unique-space-separated-tokens" id="the-accesskey-attribute:ordered-set-of-unique-space-separated-tokens">ordered set of unique space-separated tokens</a>
  that are <a href="/breakup/specs/core-algorithms/#case-sensitive" id="the-accesskey-attribute:case-sensitive">case-sensitive</a>, each of which must be exactly one Unicode code point in
  length.</p>

  <div class="example">

   <p>In the following example, a variety of links are given with access keys so that keyboard users
   familiar with the site can more quickly navigate to the relevant pages:</p>

   <pre>&lt;nav&gt;
 &lt;p&gt;
  &lt;a title="Consortium Activities" accesskey="A" href="/Consortium/activities"&gt;Activities&lt;/a&gt; |
  &lt;a title="Technical Reports and Recommendations" accesskey="T" href="/TR/"&gt;Technical Reports&lt;/a&gt; |
  &lt;a title="Alphabetical Site Index" accesskey="S" href="/Consortium/siteindex"&gt;Site Index&lt;/a&gt; |
  &lt;a title="About This Site" accesskey="B" href="/Consortium/"&gt;About Consortium&lt;/a&gt; |
  &lt;a title="Contact Consortium" accesskey="C" href="/Consortium/contact"&gt;Contact&lt;/a&gt;
 &lt;/p&gt;
&lt;/nav&gt;</pre>

  </div>

  <div class="example">

   <p>In the following example, the search field is given two possible access keys, "s" and "0" (in
   that order). A user agent on a device with a full keyboard might pick <kbd><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>S</kbd></kbd> as the shortcut key,
   while a user agent on a small device with just a numeric keypad might pick just the plain
   unadorned key <kbd><kbd>0</kbd></kbd>:</p>

   <pre>&lt;form action="/search"&gt;
 &lt;label&gt;Search: &lt;input type="search" name="q" accesskey="s 0"&gt;&lt;/label&gt;
 &lt;input type="submit"&gt;
&lt;/form&gt;</pre>

  </div>

  <div class="example">

   <p>In the following example, a button has possible access keys described. A script then tries to
   update the button's label to advertise the key combination the user agent selected.</p>

   <pre>&lt;input type=submit accesskey="N @ 1" value="Compose"&gt;
...
&lt;script&gt;
 function labelButton(button) {
   if (button.accessKeyLabel)
     button.value += ' (' + button.accessKeyLabel + ')';
 }
 var inputs = document.getElementsByTagName('input');
 for (var i = 0; i &lt; inputs.length; i += 1) {
   if (inputs[i].type == "submit")
     labelButton(inputs[i]);
 }
&lt;/script&gt;</pre>

   <p>On one user agent, the button's label might become "<samp>Compose (⌘N)</samp>". On
   another, it might become "<samp>Compose (Alt+⇧+1)</samp>". If the user agent doesn't
   assign a key, it will be just "<samp>Compose</samp>". The exact string depends on what the
   <a href="/breakup/specs/html-ui/#assigned-access-key" id="the-accesskey-attribute:assigned-access-key">assigned access key</a> is, and on how the user agent represents that key
   combination.</p>

  </div></section>


  

  <section><h2>Processing model</h2>

  <p>An element's <dfn id="assigned-access-key">assigned access key</dfn> is a key combination derived from the element's
  <code id="processing-model-7:the-accesskey-attribute"><a href="/breakup/specs/html-ui/#the-accesskey-attribute">accesskey</a></code> content attribute. Initially, an element must not
  have an <a href="/breakup/specs/html-ui/#assigned-access-key" id="processing-model-7:assigned-access-key">assigned access key</a>.</p>

  <p>Whenever an element's <code id="processing-model-7:the-accesskey-attribute-2"><a href="/breakup/specs/html-ui/#the-accesskey-attribute">accesskey</a></code> attribute is set, changed,
  or removed, the user agent must update the element's <a href="/breakup/specs/html-ui/#assigned-access-key" id="processing-model-7:assigned-access-key-2">assigned access key</a> by running
  the following steps:</p>

  <ol><li><p>If the element has no <code id="processing-model-7:the-accesskey-attribute-3"><a href="/breakup/specs/html-ui/#the-accesskey-attribute">accesskey</a></code> attribute, then skip
   to the <i>fallback</i> step below.</p></li><li><p>Otherwise, <a href="/breakup/specs/core-algorithms/#split-a-string-on-spaces" id="processing-model-7:split-a-string-on-spaces">split the attribute's value on
   spaces</a>, and let <var>keys</var> be the resulting tokens.</p></li><li>

    <p>For each value in <var>keys</var> in turn, in the order the tokens appeared in the
    attribute's value, run the following substeps:</p>

    <ol><li><p>If the value is not a string exactly one Unicode code point in length, then skip the
     remainder of these steps for this value.</p></li><li><p>If the value does not correspond to a key on the system's keyboard, then skip the
     remainder of these steps for this value.</p></li><li><p>If the user agent can find a mix of zero or more modifier keys that, combined with the
     key that corresponds to the value given in the attribute, can be used as the access key, then
     the user agent may assign that combination of keys as the element's <a href="/breakup/specs/html-ui/#assigned-access-key" id="processing-model-7:assigned-access-key-3">assigned access
     key</a> and abort these steps.
     <a href="/breakup/specs/html/#fingerprinting-vector" id="processing-model-7:fingerprinting-vector" class="fingerprint" title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src="img/fingerprint.png" width="46" height="64"></a>
     </p></li></ol>

   </li><li><p><i>Fallback</i>: Optionally, the user agent may assign a key combination of its choosing
   as the element's <a href="/breakup/specs/html-ui/#assigned-access-key" id="processing-model-7:assigned-access-key-4">assigned access key</a> and then abort these steps.</p></li><li><p>If this step is reached, the element has no <a href="/breakup/specs/html-ui/#assigned-access-key" id="processing-model-7:assigned-access-key-5">assigned access key</a>.</p></li></ol>

  <p>Once a user agent has selected and assigned an access key for an element, the user agent should
  not change the element's <a href="/breakup/specs/html-ui/#assigned-access-key" id="processing-model-7:assigned-access-key-6">assigned access key</a> unless the <code id="processing-model-7:the-accesskey-attribute-4"><a href="/breakup/specs/html-ui/#the-accesskey-attribute">accesskey</a></code> content attribute is changed or the element is moved to
  another <code id="processing-model-7:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code>.</p>

  <p>When the user presses the key combination corresponding to the <a href="/breakup/specs/html-ui/#assigned-access-key" id="processing-model-7:assigned-access-key-7">assigned access key</a>
  for an element, if the element <a href="/breakup/specs/html-ui/#concept-command" id="processing-model-7:concept-command">defines a command</a>, the
  command's <a href="/breakup/specs/html-ui/#command-facet-hiddenstate" id="processing-model-7:command-facet-hiddenstate">Hidden State</a> facet is false (visible),
  the command's <a href="/breakup/specs/html-ui/#command-facet-disabledstate" id="processing-model-7:command-facet-disabledstate">Disabled State</a> facet is also false
  (enabled), the element is <a href="/breakup/specs/core-algorithms/#in-a-document" id="processing-model-7:in-a-document">in a <code>Document</code></a> that has an associated
  <a href="/breakup/specs/browser-dom/#browsing-context" id="processing-model-7:browsing-context">browsing context</a>, and neither the element nor any of its ancestors has a <code id="processing-model-7:the-hidden-attribute"><a href="/breakup/specs/html-ui/#the-hidden-attribute">hidden</a></code> attribute specified, then the user agent must trigger the <a href="/breakup/specs/html-ui/#command-facet-action" id="processing-model-7:command-facet-action">Action</a> of the command.</p>

  <p class="note">User agents <a href="/breakup/specs/html-ui/#expose-commands-in-ui">might expose</a> elements that have
  an <code id="processing-model-7:the-accesskey-attribute-5"><a href="/breakup/specs/html-ui/#the-accesskey-attribute">accesskey</a></code> attribute in other ways as well, e.g. in a menu
  displayed in response to a specific key combination.</p> 

  <hr>

  <p>The <dfn id="dom-accesskey"><code>accessKey</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="processing-model-7:reflect">reflect</a> the <code id="processing-model-7:the-accesskey-attribute-6"><a href="/breakup/specs/html-ui/#the-accesskey-attribute">accesskey</a></code> content attribute.</p>

  <p>The <dfn id="dom-accesskeylabel"><code>accessKeyLabel</code></dfn> IDL attribute must return
  a string that represents the element's <a href="/breakup/specs/html-ui/#assigned-access-key" id="processing-model-7:assigned-access-key-8">assigned access key</a>, if any. If the element
  does not have one, then the IDL attribute must return the empty string.</p></section></section></body></html>