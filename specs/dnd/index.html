<html lang="en"><head>
    <meta charset="utf-8">
    <title>Drag &amp; Drop</title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove"></script>
    <script class="remove">
      var respecConfig = {
              specStatus:     "ED"
          ,   shortName:      "dnd"
          ,   editors:      [{ name: "Up for the taking" }]
          ,   wg:             "HTML Working Group"
          ,   wgURI:          "http://www.w3.org/html/wg/"
          ,   wgPublicList:   "public-html"
          ,   wgPatentURI:    "http://www.w3.org/2004/01/pp-impl/40318/status"
          ,   license:        "cc-by"
          ,   processVersion: "2014"
        };
    </script>
  </head>
  <body>
    <section id="abstract">
      <p>
        Drag &amp; drop support for HTML.
      </p>
    </section>
    <section id="sotd">
      <p>
        This specification is an experimental breakup of the
        <a href="http://www.w3.org/TR/html51/">HTML specification</a>. You can see the full list on
        <a href="https://darobin.github.io/breakup/specs/">the index page</a> and take part in the
        discussion in <a href="https://github.com/darobin/breakup/">the repository</a>.
      </p>
    </section>
  

<section><h2>Foreword</h2></section><section><h2>Introduction</h2>

  <p><i>This section is non-normative.</i></p>

  <p>To make an element draggable is simple: give the element a <code id="event-drag:the-draggable-attribute"><a href="/breakup/specs/dnd/#the-draggable-attribute">draggable</a></code> attribute, and set an event listener for <code id="event-drag:event-dnd-dragstart"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code> that stores the data being dragged.</p>

  <p>The event handler typically needs to check that it's not a text selection that is being
  dragged, and then needs to store data into the <code id="event-drag:datatransfer"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object and set the
  allowed effects (copy, move, link, or some combination).</p>

  <p>For example:</p>

  <pre>&lt;p&gt;What fruits do you like?&lt;/p&gt;
&lt;ol ondragstart="dragStartHandler(event)"&gt;
 &lt;li draggable="true" data-value="fruit-apple"&gt;Apples&lt;/li&gt;
 &lt;li draggable="true" data-value="fruit-orange"&gt;Oranges&lt;/li&gt;
 &lt;li draggable="true" data-value="fruit-pear"&gt;Pears&lt;/li&gt;
&lt;/ol&gt;
&lt;script&gt;
  var internalDNDType = 'text/x-example'; // set this to something specific to your site
  function dragStartHandler(event) {
    if (event.target instanceof HTMLLIElement) {
      // use the element's data-value="" attribute as the value to be moving:
      event.dataTransfer.setData(internalDNDType, event.target.dataset.value);
      event.dataTransfer.effectAllowed = 'move'; // only allow moves
    } else {
      event.preventDefault(); // don't allow selection to be dragged
    }
  }
&lt;/script&gt;</pre>

  <hr>

  <p>To accept a drop, the drop target has to have a <code id="event-drag:the-dropzone-attribute"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code>
  attribute and listen to the <code id="event-drag:event-dnd-drop"><a href="/breakup/specs/dnd/#event-dnd-drop">drop</a></code> event.</p>

  <p>The value of the <code id="event-drag:the-dropzone-attribute-2"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute specifies what kind of
  data to accept (e.g. "<code>string:text/plain</code>" to accept any text strings, or
  "<code>file:image/png</code>" to accept a PNG image file) and what kind of feedback to
  give (e.g. "<code>move</code>" to indicate that the data will be moved).</p>

  <p class="note">Instead of using the <code id="event-drag:the-dropzone-attribute-3"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute, a drop
  target can handle the <code id="event-drag:event-dnd-dragenter"><a href="/breakup/specs/dnd/#event-dnd-dragenter">dragenter</a></code> event (to report whether or
  not the drop target is to accept the drop) and the <code id="event-drag:event-dnd-dragover"><a href="/breakup/specs/dnd/#event-dnd-dragover">dragover</a></code>
  event (to specify what feedback is to be shown to the user).</p>

  <p>The <code id="event-drag:event-dnd-drop-2"><a href="/breakup/specs/dnd/#event-dnd-drop">drop</a></code> event allows the actual drop to be performed. This
  event needs to be canceled, so that the <code id="event-drag:dom-datatransfer-dropeffect"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect">dropEffect</a></code> attribute's value can be used by the source
  (otherwise it's reset).</p>

  <p>For example:</p>

  <pre>&lt;p&gt;Drop your favorite fruits below:&lt;/p&gt;
&lt;ol dropzone="move string:text/x-example" ondrop="dropHandler(event)"&gt;
 &lt;!-- don't forget to change the "text/x-example" type to something
 specific to your site --&gt;
&lt;/ol&gt;
&lt;script&gt;
  var internalDNDType = 'text/x-example'; // set this to something specific to your site
  function dropHandler(event) {
    var li = document.createElement('li');
    var data = event.dataTransfer.getData(internalDNDType);
    if (data == 'fruit-apple') {
      li.textContent = 'Apples';
    } else if (data == 'fruit-orange') {
      li.textContent = 'Oranges';
    } else if (data == 'fruit-pear') {
      li.textContent = 'Pears';
    } else {
      li.textContent = 'Unknown Fruit';
    }
    event.target.appendChild(li);
  }
&lt;/script&gt;</pre>

  <hr>

  <p>To remove the original element (the one that was dragged) from the display, the <code id="event-drag:event-dnd-dragend"><a href="/breakup/specs/dnd/#event-dnd-dragend">dragend</a></code> event can be used.</p>

  <p>For our example here, that means updating the original markup to handle that event:</p>

  <pre>&lt;p&gt;What fruits do you like?&lt;/p&gt;
&lt;ol ondragstart="dragStartHandler(event)" ondragend="dragEndHandler(event)"&gt;
 <em>...as before...</em>
&lt;/ol&gt;
&lt;script&gt;
  function dragStartHandler(event) {
    // <em>...as before...</em>
  }
  function dragEndHandler(event) {
    if (event.dataTransfer.dropEffect == 'move') {
      // remove the dragged element
      event.target.parentNode.removeChild(event.target);
    }
  }
&lt;/script&gt;</pre></section><section><h2>The drag data store</h2>

  <p>The data that underlies a drag-and-drop operation, known as the <dfn id="drag-data-store">drag data store</dfn>,
  consists of the following information:</p>

  <ul><li><p>A <dfn id="drag-data-store-item-list">drag data store item list</dfn>, which is a list of items representing the dragged
   data, each consisting of the following information:</p>

    <dl><dt><dfn id="the-drag-data-item-kind">The drag data item kind</dfn></dt><dd>

      <p>The kind of data:</p>

      <dl><dt><i>Plain Unicode string</i></dt><dd>
        <p>Text.</p>
       </dd><dt><i>File</i></dt><dd>
        <p>Binary data with a file name.</p>
       </dd></dl>

     </dd><dt><dfn id="the-drag-data-item-type-string">The drag data item type string</dfn></dt><dd>

      <p>A Unicode string giving the type or format of the data, generally given by a <a href="/breakup/specs/core-algorithms/#mime-type" id="the-drag-data-store:mime-type">MIME
      type</a>. Some values that are not <a href="/breakup/specs/core-algorithms/#mime-type" id="the-drag-data-store:mime-type-2">MIME types</a> are
      special-cased for legacy reasons. The API does not enforce the use of <a href="/breakup/specs/core-algorithms/#mime-type" id="the-drag-data-store:mime-type-3">MIME types</a>; other values can be used as well. In all cases, however, the values
      are all <a href="/breakup/specs/core-algorithms/#converted-to-ascii-lowercase" id="the-drag-data-store:converted-to-ascii-lowercase">converted to ASCII lowercase</a> by the API.</p>

      <p class="note">Strings that contain <a href="/breakup/specs/core-algorithms/#space-character" id="the-drag-data-store:space-character">space characters</a>
      cannot be used with the <code id="the-drag-data-store:the-dropzone-attribute"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute, so authors are
      encouraged to use only <a href="/breakup/specs/core-algorithms/#mime-type" id="the-drag-data-store:mime-type-4">MIME types</a> or custom strings (without
      spaces).</p>

      <p>There is a limit of one <i>Plain Unicode string</i> item per <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-drag-data-store:the-drag-data-item-type-string">item type string</a>.</p> 

     </dd><dt>The actual data</dt><dd><p>A Unicode or binary string, in some cases with a file name (itself a Unicode string),
      as per <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-drag-data-store:the-drag-data-item-kind">the drag data item kind</a>.</p></dd></dl>

    <p>The <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-drag-data-store:drag-data-store-item-list">drag data store item list</a> is ordered in the order that the items were added
    to the list; most recently added last.</p>

   </li><li>

    <p>The following information, used to generate the UI feedback during the drag:</p>

    <ul><li>User-agent-defined default feedback information, known as the <dfn id="drag-data-store-default-feedback">drag data store default
     feedback</dfn>.</li><li>Optionally, a bitmap image and the coordinate of a point within that image, known as the
     <dfn id="drag-data-store-bitmap">drag data store bitmap</dfn> and <dfn id="drag-data-store-hot-spot-coordinate">drag data store hot spot coordinate</dfn>.</li></ul>

   </li><li>

    <p>A <dfn id="drag-data-store-mode">drag data store mode</dfn>, which is one of the following:</p>

    <dl><dt><dfn id="concept-dnd-rw">Read/write mode</dfn></dt><dd>

      <p>For the <code id="the-drag-data-store:event-dnd-dragstart"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code> event. New data can be added to the
      <a href="/breakup/specs/dnd/#drag-data-store" id="the-drag-data-store:drag-data-store">drag data store</a>.</p>

     </dd><dt><dfn id="concept-dnd-ro">Read-only mode</dfn></dt><dd>

      <p>For the <code id="the-drag-data-store:event-dnd-drop"><a href="/breakup/specs/dnd/#event-dnd-drop">drop</a></code> event. The list of items representing dragged
      data can be read, including the data. No new data can be added.</p>

     </dd><dt><dfn id="concept-dnd-p">Protected mode</dfn></dt><dd>

      <p>For all other events. The formats and kinds in the <a href="/breakup/specs/dnd/#drag-data-store" id="the-drag-data-store:drag-data-store-2">drag data store</a> list of
      items representing dragged data can be enumerated, but the data itself is unavailable and no
      new data can be added.</p>

     </dd></dl>

   </li><li>

    <p>A <dfn id="drag-data-store-allowed-effects-state">drag data store allowed effects state</dfn>, which is a string.</p>

   </li></ul>

  <p>When a <a href="/breakup/specs/dnd/#drag-data-store" id="the-drag-data-store:drag-data-store-3">drag data store</a> is <dfn id="create-a-drag-data-store">created</dfn>, it
  must be initialised such that its <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-drag-data-store:drag-data-store-item-list-2">drag data store item list</a> is empty, it has no
  <a href="/breakup/specs/dnd/#drag-data-store-default-feedback" id="the-drag-data-store:drag-data-store-default-feedback">drag data store default feedback</a>, it has no <a href="/breakup/specs/dnd/#drag-data-store-bitmap" id="the-drag-data-store:drag-data-store-bitmap">drag data store bitmap</a> and
  <a href="/breakup/specs/dnd/#drag-data-store-hot-spot-coordinate" id="the-drag-data-store:drag-data-store-hot-spot-coordinate">drag data store hot spot coordinate</a>, its <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-drag-data-store:drag-data-store-mode">drag data store mode</a> is <a href="/breakup/specs/dnd/#concept-dnd-p" id="the-drag-data-store:concept-dnd-p">protected mode</a>, and its <a href="/breakup/specs/dnd/#drag-data-store-allowed-effects-state" id="the-drag-data-store:drag-data-store-allowed-effects-state">drag data store allowed effects
  state</a> is the string "<code id="the-drag-data-store:dom-datatransfer-effectallowed-uninitialized"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-uninitialized">uninitialized</a></code>".</p></section><section><h2>The <code id="the-datatransfer-interface:datatransfer"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> interface</h2>

  <p><code id="the-datatransfer-interface:datatransfer-2"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> objects are used to expose the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store">drag data store</a> that
  underlies a drag-and-drop operation.</p>

  <pre class="idl">interface <dfn id="datatransfer">DataTransfer</dfn> {
  attribute DOMString <a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect" id="the-datatransfer-interface:dom-datatransfer-dropeffect">dropEffect</a>;
  attribute DOMString <a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed" id="the-datatransfer-interface:dom-datatransfer-effectallowed">effectAllowed</a>;

  [SameObject] readonly attribute <a href="/breakup/specs/dnd/#datatransferitemlist" id="the-datatransfer-interface:datatransferitemlist">DataTransferItemList</a> <a href="/breakup/specs/dnd/#dom-datatransfer-items" id="the-datatransfer-interface:dom-datatransfer-items">items</a>;

  void <a href="/breakup/specs/dnd/#dom-datatransfer-setdragimage" id="the-datatransfer-interface:dom-datatransfer-setdragimage">setDragImage</a>(Element image, long x, long y);

  /* old interface */
  [SameObject] readonly attribute DOMString[] <a href="/breakup/specs/dnd/#dom-datatransfer-types" id="the-datatransfer-interface:dom-datatransfer-types">types</a>;
  DOMString <a href="/breakup/specs/dnd/#dom-datatransfer-getdata" id="the-datatransfer-interface:dom-datatransfer-getdata">getData</a>(DOMString format);
  void <a href="/breakup/specs/dnd/#dom-datatransfer-setdata" id="the-datatransfer-interface:dom-datatransfer-setdata">setData</a>(DOMString format, DOMString data);
  void <a href="/breakup/specs/dnd/#dom-datatransfer-cleardata" id="the-datatransfer-interface:dom-datatransfer-cleardata">clearData</a>(optional DOMString format);
  [SameObject] readonly attribute <a href="/breakup/specs/core-algorithms/#filelist" id="the-datatransfer-interface:filelist">FileList</a> <a href="/breakup/specs/dnd/#dom-datatransfer-files" id="the-datatransfer-interface:dom-datatransfer-files">files</a>;
};</pre>

  <dl class="domintro"><dt><var>dataTransfer</var> . <code id="the-datatransfer-interface:dom-datatransfer-dropeffect-2"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect">dropEffect</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the kind of operation that is currently selected. If the kind of operation isn't one
    of those that is allowed by the <code id="the-datatransfer-interface:dom-datatransfer-effectallowed-2"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed">effectAllowed</a></code> attribute, then the operation will
    fail.</p>

    <p>Can be set, to change the selected operation.</p>

    <p>The possible values are "<code id="the-datatransfer-interface:dom-datatransfer-dropeffect-none"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-none">none</a></code>", "<code id="the-datatransfer-interface:dom-datatransfer-dropeffect-copy"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-copy">copy</a></code>", "<code id="the-datatransfer-interface:dom-datatransfer-dropeffect-link"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-link">link</a></code>", and "<code id="the-datatransfer-interface:dom-datatransfer-dropeffect-move"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-move">move</a></code>".</p>

   </dd><dt><var>dataTransfer</var> . <code id="the-datatransfer-interface:dom-datatransfer-effectallowed-3"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed">effectAllowed</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the kinds of operations that are to be allowed.</p>

    <p>Can be set (during the <code id="the-datatransfer-interface:event-dnd-dragstart"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code> event), to change
    the allowed operations.</p>

    <p>The possible values are "<code id="the-datatransfer-interface:dom-datatransfer-effectallowed-none"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-none">none</a></code>",
    "<code id="the-datatransfer-interface:dom-datatransfer-effectallowed-copy"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-copy">copy</a></code>", "<code id="the-datatransfer-interface:dom-datatransfer-effectallowed-copylink"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-copylink">copyLink</a></code>", "<code id="the-datatransfer-interface:dom-datatransfer-effectallowed-copymove"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-copymove">copyMove</a></code>", "<code id="the-datatransfer-interface:dom-datatransfer-effectallowed-link"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-link">link</a></code>", "<code id="the-datatransfer-interface:dom-datatransfer-effectallowed-linkmove"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-linkmove">linkMove</a></code>", "<code id="the-datatransfer-interface:dom-datatransfer-effectallowed-move"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-move">move</a></code>", "<code id="the-datatransfer-interface:dom-datatransfer-effectallowed-all"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-all">all</a></code>", and "<code id="the-datatransfer-interface:dom-datatransfer-effectallowed-uninitialized"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-uninitialized">uninitialized</a></code>",</p>

   </dd><dt><var>dataTransfer</var> . <code id="the-datatransfer-interface:dom-datatransfer-items-2"><a href="/breakup/specs/dnd/#dom-datatransfer-items">items</a></code></dt><dd>

    <p>Returns a <code id="the-datatransfer-interface:datatransferitemlist-2"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object, with the drag data.</p>

   </dd><dt><var>dataTransfer</var> . <code id="the-datatransfer-interface:dom-datatransfer-setdragimage-2"><a href="/breakup/specs/dnd/#dom-datatransfer-setdragimage">setDragImage</a></code>(<var>element</var>, <var>x</var>, <var>y</var>)</dt><dd>

    <p>Uses the given element to update the drag feedback, replacing any previously specified
    feedback.</p>

   </dd><dt><var>dataTransfer</var> . <code id="the-datatransfer-interface:dom-datatransfer-types-2"><a href="/breakup/specs/dnd/#dom-datatransfer-types">types</a></code></dt><dd>

    <p>Returns an array listing the formats that were set in the <code id="the-datatransfer-interface:event-dnd-dragstart-2"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code> event. In addition, if any files are being dragged,
    then one of the types will be the string "<code>Files</code>".</p>

   </dd><dt><var>data</var> = <var>dataTransfer</var> . <code id="the-datatransfer-interface:dom-datatransfer-getdata-2"><a href="/breakup/specs/dnd/#dom-datatransfer-getdata">getData</a></code>(<var>format</var>)</dt><dd>

    <p>Returns the specified data. If there is no such data, returns the empty string.</p>

   </dd><dt><var>dataTransfer</var> . <code id="the-datatransfer-interface:dom-datatransfer-setdata-2"><a href="/breakup/specs/dnd/#dom-datatransfer-setdata">setData</a></code>(<var>format</var>, <var>data</var>)</dt><dd>

    <p>Adds the specified data.</p>

   </dd><dt><var>dataTransfer</var> . <code id="the-datatransfer-interface:dom-datatransfer-cleardata-2"><a href="/breakup/specs/dnd/#dom-datatransfer-cleardata">clearData</a></code>( [ <var>format</var> ] )</dt><dd>

    <p>Removes the data of the specified formats. Removes all data if the argument is omitted.</p>

   </dd><dt><var>dataTransfer</var> . <code id="the-datatransfer-interface:dom-datatransfer-files-2"><a href="/breakup/specs/dnd/#dom-datatransfer-files">files</a></code></dt><dd>

    <p>Returns a <code id="the-datatransfer-interface:filelist-2"><a href="/breakup/specs/core-algorithms/#filelist">FileList</a></code> of the files being dragged, if any.</p>

   </dd></dl>

  <p><code id="the-datatransfer-interface:datatransfer-3"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> objects are used during the <a href="/breakup/specs/dnd/#dndevents">drag-and-drop
  events</a>, and are only valid while those events are being fired.</p>

  

  <p>A <code id="the-datatransfer-interface:datatransfer-4"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is associated with a <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-2">drag data store</a> while it
  is valid.</p>

  <p>The <dfn id="dom-datatransfer-dropeffect"><code>dropEffect</code></dfn> attribute controls
  the drag-and-drop feedback that the user is given during a drag-and-drop operation. When the
  <code id="the-datatransfer-interface:datatransfer-5"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is created, the <code id="the-datatransfer-interface:dom-datatransfer-dropeffect-3"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect">dropEffect</a></code> attribute is set to a string value. On
  getting, it must return its current value. On setting, if the new value is one of "<dfn id="dom-datatransfer-dropeffect-none"><code>none</code></dfn>", "<dfn id="dom-datatransfer-dropeffect-copy"><code>copy</code></dfn>", "<dfn id="dom-datatransfer-dropeffect-link"><code>link</code></dfn>", or "<dfn id="dom-datatransfer-dropeffect-move"><code>move</code></dfn>", then the attribute's current value must be
  set to the new value. Other values must be ignored.</p>

  <p>The <dfn id="dom-datatransfer-effectallowed"><code>effectAllowed</code></dfn> attribute is
  used in the drag-and-drop processing model to initialise the <code id="the-datatransfer-interface:dom-datatransfer-dropeffect-4"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect">dropEffect</a></code> attribute during the <code id="the-datatransfer-interface:event-dnd-dragenter"><a href="/breakup/specs/dnd/#event-dnd-dragenter">dragenter</a></code> and <code id="the-datatransfer-interface:event-dnd-dragover"><a href="/breakup/specs/dnd/#event-dnd-dragover">dragover</a></code> events. When the <code id="the-datatransfer-interface:datatransfer-6"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is
  created, the <code id="the-datatransfer-interface:dom-datatransfer-effectallowed-4"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed">effectAllowed</a></code> attribute is set
  to a string value. On getting, it must return its current value. On setting, if <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-3">drag data
  store</a>'s <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-datatransfer-interface:drag-data-store-mode">mode</a> is the <a href="/breakup/specs/dnd/#concept-dnd-rw" id="the-datatransfer-interface:concept-dnd-rw">read/write mode</a> and the new value is one of "<dfn id="dom-datatransfer-effectallowed-none"><code>none</code></dfn>", "<dfn id="dom-datatransfer-effectallowed-copy"><code>copy</code></dfn>", "<dfn id="dom-datatransfer-effectallowed-copylink"><code>copyLink</code></dfn>", "<dfn id="dom-datatransfer-effectallowed-copymove"><code>copyMove</code></dfn>", "<dfn id="dom-datatransfer-effectallowed-link"><code>link</code></dfn>", "<dfn id="dom-datatransfer-effectallowed-linkmove"><code>linkMove</code></dfn>", "<dfn id="dom-datatransfer-effectallowed-move"><code>move</code></dfn>", "<dfn id="dom-datatransfer-effectallowed-all"><code>all</code></dfn>", or "<dfn id="dom-datatransfer-effectallowed-uninitialized"><code>uninitialized</code></dfn>", then the attribute's
  current value must be set to the new value. Otherwise it must be left unchanged.</p>

  <p>The <dfn id="dom-datatransfer-items"><code>items</code></dfn> attribute must return a
  <code id="the-datatransfer-interface:datatransferitemlist-3"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object associated with the <code id="the-datatransfer-interface:datatransfer-7"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object.</p>

  <p>The <dfn id="dom-datatransfer-setdragimage"><code>setDragImage(<var>element</var>,
  <var>x</var>, <var>y</var>)</code></dfn> method must run the following steps:</p>

  <ol><li><p>If the <code id="the-datatransfer-interface:datatransfer-8"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is no longer associated with a <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-4">drag data
   store</a>, abort these steps. Nothing happens.</p></li><li><p>If the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-5">drag data store</a>'s <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-datatransfer-interface:drag-data-store-mode-2">mode</a> is
   not the <a href="/breakup/specs/dnd/#concept-dnd-rw" id="the-datatransfer-interface:concept-dnd-rw-2">read/write mode</a>, abort these steps. Nothing
   happens.</p></li><li><p>If the <var>element</var> argument is an <code id="the-datatransfer-interface:the-img-element"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> element, then set the <a href="/breakup/specs/dnd/#drag-data-store-bitmap" id="the-datatransfer-interface:drag-data-store-bitmap">drag
   data store bitmap</a> to the element's image (at its intrinsic size); otherwise, set the
   <a href="/breakup/specs/dnd/#drag-data-store-bitmap" id="the-datatransfer-interface:drag-data-store-bitmap-2">drag data store bitmap</a> to an image generated from the given element (the exact
   mechanism for doing so is not currently specified).</p></li><li><p>Set the <a href="/breakup/specs/dnd/#drag-data-store-hot-spot-coordinate" id="the-datatransfer-interface:drag-data-store-hot-spot-coordinate">drag data store hot spot coordinate</a> to the given <var>x</var>,
   <var>y</var> coordinate.</p></li></ol>

  <p>The <dfn id="dom-datatransfer-types"><code>types</code></dfn> attribute must return a
  <a href="/breakup/specs/core-algorithms/#live" id="the-datatransfer-interface:live">live</a> <a href="/breakup/specs/core-algorithms/#dfn-read-only-array" id="the-datatransfer-interface:dfn-read-only-array">read only</a> array giving the strings
  that the following steps would produce.</p>

  <ol><li><p>Start with an empty list <var>L</var>.</p></li><li><p>If the <code id="the-datatransfer-interface:datatransfer-9"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is no longer associated with a <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-6">drag data
   store</a>, the array is empty. Abort these steps; return the empty list <var>L</var>.</p></li><li><p>For each item in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransfer-interface:drag-data-store-item-list">drag data store item list</a> 
   whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransfer-interface:the-drag-data-item-kind">kind</a> is <i>Plain Unicode string</i>, add an
   entry to the list <var>L</var> consisting of the item's <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransfer-interface:the-drag-data-item-type-string">type string</a>.</p></li><li><p>If there are any items in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransfer-interface:drag-data-store-item-list-2">drag data store item list</a> whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransfer-interface:the-drag-data-item-kind-2">kind</a> is <i>File</i>, then add an entry to the list
   <var>L</var> consisting of the string "<code>Files</code>". (This value can be
   distinguished from the other values because it is not lowercase.)</p></li><li><p>The strings produced by these steps are those in the list <var>L</var>.</p></li></ol>

  <p>The <dfn id="dom-datatransfer-getdata"><code>getData(<var>format</var>)</code></dfn> method
  must run the following steps:</p>

  <ol><li><p>If the <code id="the-datatransfer-interface:datatransfer-10"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is no longer associated with a <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-7">drag data
   store</a>, return the empty string and abort these steps.</p></li><li><p>If the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-8">drag data store</a>'s <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-datatransfer-interface:drag-data-store-mode-3">mode</a> is
   the <a href="/breakup/specs/dnd/#concept-dnd-p" id="the-datatransfer-interface:concept-dnd-p">protected mode</a>, return the empty string and abort these
   steps.</p></li><li><p>Let <var>format</var> be the first argument, <a href="/breakup/specs/core-algorithms/#converted-to-ascii-lowercase" id="the-datatransfer-interface:converted-to-ascii-lowercase">converted to ASCII
   lowercase</a>.</p></li><li><p>Let <var>convert-to-URL</var> be false.</p></li><li><p>If <var>format</var> equals "<code>text</code>", change it to "<code>text/plain</code>".</p></li><li><p>If <var>format</var> equals "<code>url</code>", change it to "<code>text/uri-list</code>" and set <var>convert-to-URL</var> to true.</p></li><li><p>If there is no item in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransfer-interface:drag-data-store-item-list-3">drag data store item list</a> whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransfer-interface:the-drag-data-item-kind-3">kind</a> is <i>Plain Unicode string</i> and whose <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransfer-interface:the-drag-data-item-type-string-2">type string</a> is equal to <var>format</var>, return the empty string
   and abort these steps.</p></li><li><p>Let <var>result</var> be the data of the item in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransfer-interface:drag-data-store-item-list-4">drag data store item
   list</a> whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransfer-interface:the-drag-data-item-kind-4">kind</a> is <i>Plain Unicode
   string</i> and whose <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransfer-interface:the-drag-data-item-type-string-3">type string</a> is equal to
   <var>format</var>.</p></li><li><p>If <var>convert-to-URL</var> is true, then parse <var>result</var> as appropriate for
   <code>text/uri-list</code> data, and then set <var>result</var> to the first URL from
   the list, if any, or the empty string otherwise. [[!RFC2483]]</p></li><li><p>Return <var>result</var>.</p></li></ol>

  <p>The <dfn id="dom-datatransfer-setdata"><code>setData(<var>format</var>,
  <var>data</var>)</code></dfn> method must run the following steps:</p>

  <ol><li><p>If the <code id="the-datatransfer-interface:datatransfer-11"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is no longer associated with a <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-9">drag data
   store</a>, abort these steps. Nothing happens.</p></li><li><p>If the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-10">drag data store</a>'s <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-datatransfer-interface:drag-data-store-mode-4">mode</a> is
   not the <a href="/breakup/specs/dnd/#concept-dnd-rw" id="the-datatransfer-interface:concept-dnd-rw-3">read/write mode</a>, abort these steps. Nothing
   happens.</p></li><li><p>Let <var>format</var> be the first argument, <a href="/breakup/specs/core-algorithms/#converted-to-ascii-lowercase" id="the-datatransfer-interface:converted-to-ascii-lowercase-2">converted to ASCII
   lowercase</a>.</p></li><li>

    <p>If <var>format</var> equals "<code>text</code>", change it to "<code>text/plain</code>".</p>

    <p>If <var>format</var> equals "<code>url</code>", change it to "<code>text/uri-list</code>".</p>

   </li><li><p>Remove the item in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransfer-interface:drag-data-store-item-list-5">drag data store item list</a> whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransfer-interface:the-drag-data-item-kind-5">kind</a> is <i>Plain Unicode string</i> and whose <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransfer-interface:the-drag-data-item-type-string-4">type string</a> is equal to <var>format</var>, if there is
   one.</p></li><li><p>Add an item to the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransfer-interface:drag-data-store-item-list-6">drag data store item list</a> whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransfer-interface:the-drag-data-item-kind-6">kind</a> is <i>Plain Unicode string</i>, whose <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransfer-interface:the-drag-data-item-type-string-5">type string</a> is equal to <var>format</var>, and whose data is the string
   given by the method's second argument.</p></li></ol>

  <p>The <dfn id="dom-datatransfer-cleardata"><code>clearData()</code></dfn> method must run the
  following steps:</p>

  <ol><li><p>If the <code id="the-datatransfer-interface:datatransfer-12"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is no longer associated with a <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-11">drag data
   store</a>, abort these steps. Nothing happens.</p></li><li><p>If the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-12">drag data store</a>'s <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-datatransfer-interface:drag-data-store-mode-5">mode</a> is
   not the <a href="/breakup/specs/dnd/#concept-dnd-rw" id="the-datatransfer-interface:concept-dnd-rw-4">read/write mode</a>, abort these steps. Nothing
   happens.</p></li><li><p>If the method was called with no arguments, remove each item in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransfer-interface:drag-data-store-item-list-7">drag data store
   item list</a> whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransfer-interface:the-drag-data-item-kind-7">kind</a> is <i>Plain Unicode
   string</i>, and abort these steps.</p></li><li><p>Let <var>format</var> be the first argument, <a href="/breakup/specs/core-algorithms/#converted-to-ascii-lowercase" id="the-datatransfer-interface:converted-to-ascii-lowercase-3">converted to ASCII
   lowercase</a>.</p></li><li>

    <p>If <var>format</var> equals "<code>text</code>", change it to "<code>text/plain</code>".</p>

    <p>If <var>format</var> equals "<code>url</code>", change it to "<code>text/uri-list</code>".</p>

   </li><li><p>Remove the item in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransfer-interface:drag-data-store-item-list-8">drag data store item list</a> whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransfer-interface:the-drag-data-item-kind-8">kind</a> is <i>Plain Unicode string</i> and whose <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransfer-interface:the-drag-data-item-type-string-6">type string</a> is equal to <var>format</var>, if there is
   one.</p></li></ol>

  <p class="note">The <code id="the-datatransfer-interface:dom-datatransfer-cleardata-3"><a href="/breakup/specs/dnd/#dom-datatransfer-cleardata">clearData()</a></code> method does not
  affect whether any files were included in the drag, so the <code id="the-datatransfer-interface:dom-datatransfer-types-3"><a href="/breakup/specs/dnd/#dom-datatransfer-types">types</a></code> attribute's list might still not be empty after
  calling <code id="the-datatransfer-interface:dom-datatransfer-cleardata-4"><a href="/breakup/specs/dnd/#dom-datatransfer-cleardata">clearData()</a></code> (it would still contain the
  "<code>Files</code>" string if any files were included in the drag).</p>

  <p>The <dfn id="dom-datatransfer-files"><code>files</code></dfn> attribute must return a
  <a href="/breakup/specs/core-algorithms/#live" id="the-datatransfer-interface:live-2">live</a> <code id="the-datatransfer-interface:filelist-3"><a href="/breakup/specs/core-algorithms/#filelist">FileList</a></code> sequence consisting of <code id="the-datatransfer-interface:file"><a href="/breakup/specs/core-algorithms/#file">File</a></code> objects
  representing the files found by the following steps.
  Furthermore, for a given <code id="the-datatransfer-interface:filelist-4"><a href="/breakup/specs/core-algorithms/#filelist">FileList</a></code> object and a given underlying file, the same
  <code id="the-datatransfer-interface:file-2"><a href="/breakup/specs/core-algorithms/#file">File</a></code> object must be used each time.</p>

  <ol><li><p>Start with an empty list <var>L</var>.</p></li><li><p>If the <code id="the-datatransfer-interface:datatransfer-13"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is no longer associated with a <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-13">drag data
   store</a>, the <code id="the-datatransfer-interface:filelist-5"><a href="/breakup/specs/core-algorithms/#filelist">FileList</a></code> is empty. Abort these steps; return the empty list <var>L</var>.</p></li><li><p>If the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransfer-interface:drag-data-store-14">drag data store</a>'s <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-datatransfer-interface:drag-data-store-mode-6">mode</a> is
   the <a href="/breakup/specs/dnd/#concept-dnd-p" id="the-datatransfer-interface:concept-dnd-p-2">protected mode</a>, abort these steps; return the empty list
   <var>L</var>.</p></li><li><p>For each item in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransfer-interface:drag-data-store-item-list-9">drag data store item list</a> 
   whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransfer-interface:the-drag-data-item-kind-9">kind</a> is <i>File</i> , add the item's data (the file, in particular its name and contents, as well as
   its <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransfer-interface:the-drag-data-item-type-string-7">type</a>) to the list <var>L</var>.</p></li><li><p>The files found by these steps are those in the list <var>L</var>.</p></li></ol>

  <p class="note">This version of the API does not expose the types of the files during the
  drag.</p>

  


  <section><h2>The <code id="the-datatransferitemlist-interface:datatransferitemlist"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> interface</h2>

  <p>Each <code id="the-datatransferitemlist-interface:datatransfer"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is associated with a <code id="the-datatransferitemlist-interface:datatransferitemlist-2"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code>
  object.</p>

  <pre class="idl">interface <dfn id="datatransferitemlist">DataTransferItemList</dfn> {
  readonly attribute unsigned long <a href="/breakup/specs/dnd/#dom-datatransferitemlist-length" id="the-datatransferitemlist-interface:dom-datatransferitemlist-length">length</a>;
  <a href="/breakup/specs/dnd/#dom-datatransferitemlist-item" id="the-datatransferitemlist-interface:dom-datatransferitemlist-item">getter</a> <a href="/breakup/specs/dnd/#datatransferitem" id="the-datatransferitemlist-interface:datatransferitem">DataTransferItem</a> (unsigned long index);
  <a href="/breakup/specs/dnd/#datatransferitem" id="the-datatransferitemlist-interface:datatransferitem-2">DataTransferItem</a>? <a href="/breakup/specs/dnd/#dom-datatransferitemlist-add" id="the-datatransferitemlist-interface:dom-datatransferitemlist-add">add</a>(DOMString data, DOMString type);
  <a href="/breakup/specs/dnd/#datatransferitem" id="the-datatransferitemlist-interface:datatransferitem-3">DataTransferItem</a>? <a href="/breakup/specs/dnd/#dom-datatransferitemlist-add" id="the-datatransferitemlist-interface:dom-datatransferitemlist-add-2">add</a>(<a href="/breakup/specs/core-algorithms/#file" id="the-datatransferitemlist-interface:file">File</a> data);
  void <a href="/breakup/specs/dnd/#dom-datatransferitemlist-remove" id="the-datatransferitemlist-interface:dom-datatransferitemlist-remove">remove</a>(unsigned long index);
  void <a href="/breakup/specs/dnd/#dom-datatransferitemlist-clear" id="the-datatransferitemlist-interface:dom-datatransferitemlist-clear">clear</a>();
};</pre>

  <dl class="domintro"><dt><var>items</var> . <code id="the-datatransferitemlist-interface:dom-datatransferitemlist-length-2"><a href="/breakup/specs/dnd/#dom-datatransferitemlist-length">length</a></code></dt><dd><p>Returns the number of items in the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store">drag data store</a>.</p></dd><dt><var>items</var>[<var>index</var>]</dt><dd>

    <p>Returns the <code id="the-datatransferitemlist-interface:datatransferitem-4"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object representing the <var>index</var>th
    entry in the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-2">drag data store</a>.</p>

   </dd><dt><var>items</var> . <code id="the-datatransferitemlist-interface:dom-datatransferitemlist-remove-2"><a href="/breakup/specs/dnd/#dom-datatransferitemlist-remove">remove</a></code>(<var>index</var>)</dt><dd>

    <p>Removes the <var>index</var>th entry in the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-3">drag data store</a>.</p>

   </dd><dt><var>items</var> . <code id="the-datatransferitemlist-interface:dom-datatransferitemlist-clear-2"><a href="/breakup/specs/dnd/#dom-datatransferitemlist-clear">clear</a></code>()</dt><dd>

    <p>Removes all the entries in the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-4">drag data store</a>.</p>

   </dd><dt><var>items</var> . <code id="the-datatransferitemlist-interface:dom-datatransferitemlist-add-3"><a href="/breakup/specs/dnd/#dom-datatransferitemlist-add">add</a></code>(<var>data</var>)</dt><dt><var>items</var> . <code id="the-datatransferitemlist-interface:dom-datatransferitemlist-add-4"><a href="/breakup/specs/dnd/#dom-datatransferitemlist-add">add</a></code>(<var>data</var>, <var>type</var>)</dt><dd>

    <p>Adds a new entry for the given data to the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-5">drag data store</a>. If the data is plain
    text  then a <var>type</var> string has to be provided
    also.</p>

   </dd></dl>

  

  <p>While the <code id="the-datatransferitemlist-interface:datatransferitemlist-3"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object's <code id="the-datatransferitemlist-interface:datatransfer-2"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is
  associated with a <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-6">drag data store</a>, the <code id="the-datatransferitemlist-interface:datatransferitemlist-4"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object's
  <i>mode</i> is the same as the <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-datatransferitemlist-interface:drag-data-store-mode">drag data store mode</a>. When the
  <code id="the-datatransferitemlist-interface:datatransferitemlist-5"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object's <code id="the-datatransferitemlist-interface:datatransfer-3"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is <em>not</em>
  associated with a <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-7">drag data store</a>, the <code id="the-datatransferitemlist-interface:datatransferitemlist-6"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object's
  <i>mode</i> is the <i>disabled mode</i>. The <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-8">drag data store</a> referenced in this
  section (which is used only when the <code id="the-datatransferitemlist-interface:datatransferitemlist-7"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object is not in the
  <i>disabled mode</i>) is the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-9">drag data store</a> with which the
  <code id="the-datatransferitemlist-interface:datatransferitemlist-8"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object's <code id="the-datatransferitemlist-interface:datatransfer-4"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is associated.</p>

  <p>The <dfn id="dom-datatransferitemlist-length"><code>length</code></dfn> attribute must
  return zero if the object is in the <i>disabled mode</i>; otherwise it must return the number of
  items in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransferitemlist-interface:drag-data-store-item-list">drag data store item list</a>.</p>

  <p>When a <code id="the-datatransferitemlist-interface:datatransferitemlist-9"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object is not in the <i>disabled mode</i>, its
  <a href="/breakup/specs/core-algorithms/#supported-property-indices" id="the-datatransferitemlist-interface:supported-property-indices">supported property indices</a> are the numbers in the range

    <span>0 .. <var>n</var>-1</span>,

  where <var>n</var> is the number of items in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransferitemlist-interface:drag-data-store-item-list-2">drag data store item
  list</a>.</p>

  <p>To <dfn id="dom-datatransferitemlist-item">determine the value of an indexed property</dfn>
  <var>i</var> of a <code id="the-datatransferitemlist-interface:datatransferitemlist-10"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object, the user agent must return a
  <code id="the-datatransferitemlist-interface:datatransferitem-5"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object representing the <var>i</var>th item in the
  <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-10">drag data store</a>. The same object must be returned each time a particular item is
  obtained from this <code id="the-datatransferitemlist-interface:datatransferitemlist-11"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object. The <code id="the-datatransferitemlist-interface:datatransferitem-6"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code>
  object must be associated with the same <code id="the-datatransferitemlist-interface:datatransfer-5"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object as the
  <code id="the-datatransferitemlist-interface:datatransferitemlist-12"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object when it is first created.</p>

  <p>The <dfn id="dom-datatransferitemlist-add"><code>add()</code></dfn> method must run the
  following steps:</p>

  <ol><li><p>If the <code id="the-datatransferitemlist-interface:datatransferitemlist-13"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object is not in the <i id="the-datatransferitemlist-interface:concept-dnd-rw"><a href="/breakup/specs/dnd/#concept-dnd-rw">read/write mode</a></i>, return null and abort these steps.</p></li><li>

    <p>Jump to the appropriate set of steps from the following list:</p>

    <dl class="switch"><dt>If the first argument to the method is a string</dt><dd>

      <p>If there is already an item in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransferitemlist-interface:drag-data-store-item-list-3">drag data store item list</a> whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransferitemlist-interface:the-drag-data-item-kind">kind</a> is <i>Plain Unicode string</i> and whose <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransferitemlist-interface:the-drag-data-item-type-string">type string</a> is equal to the value of the
      method's second argument, <a href="/breakup/specs/core-algorithms/#converted-to-ascii-lowercase" id="the-datatransferitemlist-interface:converted-to-ascii-lowercase">converted to ASCII lowercase</a>, then throw a
      <code id="the-datatransferitemlist-interface:notsupportederror"><a href="/breakup/specs/core-algorithms/#notsupportederror">NotSupportedError</a></code> exception and abort these steps.</p>

      <p>Otherwise, add an item to the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransferitemlist-interface:drag-data-store-item-list-4">drag data store item list</a> whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransferitemlist-interface:the-drag-data-item-kind-2">kind</a> is <i>Plain Unicode string</i>, whose <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransferitemlist-interface:the-drag-data-item-type-string-2">type string</a> is equal to the value of the method's second
      argument, <a href="/breakup/specs/core-algorithms/#converted-to-ascii-lowercase" id="the-datatransferitemlist-interface:converted-to-ascii-lowercase-2">converted to ASCII lowercase</a>, and whose data is the string given by the
      method's first argument.</p>

     </dd><dt>If the first argument to the method is a <code id="the-datatransferitemlist-interface:file-2"><a href="/breakup/specs/core-algorithms/#file">File</a></code></dt><dd>

      <p>Add an item to the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransferitemlist-interface:drag-data-store-item-list-5">drag data store item list</a> whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransferitemlist-interface:the-drag-data-item-kind-3">kind</a> is <i>File</i>, whose <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransferitemlist-interface:the-drag-data-item-type-string-3">type
      string</a> is the <code id="the-datatransferitemlist-interface:dom-blob-type"><a href="/breakup/specs/core-algorithms/#dom-blob-type">type</a></code> of the <code id="the-datatransferitemlist-interface:file-3"><a href="/breakup/specs/core-algorithms/#file">File</a></code>,
      <a href="/breakup/specs/core-algorithms/#converted-to-ascii-lowercase" id="the-datatransferitemlist-interface:converted-to-ascii-lowercase-3">converted to ASCII lowercase</a>, and whose data is the same as the
      <code id="the-datatransferitemlist-interface:file-4"><a href="/breakup/specs/core-algorithms/#file">File</a></code>'s data.</p>

     </dd></dl>

   </li><li><p><a href="/breakup/specs/dnd/#dom-datatransferitemlist-item" id="the-datatransferitemlist-interface:dom-datatransferitemlist-item-2">Determine the value of the indexed
   property</a> corresponding to the newly added item, and return that value (a newly created
   <code id="the-datatransferitemlist-interface:datatransferitem-7"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object).</p></li></ol>

  <p>The <dfn id="dom-datatransferitemlist-remove"><code>remove()</code></dfn> method, when
  invoked with the argument <var>i</var>, must run these steps:</p>

  <ol><li><p>If the <code id="the-datatransferitemlist-interface:datatransferitemlist-14"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object is not in the <i id="the-datatransferitemlist-interface:concept-dnd-rw-2"><a href="/breakup/specs/dnd/#concept-dnd-rw">read/write mode</a></i>, throw an <code id="the-datatransferitemlist-interface:invalidstateerror"><a href="/breakup/specs/core-algorithms/#invalidstateerror">InvalidStateError</a></code> exception and
   abort these steps.</p></li><li><p>Remove the <var>i</var>th item from the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-11">drag data store</a>.</p></li></ol>

  <p>The <dfn id="dom-datatransferitemlist-clear"><code>clear</code></dfn> method, if the
  <code id="the-datatransferitemlist-interface:datatransferitemlist-15"><a href="/breakup/specs/dnd/#datatransferitemlist">DataTransferItemList</a></code> object is in the <i id="the-datatransferitemlist-interface:concept-dnd-rw-3"><a href="/breakup/specs/dnd/#concept-dnd-rw">read/write mode</a></i>,
  must remove all the items from the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitemlist-interface:drag-data-store-12">drag data store</a>. Otherwise, it must do
  nothing.</p></section>

  


  <section><h2>The <code id="the-datatransferitem-interface:datatransferitem"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> interface</h2>

  <p>Each <code id="the-datatransferitem-interface:datatransferitem-2"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object is associated with a <code id="the-datatransferitem-interface:datatransfer"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code>
  object.</p>

  <pre class="idl">interface <dfn id="datatransferitem">DataTransferItem</dfn> {
  readonly attribute DOMString <a href="/breakup/specs/dnd/#dom-datatransferitem-kind" id="the-datatransferitem-interface:dom-datatransferitem-kind">kind</a>;
  readonly attribute DOMString <a href="/breakup/specs/dnd/#dom-datatransferitem-type" id="the-datatransferitem-interface:dom-datatransferitem-type">type</a>;
  void <a href="/breakup/specs/dnd/#dom-datatransferitem-getasstring" id="the-datatransferitem-interface:dom-datatransferitem-getasstring">getAsString</a>(<a href="/breakup/specs/dnd/#functionstringcallback" id="the-datatransferitem-interface:functionstringcallback">FunctionStringCallback</a>? _callback);
  <a href="/breakup/specs/core-algorithms/#file" id="the-datatransferitem-interface:file">File</a>? <a href="/breakup/specs/dnd/#dom-datatransferitem-getasfile" id="the-datatransferitem-interface:dom-datatransferitem-getasfile">getAsFile</a>();
};

callback <dfn id="functionstringcallback">FunctionStringCallback</dfn> = void (DOMString data);</pre>

  <dl class="domintro"><dt><var>item</var> . <code id="the-datatransferitem-interface:dom-datatransferitem-kind-2"><a href="/breakup/specs/dnd/#dom-datatransferitem-kind">kind</a></code></dt><dd>

    <p>Returns <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransferitem-interface:the-drag-data-item-kind">the drag data item kind</a>, one of: "string",
     "file".</p>

   </dd><dt><var>item</var> . <code id="the-datatransferitem-interface:dom-datatransferitem-type-2"><a href="/breakup/specs/dnd/#dom-datatransferitem-type">type</a></code></dt><dd>

    <p>Returns <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransferitem-interface:the-drag-data-item-type-string">the drag data item type string</a>.</p>

   </dd><dt><var>item</var> . <code id="the-datatransferitem-interface:dom-datatransferitem-getasstring-2"><a href="/breakup/specs/dnd/#dom-datatransferitem-getasstring">getAsString</a></code>(<var>callback</var>)</dt><dd>

    <p>Invokes the callback with the string data as the argument, if <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransferitem-interface:the-drag-data-item-kind-2">the drag data item
    kind</a> is <i>Plain Unicode string</i>.</p>

   </dd><dt><var>file</var> = <var>item</var> . <code id="the-datatransferitem-interface:dom-datatransferitem-getasfile-2"><a href="/breakup/specs/dnd/#dom-datatransferitem-getasfile">getAsFile</a></code>()</dt><dd>

    <p>Returns a <code id="the-datatransferitem-interface:file-2"><a href="/breakup/specs/core-algorithms/#file">File</a></code> object, if <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransferitem-interface:the-drag-data-item-kind-3">the drag data item kind</a> is <i>File</i>.</p>

   </dd></dl>

  

  <p>While the <code id="the-datatransferitem-interface:datatransferitem-3"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object's <code id="the-datatransferitem-interface:datatransfer-2"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is associated
  with a <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitem-interface:drag-data-store">drag data store</a> and that <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitem-interface:drag-data-store-2">drag data store</a>'s <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransferitem-interface:drag-data-store-item-list">drag data store
  item list</a> still contains the item that the <code id="the-datatransferitem-interface:datatransferitem-4"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object represents,
  the <code id="the-datatransferitem-interface:datatransferitem-5"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object's <i>mode</i> is the same as the <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-datatransferitem-interface:drag-data-store-mode">drag data store
  mode</a>. When the <code id="the-datatransferitem-interface:datatransferitem-6"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object's <code id="the-datatransferitem-interface:datatransfer-3"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object is
  <em>not</em> associated with a <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitem-interface:drag-data-store-3">drag data store</a>, or if the item that the
  <code id="the-datatransferitem-interface:datatransferitem-7"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object represents has been removed from the relevant <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-datatransferitem-interface:drag-data-store-item-list-2">drag data
  store item list</a>, the <code id="the-datatransferitem-interface:datatransferitem-8"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object's <i>mode</i> is the <i>disabled
  mode</i>. The <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitem-interface:drag-data-store-4">drag data store</a> referenced in this section (which is used only when the
  <code id="the-datatransferitem-interface:datatransferitem-9"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object is not in the <i>disabled mode</i>) is the <a href="/breakup/specs/dnd/#drag-data-store" id="the-datatransferitem-interface:drag-data-store-5">drag data
  store</a> with which the <code id="the-datatransferitem-interface:datatransferitem-10"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object's <code id="the-datatransferitem-interface:datatransfer-4"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code>
  object is associated.</p>

  <p>The <dfn id="dom-datatransferitem-kind"><code>kind</code></dfn> attribute must return the
  empty string if the <code id="the-datatransferitem-interface:datatransferitem-11"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object is in the <i>disabled mode</i>; otherwise
  it must return the string given in the cell from the second column of the following table from the
  row whose cell in the first column contains <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransferitem-interface:the-drag-data-item-kind-4">the drag data item kind</a> of the item
  represented by the <code id="the-datatransferitem-interface:datatransferitem-12"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object:</p>

  <table><thead><tr><th> Kind </th><th> String
   </th></tr></thead><tbody><tr><td> <i>Plain Unicode string</i> </td><td> "<code>string</code>"

    </td></tr><tr><td> <i>File</i> </td><td> "<code>file</code>"

  </td></tr></tbody></table>

  <p>The <dfn id="dom-datatransferitem-type"><code>type</code></dfn> attribute must return the
  empty string if the <code id="the-datatransferitem-interface:datatransferitem-13"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object is in the <i>disabled mode</i>; otherwise
  it must return <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-datatransferitem-interface:the-drag-data-item-type-string-2">the drag data item type string</a> of the item represented by the
  <code id="the-datatransferitem-interface:datatransferitem-14"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object.</p>

  <p>The <dfn id="dom-datatransferitem-getasstring"><code>getAsString(<var>callback</var>)</code></dfn> method must run the following steps:</p>

  <ol><li><p>If the <var>callback</var> is null, abort these steps.</p></li><li><p>If the <code id="the-datatransferitem-interface:datatransferitem-15"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object is not in the <i id="the-datatransferitem-interface:concept-dnd-rw"><a href="/breakup/specs/dnd/#concept-dnd-rw">read/write mode</a></i> or the <i id="the-datatransferitem-interface:concept-dnd-ro"><a href="/breakup/specs/dnd/#concept-dnd-ro">read-only mode</a></i>,
   abort these steps. The callback is never invoked.</p></li><li><p>If <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransferitem-interface:the-drag-data-item-kind-5">the drag data item kind</a> is not <i>Plain Unicode string</i>, abort these
   steps. The callback is never invoked.</p></li><li><p>Otherwise, <a href="/breakup/specs/browser-dom/#queue-a-task" id="the-datatransferitem-interface:queue-a-task">queue a task</a> to invoke <var>callback</var>, passing the
   actual data of the item represented by the <code id="the-datatransferitem-interface:datatransferitem-16"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object as the
   argument.</p></li></ol>



  <p>The <dfn id="dom-datatransferitem-getasfile"><code>getAsFile()</code></dfn>
  method must run the following steps:</p>

  <ol><li><p>If the <code id="the-datatransferitem-interface:datatransferitem-17"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object is not in the <i id="the-datatransferitem-interface:concept-dnd-rw-2"><a href="/breakup/specs/dnd/#concept-dnd-rw">read/write mode</a></i> or the <i id="the-datatransferitem-interface:concept-dnd-ro-2"><a href="/breakup/specs/dnd/#concept-dnd-ro">read-only mode</a></i>,
   return null and abort these steps.</p></li><li><p>If <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-datatransferitem-interface:the-drag-data-item-kind-6">the drag data item kind</a> is not <i>File</i>, then return null and abort
   these steps.</p></li><li><p>Return a new <code id="the-datatransferitem-interface:file-3"><a href="/breakup/specs/core-algorithms/#file">File</a></code> object representing the actual data of the item represented
   by the <code id="the-datatransferitem-interface:datatransferitem-18"><a href="/breakup/specs/dnd/#datatransferitem">DataTransferItem</a></code> object.</p>

  </li></ol></section></section><section><h2>The <code id="the-dragevent-interface:dragevent"><a href="/breakup/specs/dnd/#dragevent">DragEvent</a></code> interface</h2>

  <p>The drag-and-drop processing model involves several events. They all use the
  <code id="the-dragevent-interface:dragevent-2"><a href="/breakup/specs/dnd/#dragevent">DragEvent</a></code> interface.</p>

  <pre class="idl">[Constructor(DOMString type, optional <a href="/breakup/specs/dnd/#drageventinit" id="the-dragevent-interface:drageventinit">DragEventInit</a> eventInitDict)]
interface <dfn id="dragevent">DragEvent</dfn> : <a href="/breakup/specs/core-algorithms/#mouseevent" id="the-dragevent-interface:mouseevent">MouseEvent</a> {
  readonly attribute <a href="/breakup/specs/dnd/#datatransfer" id="the-dragevent-interface:datatransfer">DataTransfer</a>? <a href="/breakup/specs/dnd/#dom-dragevent-datatransfer" id="the-dragevent-interface:dom-dragevent-datatransfer">dataTransfer</a>;
};

dictionary <dfn id="drageventinit">DragEventInit</dfn> : <a href="/breakup/specs/core-algorithms/#mouseeventinit" id="the-dragevent-interface:mouseeventinit">MouseEventInit</a> {
  <a href="/breakup/specs/dnd/#datatransfer" id="the-dragevent-interface:datatransfer-2">DataTransfer</a>? dataTransfer;
};</pre>

  <dl class="domintro"><dt><var>event</var> . <code id="the-dragevent-interface:dom-dragevent-datatransfer-2"><a href="/breakup/specs/dnd/#dom-dragevent-datatransfer">dataTransfer</a></code></dt><dd>

    <p>Returns the <code id="the-dragevent-interface:datatransfer-3"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object for the event.</p>

   </dd></dl>

  <p class="note">Although, for consistency with other event interfaces, the <code id="the-dragevent-interface:dragevent-3"><a href="/breakup/specs/dnd/#dragevent">DragEvent</a></code>
  interface has a constructor, it is not particularly useful. In particular, there's no way to
  create a useful <code id="the-dragevent-interface:datatransfer-4"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object from script, as <code id="the-dragevent-interface:datatransfer-5"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> objects
  have a processing and security model that is coordinated by the browser during drag-and-drops.</p>

  

  <p>The <dfn id="dom-dragevent-datatransfer"><code>dataTransfer</code></dfn> attribute of the
  <code id="the-dragevent-interface:dragevent-4"><a href="/breakup/specs/dnd/#dragevent">DragEvent</a></code> interface must return the value it was initialised to. When the object is
  created, this attribute must be initialised to null. It represents the context information for the
  event.</p>

  

  

  <p>When a user agent is required to <dfn id="fire-a-dnd-event">fire a DND event</dfn> named <var>e</var> at an element,
  using a particular <a href="/breakup/specs/dnd/#drag-data-store" id="the-dragevent-interface:drag-data-store">drag data store</a>, and optionally with a specific <var>related
  target</var>, the user agent must run the following steps:</p>

  <ol><li><p>If no specific <var>related target</var> was provided, set <var>related target</var> to
   null.</p></li><li><p>Let <var>window</var> be the <code id="the-dragevent-interface:window"><a href="/breakup/specs/browser-dom/#window">Window</a></code> object of the <code id="the-dragevent-interface:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code>
   object of the specified target element.</p></li><li>

    <p>If <var>e</var> is <code id="the-dragevent-interface:event-dnd-dragstart"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code>, set the <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-dragevent-interface:drag-data-store-mode">drag
    data store mode</a> to the <a href="/breakup/specs/dnd/#concept-dnd-rw" id="the-dragevent-interface:concept-dnd-rw">read/write mode</a>.</p>

    <p>If <var>e</var> is <code id="the-dragevent-interface:event-dnd-drop"><a href="/breakup/specs/dnd/#event-dnd-drop">drop</a></code>, set the <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-dragevent-interface:drag-data-store-mode-2">drag data store
    mode</a> to the <a href="/breakup/specs/dnd/#concept-dnd-ro" id="the-dragevent-interface:concept-dnd-ro">read-only mode</a>.</p>

   </li><li><p>Let <var>dataTransfer</var> be a newly created <code id="the-dragevent-interface:datatransfer-6"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object
   associated with the given <a href="/breakup/specs/dnd/#drag-data-store" id="the-dragevent-interface:drag-data-store-2">drag data store</a>.</p></li><li><p id="effectAllowed-initialisation">Set the <code id="the-dragevent-interface:dom-datatransfer-effectallowed"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed">effectAllowed</a></code> attribute to the <a href="/breakup/specs/dnd/#drag-data-store" id="the-dragevent-interface:drag-data-store-3">drag data
   store</a>'s <a href="/breakup/specs/dnd/#drag-data-store-allowed-effects-state" id="the-dragevent-interface:drag-data-store-allowed-effects-state">drag data store allowed effects state</a>.</p></li><li>

    <p id="dropEffect-initialisation">Set the <code id="the-dragevent-interface:dom-datatransfer-dropeffect"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect">dropEffect</a></code> attribute to "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-none"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-none">none</a></code>" if <var>e</var> is <code id="the-dragevent-interface:event-dnd-dragstart-2"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code>, <code id="the-dragevent-interface:event-dnd-drag"><a href="/breakup/specs/dnd/#event-dnd-drag">drag</a></code>, <code id="the-dragevent-interface:event-dnd-dragexit"><a href="/breakup/specs/dnd/#event-dnd-dragexit">dragexit</a></code>, or <code id="the-dragevent-interface:event-dnd-dragleave"><a href="/breakup/specs/dnd/#event-dnd-dragleave">dragleave</a></code>; to the value corresponding to the <a href="/breakup/specs/dnd/#current-drag-operation" id="the-dragevent-interface:current-drag-operation">current
    drag operation</a> if <var>e</var> is <code id="the-dragevent-interface:event-dnd-drop-2"><a href="/breakup/specs/dnd/#event-dnd-drop">drop</a></code> or
    <code id="the-dragevent-interface:event-dnd-dragend"><a href="/breakup/specs/dnd/#event-dnd-dragend">dragend</a></code>; and to a value based on the <code id="the-dragevent-interface:dom-datatransfer-effectallowed-2"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed">effectAllowed</a></code> attribute's value and the
    drag-and-drop source, as given by the following table, otherwise (i.e. if <var>e</var>
    is <code id="the-dragevent-interface:event-dnd-dragenter"><a href="/breakup/specs/dnd/#event-dnd-dragenter">dragenter</a></code> or <code id="the-dragevent-interface:event-dnd-dragover"><a href="/breakup/specs/dnd/#event-dnd-dragover">dragover</a></code>):</p>

    <table><thead><tr><th><code id="the-dragevent-interface:dom-datatransfer-effectallowed-3"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed">effectAllowed</a></code></th><th><code id="the-dragevent-interface:dom-datatransfer-dropeffect-2"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect">dropEffect</a></code></th></tr></thead><tbody><tr><td>"<code id="the-dragevent-interface:dom-datatransfer-effectallowed-none"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-none">none</a></code>"</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-none-2"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-none">none</a></code>"</td></tr><tr><td>"<code id="the-dragevent-interface:dom-datatransfer-effectallowed-copy"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-copy">copy</a></code>"</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-copy"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-copy">copy</a></code>"</td></tr><tr><td>"<code id="the-dragevent-interface:dom-datatransfer-effectallowed-copylink"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-copylink">copyLink</a></code>"</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-copy-2"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-copy">copy</a></code>", or, <a href="/breakup/specs/dnd/#concept-platform-dropeffect-override" id="the-dragevent-interface:concept-platform-dropeffect-override">if appropriate</a>, "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-link"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-link">link</a></code>"</td></tr><tr><td>"<code id="the-dragevent-interface:dom-datatransfer-effectallowed-copymove"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-copymove">copyMove</a></code>"</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-copy-3"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-copy">copy</a></code>", or, <a href="/breakup/specs/dnd/#concept-platform-dropeffect-override" id="the-dragevent-interface:concept-platform-dropeffect-override-2">if appropriate</a>, "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-move"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-move">move</a></code>"</td></tr><tr><td>"<code id="the-dragevent-interface:dom-datatransfer-effectallowed-all"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-all">all</a></code>"</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-copy-4"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-copy">copy</a></code>", or, <a href="/breakup/specs/dnd/#concept-platform-dropeffect-override" id="the-dragevent-interface:concept-platform-dropeffect-override-3">if appropriate</a>, either "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-link-2"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-link">link</a></code>" or "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-move-2"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-move">move</a></code>"</td></tr><tr><td>"<code id="the-dragevent-interface:dom-datatransfer-effectallowed-link"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-link">link</a></code>"</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-link-3"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-link">link</a></code>"</td></tr><tr><td>"<code id="the-dragevent-interface:dom-datatransfer-effectallowed-linkmove"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-linkmove">linkMove</a></code>"</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-link-4"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-link">link</a></code>", or, <a href="/breakup/specs/dnd/#concept-platform-dropeffect-override" id="the-dragevent-interface:concept-platform-dropeffect-override-4">if appropriate</a>, "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-move-3"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-move">move</a></code>"</td></tr><tr><td>"<code id="the-dragevent-interface:dom-datatransfer-effectallowed-move"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-move">move</a></code>"</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-move-4"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-move">move</a></code>"</td></tr><tr><td>"<code id="the-dragevent-interface:dom-datatransfer-effectallowed-uninitialized"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-uninitialized">uninitialized</a></code>" when what is being dragged is a selection from a text field</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-move-5"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-move">move</a></code>", or, <a href="/breakup/specs/dnd/#concept-platform-dropeffect-override" id="the-dragevent-interface:concept-platform-dropeffect-override-5">if appropriate</a>, either "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-copy-5"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-copy">copy</a></code>" or "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-link-5"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-link">link</a></code>"</td></tr><tr><td>"<code id="the-dragevent-interface:dom-datatransfer-effectallowed-uninitialized-2"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-uninitialized">uninitialized</a></code>" when what is being dragged is a selection</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-copy-6"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-copy">copy</a></code>", or, <a href="/breakup/specs/dnd/#concept-platform-dropeffect-override" id="the-dragevent-interface:concept-platform-dropeffect-override-6">if appropriate</a>, either "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-link-6"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-link">link</a></code>" or "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-move-6"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-move">move</a></code>"</td></tr><tr><td>"<code id="the-dragevent-interface:dom-datatransfer-effectallowed-uninitialized-3"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-uninitialized">uninitialized</a></code>" when what is being dragged is an <code id="the-dragevent-interface:the-a-element"><a href="/breakup/specs/html-linking/#the-a-element">a</a></code> element with an <code id="the-dragevent-interface:attr-hyperlink-href"><a href="/breakup/specs/html-linking/#attr-hyperlink-href">href</a></code> attribute</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-link-7"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-link">link</a></code>", or, <a href="/breakup/specs/dnd/#concept-platform-dropeffect-override" id="the-dragevent-interface:concept-platform-dropeffect-override-7">if appropriate</a>, either "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-copy-7"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-copy">copy</a></code>" or "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-move-7"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-move">move</a></code>"</td></tr><tr><td>Any other case</td><td>"<code id="the-dragevent-interface:dom-datatransfer-dropeffect-copy-8"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-copy">copy</a></code>", or, <a href="/breakup/specs/dnd/#concept-platform-dropeffect-override" id="the-dragevent-interface:concept-platform-dropeffect-override-8">if appropriate</a>, either "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-link-8"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-link">link</a></code>" or "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-move-8"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-move">move</a></code>"</td></tr></tbody></table>

    <p>Where the table above provides <dfn id="concept-platform-dropeffect-override">possibly
    appropriate alternatives</dfn>, user agents may instead use the listed alternative values if
    platform conventions dictate that the user has requested those alternate effects.</p>

    <p class="example">For example, Windows platform conventions are such that dragging while
    holding the "alt" key indicates a preference for linking the data, rather than moving or copying
    it. Therefore, on a Windows system, if "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-link-9"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-link">link</a></code>" is an option according to
    the table above while the "alt" key is depressed, the user agent could select that instead of
    "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-copy-9"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-copy">copy</a></code>" or "<code id="the-dragevent-interface:dom-datatransfer-dropeffect-move-9"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-move">move</a></code>".</p>

   </li><li>

    <p>Create a <a href="/breakup/specs/core-algorithms/#concept-events-trusted" id="the-dragevent-interface:concept-events-trusted">trusted</a> <code id="the-dragevent-interface:dragevent-5"><a href="/breakup/specs/dnd/#dragevent">DragEvent</a></code> object
    and initialise it to have the given name <var>e</var>, to bubble, to be cancelable unless
    <var>e</var> is <code id="the-dragevent-interface:event-dnd-dragexit-2"><a href="/breakup/specs/dnd/#event-dnd-dragexit">dragexit</a></code>, <code id="the-dragevent-interface:event-dnd-dragleave-2"><a href="/breakup/specs/dnd/#event-dnd-dragleave">dragleave</a></code>, or <code id="the-dragevent-interface:event-dnd-dragend-2"><a href="/breakup/specs/dnd/#event-dnd-dragend">dragend</a></code>, and to have the <code id="the-dragevent-interface:dom-uievent-view"><a href="/breakup/specs/core-algorithms/#dom-uievent-view">view</a></code> attribute initialised to <var>window</var>, the <code id="the-dragevent-interface:dom-uievent-detail"><a href="/breakup/specs/core-algorithms/#dom-uievent-detail">detail</a></code> attribute initialised to zero, the mouse and key
    attributes initialised according to the state of the input devices as they would be for user
    interaction events, the <code id="the-dragevent-interface:dom-mouseevent-relatedtarget"><a href="/breakup/specs/core-algorithms/#dom-mouseevent-relatedtarget">relatedTarget</a></code>
    attribute initialised to <var>related target</var>, and the <code id="the-dragevent-interface:dom-dragevent-datatransfer-3"><a href="/breakup/specs/dnd/#dom-dragevent-datatransfer">dataTransfer</a></code> attribute initialised to
    <var>dataTransfer</var>, the <code id="the-dragevent-interface:datatransfer-7"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object created above.</p>

    

    <p>If there is no relevant pointing device, the object must have its <code>screenX</code>, <code>screenY</code>, <code>clientX</code>, <code>clientY</code>, and <code>button</code> attributes set to 0.</p>

   </li><li><p><a href="/breakup/specs/core-algorithms/#concept-event-dispatch" id="the-dragevent-interface:concept-event-dispatch">Dispatch</a> the newly created
   <code id="the-dragevent-interface:dragevent-6"><a href="/breakup/specs/dnd/#dragevent">DragEvent</a></code> object at the specified target element.</p></li><li><p>Set the <a href="/breakup/specs/dnd/#drag-data-store-allowed-effects-state" id="the-dragevent-interface:drag-data-store-allowed-effects-state-2">drag data store allowed effects state</a> to the current value of
   <var>dataTransfer</var>'s <code id="the-dragevent-interface:dom-datatransfer-effectallowed-4"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed">effectAllowed</a></code>
   attribute. (It can only have changed value if <var>e</var> is <code id="the-dragevent-interface:event-dnd-dragstart-3"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code>.)</p></li><li><p>Set the <a href="/breakup/specs/dnd/#drag-data-store-mode" id="the-dragevent-interface:drag-data-store-mode-3">drag data store mode</a> back to the <a href="/breakup/specs/dnd/#concept-dnd-p" id="the-dragevent-interface:concept-dnd-p">protected mode</a> if it was changed in the first step.</p></li><li><p>Break the association between <var>dataTransfer</var> and the <a href="/breakup/specs/dnd/#drag-data-store" id="the-dragevent-interface:drag-data-store-4">drag data
   store</a>.</p></li></ol></section><section><h2>Drag-and-drop processing model</h2>

  <p>When the user attempts to begin a drag operation, the user agent must run the following steps.
  User agents must act as if these steps were run even if the drag actually started in another
  document or application and the user agent was not aware that the drag was occurring until it
  intersected with a document under the user agent's purview.</p>

  <ol><li>

    <p>Determine what is being dragged, as follows:</p>

    <p>If the drag operation was invoked on a selection, then it is the selection that is being
    dragged.</p>

    <p>Otherwise, if the drag operation was invoked on a <code id="drag-and-drop-processing-model:document"><a href="/breakup/specs/browser-dom/#document">Document</a></code>, it is the first
    element, going up the ancestor chain, starting at the node that the user tried to drag, that has
    the IDL attribute <code id="drag-and-drop-processing-model:dom-draggable"><a href="/breakup/specs/dnd/#dom-draggable">draggable</a></code> set to true. If there is no such
    element, then nothing is being dragged; abort these steps, the drag-and-drop operation is never
    started.</p>

    <p>Otherwise, the drag operation was invoked outside the user agent's purview. What is being
    dragged is defined by the document or application where the drag was started.</p>

    <p class="note"><code id="drag-and-drop-processing-model:the-img-element"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> elements and <code id="drag-and-drop-processing-model:the-a-element"><a href="/breakup/specs/html-linking/#the-a-element">a</a></code> elements with an <code id="drag-and-drop-processing-model:attr-hyperlink-href"><a href="/breakup/specs/html-linking/#attr-hyperlink-href">href</a></code> attribute have their <code id="drag-and-drop-processing-model:dom-draggable-2"><a href="/breakup/specs/dnd/#dom-draggable">draggable</a></code> attribute set to true by default.</p>

   </li><li><p><a href="/breakup/specs/dnd/#create-a-drag-data-store" id="drag-and-drop-processing-model:create-a-drag-data-store">Create a drag data store</a>. All the DND events fired subsequently by the steps
   in this section must use this <a href="/breakup/specs/dnd/#drag-data-store" id="drag-and-drop-processing-model:drag-data-store">drag data store</a>.</p></li><li>

    <p>Establish which DOM node is the <dfn id="source-node">source node</dfn>, as follows:</p>

    <p>If it is a selection that is being dragged, then the <a href="/breakup/specs/dnd/#source-node" id="drag-and-drop-processing-model:source-node">source node</a> is the
    <code id="drag-and-drop-processing-model:text"><a href="/breakup/specs/core-algorithms/#text">Text</a></code> node that the user started the drag on (typically the <code id="drag-and-drop-processing-model:text-2"><a href="/breakup/specs/core-algorithms/#text">Text</a></code> node
    that the user originally clicked). If the user did not specify a particular node, for example if
    the user just told the user agent to begin a drag of "the selection", then the <a href="/breakup/specs/dnd/#source-node" id="drag-and-drop-processing-model:source-node-2">source
    node</a> is the first <code id="drag-and-drop-processing-model:text-3"><a href="/breakup/specs/core-algorithms/#text">Text</a></code> node containing a part of the selection.</p>

    <p>Otherwise, if it is an element that is being dragged, then the <a href="/breakup/specs/dnd/#source-node" id="drag-and-drop-processing-model:source-node-3">source node</a> is
    the element that is being dragged.</p>

    <p>Otherwise, the <a href="/breakup/specs/dnd/#source-node" id="drag-and-drop-processing-model:source-node-4">source node</a> is part of another document or application. When this
    specification requires that an event be dispatched at the <a href="/breakup/specs/dnd/#source-node" id="drag-and-drop-processing-model:source-node-5">source node</a> in this case,
    the user agent must instead follow the platform-specific conventions relevant to that
    situation.</p>

    <p class="note">Multiple events are fired on the <a href="/breakup/specs/dnd/#source-node" id="drag-and-drop-processing-model:source-node-6">source node</a> during the course of
    the drag-and-drop operation.</p>

   </li><li>

    <p>Determine the <dfn id="list-of-dragged-nodes">list of dragged nodes</dfn>, as follows:</p>

    <p>If it is a selection that is being dragged, then the <a href="/breakup/specs/dnd/#list-of-dragged-nodes" id="drag-and-drop-processing-model:list-of-dragged-nodes">list of dragged nodes</a>
    contains, in <a href="/breakup/specs/core-algorithms/#tree-order" id="drag-and-drop-processing-model:tree-order">tree order</a>, every node that is partially or completely included in the
    selection (including all their ancestors).</p>

    <p>Otherwise, the <a href="/breakup/specs/dnd/#list-of-dragged-nodes" id="drag-and-drop-processing-model:list-of-dragged-nodes-2">list of dragged nodes</a> contains only the <a href="/breakup/specs/dnd/#source-node" id="drag-and-drop-processing-model:source-node-7">source node</a>,
    if any.</p>

   </li><li>

    <p>If it is a selection that is being dragged, then add an item to the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="drag-and-drop-processing-model:drag-data-store-item-list">drag data store
    item list</a>, with its properties set as follows:</p>

    <dl><dt><a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="drag-and-drop-processing-model:the-drag-data-item-type-string">The drag data item type string</a>
     </dt><dd>"<code id="drag-and-drop-processing-model:text/plain"><a data-x-internal="text/plain" href="http://tools.ietf.org/html/rfc2046#section-4.1.3">text/plain</a></code>"</dd><dt><a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="drag-and-drop-processing-model:the-drag-data-item-kind">The drag data item kind</a>
     </dt><dd><i>Plain Unicode string</i></dd><dt>The actual data</dt><dd>The text of the selection</dd></dl>

    <p>Otherwise, if any files are being dragged, then add one item per file to the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="drag-and-drop-processing-model:drag-data-store-item-list-2">drag data
    store item list</a>, with their properties set as follows:</p>

    <dl><dt><a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="drag-and-drop-processing-model:the-drag-data-item-type-string-2">The drag data item type string</a>
     </dt><dd>The MIME type of the file, if known, or "<code id="drag-and-drop-processing-model:application/octet-stream"><a data-x-internal="application/octet-stream" href="http://tools.ietf.org/html/rfc2046#section-4.5.1">application/octet-stream</a></code>" otherwise.</dd><dt><a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="drag-and-drop-processing-model:the-drag-data-item-kind-2">The drag data item kind</a>
     </dt><dd><i>File</i></dd><dt>The actual data</dt><dd>The file's contents and name.</dd></dl>

    <p class="note">Dragging files can currently only happen from outside a <a href="/breakup/specs/browser-dom/#browsing-context" id="drag-and-drop-processing-model:browsing-context">browsing
    context</a>, for example from a file system manager application.</p>

    <p>If the drag initiated outside of the application, the user agent must add items to the
    <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="drag-and-drop-processing-model:drag-data-store-item-list-3">drag data store item list</a> as appropriate for the data being dragged, honoring
    platform conventions where appropriate; however, if the platform conventions do not use <a href="/breakup/specs/core-algorithms/#mime-type" id="drag-and-drop-processing-model:mime-type">MIME types</a> to label dragged data, the user agent must make a
    best-effort attempt to map the types to MIME types, and, in any case, all the <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="drag-and-drop-processing-model:the-drag-data-item-type-string-3">drag data item type strings</a> must be <a href="/breakup/specs/core-algorithms/#converted-to-ascii-lowercase" id="drag-and-drop-processing-model:converted-to-ascii-lowercase">converted to ASCII
    lowercase</a>.</p>

    <p>User agents may also add one or more items representing the selection or dragged element(s)
    in other forms, e.g. as HTML.</p>

   </li><li>

    <p>If the <a href="/breakup/specs/dnd/#list-of-dragged-nodes" id="drag-and-drop-processing-model:list-of-dragged-nodes-3">list of dragged nodes</a> is not empty, then <a href="http://www.w3.org/TR/microdata/#extracting-json" id="drag-and-drop-processing-model:extracting-json">extract the microdata from those nodes into a JSON form</a>, and add one item to the
    <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="drag-and-drop-processing-model:drag-data-store-item-list-4">drag data store item list</a>, with its properties set as follows:</p>

    <dl><dt><a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="drag-and-drop-processing-model:the-drag-data-item-type-string-4">The drag data item type string</a>
     </dt><dd><code id="drag-and-drop-processing-model:application/microdata+json"><a href="#application/microdata+json">application/microdata+json</a></code></dd><dt><a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="drag-and-drop-processing-model:the-drag-data-item-kind-3">The drag data item kind</a>
     </dt><dd><i>Plain Unicode string</i></dd><dt>The actual data</dt><dd>The resulting JSON string.</dd></dl>

   </li><li>

    <p>Run the following substeps:</p>

    <ol><li><p>Let <var>urls</var> be an empty list of <a href="/breakup/specs/core-algorithms/#absolute-url" id="drag-and-drop-processing-model:absolute-url">absolute
     URLs</a>.</p></li><li>

      <p>For each <var>node</var> in the <a href="/breakup/specs/dnd/#list-of-dragged-nodes" id="drag-and-drop-processing-model:list-of-dragged-nodes-4">list of dragged nodes</a>:</p>

      <dl><dt>If the node is an <code id="drag-and-drop-processing-model:the-a-element-2"><a href="/breakup/specs/html-linking/#the-a-element">a</a></code> element with an <code id="drag-and-drop-processing-model:attr-hyperlink-href-2"><a href="/breakup/specs/html-linking/#attr-hyperlink-href">href</a></code> attribute</dt><dd>Add to <var>urls</var> the result of <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="drag-and-drop-processing-model:resolve-a-url">resolving</a> the element's <code id="drag-and-drop-processing-model:attr-hyperlink-href-3"><a href="/breakup/specs/html-linking/#attr-hyperlink-href">href</a></code> content
       attribute relative to the element.</dd><dt>If the node is an <code id="drag-and-drop-processing-model:the-img-element-2"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> element with a <code id="drag-and-drop-processing-model:attr-img-src"><a href="/breakup/specs/html-images/#attr-img-src">src</a></code>
       attribute</dt><dd>Add to <var>urls</var> the result of <a href="/breakup/specs/core-algorithms/#resolve-a-url" id="drag-and-drop-processing-model:resolve-a-url-2">resolving</a> the element's <code id="drag-and-drop-processing-model:attr-img-src-2"><a href="/breakup/specs/html-images/#attr-img-src">src</a></code> content attribute
       relative to the element.</dd></dl>

     </li><li><p>If <var>urls</var> is still empty, abort these substeps.</p></li><li><p>Let <var>url string</var> be the result of concatenating the strings in <var>urls</var>,
     in the order they were added, separated by a U+000D CARRIAGE RETURN U+000A LINE FEED character
     pair (CRLF).</p></li><li><p>Add one item to the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="drag-and-drop-processing-model:drag-data-store-item-list-5">drag data store item list</a>, with its properties set as
     follows:</p>

      <dl><dt><a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="drag-and-drop-processing-model:the-drag-data-item-type-string-5">The drag data item type string</a>
       </dt><dd><code id="drag-and-drop-processing-model:text/uri-list"><a href="#text/uri-list">text/uri-list</a></code></dd><dt><a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="drag-and-drop-processing-model:the-drag-data-item-kind-4">The drag data item kind</a>
       </dt><dd><i>Plain Unicode string</i></dd><dt>The actual data</dt><dd><var>url string</var></dd></dl>

     </li></ol>

   </li><li>

    <p>Update the <a href="/breakup/specs/dnd/#drag-data-store-default-feedback" id="drag-and-drop-processing-model:drag-data-store-default-feedback">drag data store default feedback</a> as appropriate for the user agent
    (if the user is dragging the selection, then the selection would likely be the basis for this
    feedback; if the user is dragging an element, then that element's rendering would be used; if
    the drag began outside the user agent, then the platform conventions for determining the drag
    feedback should be used).</p>

   </li><li>

    <p><a href="/breakup/specs/dnd/#fire-a-dnd-event" id="drag-and-drop-processing-model:fire-a-dnd-event">Fire a DND event</a> named <code id="drag-and-drop-processing-model:event-dnd-dragstart"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code> at the
    <a href="/breakup/specs/dnd/#source-node" id="drag-and-drop-processing-model:source-node-8">source node</a>.</p>

    <p>If the event is canceled, then the drag-and-drop operation should not occur; abort these
    steps.</p> 

    <p class="note">Since events with no event listeners registered are, almost by definition, never
    canceled, drag-and-drop is always available to the user if the author does not specifically
    prevent it.</p>

   </li><li>

    <p><a href="/breakup/specs/dnd/#initiate-the-drag-and-drop-operation" id="drag-and-drop-processing-model:initiate-the-drag-and-drop-operation">Initiate the drag-and-drop operation</a> in a manner consistent with platform
    conventions, and as described below.</p>

    <p id="base-dnd-feedback">The drag-and-drop feedback must be generated from the first of the
    following sources that is available:</p>

    <ol><li>The <a href="/breakup/specs/dnd/#drag-data-store-bitmap" id="drag-and-drop-processing-model:drag-data-store-bitmap">drag data store bitmap</a>, if any. In this case, the <a href="/breakup/specs/dnd/#drag-data-store-hot-spot-coordinate" id="drag-and-drop-processing-model:drag-data-store-hot-spot-coordinate">drag data store
     hot spot coordinate</a> should be used as hints for where to put the cursor relative to the
     resulting image. The values are expressed as distances in CSS pixels from the left side and
     from the top side of the image respectively. [[!CSS]]</li><li>The <a href="/breakup/specs/dnd/#drag-data-store-default-feedback" id="drag-and-drop-processing-model:drag-data-store-default-feedback-2">drag data store default feedback</a>.</li></ol>

   </li></ol>

  <p>From the moment that the user agent is to <dfn id="initiate-the-drag-and-drop-operation">initiate the drag-and-drop operation</dfn>,
  until the end of the drag-and-drop operation, device input events (e.g. mouse and keyboard events)
  must be suppressed.</p>

  <p>During the drag operation, the element directly indicated by the user as the drop target is
  called the <dfn id="immediate-user-selection">immediate user selection</dfn>. (Only elements can be selected by the user; other
  nodes must not be made available as drop targets.) However, the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection">immediate user
  selection</a> is not necessarily the <dfn id="current-target-element">current target element</dfn>, which is the element
  currently selected for the drop part of the drag-and-drop operation.</p>

  <p>The <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-2">immediate user selection</a> changes as the user selects different elements
  (either by pointing at them with a pointing device, or by selecting them in some other way). The
  <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element">current target element</a> changes when the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-3">immediate user selection</a>
  changes, based on the results of event listeners in the document, as described below.</p>

  <p>Both the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-2">current target element</a> and the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-4">immediate user selection</a> can
  be null, which means no target element is selected. They can also both be elements in other
  (DOM-based) documents, or other (non-Web) programs altogether. (For example, a user could drag
  text to a word-processor.) The <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-3">current target element</a> is initially null.</p>

  <p>In addition, there is also a <dfn id="current-drag-operation">current drag operation</dfn>, which can take on the values
  "<dfn id="concept-current-drag-operation-none"><code>none</code></dfn>", "<dfn id="concept-current-drag-operation-copy"><code>copy</code></dfn>", "<dfn id="concept-current-drag-operation-link"><code>link</code></dfn>", and "<dfn id="concept-current-drag-operation-move"><code>move</code></dfn>". Initially, it has the value
  "<code id="drag-and-drop-processing-model:concept-current-drag-operation-none"><a href="/breakup/specs/dnd/#concept-current-drag-operation-none">none</a></code>". It is updated by the user agent
  as described in the steps below.</p>

  <p>User agents must, as soon as the drag operation is <a href="/breakup/specs/dnd/#initiate-the-drag-and-drop-operation" id="drag-and-drop-processing-model:initiate-the-drag-and-drop-operation-2">initiated</a> and every 350ms (200ms) thereafter for as long as the drag
  operation is ongoing, <a href="/breakup/specs/browser-dom/#queue-a-task" id="drag-and-drop-processing-model:queue-a-task">queue a task</a> to perform the following steps in sequence:</p>

  <ol><li>

    <p>If the user agent is still performing the previous iteration of the sequence (if any) when
    the next iteration becomes due, abort these steps for this iteration (effectively "skipping
    missed frames" of the drag-and-drop operation).</p>

   </li><li>

    <p><a href="/breakup/specs/dnd/#fire-a-dnd-event" id="drag-and-drop-processing-model:fire-a-dnd-event-2">Fire a DND event</a> named <code id="drag-and-drop-processing-model:event-dnd-drag"><a href="/breakup/specs/dnd/#event-dnd-drag">drag</a></code> at the
    <a href="/breakup/specs/dnd/#source-node" id="drag-and-drop-processing-model:source-node-9">source node</a>. If this event is canceled, the user agent must set the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation">current
    drag operation</a> to "<code id="drag-and-drop-processing-model:concept-current-drag-operation-none-2"><a href="/breakup/specs/dnd/#concept-current-drag-operation-none">none</a></code>" (no
    drag operation).</p>

   </li><li>

    <p>If the <code id="drag-and-drop-processing-model:event-dnd-drag-2"><a href="/breakup/specs/dnd/#event-dnd-drag">drag</a></code> event was not canceled and the user has not
    ended the drag-and-drop operation, check the state of the drag-and-drop operation, as
    follows:</p>

    <ol><li>

      <p>If the user is indicating a different <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-5">immediate user selection</a> than during the
      last iteration (or if this is the first iteration), and if this <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-6">immediate user
      selection</a> is not the same as the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-4">current target element</a>, then <a href="/breakup/specs/dnd/#fire-a-dnd-event" id="drag-and-drop-processing-model:fire-a-dnd-event-3">fire a
      DND event</a> named <code id="drag-and-drop-processing-model:event-dnd-dragexit"><a href="/breakup/specs/dnd/#event-dnd-dragexit">dragexit</a></code> at the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-5">current
      target element</a>, and then update the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-6">current target element</a> as follows:</p>

      <dl class="switch"><dt>If the new <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-7">immediate user selection</a> is null</dt><dd><p>Set the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-7">current target element</a> to null also.</p></dd><dt>If the new <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-8">immediate user selection</a> is in a non-DOM document or
       application</dt><dd><p>Set the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-8">current target element</a> to the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-9">immediate user
       selection</a>.</p></dd><dt>Otherwise</dt><dd>

        <p><a href="/breakup/specs/dnd/#fire-a-dnd-event" id="drag-and-drop-processing-model:fire-a-dnd-event-4">Fire a DND event</a> named <code id="drag-and-drop-processing-model:event-dnd-dragenter"><a href="/breakup/specs/dnd/#event-dnd-dragenter">dragenter</a></code>
        at the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-10">immediate user selection</a>.</p>

        <p>If the event is canceled, then set the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-9">current target element</a> to the
        <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-11">immediate user selection</a>.</p>

        <p>Otherwise, run the appropriate step from the following list:</p>

        <dl class="switch"><dt>If the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-12">immediate user selection</a> is a text field (e.g.
         <code id="drag-and-drop-processing-model:the-textarea-element"><a href="/breakup/specs/html-forms/#the-textarea-element">textarea</a></code>, or an <code id="drag-and-drop-processing-model:the-input-element"><a href="/breakup/specs/html-forms/#the-input-element">input</a></code> element whose <code id="drag-and-drop-processing-model:attr-input-type"><a href="/breakup/specs/html-forms/#attr-input-type">type</a></code> attribute is in the <a href="/breakup/specs/html-forms/#text-(type=text)-state-and-search-state-(type=search)" id="drag-and-drop-processing-model:text-(type=text)-state-and-search-state-(type=search)">Text</a> state) or an <a href="/breakup/specs/html-editing/#editing-host" id="drag-and-drop-processing-model:editing-host">editing host</a> or
         <a href="/breakup/specs/html-editing/#editable" id="drag-and-drop-processing-model:editable">editable</a> element, and the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="drag-and-drop-processing-model:drag-data-store-item-list-6">drag data store item list</a> has an item
         with <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="drag-and-drop-processing-model:the-drag-data-item-type-string-6">the drag data item type string</a> "<code id="drag-and-drop-processing-model:text/plain-2"><a data-x-internal="text/plain" href="http://tools.ietf.org/html/rfc2046#section-4.1.3">text/plain</a></code>" and <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="drag-and-drop-processing-model:the-drag-data-item-kind-5">the
         drag data item kind</a> <i>Plain Unicode string</i></dt><dd><p>Set the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-10">current target element</a> to the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-13">immediate user
         selection</a> anyway.</p></dd><dt>If the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-14">immediate user selection</a> is an element with a <code id="drag-and-drop-processing-model:the-dropzone-attribute"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute that <a href="/breakup/specs/dnd/#concept-dropzone-match" id="drag-and-drop-processing-model:concept-dropzone-match">matches</a> the <a href="/breakup/specs/dnd/#drag-data-store" id="drag-and-drop-processing-model:drag-data-store-2">drag data store</a></dt><dd><p>Set the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-11">current target element</a> to the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-15">immediate user
         selection</a> anyway.</p></dd><dt>If the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-16">immediate user selection</a> is an element that itself has an ancestor
         element with a <code id="drag-and-drop-processing-model:the-dropzone-attribute-2"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute that <a href="/breakup/specs/dnd/#concept-dropzone-match" id="drag-and-drop-processing-model:concept-dropzone-match-2">matches</a> the <a href="/breakup/specs/dnd/#drag-data-store" id="drag-and-drop-processing-model:drag-data-store-3">drag data store</a></dt><dd>

          <p>Let <var>new target</var> be the nearest (deepest) such ancestor element.</p>

          <p>If the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-17">immediate user selection</a> is <var>new target</var>, then leave the
          <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-12">current target element</a> unchanged.</p>

          <p>Otherwise, <a href="/breakup/specs/dnd/#fire-a-dnd-event" id="drag-and-drop-processing-model:fire-a-dnd-event-5">fire a DND event</a> named <code id="drag-and-drop-processing-model:event-dnd-dragenter-2"><a href="/breakup/specs/dnd/#event-dnd-dragenter">dragenter</a></code> at <var>new target</var>, with the current
          <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-13">current target element</a> as the specific <var>related target</var>. Then, set
          the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-14">current target element</a> to <var>new target</var>, regardless of whether
          that event was canceled or not.</p>

         </dd><dt>If the <a href="/breakup/specs/dnd/#immediate-user-selection" id="drag-and-drop-processing-model:immediate-user-selection-18">immediate user selection</a> is <a href="/breakup/specs/browser-dom/#the-body-element-2" id="drag-and-drop-processing-model:the-body-element-2">the body element</a></dt><dd><p>Leave the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-15">current target element</a> unchanged.</p></dd><dt>Otherwise</dt><dd>

          <p><a href="/breakup/specs/dnd/#fire-a-dnd-event" id="drag-and-drop-processing-model:fire-a-dnd-event-6">Fire a DND event</a> named <code id="drag-and-drop-processing-model:event-dnd-dragenter-3"><a href="/breakup/specs/dnd/#event-dnd-dragenter">dragenter</a></code>
          at <a href="/breakup/specs/browser-dom/#the-body-element-2" id="drag-and-drop-processing-model:the-body-element-2-2">the body element</a>, if there is one, or at the <code id="drag-and-drop-processing-model:document-2"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object,
          if not. Then, set the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-16">current target element</a> to <a href="/breakup/specs/browser-dom/#the-body-element-2" id="drag-and-drop-processing-model:the-body-element-2-3">the body
          element</a>, regardless of whether that event was canceled or not.</p>

         </dd></dl>

       </dd></dl>

     </li><li>

      <p>If the previous step caused the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-17">current target element</a> to change, and if the
      previous target element was not null or a part of a non-DOM document, then <a href="/breakup/specs/dnd/#fire-a-dnd-event" id="drag-and-drop-processing-model:fire-a-dnd-event-7">fire a DND
      event</a> named <code id="drag-and-drop-processing-model:event-dnd-dragleave"><a href="/breakup/specs/dnd/#event-dnd-dragleave">dragleave</a></code> at the previous target
      element, with the new <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-18">current target element</a> as the specific <var>related
      target</var>.</p>

     </li><li>

      <p>If the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-19">current target element</a> is a DOM element, then <a href="/breakup/specs/dnd/#fire-a-dnd-event" id="drag-and-drop-processing-model:fire-a-dnd-event-8">fire a DND
      event</a> named <code id="drag-and-drop-processing-model:event-dnd-dragover"><a href="/breakup/specs/dnd/#event-dnd-dragover">dragover</a></code> at this <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-20">current
      target element</a>.</p>

      <p>If the <code id="drag-and-drop-processing-model:event-dnd-dragover-2"><a href="/breakup/specs/dnd/#event-dnd-dragover">dragover</a></code> event is not canceled, run the
      appropriate step from the following list:</p>

      <dl class="switch"><dt>If the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-21">current target element</a> is a text field (e.g. <code id="drag-and-drop-processing-model:the-textarea-element-2"><a href="/breakup/specs/html-forms/#the-textarea-element">textarea</a></code>,
       or an <code id="drag-and-drop-processing-model:the-input-element-2"><a href="/breakup/specs/html-forms/#the-input-element">input</a></code> element whose <code id="drag-and-drop-processing-model:attr-input-type-2"><a href="/breakup/specs/html-forms/#attr-input-type">type</a></code> attribute
       is in the <a href="/breakup/specs/html-forms/#text-(type=text)-state-and-search-state-(type=search)" id="drag-and-drop-processing-model:text-(type=text)-state-and-search-state-(type=search)-2">Text</a> state) or an <a href="/breakup/specs/html-editing/#editing-host" id="drag-and-drop-processing-model:editing-host-2">editing
       host</a> or <a href="/breakup/specs/html-editing/#editable" id="drag-and-drop-processing-model:editable-2">editable</a> element, and the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="drag-and-drop-processing-model:drag-data-store-item-list-7">drag data store item list</a>
       has an item with <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="drag-and-drop-processing-model:the-drag-data-item-type-string-7">the drag data item type string</a> "<code id="drag-and-drop-processing-model:text/plain-3"><a data-x-internal="text/plain" href="http://tools.ietf.org/html/rfc2046#section-4.1.3">text/plain</a></code>" and
       <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="drag-and-drop-processing-model:the-drag-data-item-kind-6">the drag data item kind</a> <i>Plain Unicode string</i></dt><dd><p>Set the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-2">current drag operation</a> to either "<code id="drag-and-drop-processing-model:concept-current-drag-operation-copy"><a href="/breakup/specs/dnd/#concept-current-drag-operation-copy">copy</a></code>" or "<code id="drag-and-drop-processing-model:concept-current-drag-operation-move"><a href="/breakup/specs/dnd/#concept-current-drag-operation-move">move</a></code>", as appropriate given the platform
       conventions.</p></dd><dt>If the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-22">current target element</a> is an element with a <code id="drag-and-drop-processing-model:the-dropzone-attribute-3"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute that <a href="/breakup/specs/dnd/#concept-dropzone-match" id="drag-and-drop-processing-model:concept-dropzone-match-3">matches</a> the <a href="/breakup/specs/dnd/#drag-data-store" id="drag-and-drop-processing-model:drag-data-store-4">drag data store</a> and <a href="/breakup/specs/dnd/#concept-dropzone-operation" id="drag-and-drop-processing-model:concept-dropzone-operation">specifies an operation</a></dt><dd><p>Set the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-3">current drag operation</a> to the operation <a href="/breakup/specs/dnd/#concept-dropzone-operation" id="drag-and-drop-processing-model:concept-dropzone-operation-2">specified</a> by the <code id="drag-and-drop-processing-model:the-dropzone-attribute-4"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute of the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-23">current target
       element</a>.</p>


       </dd><dt>If the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-24">current target element</a> is an element with a <code id="drag-and-drop-processing-model:the-dropzone-attribute-5"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute that <a href="/breakup/specs/dnd/#concept-dropzone-match" id="drag-and-drop-processing-model:concept-dropzone-match-4">matches</a> the <a href="/breakup/specs/dnd/#drag-data-store" id="drag-and-drop-processing-model:drag-data-store-5">drag data store</a> and does not
       <a href="/breakup/specs/dnd/#concept-dropzone-operation" id="drag-and-drop-processing-model:concept-dropzone-operation-3">specify an operation</a></dt><dd><p>Set the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-4">current drag operation</a> to "<code id="drag-and-drop-processing-model:concept-current-drag-operation-copy-2"><a href="/breakup/specs/dnd/#concept-current-drag-operation-copy">copy</a></code>".</p>


       </dd><dt>Otherwise</dt><dd><p>Reset the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-5">current drag operation</a> to "<code id="drag-and-drop-processing-model:concept-current-drag-operation-none-3"><a href="/breakup/specs/dnd/#concept-current-drag-operation-none">none</a></code>".</p></dd></dl>

      <p>Otherwise (if the <code id="drag-and-drop-processing-model:event-dnd-dragover-3"><a href="/breakup/specs/dnd/#event-dnd-dragover">dragover</a></code> event <em>is</em>
      canceled), set the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-6">current drag operation</a> based on the values of the <code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed">effectAllowed</a></code> and <code id="drag-and-drop-processing-model:dom-datatransfer-dropeffect"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect">dropEffect</a></code> attributes of the
      <code id="drag-and-drop-processing-model:dragevent"><a href="/breakup/specs/dnd/#dragevent">DragEvent</a></code> object's <code id="drag-and-drop-processing-model:dom-dragevent-datatransfer"><a href="/breakup/specs/dnd/#dom-dragevent-datatransfer">dataTransfer</a></code>
      object as they stood after the event <a href="/breakup/specs/core-algorithms/#concept-event-dispatch" id="drag-and-drop-processing-model:concept-event-dispatch">dispatch</a>
      finished, as per the following table:</p>

      <table><thead><tr><th><code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-2"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed">effectAllowed</a></code></th><th><code id="drag-and-drop-processing-model:dom-datatransfer-dropeffect-2"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect">dropEffect</a></code></th><th>Drag operation</th></tr></thead><tbody><tr><td>"<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-uninitialized"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-uninitialized">uninitialized</a></code>", "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-copy"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-copy">copy</a></code>", "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-copylink"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-copylink">copyLink</a></code>", "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-copymove"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-copymove">copyMove</a></code>", or "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-all"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-all">all</a></code>"</td><td>"<code id="drag-and-drop-processing-model:dom-datatransfer-dropeffect-copy"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-copy">copy</a></code>"</td><td>"<code id="drag-and-drop-processing-model:concept-current-drag-operation-copy-3"><a href="/breakup/specs/dnd/#concept-current-drag-operation-copy">copy</a></code>"</td></tr><tr><td>"<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-uninitialized-2"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-uninitialized">uninitialized</a></code>", "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-link"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-link">link</a></code>", "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-copylink-2"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-copylink">copyLink</a></code>", "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-linkmove"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-linkmove">linkMove</a></code>", or "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-all-2"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-all">all</a></code>"</td><td>"<code id="drag-and-drop-processing-model:dom-datatransfer-dropeffect-link"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-link">link</a></code>"</td><td>"<code id="drag-and-drop-processing-model:concept-current-drag-operation-link"><a href="/breakup/specs/dnd/#concept-current-drag-operation-link">link</a></code>"</td></tr><tr><td>"<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-uninitialized-3"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-uninitialized">uninitialized</a></code>", "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-move"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-move">move</a></code>", "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-copymove-2"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-copymove">copyMove</a></code>", "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-linkmove-2"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-linkmove">linkMove</a></code>", or "<code id="drag-and-drop-processing-model:dom-datatransfer-effectallowed-all-3"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-all">all</a></code>"</td><td>"<code id="drag-and-drop-processing-model:dom-datatransfer-dropeffect-move"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-move">move</a></code>"</td><td>"<code id="drag-and-drop-processing-model:concept-current-drag-operation-move-2"><a href="/breakup/specs/dnd/#concept-current-drag-operation-move">move</a></code>"</td></tr><tr><td colspan="2">Any other case</td><td>"<code id="drag-and-drop-processing-model:concept-current-drag-operation-none-4"><a href="/breakup/specs/dnd/#concept-current-drag-operation-none">none</a></code>"</td></tr></tbody></table>

     </li><li>

      <p>Otherwise, if the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-25">current target element</a> is not a DOM element, use
      platform-specific mechanisms to determine what drag operation is being performed (none, copy,
      link, or move), and set the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-7">current drag operation</a> accordingly.</p>

     </li><li>

      <p>Update the drag feedback (e.g. the mouse cursor) to match the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-8">current drag
      operation</a>, as follows:</p>

      <table><thead><tr><th>Drag operation</th><th>Feedback</th></tr></thead><tbody><tr><td>"<code id="drag-and-drop-processing-model:concept-current-drag-operation-copy-4"><a href="/breakup/specs/dnd/#concept-current-drag-operation-copy">copy</a></code>"</td><td>Data will be copied if dropped here.</td></tr><tr><td>"<code id="drag-and-drop-processing-model:concept-current-drag-operation-link-2"><a href="/breakup/specs/dnd/#concept-current-drag-operation-link">link</a></code>"</td><td>Data will be linked if dropped here.</td></tr><tr><td>"<code id="drag-and-drop-processing-model:concept-current-drag-operation-move-3"><a href="/breakup/specs/dnd/#concept-current-drag-operation-move">move</a></code>"</td><td>Data will be moved if dropped here.</td></tr><tr><td>"<code id="drag-and-drop-processing-model:concept-current-drag-operation-none-5"><a href="/breakup/specs/dnd/#concept-current-drag-operation-none">none</a></code>"</td><td>No operation allowed, dropping here will cancel the drag-and-drop operation.</td></tr></tbody></table>

     </li></ol>

   </li><li>

    <p>Otherwise, if the user ended the drag-and-drop operation (e.g. by releasing the mouse button
    in a mouse-driven drag-and-drop interface), or if the <code id="drag-and-drop-processing-model:event-dnd-drag-3"><a href="/breakup/specs/dnd/#event-dnd-drag">drag</a></code>
    event was canceled, then this will be the last iteration. Run the following steps, then stop the
    drag-and-drop operation:</p>

    <ol><li>

      <p>If the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-9">current drag operation</a> is "<code id="drag-and-drop-processing-model:concept-current-drag-operation-none-6"><a href="/breakup/specs/dnd/#concept-current-drag-operation-none">none</a></code>" (no drag operation), or, if the user
      ended the drag-and-drop operation by canceling it (e.g. by hitting the <kbd>Escape</kbd> key),
      or if the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-26">current target element</a> is null, then the drag operation failed. Run
      these substeps:</p>

      <ol><li><p>Let <var>dropped</var> be false.</p></li><li><p>If the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-27">current target element</a> is a DOM element, <a href="/breakup/specs/dnd/#fire-a-dnd-event" id="drag-and-drop-processing-model:fire-a-dnd-event-9">fire a DND
       event</a> named <code id="drag-and-drop-processing-model:event-dnd-dragleave-2"><a href="/breakup/specs/dnd/#event-dnd-dragleave">dragleave</a></code> at it; otherwise, if
       it is not null, use platform-specific conventions for drag cancellation.</p></li><li><p>Set the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-10">current drag operation</a> to "<code id="drag-and-drop-processing-model:concept-current-drag-operation-none-7"><a href="/breakup/specs/dnd/#concept-current-drag-operation-none">none</a></code>".</p></li></ol>

      <p>Otherwise, the drag operation might be a success; run these substeps:</p>

      <ol><li><p>Let <var>dropped</var> be true.</p></li><li><p>If the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-28">current target element</a> is a DOM element, <a href="/breakup/specs/dnd/#fire-a-dnd-event" id="drag-and-drop-processing-model:fire-a-dnd-event-10">fire a DND
       event</a> named <code id="drag-and-drop-processing-model:event-dnd-drop"><a href="/breakup/specs/dnd/#event-dnd-drop">drop</a></code> at it; otherwise, use
       platform-specific conventions for indicating a drop.</p></li><li>

        <p>If the event is canceled, set the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-11">current drag operation</a> to the value of the
        <code id="drag-and-drop-processing-model:dom-datatransfer-dropeffect-3"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect">dropEffect</a></code> attribute of the
        <code id="drag-and-drop-processing-model:dragevent-2"><a href="/breakup/specs/dnd/#dragevent">DragEvent</a></code> object's <code id="drag-and-drop-processing-model:dom-dragevent-datatransfer-2"><a href="/breakup/specs/dnd/#dom-dragevent-datatransfer">dataTransfer</a></code>
        object as it stood after the event <a href="/breakup/specs/core-algorithms/#concept-event-dispatch" id="drag-and-drop-processing-model:concept-event-dispatch-2">dispatch</a>
        finished.</p>

        <p>Otherwise, the event is not canceled; perform the event's default action, which depends
        on the exact target as follows:</p>

        <dl class="switch"><dt>If the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-29">current target element</a> is a text field (e.g. <code id="drag-and-drop-processing-model:the-textarea-element-3"><a href="/breakup/specs/html-forms/#the-textarea-element">textarea</a></code>,
         or an <code id="drag-and-drop-processing-model:the-input-element-3"><a href="/breakup/specs/html-forms/#the-input-element">input</a></code> element whose <code id="drag-and-drop-processing-model:attr-input-type-3"><a href="/breakup/specs/html-forms/#attr-input-type">type</a></code> attribute
         is in the <a href="/breakup/specs/html-forms/#text-(type=text)-state-and-search-state-(type=search)" id="drag-and-drop-processing-model:text-(type=text)-state-and-search-state-(type=search)-3">Text</a> state) or an <a href="/breakup/specs/html-editing/#editing-host" id="drag-and-drop-processing-model:editing-host-3">editing
         host</a> or <a href="/breakup/specs/html-editing/#editable" id="drag-and-drop-processing-model:editable-3">editable</a> element, and the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="drag-and-drop-processing-model:drag-data-store-item-list-8">drag data store item
         list</a> has an item with <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="drag-and-drop-processing-model:the-drag-data-item-type-string-8">the drag data item type string</a>
         "<code id="drag-and-drop-processing-model:text/plain-4"><a data-x-internal="text/plain" href="http://tools.ietf.org/html/rfc2046#section-4.1.3">text/plain</a></code>" and <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="drag-and-drop-processing-model:the-drag-data-item-kind-7">the drag data item kind</a> <i>Plain Unicode
         string</i></dt><dd><p>Insert the actual data of the first item in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="drag-and-drop-processing-model:drag-data-store-item-list-9">drag data store item
         list</a> to have <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="drag-and-drop-processing-model:the-drag-data-item-type-string-9">a drag data item type
         string</a> of "<code id="drag-and-drop-processing-model:text/plain-5"><a data-x-internal="text/plain" href="http://tools.ietf.org/html/rfc2046#section-4.1.3">text/plain</a></code>" and <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="drag-and-drop-processing-model:the-drag-data-item-kind-8">a drag
         data item kind</a> that is <i>Plain Unicode string</i> into the text field or
         <a href="/breakup/specs/html-editing/#editing-host" id="drag-and-drop-processing-model:editing-host-4">editing host</a> or <a href="/breakup/specs/html-editing/#editable" id="drag-and-drop-processing-model:editable-4">editable</a> element in a manner consistent with
         platform-specific conventions (e.g. inserting it at the current mouse cursor position, or
         inserting it at the end of the field).</p></dd><dt>Otherwise</dt><dd><p>Reset the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-12">current drag operation</a> to "<code id="drag-and-drop-processing-model:concept-current-drag-operation-none-8"><a href="/breakup/specs/dnd/#concept-current-drag-operation-none">none</a></code>".</p></dd></dl>

       </li></ol>

     </li><li>

      <p><a href="/breakup/specs/dnd/#fire-a-dnd-event" id="drag-and-drop-processing-model:fire-a-dnd-event-11">Fire a DND event</a> named <code id="drag-and-drop-processing-model:event-dnd-dragend"><a href="/breakup/specs/dnd/#event-dnd-dragend">dragend</a></code> at the
      <a href="/breakup/specs/dnd/#source-node" id="drag-and-drop-processing-model:source-node-10">source node</a>.</p>

     </li><li>

      <p>Run the appropriate steps from the following list as the default action of the <code id="drag-and-drop-processing-model:event-dnd-dragend-2"><a href="/breakup/specs/dnd/#event-dnd-dragend">dragend</a></code> event:</p>

      <dl class="switch"><dt>If <var>dropped</var> is true, the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-30">current target element</a> is a <i>text
       field</i> (see below), the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-13">current drag operation</a> is "<code id="drag-and-drop-processing-model:concept-current-drag-operation-move-4"><a href="/breakup/specs/dnd/#concept-current-drag-operation-move">move</a></code>", and the source of the
       drag-and-drop operation is a selection in the DOM that is entirely contained within an
       <a href="/breakup/specs/html-editing/#editing-host" id="drag-and-drop-processing-model:editing-host-5">editing host</a></dt><dd><p><a href="/breakup/specs/html-editing/#delete-the-selection" id="drag-and-drop-processing-model:delete-the-selection">Delete the selection</a>.</p></dd><dt>If <var>dropped</var> is true, the <a href="/breakup/specs/dnd/#current-target-element" id="drag-and-drop-processing-model:current-target-element-31">current target element</a> is a <i>text
       field</i> (see below), the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-14">current drag operation</a> is "<code id="drag-and-drop-processing-model:concept-current-drag-operation-move-5"><a href="/breakup/specs/dnd/#concept-current-drag-operation-move">move</a></code>", and the source of the
       drag-and-drop operation is a selection in a text field</dt><dd><p>The user agent should delete the dragged selection from the relevant text
       field.</p></dd><dt>If <var>dropped</var> is false or if the <a href="/breakup/specs/dnd/#current-drag-operation" id="drag-and-drop-processing-model:current-drag-operation-15">current drag operation</a> is "<code id="drag-and-drop-processing-model:concept-current-drag-operation-none-9"><a href="/breakup/specs/dnd/#concept-current-drag-operation-none">none</a></code>"</dt><dd><p>The drag was canceled. If the platform conventions dictate that this be represented to
       the user (e.g. by animating the dragged selection going back to the source of the
       drag-and-drop operation), then do so.</p></dd><dt>Otherwise</dt><dd><p>The event has no default action.</p></dd></dl>

      <p>For the purposes of this step, a <i>text field</i> is a <code id="drag-and-drop-processing-model:the-textarea-element-4"><a href="/breakup/specs/html-forms/#the-textarea-element">textarea</a></code> element or an
      <code id="drag-and-drop-processing-model:the-input-element-4"><a href="/breakup/specs/html-forms/#the-input-element">input</a></code> element whose <code id="drag-and-drop-processing-model:attr-input-type-4"><a href="/breakup/specs/html-forms/#attr-input-type">type</a></code> attribute is in
      one of the
      <a href="/breakup/specs/html-forms/#text-(type=text)-state-and-search-state-(type=search)" id="drag-and-drop-processing-model:text-(type=text)-state-and-search-state-(type=search)-4">Text</a>,
      <a href="/breakup/specs/html-forms/#text-(type=text)-state-and-search-state-(type=search)" id="drag-and-drop-processing-model:text-(type=text)-state-and-search-state-(type=search)-5">Search</a>,
      <a href="/breakup/specs/html-forms/#telephone-state-(type=tel)" id="drag-and-drop-processing-model:telephone-state-(type=tel)">Tel</a>,
      <a href="/breakup/specs/html-forms/#url-state-(type=url)" id="drag-and-drop-processing-model:url-state-(type=url)">URL</a>,
      <a href="/breakup/specs/html-forms/#e-mail-state-(type=email)" id="drag-and-drop-processing-model:e-mail-state-(type=email)">E-mail</a>,
      <a href="/breakup/specs/html-forms/#password-state-(type=password)" id="drag-and-drop-processing-model:password-state-(type=password)">Password</a>, or
      <a href="/breakup/specs/html-forms/#number-state-(type=number)" id="drag-and-drop-processing-model:number-state-(type=number)">Number</a>
      states.</p>


     </li></ol>

   </li></ol>

  <p class="note">User agents are encouraged to consider how to react to drags near the edge of
  scrollable regions. For example, if a user drags a link to the bottom of the viewport on a long
  page, it might make sense to scroll the page so that the user can drop the link lower on the
  page.</p>

  <p class="note">This model is independent of which <code id="drag-and-drop-processing-model:document-3"><a href="/breakup/specs/browser-dom/#document">Document</a></code> object the nodes involved
  are from; the events are fired as described above and the rest of the processing model runs as
  described above, irrespective of how many documents are involved in the operation.</p></section><section><h2>Events summary</h2>

  <p><i>This section is non-normative.</i></p>

  <p>The following events are involved in the drag-and-drop
  model.</p>

  <table><thead><tr><th> Event Name </th><th> Target </th><th> Cancelable? </th><th> <a href="/breakup/specs/dnd/#drag-data-store-mode" id="dndevents:drag-data-store-mode">Drag data store mode</a> </th><th> <code id="dndevents:dom-datatransfer-dropeffect"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect">dropEffect</a></code> </th><th> Default Action </th></tr></thead><tbody><tr><td><dfn id="event-dnd-dragstart"><code>dragstart</code></dfn></td><td><a href="/breakup/specs/dnd/#source-node" id="dndevents:source-node">Source node</a></td><td> Cancelable</td><td><a href="/breakup/specs/dnd/#concept-dnd-rw" id="dndevents:concept-dnd-rw">Read/write mode</a>
     
     </td><td>"<code id="dndevents:dom-datatransfer-dropeffect-none"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-none">none</a></code>"</td><td>Initiate the drag-and-drop operation</td></tr><tr><td><dfn id="event-dnd-drag"><code>drag</code></dfn></td><td><a href="/breakup/specs/dnd/#source-node" id="dndevents:source-node-2">Source node</a></td><td> Cancelable</td><td><a href="/breakup/specs/dnd/#concept-dnd-p" id="dndevents:concept-dnd-p">Protected mode</a>
     
     </td><td>"<code id="dndevents:dom-datatransfer-dropeffect-none-2"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-none">none</a></code>"</td><td>Continue the drag-and-drop operation</td></tr><tr><td><dfn id="event-dnd-dragenter"><code>dragenter</code></dfn></td><td><a href="/breakup/specs/dnd/#immediate-user-selection" id="dndevents:immediate-user-selection">Immediate user selection</a> or <a href="/breakup/specs/browser-dom/#the-body-element-2" id="dndevents:the-body-element-2">the body element</a></td><td> Cancelable</td><td><a href="/breakup/specs/dnd/#concept-dnd-p" id="dndevents:concept-dnd-p-2">Protected mode</a>
     
     </td><td><a href="/breakup/specs/dnd/#dropEffect-initialisation">Based on <code>effectAllowed</code> value</a></td><td>Reject <a href="/breakup/specs/dnd/#immediate-user-selection" id="dndevents:immediate-user-selection-2">immediate user selection</a> as potential <a href="/breakup/specs/dnd/#current-target-element" id="dndevents:current-target-element">target element</a></td></tr><tr><td><dfn id="event-dnd-dragexit"><code>dragexit</code></dfn></td><td><a href="/breakup/specs/dnd/#current-target-element" id="dndevents:current-target-element-2">Previous target element</a></td><td></td><td><a href="/breakup/specs/dnd/#concept-dnd-p" id="dndevents:concept-dnd-p-3">Protected mode</a>
     
     </td><td>"<code id="dndevents:dom-datatransfer-dropeffect-none-3"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-none">none</a></code>"</td><td>None</td></tr><tr><td><dfn id="event-dnd-dragleave"><code>dragleave</code></dfn></td><td><a href="/breakup/specs/dnd/#current-target-element" id="dndevents:current-target-element-3">Previous target element</a></td><td></td><td><a href="/breakup/specs/dnd/#concept-dnd-p" id="dndevents:concept-dnd-p-4">Protected mode</a>
     
     </td><td>"<code id="dndevents:dom-datatransfer-dropeffect-none-4"><a href="/breakup/specs/dnd/#dom-datatransfer-dropeffect-none">none</a></code>"</td><td>None</td></tr><tr><td><dfn id="event-dnd-dragover"><code>dragover</code></dfn></td><td><a href="/breakup/specs/dnd/#current-target-element" id="dndevents:current-target-element-4">Current target element</a></td><td> Cancelable</td><td><a href="/breakup/specs/dnd/#concept-dnd-p" id="dndevents:concept-dnd-p-5">Protected mode</a>
     
     </td><td><a href="/breakup/specs/dnd/#dropEffect-initialisation">Based on <code>effectAllowed</code> value</a></td><td>Reset the <a href="/breakup/specs/dnd/#current-drag-operation" id="dndevents:current-drag-operation">current drag operation</a> to "none"</td></tr><tr><td><dfn id="event-dnd-drop"><code>drop</code></dfn></td><td><a href="/breakup/specs/dnd/#current-target-element" id="dndevents:current-target-element-5">Current target element</a></td><td> Cancelable</td><td><a href="/breakup/specs/dnd/#concept-dnd-ro" id="dndevents:concept-dnd-ro">Read-only mode</a>
     
     </td><td><a href="/breakup/specs/dnd/#current-drag-operation" id="dndevents:current-drag-operation-2">Current drag operation</a></td><td>Varies</td></tr><tr><td><dfn id="event-dnd-dragend"><code>dragend</code></dfn></td><td><a href="/breakup/specs/dnd/#source-node" id="dndevents:source-node-3">Source node</a></td><td></td><td><a href="/breakup/specs/dnd/#concept-dnd-p" id="dndevents:concept-dnd-p-6">Protected mode</a>
     
     </td><td><a href="/breakup/specs/dnd/#current-drag-operation" id="dndevents:current-drag-operation-3">Current drag operation</a></td><td>Varies</td></tr></tbody></table>

  <p>Not shown in the above table: all these events bubble, and the <code id="dndevents:dom-datatransfer-effectallowed"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed">effectAllowed</a></code> attribute always has the value it had
  after the <code id="dndevents:event-dnd-dragstart"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code> event, defaulting to "<code id="dndevents:dom-datatransfer-effectallowed-uninitialized"><a href="/breakup/specs/dnd/#dom-datatransfer-effectallowed-uninitialized">uninitialized</a></code>" in the <code id="dndevents:event-dnd-dragstart-2"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code> event.</p></section><section><h2>The <dfn><code>draggable</code></dfn> attribute</h2>

  <p>All <a href="/breakup/specs/core-algorithms/#html-elements" id="the-draggable-attribute:html-elements">HTML elements</a> may have the <code id="the-draggable-attribute:the-draggable-attribute"><a href="/breakup/specs/dnd/#the-draggable-attribute">draggable</a></code>
  content attribute set. The <code id="the-draggable-attribute:the-draggable-attribute-2"><a href="/breakup/specs/dnd/#the-draggable-attribute">draggable</a></code> attribute is an
  <a href="/breakup/specs/core-algorithms/#enumerated-attribute" id="the-draggable-attribute:enumerated-attribute">enumerated attribute</a>. It has three states. The first state is <i>true</i> and it has
  the keyword <code>true</code>. The second state is <i>false</i> and it has the keyword
  <code>false</code>. The third state is <i>auto</i>; it has no keywords but it is the
  <i id="the-draggable-attribute:missing-value-default"><a href="/breakup/specs/core-algorithms/#missing-value-default">missing value default</a></i>.</p>

  <p>The <i>true</i> state means the element is draggable; the <i>false</i> state means that it is
  not. The <i>auto</i> state uses the default behaviour of the user agent.</p>

  <p>An element with a <code id="the-draggable-attribute:the-draggable-attribute-3"><a href="/breakup/specs/dnd/#the-draggable-attribute">draggable</a></code> attribute should also have a
  <code id="the-draggable-attribute:attr-title"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attribute that names the element for the purpose of
  non-visual interactions. </p>

  <dl class="domintro"><dt><var>element</var> . <code id="the-draggable-attribute:dom-draggable"><a href="/breakup/specs/dnd/#dom-draggable">draggable</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns true if the element is draggable; otherwise, returns false.</p>

    <p>Can be set, to override the default and set the <code id="the-draggable-attribute:the-draggable-attribute-4"><a href="/breakup/specs/dnd/#the-draggable-attribute">draggable</a></code>
    content attribute.</p>

   </dd></dl>

  

  <p>The <dfn id="dom-draggable"><code>draggable</code></dfn> IDL attribute, whose value depends
  on the content attribute's in the way described below, controls whether or not the element is
  draggable. Generally, only text selections are draggable, but elements whose <code id="the-draggable-attribute:dom-draggable-2"><a href="/breakup/specs/dnd/#dom-draggable">draggable</a></code> IDL attribute is true become draggable as well.</p>

  <p>If an element's <code id="the-draggable-attribute:the-draggable-attribute-5"><a href="/breakup/specs/dnd/#the-draggable-attribute">draggable</a></code> content attribute has the state
  <i>true</i>, the <code id="the-draggable-attribute:dom-draggable-3"><a href="/breakup/specs/dnd/#dom-draggable">draggable</a></code> IDL attribute must return true.</p>

  <p>Otherwise, if the element's <code id="the-draggable-attribute:the-draggable-attribute-6"><a href="/breakup/specs/dnd/#the-draggable-attribute">draggable</a></code> content attribute has
  the state <i>false</i>, the <code id="the-draggable-attribute:dom-draggable-4"><a href="/breakup/specs/dnd/#dom-draggable">draggable</a></code> IDL attribute must return
  false.</p>

  <p>Otherwise, the element's <code id="the-draggable-attribute:the-draggable-attribute-7"><a href="/breakup/specs/dnd/#the-draggable-attribute">draggable</a></code> content attribute has
  the state <i>auto</i>. If the element is an <code id="the-draggable-attribute:the-img-element"><a href="/breakup/specs/html-images/#the-img-element">img</a></code> element, an <code id="the-draggable-attribute:the-object-element"><a href="/breakup/specs/html-embedding/#the-object-element">object</a></code>
  element that <a href="/breakup/specs/html-scripting/#represents" id="the-draggable-attribute:represents">represents</a> an image, or an <code id="the-draggable-attribute:the-a-element"><a href="/breakup/specs/html-linking/#the-a-element">a</a></code> element with an <code id="the-draggable-attribute:attr-hyperlink-href"><a href="/breakup/specs/html-linking/#attr-hyperlink-href">href</a></code> content attribute, the <code id="the-draggable-attribute:dom-draggable-5"><a href="/breakup/specs/dnd/#dom-draggable">draggable</a></code> IDL attribute must return true; otherwise, the <code id="the-draggable-attribute:dom-draggable-6"><a href="/breakup/specs/dnd/#dom-draggable">draggable</a></code> IDL attribute must return false.</p>

  <p>If the <code id="the-draggable-attribute:dom-draggable-7"><a href="/breakup/specs/dnd/#dom-draggable">draggable</a></code> IDL attribute is set to the value false,
  the <code id="the-draggable-attribute:the-draggable-attribute-8"><a href="/breakup/specs/dnd/#the-draggable-attribute">draggable</a></code> content attribute must be set to the literal
  value "<code>false</code>". If the <code id="the-draggable-attribute:dom-draggable-8"><a href="/breakup/specs/dnd/#dom-draggable">draggable</a></code> IDL
  attribute is set to the value true, the <code id="the-draggable-attribute:the-draggable-attribute-9"><a href="/breakup/specs/dnd/#the-draggable-attribute">draggable</a></code> content
  attribute must be set to the literal value "<code>true</code>".</p></section><section><h2>The <dfn><code>dropzone</code></dfn> attribute</h2>

  <p>All <a href="/breakup/specs/core-algorithms/#html-elements" id="the-dropzone-attribute:html-elements">HTML elements</a> may have the <code id="the-dropzone-attribute:the-dropzone-attribute"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> content
  attribute set. When specified, its value must be an <a href="/breakup/specs/core-algorithms/#unordered-set-of-unique-space-separated-tokens" id="the-dropzone-attribute:unordered-set-of-unique-space-separated-tokens">unordered set of unique space-separated
  tokens</a> that are <a href="/breakup/specs/core-algorithms/#ascii-case-insensitive" id="the-dropzone-attribute:ascii-case-insensitive">ASCII case-insensitive</a>. The allowed values are the
  following:</p>

  <dl><dt><dfn id="attr-dropzone-copy"><code>copy</code></dfn></dt><dd><p>Indicates that dropping an accepted item on the element will result in a copy of the
   dragged data.</p>


   </dd><dt><dfn id="attr-dropzone-move"><code>move</code></dfn></dt><dd><p>Indicates that dropping an accepted item on the element will result in the dragged data
   being moved to the new location.</p>


   </dd><dt><dfn id="attr-dropzone-link"><code>link</code></dfn></dt><dd><p>Indicates that dropping an accepted item on the element will result in a link to the
   original data.</p>


   </dd><dt>Any keyword with eight characters or more, beginning with the an <a href="/breakup/specs/core-algorithms/#ascii-case-insensitive" id="the-dropzone-attribute:ascii-case-insensitive-2">ASCII
   case-insensitive</a> match for the string "<code>string:</code>"</dt><dd><p>Indicates that items with <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-dropzone-attribute:the-drag-data-item-kind">the drag data item kind</a> <i>Plain Unicode string</i>
   and <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-dropzone-attribute:the-drag-data-item-type-string">the drag data item type string</a> set to a value that matches the remainder of the
   keyword are accepted.</p></dd><dt>Any keyword with six characters or more, beginning with an <a href="/breakup/specs/core-algorithms/#ascii-case-insensitive" id="the-dropzone-attribute:ascii-case-insensitive-3">ASCII
   case-insensitive</a> match for the string "<code>file:</code>"</dt><dd><p>Indicates that items with <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-dropzone-attribute:the-drag-data-item-kind-2">the drag data item kind</a> <i>File</i> and <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-dropzone-attribute:the-drag-data-item-type-string-2">the
   drag data item type string</a> set to a value that matches the remainder of the keyword are
   accepted.</p></dd></dl>

  <p>The <code id="the-dropzone-attribute:the-dropzone-attribute-2"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> content attribute's values must not have more
  than one of the three feedback values (<code id="the-dropzone-attribute:attr-dropzone-copy"><a href="/breakup/specs/dnd/#attr-dropzone-copy">copy</a></code>, <code id="the-dropzone-attribute:attr-dropzone-move"><a href="/breakup/specs/dnd/#attr-dropzone-move">move</a></code>, and <code id="the-dropzone-attribute:attr-dropzone-link"><a href="/breakup/specs/dnd/#attr-dropzone-link">link</a></code>)
  specified. If none are specified, the <code id="the-dropzone-attribute:attr-dropzone-copy-2"><a href="/breakup/specs/dnd/#attr-dropzone-copy">copy</a></code> value is
  implied.</p>

  <p>An element with a <code id="the-dropzone-attribute:the-dropzone-attribute-3"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute should also have a
  <code id="the-dropzone-attribute:attr-title"><a href="/breakup/specs/html-attributes/#attr-title">title</a></code> attribute that names the element for the purpose of
  non-visual interactions. </p>

  

  <p>A <code id="the-dropzone-attribute:the-dropzone-attribute-4"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute <dfn id="concept-dropzone-match">matches a drag data store</dfn> if the <a href="/breakup/specs/dnd/#dropzone-processing-steps" id="the-dropzone-attribute:dropzone-processing-steps"><code>dropzone</code> processing steps</a> result in a match.</p>

  <p>A <code id="the-dropzone-attribute:the-dropzone-attribute-5"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute <dfn id="concept-dropzone-operation">specifies an operation</dfn> if the <a href="/breakup/specs/dnd/#dropzone-processing-steps" id="the-dropzone-attribute:dropzone-processing-steps-2"><code>dropzone</code> processing steps</a> result in a specified operation. The
  specified operation is as given by those steps.</p>

  <p>The <dfn id="dropzone-processing-steps"><code>dropzone</code> processing steps</dfn> are as follows.
  They either result in a match or not, and separate from this result either in a specified
  operation or not, as defined below.</p>

  <ol><li><p>Let <var>value</var> be the value of the <code id="the-dropzone-attribute:the-dropzone-attribute-6"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute.</p></li><li><p>Let <var>keywords</var> be the result of <a href="/breakup/specs/core-algorithms/#split-a-string-on-spaces" id="the-dropzone-attribute:split-a-string-on-spaces">splitting <var>value</var> on spaces</a>.</p></li><li><p>Let <var>matched</var> be false.</p></li><li><p>Let <var>operation</var> be unspecified.</p></li><li>

    <p>For each value in <var>keywords</var>, if any, in the order that they were found in
    <var>value</var>, run the following steps.</p>

    <ol><li><p>Let <var>keyword</var> be the keyword.</p></li><li>

      <p>If <var>keyword</var> is one of "<code id="the-dropzone-attribute:attr-dropzone-copy-3"><a href="/breakup/specs/dnd/#attr-dropzone-copy">copy</a></code>",
      "<code id="the-dropzone-attribute:attr-dropzone-move-2"><a href="/breakup/specs/dnd/#attr-dropzone-move">move</a></code>", or "<code id="the-dropzone-attribute:attr-dropzone-link-2"><a href="/breakup/specs/dnd/#attr-dropzone-link">link</a></code>", then: run the following substeps:</p>

      <ol><li><p>If <var>operation</var> is still unspecified, then let <var>operation</var> be the string given by <var>keyword</var>.</p></li><li><p>Skip to the step labeled <i>end of keyword</i> below.</p></li></ol>

     </li><li><p>If <var>keyword</var> does not contain a U+003A COLON character (:), or if the
     first such character in <var>keyword</var> is either the first character or the last
     character in the string, then skip to the step labeled <i>end of keyword</i> below.</p></li><li><p>Let <var>kind code</var> be the substring of <var>keyword</var> from
     the first character in the string to the last character in the string that is before the first
     U+003A COLON character (:) in the string, <a href="/breakup/specs/core-algorithms/#converted-to-ascii-lowercase" id="the-dropzone-attribute:converted-to-ascii-lowercase">converted to ASCII lowercase</a>.</p>

     </li><li>

      <p>Jump to the appropriate step from the list below, based on the value of <var>kind
      code</var>:</p>

      <dl class="switch"><dt>If <var>kind code</var> is the string "<code>string</code>"</dt><dd>

        <p>Let <var>kind</var> be <i>Plain Unicode string</i>.</p>

       </dd><dt>If <var>kind code</var> is the string "<code>file</code>"</dt><dd>

        <p>Let <var>kind</var> be <i>File</i>.</p>

       </dd><dt>Otherwise</dt><dd>

        <p>Skip to the step labeled <i>end of keyword</i> below.</p>

       </dd></dl>

     </li><li><p>Let <var>type</var> be the substring of <var>keyword</var> from the
     first character after the first U+003A COLON character (:) in the string, to the last character
     in the string, <a href="/breakup/specs/core-algorithms/#converted-to-ascii-lowercase" id="the-dropzone-attribute:converted-to-ascii-lowercase-2">converted to ASCII lowercase</a>.</p></li><li><p>If there exist any items in the <a href="/breakup/specs/dnd/#drag-data-store-item-list" id="the-dropzone-attribute:drag-data-store-item-list">drag data store item list</a> whose <a href="/breakup/specs/dnd/#the-drag-data-item-kind" id="the-dropzone-attribute:the-drag-data-item-kind-3">drag data item kind</a> is  the
     kind given in <var>kind</var> and
     whose <a href="/breakup/specs/dnd/#the-drag-data-item-type-string" id="the-dropzone-attribute:the-drag-data-item-type-string-3">drag data item type string</a> is <var>type</var>, then let <var>matched</var> be true.</p></li><li><p><i>End of keyword</i>: Go on to the next keyword, if any, or the next step in the
     overall algorithm, if there are no more.</p></li></ol>

   </li><li>

    <p>The algorithm results in a match if <var>matched</var> is true, and does not
    otherwise.</p>

    <p>The algorithm results in a specified operation if <var>operation</var> is not
    unspecified. The specified operation, if one is specified, is the one given by <var>operation</var>.</p>

   </li></ol>

  <p>The <dfn id="dom-dropzone"><code>dropzone</code></dfn> IDL attribute must
  <a href="/breakup/specs/core-algorithms/#reflect" id="the-dropzone-attribute:reflect">reflect</a> the content attribute of the same name.</p>

  

  <div class="example">

   <p>In this example, a <code id="the-dropzone-attribute:the-div-element"><a href="/breakup/specs/html-blocks/#the-div-element">div</a></code> element is made into a drop target for image files using
   the <code id="the-dropzone-attribute:the-dropzone-attribute-7"><a href="/breakup/specs/dnd/#the-dropzone-attribute">dropzone</a></code> attribute. Images dropped into the target are
   then displayed.</p>

   <pre>&lt;div dropzone="copy file:image/png file:image/gif file:image/jpeg" ondrop="receive(event, this)"&gt;
 &lt;p&gt;Drop an image here to have it displayed.&lt;/p&gt;
&lt;/div&gt;
&lt;script&gt;
 function receive(event, element) {
   var data = event.dataTransfer.items;
   for (var i = 0; i &lt; data.length; i += 1) {
     if ((data[i].kind == 'file') &amp;&amp; (data[i].type.match('^image/'))) {
       var img = new Image();
       img.src = window.createObjectURL(data[i].getAsFile());
       element.appendChild(img);
     }
   }
 }
&lt;/script&gt;</pre>

  </div></section><section><h2>Security risks in the drag-and-drop model</h2>

  <p>User agents must not make the data added to the <code id="security-risks-in-the-drag-and-drop-model:datatransfer"><a href="/breakup/specs/dnd/#datatransfer">DataTransfer</a></code> object during the
  <code id="security-risks-in-the-drag-and-drop-model:event-dnd-dragstart"><a href="/breakup/specs/dnd/#event-dnd-dragstart">dragstart</a></code> event available to scripts until the <code id="security-risks-in-the-drag-and-drop-model:event-dnd-drop"><a href="/breakup/specs/dnd/#event-dnd-drop">drop</a></code> event, because otherwise, if a user were to drag sensitive
  information from one document to a second document, crossing a hostile third document in the
  process, the hostile document could intercept the data.</p>

  <p>For the same reason, user agents must consider a drop to be successful only if the user
  specifically ended the drag operation  if any scripts end the drag operation, it must be
  considered unsuccessful (canceled) and the <code id="security-risks-in-the-drag-and-drop-model:event-dnd-drop-2"><a href="/breakup/specs/dnd/#event-dnd-drop">drop</a></code> event must not be
  fired.</p>

  <p>User agents should take care to not start drag-and-drop operations in response to script
  actions. For example, in a mouse-and-window environment, if a script moves a window while the user
  has his mouse button depressed, the UA would not consider that to start a drag. This is important
  because otherwise UAs could cause data to be dragged from sensitive sources and dropped into
  hostile documents without the user's consent.</p>

  <p>User agents should filter potentially active (scripted) content (e.g. HTML) when it is dragged
  and when it is dropped, using a whitelist of known-safe features. Similarly, <a href="/breakup/specs/core-algorithms/#relative-url" id="security-risks-in-the-drag-and-drop-model:relative-url">relative URLs</a> should be turned into absolute URLs to avoid references changing in
  unexpected ways. This specification does not specify how this is performed.</p>

  <div class="example">

   <p>Consider a hostile page providing some content and getting the user to select and drag and
   drop (or indeed, copy and paste) that content to a victim page's <code id="security-risks-in-the-drag-and-drop-model:attr-contenteditable"><a href="/breakup/specs/html-editing/#attr-contenteditable">contenteditable</a></code> region. If the browser does not ensure that
   only safe content is dragged, potentially unsafe content such as scripts and event handlers in
   the selection, once dropped (or pasted) into the victim site, get the privileges of the victim
   site. This would thus enable a cross-site scripting attack.</p>

  </div></section></body></html>