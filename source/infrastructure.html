<!DOCTYPE html>
<html data-revision="$Revision: 8891 $" lang="en-GB-x-hixie"><head><meta charset="utf-8"><title>2 Common infrastructure | HTML 5.1</title><style>/* WHAT 1 */
[hidden] { display: none; }

.proposal { border: blue solid; padding: 1em; }
.bad, .bad *:not(.X\58X) { color: gray; border-color: gray; background: transparent; }
#updatesStatus { display: none; z-index: 10; }
#updatesStatus.relevant { display: block; position: fixed; right: 1em; top: 1em; padding: 0.5em; font: bold small sans-serif; min-width: 25em; width: 30%; max-width: 40em; height: auto; border: ridge 4px gray; background: #EEEEEE; color: black; }
div.head .logo { width: 11em; margin-bottom: 20em; }

@media print { #configUI, #alert { display: none; } }

.fingerprint { position: absolute; right: 0; z-index: 5; }

.panel { position: fixed; z-index: 30; top: 10%; left: 0; margin: auto; right: 0; width: 35em; border: double thick; background: #EEEEEE; color: black; padding: 1em; font: 1em sans-serif; max-height: 70%; overflow: auto; }
.panel h2 { margin: 0; text-align: center; }
.panel ul { min-height: 6em; }
.panel p { text-align: right; margin: 0; }
.panel form { background: transparent; color: black; margin: 0.5em -0.5em 1em; padding: 0.5em; }
.panel form.changed { background: yellow; color: black; }
.panel form p { text-align: left; margin: 1em 0 0; }
.panel form p:first-child { margin-top: 0; }
.panel form p:last-child { margin-bottom: 0; }
.panel form p textarea { width: 100% /* need the keyword that makes it fit to the parent here XXX */; min-height: 4em; display: block; }
.panel form dl { line-height: 1.5em; }
.panel form dt { display: inline-block; width: 20em; white-space: nowrap; text-align: right; font-weight: normal; margin: 0; padding: 0; }
.panel form dd { display: inline; margin: 0 0 0 1em; padding: 0; }
.panel form dd:after { display: block; }
ul.checkboxes { list-style-type: none; }
.progress { text-decoration: blink; }

.applies .yes { background: yellow; }

/* WHAT 2 */

.applies thead th > * { display: block; }
.applies thead code { display: block; }
.applies td { text-align: center; }

.matrix, .matrix td { border: hidden; text-align: right; }
.matrix { margin-left: 2em; }

.vertical-summary-table tr > th[rowspan="2"]:first-child + th,
.vertical-summary-table tr > td[rowspan="2"]:first-child + td { border-bottom: hidden; }

.dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
.dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
.dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

td.eg { border-width: thin; text-align: center; }

#table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
#table-example-1 caption { padding-bottom: 0.5em; }
#table-example-1 thead, #table-example-1 tbody { border: none; }
#table-example-1 th, #table-example-1 td { border: solid thin; }
#table-example-1 th { font-weight: normal; }
#table-example-1 td { border-style: none solid; vertical-align: top; }
#table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
#table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
#table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
#table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
#table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
#table-example-1 tbody td:first-child + td { width: 10em; }
#table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
#table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

.apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
.apple-table-examples * { font-family: "Times", serif; }
.apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
.apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
.apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
.apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
.apple-table-examples td { text-align: right; vertical-align: top; }
.apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
.apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
.apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
.apple-table-examples sup { line-height: 0; }

.three-column-nowrap tr > td:first-child,
.three-column-nowrap tr > td:first-child + td,
.three-column-nowrap tr > td:first-child + td + td { white-space: nowrap; }

.details-example img { vertical-align: top; }

#base64-table {
 white-space: nowrap;
 font-size: 0.6em;
 column-width: 6em;
 column-count: 5;
 column-gap: 1em;
}
#base64-table thead { display: none; }
#base64-table * { border: none; }
#base64-table tbody td:first-child:after { content: ':'; }
#base64-table tbody td:last-child { text-align: right; }

#named-character-references-table {
 white-space: nowrap;
 font-size: 0.6em;
 column-width: 30em;
 column-gap: 1em;
}
#named-character-references-table > table > tbody > tr > td:first-child + td,
#named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
#named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
#named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

.glyph.control { color: red; }

/* WHAT 3 */
#table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
@font-face {
    font-family: 'Essays1743';
    src: url('fonts/Essays1743.ttf');
}
@font-face {
    font-family: 'Essays1743';
    font-weight: bold;
    src: url('fonts/Essays1743-Bold.ttf');
}
@font-face {
    font-family: 'Essays1743';
    font-style: italic;
    src: url('fonts/Essays1743-Italic.ttf');
}
@font-face {
    font-family: 'Essays1743';
    font-style: italic;
    font-weight: bold;
    src: url('fonts/Essays1743-BoldItalic.ttf');
}

/* HTML */
pre { margin-left: 2em; white-space: pre-wrap; }
h2 { margin: 3em 0 1em 0; }
h3 { margin: 2.5em 0 1em 0; }
h4 { margin: 2.5em 0 0.75em 0; }
h5, h6 { margin: 2.5em 0 1em; }
h1 + h2, h1 + h2 + h2, h1 + p, h1 + p + h2 { margin: 0.75em 0 0.75em; }
h2 + h3, h3 + h4, h4 + h5, h5 + h6 { margin-top: 0.5em; }
p { margin: 1em 0; }
hr:not(.top) { display: block; background: none; border: none; padding: 0; margin: 2em 0; height: auto; }
.element dd,  .element dl { margin-top: 0em; margin-bottom: 0.25em;}
dt { margin-top: 0.75em; margin-bottom: 0.5em; clear: left; }
 .element dt { margin-top: 0.5em; margin-bottom: 0.5em;  }
dt + dt { margin-top: 0; }
dd dt { margin-top: 0.25em; margin-bottom: 0; }
dd p { margin-top: 0; }
dd dl + p { margin-top: 1em; }
dd table + p { margin-top: 1em; }
p + * > li, dd li { margin: 1em 0; }
dt, dfn { font-weight: bold; font-style: normal; }
i, em { font-style: italic; }
dt dfn { font-style: italic; }
pre, code { font-size: inherit; font-family: monospace; font-variant: normal; }
pre strong { color: black; font: inherit; font-weight: bold; background: yellow; }
pre em { font-weight: bolder; font-style: normal; }
@media screen { code { color: #D93B00; } code :link, code :visited { color: inherit; } }
var { background-color: #f9f9f9; border: 1px solid #eee; padding: 0 2px; }
var sub { vertical-align: bottom; font-size: smaller; position: relative; top: 0.1em; }
table { border-collapse: collapse; border-style: hidden hidden none hidden; }
table thead, table tbody { border-bottom: solid; }
table tbody th:first-child { border-left: solid; }
table tbody th { text-align: left; }
table td, table th { border-left: solid; border-right: solid; border-bottom: solid thin; vertical-align: top; padding: 0.2em; }
blockquote { margin: 0 0 0 2em; border: 0; padding: 0; font-style: italic; }

.bad, .bad *:not(.XXX) { color: #5F6D7A; border-color: gray; background: transparent; }
.matrix, .matrix td { border: none; text-align: right; }
.matrix { margin-left: 2em; }
.dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
.dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
.dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

.toc dfn, h1 dfn, h2 dfn, h3 dfn, h4 dfn, h5 dfn, h6 dfn { font: inherit; }
img.extra, p.overview { float: right; }
pre.idl { border: solid thin #d3d3d3; background: #FCFCFC; color: black; padding: 0.5em 1em; position: relative; }
pre.idl :link, pre.idl :visited { color: inherit; background: transparent; }
pre.idl::before { content: "IDL"; font: bold small sans-serif; padding: 0.5em; background: white; position: absolute; top: 0; margin: -1px 0 0 -4em; width: 1.5em; border: thin solid; border-radius: 0 0 0 0.5em }
pre.css { border: solid thin; background: #FFFFEE; color: black; padding: 0.5em 1em; }
pre.css:first-line { color: #AAAA50; }
dl.domintro {padding: 0.5em 1em; border: none; background:#E9FBE9; border: 1px solid lightgray; }
hr + dl.domintro, div.impl + dl.domintro { margin-top: 2.5em; margin-bottom: 1.5em; }
dl.domintro dt, dl.domintro dt * { color: black; text-decoration: none; }
dl.domintro dd { margin: 0.5em 0 1em 2em; padding: 0; }
dl.domintro dd p { margin: 0.5em 0; }
dl.domintro:before { display: table; margin: -1em -0.5em -0.5em auto; width: auto; content: 'This definition is non-normative. Implementation requirements are given below this definition.'; color: #606060; border:1px solid lightgray; background: white; padding: 0 0.25em;font-size:.9em;}
dl.switch { padding-left: 2em; }
dl.switch > dt { text-indent: -1.5em; }
dl.switch > dt:before { content: '\21AA'; padding: 0 0.5em 0 0; display: inline-block; width: 1em; text-align: right; line-height: 0.5em; }
dl.triple { padding: 0 0 0 1em; }
dl.triple dt, dl.triple dd { margin: 0; display: inline }
dl.triple dt:after { content: ':'; }
dl.triple dd:after { content: '\A'; white-space: pre; }
.diff-old { text-decoration: line-through; color: silver; background: transparent; }
.diff-chg, .diff-new { text-decoration: underline; color: green; background: transparent; }
a .diff-new { border-bottom: 1px blue solid; }

figure.diagrams { border: double black; background: white; padding: 1em; }
figure.diagrams img { display: block; margin: 1em auto; } 

h2 { page-break-before: always; }
h1, h2, h3, h4, h5, h6 { page-break-after: avoid; }
h1 + h2, hr + h2.no-toc { page-break-before: auto; }

p  > span:not([title=""]):not([class="XXX"]):not([class="impl"]):not([class="note"]):not([class="t2"]):not([id]):not([lang]),
li > span:not([title=""]):not([class="XXX"]):not([class="impl"]):not([class="note"]):not([class="t2"]):not([id]):not([lang])
{ border-bottom: solid #9999CC; }

div.head { margin: 0 0 1em; padding: 1em 0 0 0; }
div.head p { margin: 0; }
div.head h1 { margin: 0; }
div.head .logo { float: right; margin: 0 1em; }
div.head .logo img { border: none } /* remove border from top image */
div.head dl { margin: 1em 0; }
div.head p.copyright, div.head p.alt { font-size: x-small; font-style: oblique; margin: 0; }

body > .toc > li { margin-top: 1em; margin-bottom: 1em; }
body > .toc.brief > li { margin-top: 0.35em; margin-bottom: 0.35em; }
body > .toc > li > * { margin-bottom: 0.5em; }
body > .toc > li > * > li > * { margin-bottom: 0.25em; }
.toc, .toc li { list-style: none; }

.brief { margin-top: 1em; margin-bottom: 1em; line-height: 1.1; }
.brief li { margin: 0; padding: 0; }
.brief li p { margin: 0; padding: 0; }

.category-list { margin-top: -0.75em; margin-bottom: 1em; line-height: 1.5; }
.category-list::before { content: '\21D2\A0'; font-size: 1.2em; font-weight: 900; }
.category-list li { display: inline; }
.category-list li:not(:last-child)::after { content: ', '; }
.category-list li > span, .category-list li > a { text-transform: lowercase; }
.category-list li * { text-transform: none; } /* don't affect <code> nested in <a> */

.XXX { color: #E50000; background: white; border: solid red; padding: 0.5em; margin: 1em 0; }
.XXX > :first-child { margin-top: 0; }
p .XXX { line-height: 3em; }
.annotation { border: solid thin black; background: #0C479D; color: white; position: relative; margin: 8px 0 20px 0; }
.annotation:before { position: absolute; left: 0; top: 0; width: 100%; height: 100%; margin: 6px -6px -6px 6px; background: #333333; z-index: -1; content: ''; }
.annotation :link, .annotation :visited { color: inherit; }
.annotation :link:hover, .annotation :visited:hover { background: transparent; }
.annotation span { border: none ! important; }
.note { border-left-style: solid; border-left-width: 0.25em; background: none repeat scroll 0 0 #E9FBE9; border-color: #52E052; }
.warning { background-color: #F9F0D4; border: medium double #FF0000; margin: 1em; padding: 1em; }
.note em, .warning em, .note i, .warning i { font-style: normal; }
p.note, div.note { padding: 0.5em 2em; }
span.note { padding: 0 2em; }
.note p:first-child, .warning p:first-child { margin-top: 0; }
.note p:last-child, .warning p:last-child { margin-bottom: 0; }
.warning:before { font-style: normal; }
p.note:before { content: 'Note: '; font-weight: bolder;}
p.warning:before { content: '\26A0 Warning! '; font-weight:bolder;}
.critical {margin:1em; border:double red; padding:1em; background-color:#F9F0D4;}

.bookkeeping:before { display: block; content: 'Bookkeeping details'; font-weight: bolder; font-style: italic; }
.bookkeeping { font-size: 0.8em; margin: 2em 0; }
.bookkeeping p { margin: 0.5em 2em; display: list-item; list-style: square; }
.bookkeeping dt { margin: 0.5em 2em 0; }
.bookkeeping dd { margin: 0 3em 0.5em; }

h4 { position: relative; z-index: 3; }
h4 + .element, h4 + div + .element { margin-top: -2.5em; padding-top: 2em; }
.element {
  background: #F4F4FA;
  color: black;
  margin: 0 0 1em 0.15em;
  padding: 0 1em 0.25em 0.75em;
  border-left: solid #9999FF 0.25em;
  position: relative;
  z-index: 1;
}
.element:before {
  position: absolute;
  z-index: 2;
  top: 0;
  left: -1.15em;
  height: 2em;
  width: 0.9em;
  background: #F4F4FA;
  content: ' ';
  border-style: none none solid solid;
  border-color: #9999FF;
  border-width: 0.25em;
}

.example { display: block; color: #222222; background: #FCFCFC; border-left-style: solid;border-color:#c0c0c0; border-left-width: 0.25em; margin-left: 1em; padding-left: 1em;padding-bottom: 0.5em;}
div.example:before { content: 'Code Example: '; font-weight: bolder;}
td > .example:only-child { margin: 0 0 0 0.1em; }

ul.domTree, ul.domTree ul { padding: 0 0 0 1em; margin: 0; }
ul.domTree li { padding: 0; margin: 0; list-style: none; position: relative; }
ul.domTree li li { list-style: none; }
ul.domTree li:first-child::before { position: absolute; top: 0; height: 0.6em; left: -0.75em; width: 0.5em; border-style: none none solid solid; content: ''; border-width: 0.1em; }
ul.domTree li:not(:last-child)::after { position: absolute; top: 0; bottom: -0.6em; left: -0.75em; width: 0.5em; border-style: none none solid solid; content: ''; border-width: 0.1em; }
ul.domTree span { font-style: italic; font-family: serif; }
ul.domTree .t1 code { color: purple; font-weight: bold; }
ul.domTree .t2 { font-style: normal; font-family: monospace; }
ul.domTree .t2 .name { color: black; font-weight: bold; }
ul.domTree .t2 .value { color: blue; font-weight: normal; }
ul.domTree .t3 code, .domTree .t4 code, .domTree .t5 code { color: gray; }
ul.domTree .t7 code, .domTree .t8 code { color: green; }
ul.domTree .t10 code { color: teal; }

body.dfnEnabled dfn { cursor: pointer; }
.dfnPanel {
  display: inline;
  position: absolute;
  z-index: 10;
  height: auto;
  width: auto;
  padding: 0.5em 0.75em;
  font: small sans-serif, Droid Sans Fallback;
  background: #DDDDDD;
  color: black;
  border: outset 0.2em;
}
.dfnPanel * { margin: 0; padding: 0; font: inherit; text-indent: 0; }
.dfnPanel :link, .dfnPanel :visited { color: black; }
.dfnPanel p { font-weight: bolder; }
.dfnPanel * + p { margin-top: 0.25em; }
.dfnPanel li { list-style-position: inside; }

#configUI { position: absolute; z-index: 20; top: 10em; right: 1em; width: 11em; font-size: small; }
#configUI p { margin: 0.5em 0; padding: 0.3em; background: #EEEEEE; color: black; border: inset thin; }
#configUI p label { display: block; }
#configUI #updateUI, #configUI .loginUI { text-align: center; }
#configUI input[type=button] { display: block; margin: auto; }

fieldset { margin: 1em; padding: 0.5em 1em; }
fieldset > legend + * { margin-top: 0; }
fieldset > :last-child { margin-bottom: 0; }
fieldset p { margin: 0.5em 0; }
header p.subline {color:#005A9C; font: 140% sans-serif;margin: 0.75em 0;}
#authorButton {overflow: visible; padding: 0.1em 0.3em; position: fixed; right: 2em; top: 6em; width: auto;}

@media print {#authorButton { display:none;}}</style><link href="http://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet" type="text/css"></head><body class=" dfnEnabled">
  

  <div class="head">
  <header>
    <p>
      <a href="http://www.w3.org/"><img alt="W3C" height="48" src="http://www.w3.org/Icons/w3c_home" width="72"></a>
    </p>
    <h1 id="big-title">HTML 5.1</h1>
    <h2 class="no-num no-toc subline">W3C Working Draft 06 May 2015</h2>
  </header>
  
  

  
</div>
<hr>



  

  

  <nav class="prev_next"><a href="introduction.html#introduction">← 1 Introduction</a> — <a href="Overview.html#contents">Table of contents</a> — <a href="dom.html#dom">3 Semantics, structure, and APIs of HTML documents →</a></nav><section><h2 id="contents" class="no-num no-toc">Table of Contents</h2>
  <ol class="toc"><li id="toc-infrastructure"><a href="infrastructure.html#infrastructure">2 Common infrastructure</a><ol><li><a href="infrastructure.html#terminology">2.1 Terminology</a><ol><li><a href="infrastructure.html#resources">2.1.1 Resources</a></li><li><a href="infrastructure.html#xml">2.1.2 XML</a></li><li><a href="infrastructure.html#dom-trees">2.1.3 DOM trees</a></li><li><a href="infrastructure.html#scripting-2">2.1.4 Scripting</a></li><li><a href="infrastructure.html#plugins">2.1.5 Plugins</a></li><li><a href="infrastructure.html#encoding-terminology">2.1.6 Character encodings</a></li></ol></li><li><a href="infrastructure.html#conformance-requirements">2.2 Conformance requirements</a><ol><li><a href="infrastructure.html#conformance-classes">2.2.1 Conformance classes</a></li><li><a href="infrastructure.html#dependencies">2.2.2 Dependencies</a></li><li><a href="infrastructure.html#extensibility-2">2.2.3 Extensibility</a></li><li><a href="infrastructure.html#interactions-with-xpath-and-xslt">2.2.4 Interactions with XPath and XSLT</a></li></ol></li><li><a href="infrastructure.html#case-sensitivity-and-string-comparison">2.3 Case-sensitivity and string comparison</a></li><li><a href="infrastructure.html#common-microsyntaxes">2.4 Common microsyntaxes</a><ol><li><a href="infrastructure.html#common-parser-idioms">2.4.1 Common parser idioms</a></li><li><a href="infrastructure.html#boolean-attributes">2.4.2 Boolean attributes</a></li><li><a href="infrastructure.html#keywords-and-enumerated-attributes">2.4.3 Keywords and enumerated attributes</a></li><li><a href="infrastructure.html#numbers">2.4.4 Numbers</a><ol><li><a href="infrastructure.html#signed-integers">2.4.4.1 Signed integers</a></li><li><a href="infrastructure.html#non-negative-integers">2.4.4.2 Non-negative integers</a></li><li><a href="infrastructure.html#floating-point-numbers">2.4.4.3 Floating-point numbers</a></li><li><a href="infrastructure.html#percentages-and-dimensions">2.4.4.4 Percentages and lengths</a></li><li><a href="infrastructure.html#lists-of-integers">2.4.4.5 Lists of integers</a></li><li><a href="infrastructure.html#lists-of-dimensions">2.4.4.6 Lists of dimensions</a></li></ol></li><li><a href="infrastructure.html#dates-and-times">2.4.5 Dates and times</a><ol><li><a href="infrastructure.html#months">2.4.5.1 Months</a></li><li><a href="infrastructure.html#dates">2.4.5.2 Dates</a></li><li><a href="infrastructure.html#yearless-dates">2.4.5.3 Yearless dates</a></li><li><a href="infrastructure.html#times">2.4.5.4 Times</a></li><li><a href="infrastructure.html#floating-dates-and-times">2.4.5.5 Floating dates and times</a></li><li><a href="infrastructure.html#time-zones">2.4.5.6 Time zones</a></li><li><a href="infrastructure.html#global-dates-and-times">2.4.5.7 Global dates and times</a></li><li><a href="infrastructure.html#weeks">2.4.5.8 Weeks</a></li><li><a href="infrastructure.html#durations">2.4.5.9 Durations</a></li><li><a href="infrastructure.html#vaguer-moments-in-time">2.4.5.10 Vaguer moments in time</a></li></ol></li><li><a href="infrastructure.html#colours">2.4.6 Colours</a></li><li><a href="infrastructure.html#space-separated-tokens">2.4.7 Space-separated tokens</a></li><li><a href="infrastructure.html#comma-separated-tokens">2.4.8 Comma-separated tokens</a></li><li><a href="infrastructure.html#syntax-references">2.4.9 References</a></li><li><a href="infrastructure.html#mq">2.4.10 Media queries</a></li></ol></li><li><a href="infrastructure.html#urls">2.5 URLs</a><ol><li><a href="infrastructure.html#terminology-2">2.5.1 Terminology</a></li><li><a href="infrastructure.html#resolving-urls">2.5.2 Resolving URLs</a></li><li><a href="infrastructure.html#dynamic-changes-to-base-urls">2.5.3 Dynamic changes to base URLs</a></li></ol></li><li><a href="infrastructure.html#fetching-resources">2.6 Fetching resources</a><ol><li><a href="infrastructure.html#terminology-3">2.6.1 Terminology</a></li><li><a href="infrastructure.html#processing-model">2.6.2 Processing model</a></li><li><a href="infrastructure.html#encrypted-http-and-related-security-concerns">2.6.3 Encrypted HTTP and related security concerns</a></li><li><a href="infrastructure.html#content-type-sniffing">2.6.4 Determining the type of a resource</a></li><li><a href="infrastructure.html#extracting-character-encodings-from-meta-elements">2.6.5 Extracting character encodings from <code>meta</code> elements</a></li><li><a href="infrastructure.html#cors-settings-attributes">2.6.6 CORS settings attributes</a></li><li><a href="infrastructure.html#cors-enabled-fetch">2.6.7 CORS-enabled fetch</a></li></ol></li><li><a href="infrastructure.html#common-dom-interfaces">2.7 Common DOM interfaces</a><ol><li><a href="infrastructure.html#reflecting-content-attributes-in-idl-attributes">2.7.1 Reflecting content attributes in IDL attributes</a></li><li><a href="infrastructure.html#collections-2">2.7.2 Collections</a><ol><li><a href="infrastructure.html#the-htmlallcollection-interface">2.7.2.1 The <code>HTMLAllCollection</code> interface</a></li><li><a href="infrastructure.html#the-htmlformcontrolscollection-interface">2.7.2.2 The <code>HTMLFormControlsCollection</code> interface</a></li><li><a href="infrastructure.html#the-htmloptionscollection-interface">2.7.2.3 The <code>HTMLOptionsCollection</code> interface</a></li><li><a href="infrastructure.html#the-htmlpropertiescollection-interface">2.7.2.4 The <code>HTMLPropertiesCollection</code> interface</a></li></ol></li><li><a href="infrastructure.html#the-domstringmap-interface">2.7.3 The <code>DOMStringMap</code> interface</a></li><li><a href="infrastructure.html#domelementmap">2.7.4 DOMElementMap</a></li><li><a href="infrastructure.html#transferable-objects">2.7.5 Transferable objects</a></li><li><a href="infrastructure.html#safe-passing-of-structured-data">2.7.6 Safe passing of structured data</a></li><li><a href="infrastructure.html#callbacks">2.7.7 Callbacks</a></li><li><a href="infrastructure.html#garbage-collection">2.7.8 Garbage collection</a></li></ol></li><li><a href="infrastructure.html#namespaces">2.8 Namespaces</a></li></ol></li></ol></section>

  

  



  <section><h2 id="infrastructure">2 Common infrastructure</h2>

  <section><h3 id="terminology">2.1 Terminology</h3>

  <p>This specification refers to both HTML and XML attributes and IDL attributes, often in the same
  context. When it is not clear which is being referred to, they are referred to as <dfn>content attributes</dfn> for HTML and XML attributes, and <dfn>IDL
  attributes</dfn> for those defined on IDL interfaces. Similarly, the term "properties" is used for
  both JavaScript object properties and CSS properties. When these are ambiguous they are qualified
  as <dfn>object properties</dfn> and <dfn>CSS properties</dfn> respectively.</p>

  <p>Generally, when the specification states that a feature applies to <a href="syntax.html#syntax" id="terminology:syntax">the HTML syntax</a>
  or <a href="the-xhtml-syntax.html#the-xhtml-syntax" id="terminology:the-xhtml-syntax">the XHTML syntax</a>, it also includes the other. When a feature specifically only
  applies to one of the two languages, it is called out by explicitly stating that it does not apply
  to the other format, as in "for HTML, ... (this does not apply to XHTML)".</p>

  <p>This specification uses the term <dfn>document</dfn> to refer to any use of HTML,
  ranging from short static documents to long essays or reports with rich multimedia, as well as to
  fully-fledged interactive applications. The term is used to refer both to <code id="terminology:document"><a href="dom.html#document">Document</a></code>
  objects and their descendant DOM trees, and to serialised byte streams using the <a href="syntax.html#syntax" id="terminology:syntax-2">HTML syntax</a> or <a href="the-xhtml-syntax.html#the-xhtml-syntax" id="terminology:the-xhtml-syntax-2">XHTML syntax</a>, depending
  on context.</p>

  <p>In the context of the DOM structures, the terms <a href="infrastructure.html#html-documents" id="terminology:html-documents">HTML
  document</a> and <a href="infrastructure.html#xml-documents" id="terminology:xml-documents">XML document</a> are used as defined in the DOM
  specification, and refer specifically to two different modes that <code id="terminology:document-2"><a href="dom.html#document">Document</a></code> objects
  can find themselves in. <a href="references.html#refsDOM">[DOM]</a> (Such uses are always hyperlinked to their
  definition.)</p>

  <p>In the context of byte streams, the term HTML document refers to resources labeled as
  <code id="terminology:text/html"><a href="iana.html#text/html">text/html</a></code>, and the term XML document refers to resources labeled with an <a href="infrastructure.html#xml-mime-type" id="terminology:xml-mime-type">XML
  MIME type</a>.</p>

  <p>The term <dfn id="xhtml-document">XHTML document</dfn> is used to refer to both <code id="terminology:document-3"><a href="dom.html#document">Document</a></code>s in the <a href="infrastructure.html#xml-documents" id="terminology:xml-documents-2">XML document</a> mode that contains element nodes in the <a href="infrastructure.html#html-namespace-2" id="terminology:html-namespace-2">HTML
  namespace</a>, and byte streams labeled with an <a href="infrastructure.html#xml-mime-type" id="terminology:xml-mime-type-2">XML MIME type</a> that contain
  elements from the <a href="infrastructure.html#html-namespace-2" id="terminology:html-namespace-2-2">HTML namespace</a>, depending on context.</p>

  <hr>

  <p>For simplicity, terms such as <dfn>shown</dfn>, <dfn>displayed</dfn>, and
  <dfn>visible</dfn> might sometimes be used when referring to the way a document is
  rendered to the user. These terms are not meant to imply a visual medium; they must be considered
  to apply to other media in equivalent ways.</p>

  

  <p>When an algorithm B says to return to another algorithm A, it implies that A called B. Upon
  returning to A, the implementation must continue from where it left off in calling B. Some
  algorithms run <dfn id="in-parallel">in parallel</dfn>; this means that the algorithm's subsequent steps are to be
  run, one after another, at the same time as other logic in the specification (e.g. at the same
  time as the <a href="webappapis.html#event-loop" id="terminology:event-loop">event loop</a>). This specification does not define the precise mechanism by
  which this is achieved, be it time-sharing cooperative multitasking, fibers, threads, processes,
  using different hyperthreads, cores, CPUs, machines, etc. By contrast, an operation that is to run
  <dfn id="immediately">immediately</dfn> must interrupt the currently running task, run itself, and then resume the
  previously running task.</p>

  

  
  <p>The term "transparent black" refers to the colour with red, green, blue, and alpha channels all
  set to zero.</p>


  <section><h4 id="resources">2.1.1 Resources</h4>

  <p>The specification uses the term <dfn>supported</dfn> when referring to whether a user
  agent has an implementation capable of decoding the semantics of an external resource. A format or
  type is said to be <i>supported</i> if the implementation can process an external resource of that
  format or type without critical aspects of the resource being ignored. Whether a specific resource
  is <i>supported</i> can depend on what features of the resource's format are in use.</p>

  <p class="example">For example, a PNG image would be considered to be in a supported format if its
  pixel data could be decoded and rendered, even if, unbeknownst to the implementation, the image
  also contained animation data.</p>

  <p class="example">An MPEG-4 video file would not be considered to be in a supported format if the
  compression format used was not supported, even if the implementation could determine the
  dimensions of the movie from the file's metadata.</p>

  <p>What some specifications, in particular the HTTP specification, refer to as a
  <i>representation</i> is referred to in this specification as a <dfn>resource</dfn>.
  <a href="references.html#refsHTTP">[HTTP]</a></p>

  <p>The term <dfn id="mime-type">MIME type</dfn> is used to refer to what is sometimes called an <i>Internet media
  type</i> in protocol literature. The term <i>media type</i> in this specification is used to refer
  to the type of media intended for presentation, as used by the CSS specifications. <a href="references.html#refsRFC2046">[RFC2046]</a> <a href="references.html#refsMQ">[MQ]</a></p>

  <p>A string is a <dfn id="valid-mime-type">valid MIME type</dfn> if it matches the <code>media-type</code> rule defined in <a href="http://tools.ietf.org/html/rfc7231#section-3.1.1.1">section 3.1.1.1 "Media Type" of RFC
  7231</a>. In particular, a <a href="infrastructure.html#valid-mime-type" id="resources:valid-mime-type">valid MIME type</a> may include MIME type parameters. <a href="references.html#refsHTTP">[HTTP]</a></p>

  <p>A string is a <dfn id="valid-mime-type-with-no-parameters">valid MIME type with no parameters</dfn> if it matches the <code>media-type</code> rule defined in <a href="http://tools.ietf.org/html/rfc7231#section-3.1.1.1">section 3.1.1.1 "Media Type" of RFC
  7231</a>, but does not contain any U+003B SEMICOLON characters (;). In other words, if it consists
  only of a type and subtype, with no MIME Type parameters. <a href="references.html#refsHTTP">[HTTP]</a></p>

  <p>The term <dfn id="html-mime-type">HTML MIME type</dfn> is used to refer to the <a href="infrastructure.html#mime-type" id="resources:mime-type">MIME type</a>
  <code id="resources:text/html"><a href="iana.html#text/html">text/html</a></code>.</p>

  <p>A resource's <dfn id="critical-subresources">critical subresources</dfn> are those that the resource needs to have
  available to be correctly processed. Which resources are considered critical or not is defined by
  the specification that defines the resource's format.</p></section>


  <section><h4 id="xml">2.1.2 XML</h4>

  <p id="html-namespace">To ease migration from HTML to XHTML, UAs conforming to this specification
  will place elements in HTML in the <code id="xml:html-namespace-2"><a href="infrastructure.html#html-namespace-2">http://www.w3.org/1999/xhtml</a></code> namespace, at least for the purposes of the DOM and
  CSS. The term "<dfn id="html-elements">HTML elements</dfn>", when used in this specification, refers to any element
  in that namespace, and thus refers to both HTML and XHTML elements.</p>

  <p>Except where otherwise stated, all elements defined or mentioned in this specification are in
  the <a href="infrastructure.html#html-namespace-2" id="xml:html-namespace-2-2">HTML namespace</a> ("<code>http://www.w3.org/1999/xhtml</code>"), and all
  attributes defined or mentioned in this specification have no namespace.</p>

  <p>The term <dfn id="element-type">element type</dfn> is used to refer to the set of elements that have a given
  local name and namespace. For example, <code id="xml:the-button-element"><a href="semantics.html#the-button-element">button</a></code> elements are elements with the element
  type <code id="xml:the-button-element-2"><a href="semantics.html#the-button-element">button</a></code>, meaning they have the local name "<code>button</code>" and
  (implicitly as defined above) the <a href="infrastructure.html#html-namespace-2" id="xml:html-namespace-2-3">HTML namespace</a>.</p>

  <p>Attribute names are said to be <dfn id="xml-compatible">XML-compatible</dfn> if they match the <a href="http://www.w3.org/TR/xml/#NT-Name"><code>Name</code></a> production defined in XML
  and they contain no U+003A COLON characters (:). <a href="references.html#refsXML">[XML]</a></p>

  <p>The term <dfn id="xml-mime-type">XML MIME type</dfn> is used to refer to the <a href="infrastructure.html#mime-type" id="xml:mime-type">MIME
  types</a> <code id="xml:text/xml"><a href="index.html#text/xml">text/xml</a></code>, <code id="xml:application/xml"><a href="index.html#application/xml">application/xml</a></code>, and any <a href="infrastructure.html#mime-type" id="xml:mime-type-2">MIME type</a>
  whose subtype ends with the four characters "<code>+xml</code>". <a href="references.html#refsRFC7303">[RFC7303]</a></p></section>


  <section><h4 id="dom-trees">2.1.3 DOM trees</h4>

  <p>The <dfn id="root-element-of-a-document-object">root element of a <code>Document</code> object</dfn> is that <code id="dom-trees:document"><a href="dom.html#document">Document</a></code>'s
  first element child, if any. If it does not have one then the <code id="dom-trees:document-2"><a href="dom.html#document">Document</a></code> has no root
  element.</p>

  <p>The term <dfn id="root-element">root element</dfn>, when not referring to a <code id="dom-trees:document-3"><a href="dom.html#document">Document</a></code> object's root
  element, means the furthest ancestor element node of whatever node is being discussed, or the node
  itself if it has no ancestors. When the node is a part of the document, then the node's <a href="infrastructure.html#root-element" id="dom-trees:root-element">root
  element</a> is indeed the document's root element; however, if the node is not currently part
  of the document tree, the root element will be an orphaned node.</p>

  <p>When an element's <a href="infrastructure.html#root-element" id="dom-trees:root-element-2">root element</a> is the <a href="infrastructure.html#root-element-of-a-document-object" id="dom-trees:root-element-of-a-document-object">root element of a
  <code>Document</code> object</a>, it is said to be <dfn id="in-a-document">in a <code>Document</code></dfn>. An
  element is said to have been <dfn id="insert-an-element-into-a-document">inserted into a
  document</dfn> when its <a href="infrastructure.html#root-element" id="dom-trees:root-element-3">root element</a> changes and is now the document's <a href="infrastructure.html#root-element" id="dom-trees:root-element-4">root
  element</a>. Analogously, an element is said to have been <dfn id="remove-an-element-from-a-document">removed from a document</dfn> when its <a href="infrastructure.html#root-element" id="dom-trees:root-element-5">root element</a> changes from being the
  document's <a href="infrastructure.html#root-element" id="dom-trees:root-element-6">root element</a> to being another element.</p>

  <p>A node's <dfn id="home-subtree">home subtree</dfn> is the subtree rooted at that node's <a href="infrastructure.html#root-element" id="dom-trees:root-element-7">root
  element</a>. When a node is <a href="infrastructure.html#in-a-document" id="dom-trees:in-a-document">in a <code>Document</code></a>, its <a href="infrastructure.html#home-subtree" id="dom-trees:home-subtree">home
  subtree</a> is that <code id="dom-trees:document-4"><a href="dom.html#document">Document</a></code>'s tree.</p>

  <p>The term <dfn id="tree-order">tree order</dfn> means a pre-order, depth-first traversal of DOM nodes involved
  (through the <code id="dom-trees:dom-node-parentnode"><a href="infrastructure.html#dom-node-parentnode">parentNode</a></code>/<code id="dom-trees:dom-node-childnodes"><a href="infrastructure.html#dom-node-childnodes">childNodes</a></code> relationship).</p>

  <p>When it is stated that some element or attribute is <dfn id="ignore">ignored</dfn>, or
  treated as some other value, or handled as if it was something else, this refers only to the
  processing of the node after it is in the DOM. A user agent must not mutate the
  DOM in such situations.</p>

  <p>A content attribute is said to <dfn>change</dfn> value only if its new value is
  different than its previous value; setting an attribute to a value it already has does not change
  it.</p>

  <p>The term <dfn>empty</dfn>, when used of an attribute value, <code id="dom-trees:text"><a href="infrastructure.html#text">Text</a></code> node, or
  string, means that the length of the text is zero (i.e. not even containing spaces or <a href="infrastructure.html#control-characters" id="dom-trees:control-characters">control
  characters</a>).</p>

  <p>A <dfn id="nodes-are-inserted">node <var>A</var> is inserted</dfn> into a node <var>B</var>
  when the <a href="https://dom.spec.whatwg.org/#concept-node-insert-ext" id="dom-trees:concept-node-insert-ext" data-x-internal="concept-node-insert-ext">insertion steps</a> are invoked with
  <var>A</var> as the argument and <var>A</var>'s new parent is <var>B</var>. Similarly, a <dfn id="nodes-are-removed">node <var>A</var> is removed</dfn> from a node <var>B</var> when the
  <a href="https://dom.spec.whatwg.org/#concept-node-remove-ext" id="dom-trees:concept-node-remove-ext" data-x-internal="concept-node-remove-ext">removing steps</a> are invoked with <var>A</var> as the
  <var>removedNode</var> argument and <var>B</var> as the <var>oldParent</var> argument.</p></section>


  <section><h4 id="scripting-2">2.1.4 Scripting</h4>

  <p>The construction "a <code>Foo</code> object", where <code>Foo</code> is
  actually an interface, is sometimes used instead of the more accurate "an object implementing the
  interface <code>Foo</code>".</p>

  <p>An IDL attribute is said to be <dfn>getting</dfn> when its value is being retrieved
  (e.g. by author script), and is said to be <dfn>setting</dfn> when a new value is
  assigned to it.</p>

  <p>If a DOM object is said to be <dfn id="live">live</dfn>, then the attributes and methods on that object
  must operate on the actual underlying data, not a snapshot of the
  data.</p>

  <p>In the contexts of events, the terms <i>fire</i> and <i>dispatch</i> are used as defined in the
  DOM specification: <dfn id="concept-event-fire">firing</dfn> an event means to create and <a href="infrastructure.html#concept-event-dispatch" id="scripting-2:concept-event-dispatch">dispatch</a> it, and <dfn id="concept-event-dispatch">dispatching</dfn> an event means to follow the steps that propagate
  the event through the tree. The term <dfn id="concept-events-trusted">trusted event</dfn> is
  used to refer to events whose <code id="scripting-2:dom-event-istrusted"><a href="infrastructure.html#dom-event-istrusted">isTrusted</a></code> attribute is
  initialised to true. <a href="references.html#refsDOM">[DOM]</a></p></section>


  <section><h4 id="plugins">2.1.5 Plugins</h4>

  <p>The term <dfn id="plugin">plugin</dfn> refers to a user-agent defined set of content handlers used by the
  user agent that can take part in the user agent's rendering of a <code id="plugins:document"><a href="dom.html#document">Document</a></code> object, but
  that neither act as <a href="browsers.html#child-browsing-context" id="plugins:child-browsing-context">child browsing contexts</a> of the
  <code id="plugins:document-2"><a href="dom.html#document">Document</a></code> nor introduce any <code id="plugins:node"><a href="infrastructure.html#node">Node</a></code> objects to the <code id="plugins:document-3"><a href="dom.html#document">Document</a></code>'s
  DOM.</p>

  <p>Typically such content handlers are provided by third parties, though a user agent can also
  designate built-in content handlers as plugins.</p>

  

  <p>A user agent must not consider the types <code id="plugins:text/plain"><a data-x-internal="text/plain" href="http://tools.ietf.org/html/rfc2046#section-4.1.3">text/plain</a></code> and
  <code id="plugins:application/octet-stream"><a data-x-internal="application/octet-stream" href="http://tools.ietf.org/html/rfc2046#section-4.5.1">application/octet-stream</a></code> as having a registered <a href="infrastructure.html#plugin" id="plugins:plugin">plugin</a>.</p> 

  

  <p class="example">One example of a plugin would be a PDF viewer that is instantiated in a
  <a href="browsers.html#browsing-context" id="plugins:browsing-context">browsing context</a> when the user navigates to a PDF file. This would count as a plugin
  regardless of whether the party that implemented the PDF viewer component was the same as that
  which implemented the user agent itself. However, a PDF viewer application that launches separate
  from the user agent (as opposed to using the same interface) is not a plugin by this
  definition.</p>

  <p class="note">This specification does not define a mechanism for interacting with plugins, as it
  is expected to be user-agent- and platform-specific. Some UAs might opt to support a plugin
  mechanism such as the Netscape Plugin API; others might use remote content converters or have
  built-in support for certain types. Indeed, this specification doesn't require user agents to
  support plugins at all. <a href="references.html#refsNPAPI">[NPAPI]</a></p>

  <p>A plugin can be <dfn id="concept-plugin-secure">secured</dfn> if it honors the semantics of
  the <code id="plugins:attr-iframe-sandbox"><a href="semantics.html#attr-iframe-sandbox">sandbox</a></code> attribute.</p>

  <p class="example">For example, a secured plugin would prevent its contents from creating pop-up
  windows when the plugin is instantiated inside a sandboxed <code id="plugins:the-iframe-element"><a href="semantics.html#the-iframe-element">iframe</a></code>.</p>

  

  <p class="warning">Browsers should take extreme care when interacting with external content
  intended for <a href="infrastructure.html#plugin" id="plugins:plugin-2">plugins</a>. When third-party software is run with the same
  privileges as the user agent itself, vulnerabilities in the third-party software become as
  dangerous as those in the user agent.</p>

  <p>Since different users having differents sets of <a href="infrastructure.html#plugin" id="plugins:plugin-3">plugins</a> provides a
  fingerprinting vector that increases the chances of users being uniquely identified, user agents
  are encouraged to support the exact same set of <a href="infrastructure.html#plugin" id="plugins:plugin-4">plugins</a> for each
  user.
  <a href="introduction.html#fingerprinting-vector" id="plugins:fingerprinting-vector" class="fingerprint" title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src="img/fingerprint.png" width="46" height="64"></a>
  </p></section>

  



  <section><h4 id="encoding-terminology">2.1.6 Character encodings</h4>

  <p>A <dfn id="encoding">character encoding</dfn>, or just <i>encoding</i> where that is not
  ambiguous, is a defined way to convert between byte streams and Unicode strings, as defined in the
  WHATWG Encoding standard. An <a href="infrastructure.html#encoding" id="encoding-terminology:encoding">encoding</a> has an <dfn id="encoding-name">encoding name</dfn> and one or more
  <dfn id="encoding-label">encoding labels</dfn>, referred to as the encoding's <i>name</i> and
  <i>labels</i> in the Encoding standard. <a href="references.html#refsENCODING">[ENCODING]</a></p>

  <p>An <dfn id="ascii-compatible-character-encoding">ASCII-compatible character encoding</dfn> is a single-byte or variable-length
  <a href="infrastructure.html#encoding" id="encoding-terminology:encoding-2">encoding</a> in which the bytes 0x09, 0x0A, 0x0C, 0x0D, 0x20 - 0x22, 0x26, 0x27, 0x2C -
  0x3F, 0x41 - 0x5A, and 0x61 - 0x7A, ignoring bytes that are the second and later bytes of multibyte
  sequences, all correspond to single-byte sequences that map to the same Unicode characters as
  those bytes in Windows-1252. <a href="references.html#refsENCODING">[ENCODING]</a></p>

  <p class="note">This includes such encodings as Shift_JIS, HZ-GB-2312, and variants of ISO-2022,
  even though it is possible in these encodings for bytes like 0x70 to be part of longer sequences
  that are unrelated to their interpretation as ASCII. It excludes UTF-16 variants, as well as
  obsolete legacy encodings such as UTF-7, GSM03.38, and EBCDIC variants.</p>

  

  <p>The term <dfn id="a-utf-16-encoding">a UTF-16 encoding</dfn> refers to any variant of UTF-16: UTF-16LE or UTF-16BE,
  regardless of the presence or absence of a BOM. <a href="references.html#refsENCODING">[ENCODING]</a></p>

  <p>The term <dfn id="code-unit">code unit</dfn> is used as defined in the Web IDL specification: a 16 bit
  unsigned integer, the smallest atomic component of a <code id="encoding-terminology:idl-domstring"><a href="infrastructure.html#idl-domstring">DOMString</a></code>. (This is a narrower definition than the one used in
  Unicode, and is not the same as a <i>code point</i>.) <a href="references.html#refsWEBIDL">[WEBIDL]</a></p>

  <p>The term <dfn id="unicode-code-point">Unicode code point</dfn> means a <i>Unicode scalar value</i> where possible, and
  an isolated surrogate code point when not. When a conformance requirement is defined in terms of
  characters or Unicode code points, a pair of <a href="infrastructure.html#code-unit" id="encoding-terminology:code-unit">code units</a> consisting
  of a high surrogate followed by a low surrogate must be treated as the single code point
  represented by the surrogate pair, but isolated surrogates must each be treated as the single code
  point with the value of the surrogate. <a href="references.html#refsUNICODE">[UNICODE]</a></p>

  <p>In this specification, the term <dfn id="character">character</dfn>, when not qualified as <em>Unicode</em>
  character, is synonymous with the term <a href="infrastructure.html#unicode-code-point" id="encoding-terminology:unicode-code-point">Unicode code point</a>.</p>

  <p>The term <dfn id="unicode-character">Unicode character</dfn> is used to mean a <i>Unicode scalar value</i> (i.e. any
  Unicode code point that is not a surrogate code point). <a href="references.html#refsUNICODE">[UNICODE]</a></p>

  <p>The <dfn id="code-unit-length">code-unit length</dfn> of a string is the number of <a href="infrastructure.html#code-unit" id="encoding-terminology:code-unit-2">code
  units</a> in that string.</p>

  <p class="note">This complexity results from the historical decision to define the DOM API in
  terms of 16 bit (UTF-16) <a href="infrastructure.html#code-unit" id="encoding-terminology:code-unit-3">code units</a>, rather than in terms of <a href="infrastructure.html#unicode-character" id="encoding-terminology:unicode-character">Unicode characters</a>.</p></section></section>



  

  <section><h3 id="conformance-requirements">2.2 Conformance requirements</h3>

  <p>All diagrams, examples, and notes in this specification are non-normative, as are all sections
  explicitly marked non-normative. Everything else in this specification is normative.</p>

  <p>The key words "MUST", "MUST NOT",   "SHOULD",
  "SHOULD NOT",  "MAY", and "OPTIONAL" in the normative
  parts of this document are to be interpreted as described in RFC2119. The key word "OPTIONALLY" in
  the normative parts of this document is to be interpreted with the same normative meaning as "MAY"
  and "OPTIONAL". For readability, these words do not appear in all uppercase letters in this
  specification. <a href="references.html#refsRFC2119">[RFC2119]</a></p>

  <p>Requirements phrased in the imperative as part of algorithms (such as "strip any leading space
  characters" or "return false and abort these steps") are to be interpreted with the meaning of the
  key word ("must", "should", "may", etc) used in introducing the algorithm.</p>

  <div class="example">

   <p>For example, were the spec to say:</p>

   <pre>To eat an orange, the user must:
1. Peel the orange.
2. Separate each slice of the orange.
3. Eat the orange slices.</pre>

   <p>...it would be equivalent to the following:</p>

   <pre>To eat an orange:
1. The user must peel the orange.
2. The user must separate each slice of the orange.
3. The user must eat the orange slices.</pre>

   <p>Here the key word is "must".</p>

   <p>The former (imperative) style is generally preferred in this specification for stylistic
   reasons.</p>

  </div>

  <p>Conformance requirements phrased as algorithms or specific steps may be implemented in any
  manner, so long as the end result is equivalent. (In particular, the algorithms defined in this
  specification are intended to be easy to follow, and not intended to be performant.)</p>

  



  

  <section><h4 id="conformance-classes">2.2.1 Conformance classes</h4>

  <p>This specification describes the conformance criteria for user agents
  (relevant to implementors) and documents (relevant to authors and
  authoring tool implementors).</p>

  <p><dfn id="conforming-documents">Conforming documents</dfn> are those that comply with all the conformance criteria for
  documents. For readability, some of these conformance requirements are phrased as conformance
  requirements on authors; such requirements are implicitly requirements on documents: by
  definition, all documents are assumed to have had an author. (In some cases, that author may
  itself be a user agent — such user agents are subject to additional rules, as explained
  below.)</p>

  <p class="example">For example, if a requirement states that "authors must not use the <code>foobar</code> element", it would imply that documents are not allowed to contain
  elements named <code>foobar</code>.</p>

  <p class="note impl">There is no implied relationship between document conformance requirements
  and implementation conformance requirements. User agents are not free to handle non-conformant
  documents as they please; the processing model described in this specification applies to
  implementations regardless of the conformity of the input documents.</p>

  <p>User agents fall into several (overlapping) categories with different conformance
  requirements.</p>

  <dl><dt id="interactive">Web browsers and other interactive user agents</dt><dd>

    <p>Web browsers that support <a href="the-xhtml-syntax.html#the-xhtml-syntax" id="conformance-classes:the-xhtml-syntax">the XHTML syntax</a> must process elements and attributes
    from the <a href="infrastructure.html#html-namespace-2" id="conformance-classes:html-namespace-2">HTML namespace</a> found in XML documents as described in this specification,
    so that users can interact with them, unless the semantics of those elements have been
    overridden by other specifications.</p>

    <p class="example">A conforming XHTML processor would, upon finding an XHTML <code id="conformance-classes:the-script-element"><a href="semantics.html#the-script-element">script</a></code>
    element in an XML document, execute the script contained in that element. However, if the
    element is found within a transformation expressed in XSLT (assuming the user agent also
    supports XSLT), then the processor would instead treat the <code id="conformance-classes:the-script-element-2"><a href="semantics.html#the-script-element">script</a></code> element as an
    opaque element that forms part of the transform.</p>

    <p>Web browsers that support <a href="syntax.html#syntax" id="conformance-classes:syntax">the HTML syntax</a> must process documents labeled with an
    <a href="infrastructure.html#html-mime-type" id="conformance-classes:html-mime-type">HTML MIME type</a> as described in this specification, so that users can interact with
    them.</p>

    <p>User agents that support scripting must also be conforming implementations of the IDL
    fragments in this specification, as described in the Web IDL specification. <a href="references.html#refsWEBIDL">[WEBIDL]</a></p>

    <p class="note">Unless explicitly stated, specifications that override the semantics of HTML
    elements do not override the requirements on DOM objects representing those elements. For
    example, the <code id="conformance-classes:the-script-element-3"><a href="semantics.html#the-script-element">script</a></code> element in the example above would still implement the
    <code id="conformance-classes:htmlscriptelement"><a href="semantics.html#htmlscriptelement">HTMLScriptElement</a></code> interface.</p>

   </dd><dt id="non-interactive">Non-interactive presentation user agents</dt><dd>

    <p>User agents that process HTML and XHTML documents purely to render non-interactive versions
    of them must comply to the same conformance criteria as Web browsers, except that they are
    exempt from requirements regarding user interaction.</p>

    <p class="note">Typical examples of non-interactive presentation user agents are printers
    (static UAs) and overhead displays (dynamic UAs). It is expected that most static
    non-interactive presentation user agents will also opt to <a href="infrastructure.html#non-scripted">lack scripting
    support</a>.</p>

    <p class="example">A non-interactive but dynamic presentation UA would still execute scripts,
    allowing forms to be dynamically submitted, and so forth. However, since the concept of "focus"
    is irrelevant when the user cannot interact with the document, the UA would not need to support
    any of the focus-related DOM APIs.</p>

   </dd><dt id="renderingUA">Visual user agents that support the suggested default rendering</dt><dd>

    <p>User agents, whether interactive or not, may be designated (possibly as a user option) as
    supporting the suggested default rendering defined by this specification.</p>

    <p>This is not required. In particular, even user agents that do implement the suggested default
    rendering are encouraged to offer settings that override this default to improve the experience
    for the user, e.g. changing the colour contrast, using different focus styles, or otherwise
    making the experience more accessible and usable to the user.</p>

    <p>User agents that are designated as supporting the suggested default rendering must, while so
    designated, implement the rules in <a href="rendering.html#rendering">the rendering section</a> that that
    section defines as the behaviour that user agents are <em>expected</em> to implement.</p>

   </dd><dt id="non-scripted">User agents with no scripting support</dt><dd>

    <p>Implementations that do not support scripting (or which have their scripting features
    disabled entirely) are exempt from supporting the events and DOM interfaces mentioned in this
    specification. For the parts of this specification that are defined in terms of an events model
    or in terms of the DOM, such user agents must still act as if events and the DOM were
    supported.</p>

    <p class="note">Scripting can form an integral part of an application. Web browsers that do not
    support scripting, or that have scripting disabled, might be unable to fully convey the author's
    intent.</p>

   </dd><dt>Conformance checkers</dt><dd id="conformance-checkers">

    <p>Conformance checkers must verify that a document conforms to the applicable conformance
    criteria described in this specification. Automated conformance checkers are exempt from
    detecting errors that require interpretation of the author's intent (for example, while a
    document is non-conforming if the content of a <code id="conformance-classes:the-blockquote-element"><a href="semantics.html#the-blockquote-element">blockquote</a></code> element is not a quote,
    conformance checkers running without the input of human judgement do not have to check that
    <code id="conformance-classes:the-blockquote-element-2"><a href="semantics.html#the-blockquote-element">blockquote</a></code> elements only contain quoted material).</p>

    <p>Conformance checkers must check that the input document conforms when parsed without a
    <a href="browsers.html#browsing-context" id="conformance-classes:browsing-context">browsing context</a> (meaning that no scripts are run, and that the parser's
    <a href="syntax.html#scripting-flag" id="conformance-classes:scripting-flag">scripting flag</a> is disabled), and should also check that the input document conforms
    when parsed with a <a href="browsers.html#browsing-context" id="conformance-classes:browsing-context-2">browsing context</a> in which scripts execute, and that the scripts
    never cause non-conforming states to occur other than transiently during script execution
    itself. (This is only a "SHOULD" and not a "MUST" requirement because it has been proven to be
    impossible. <a href="references.html#refsCOMPUTABLE">[COMPUTABLE]</a>)</p>

    <p>The term "HTML validator" can be used to refer to a conformance checker that itself conforms
    to the applicable requirements of this specification.</p>

    <div class="note">

     <p>XML DTDs cannot express all the conformance requirements of this specification. Therefore, a
     validating XML processor and a DTD cannot constitute a conformance checker. Also, since neither
     of the two authoring formats defined in this specification are applications of SGML, a
     validating SGML system cannot constitute a conformance checker either.</p>

     <p>To put it another way, there are three types of conformance criteria:</p>

     <ol><li>Criteria that can be expressed in a DTD.</li><li>Criteria that cannot be expressed by a DTD, but can still be checked by a machine.</li><li>Criteria that can only be checked by a human.</li></ol>

     <p>A conformance checker must check for the first two. A simple DTD-based validator only checks
     for the first class of errors and is therefore not a conforming conformance checker according
     to this specification.</p>

    </div>
   </dd><dt>Data mining tools</dt><dd id="data-mining">

    <p>Applications and tools that process HTML and XHTML documents for reasons other than to either
    render the documents or check them for conformance should act in accordance with the semantics
    of the documents that they process.</p>

    <p class="example">A tool that generates <a href="semantics.html#outline" id="conformance-classes:outline">document outlines</a> but
    increases the nesting level for each paragraph and does not increase the nesting level for each
    section would not be conforming.</p>

   </dd><dt id="editors">Authoring tools and markup generators</dt><dd>

    <p>Authoring tools and markup generators must generate <a href="infrastructure.html#conforming-documents" id="conformance-classes:conforming-documents">conforming documents</a>.
    Conformance criteria that apply to authors also apply to authoring tools, where appropriate.</p>

    <p>Authoring tools are exempt from the strict requirements of using elements only for their
    specified purpose, but only to the extent that authoring tools are not yet able to determine
    author intent. However, authoring tools must not automatically misuse elements or encourage
    their users to do so.</p>

    <p class="example">For example, it is not conforming to use an <code id="conformance-classes:the-address-element"><a href="semantics.html#the-address-element">address</a></code> element for
    arbitrary contact information; that element can only be used for marking up contact information
    for the author of the document or section. However, since an authoring tool is likely unable to
    determine the difference, an authoring tool is exempt from that requirement. This does not mean,
    though, that authoring tools can use <code id="conformance-classes:the-address-element-2"><a href="semantics.html#the-address-element">address</a></code> elements for any block of italics text
    (for instance); it just means that the authoring tool doesn't have to verify that when the user
    uses a tool for inserting contact information for a section, that the user really is doing that
    and not inserting something else instead.</p>

    <p class="note">In terms of conformance checking, an editor has to output documents that conform
    to the same extent that a conformance checker will verify.</p>

    <p>When an authoring tool is used to edit a non-conforming document, it may preserve the
    conformance errors in sections of the document that were not edited during the editing session
    (i.e. an editing tool is allowed to round-trip erroneous content). However, an authoring tool
    must not claim that the output is conformant if errors have been so preserved.</p>

    <p>Authoring tools are expected to come in two broad varieties: tools that work from structure
    or semantic data, and tools that work on a What-You-See-Is-What-You-Get media-specific editing
    basis (WYSIWYG).</p>

    <p>The former is the preferred mechanism for tools that author HTML, since the structure in the
    source information can be used to make informed choices regarding which HTML elements and
    attributes are most appropriate.</p>

    <p>However, WYSIWYG tools are legitimate. WYSIWYG tools should use elements they know are
    appropriate, and should not use elements that they do not know to be appropriate. This might in
    certain extreme cases mean limiting the use of flow elements to just a few elements, like
    <code id="conformance-classes:the-div-element"><a href="semantics.html#the-div-element">div</a></code>, <code id="conformance-classes:the-b-element"><a href="semantics.html#the-b-element">b</a></code>, <code id="conformance-classes:the-i-element"><a href="semantics.html#the-i-element">i</a></code>, and <code id="conformance-classes:the-span-element"><a href="semantics.html#the-span-element">span</a></code> and making liberal use
    of the <code id="conformance-classes:the-style-attribute"><a href="dom.html#the-style-attribute">style</a></code> attribute.</p>

    <p>All authoring tools, whether WYSIWYG or not, should make a best effort attempt at enabling
    users to create well-structured, semantically rich, media-independent content.</p>

   </dd></dl>

  <p id="hardwareLimitations">User agents may impose implementation-specific limits on otherwise
  unconstrained inputs, e.g. to prevent denial of service attacks, to guard against running out of
  memory, or to work around platform-specific limitations.
  <a href="introduction.html#fingerprinting-vector" id="conformance-classes:fingerprinting-vector" class="fingerprint" title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src="img/fingerprint.png" width="46" height="64"></a>
  </p>

  <p>For compatibility with existing content and prior specifications, this specification describes
  two authoring formats: one based on XML (referred to as <a href="the-xhtml-syntax.html#the-xhtml-syntax" id="conformance-classes:the-xhtml-syntax-2">the XHTML syntax</a>), and one
  using a <a href="syntax.html#writing">custom format</a> inspired by SGML (referred to as <a href="syntax.html#syntax" id="conformance-classes:syntax-2">the HTML
  syntax</a>). Implementations must support at least one of these two formats, although
  supporting both is encouraged.</p>

  <p>Some conformance requirements are phrased as requirements on elements, attributes, methods or
  objects. Such requirements fall into two categories: those describing content model restrictions,
  and those describing implementation behaviour. Those in the former category are requirements on
  documents and authoring tools. Those in the second category are requirements on user agents.
  Similarly, some conformance requirements are phrased as requirements on authors; such requirements
  are to be interpreted as conformance requirements on the documents that authors produce. (In other
  words, this specification does not distinguish between conformance criteria on authors and
  conformance criteria on documents.)</p></section>

  


  <section><h4 id="dependencies">2.2.2 Dependencies</h4>

  <p>This specification relies on several other underlying specifications.</p>

  <dl><dt>Unicode and Encoding</dt><dd>

    <p>The Unicode character set is used to represent textual data, and the WHATWG Encoding standard
    defines requirements around <a href="infrastructure.html#encoding" id="dependencies:encoding">character encodings</a>. <a href="references.html#refsUNICODE">[UNICODE]</a></p>

    <p class="note">This specification <a href="infrastructure.html#encoding-terminology">introduces terminology</a>
    based on the terms defined in those specifications, as described earlier.</p>

    <p>The following terms are used as defined in the WHATWG Encoding standard: <a href="references.html#refsENCODING">[ENCODING]</a></p>

    <ul class="brief"><li><dfn id="getting-an-encoding"><a href="https://encoding.spec.whatwg.org/#concept-encoding-get">Getting an encoding</a></dfn>

     </li><li>The <dfn id="encoder">encoder</dfn> and <dfn id="decoder">decoder</dfn> algorithms for various encodings, including
     the <dfn id="utf-8-encoder">UTF-8 encoder</dfn> and <dfn id="utf-8-decoder">UTF-8 decoder</dfn>

     </li><li>The generic <dfn id="decode">decode</dfn> algorithm which takes a byte stream and an encoding and
     returns a character stream

     </li><li>The <dfn id="utf-8-decode">UTF-8 decode</dfn> algorithm which takes a byte stream and returns a character
     stream, additionally stripping one leading UTF-8 Byte Order Mark (BOM), if any

    </li></ul>

    <p class="note">The <a href="infrastructure.html#utf-8-decoder" id="dependencies:utf-8-decoder">UTF-8 decoder</a> is distinct from the <i id="dependencies:utf-8-decode"><a href="infrastructure.html#utf-8-decode">UTF-8 decode algorithm</a></i>. The latter first strips a Byte Order Mark (BOM), if any, and
    then invokes the former.</p>

    <p>For readability, character encodings are sometimes referenced in this specification with a
    case that differs from the canonical case given in the WHATWG Encoding standard. (For example,
    "UTF-16LE" instead of "utf-16le".)</p>

   </dd><dt>XML and related specifications</dt><dd>

    <p>Implementations that support <a href="the-xhtml-syntax.html#the-xhtml-syntax" id="dependencies:the-xhtml-syntax">the XHTML syntax</a> must support some version of XML,
    as well as its corresponding namespaces specification, because that syntax uses an XML
    serialisation with namespaces. <a href="references.html#refsXML">[XML]</a> <a href="references.html#refsXMLNS">[XMLNS]</a></p>

    <p>The attribute with the tag name <dfn id="attr-xml-space"><code>xml:space</code></dfn> in
    the <a href="infrastructure.html#xml-namespace" id="dependencies:xml-namespace">XML namespace</a> is defined by the XML specification. <a href="references.html#refsXML">[XML]</a></p>

    <p>This specification also references the <dfn id="xml-stylesheet"><a href="http://www.w3.org/TR/xml-stylesheet/#the-xml-stylesheet-processing-instruction"><code>&lt;?xml-stylesheet?&gt;</code></a></dfn>
    processing instruction, defined in the <cite>Associating Style Sheets with XML documents</cite>
    specification. <a href="references.html#refsXMLSSPI">[XMLSSPI]</a></p>

    <p>This specification also non-normatively mentions the <dfn id="xsltprocessor"><code>XSLTProcessor</code></dfn>
    interface and its <dfn id="dom-xsltprocessor-transformtofragment"><code>transformToFragment()</code></dfn> and <dfn id="dom-xsltprocessor-transformtodocument"><code>transformToDocument()</code></dfn> methods.</p>
    

   </dd><dt>URLs</dt><dd>

    <p>The following terms are defined in the WHATWG URL standard: <a href="references.html#refsURL">[URL]</a></p>

    <ul class="brief"><li><dfn id="url">URL</dfn>
     </li><li><dfn id="concept-url-origin"><a href="https://url.spec.whatwg.org/#concept-url-origin">Origin</a></dfn> of URLs
     </li><li><dfn id="absolute-url">Absolute URL</dfn>
     </li><li><dfn id="relative-url">Relative URL</dfn>
     </li><li><dfn id="concept-url-scheme-relative">Relative schemes</dfn>
     </li><li>The <dfn id="url-parser">URL parser</dfn>
     </li><li><dfn id="parsed-url">Parsed URL</dfn>
     </li><li>The <dfn id="concept-url-scheme">scheme</dfn> component of a <a href="infrastructure.html#parsed-url" id="dependencies:parsed-url">parsed URL</a>
     </li><li>The <dfn id="concept-url-scheme-data">scheme data</dfn> component of a <a href="infrastructure.html#parsed-url" id="dependencies:parsed-url-2">parsed URL</a>
     </li><li>The <dfn id="concept-url-username">username</dfn> component of a <a href="infrastructure.html#parsed-url" id="dependencies:parsed-url-3">parsed URL</a>
     </li><li>The <dfn id="concept-url-password">password</dfn> component of a <a href="infrastructure.html#parsed-url" id="dependencies:parsed-url-4">parsed URL</a>
     </li><li>The <dfn id="concept-url-host">host</dfn> component of a <a href="infrastructure.html#parsed-url" id="dependencies:parsed-url-5">parsed URL</a>
     </li><li>The <dfn id="concept-url-port">port</dfn> component of a <a href="infrastructure.html#parsed-url" id="dependencies:parsed-url-6">parsed URL</a>
     </li><li>The <dfn id="concept-url-path">path</dfn> component of a <a href="infrastructure.html#parsed-url" id="dependencies:parsed-url-7">parsed URL</a>
     </li><li>The <dfn id="concept-url-query">query</dfn> component of a <a href="infrastructure.html#parsed-url" id="dependencies:parsed-url-8">parsed URL</a>
     </li><li>The <dfn id="concept-url-fragment">fragment</dfn> component of a <a href="infrastructure.html#parsed-url" id="dependencies:parsed-url-9">parsed URL</a>
     </li><li><dfn id="concept-url-parse-error">Parse errors</dfn> from the <a href="infrastructure.html#url-parser" id="dependencies:url-parser">URL parser</a>
     </li><li>The <dfn id="concept-url-serialiser">URL serialiser</dfn>
     </li><li><dfn id="default-encode-set">Default encode set</dfn>
     </li><li><dfn id="percent-encode">Percent encode</dfn>
     </li><li><dfn id="utf-8-percent-encode">UTF-8 percent encode</dfn>
     </li><li><dfn id="percent-decode">Percent decode</dfn>
     </li><li><dfn id="decoder-error">Decoder error</dfn>
     </li><li>The <dfn id="domain-to-ascii">domain to ASCII</dfn> algorithm</li><li>The <dfn id="domain-to-unicode">domain to Unicode</dfn> algorithm</li><li><dfn id="urlutils"><code>URLUtils</code></dfn> interface
     </li><li><dfn id="urlutilsreadonly"><code>URLUtilsReadOnly</code></dfn> interface
     </li><li><dfn id="dom-url-href"><code>href</code></dfn> IDL attribute
     </li><li><dfn id="dom-url-protocol"><code>protocol</code></dfn> IDL attribute
     </li><li>The <dfn id="concept-uu-get-the-base">get the base</dfn> hook for <code id="dependencies:urlutils"><a href="infrastructure.html#urlutils">URLUtils</a></code>
     </li><li>The <dfn id="concept-uu-update">update steps</dfn> hook for <code id="dependencies:urlutils-2"><a href="infrastructure.html#urlutils">URLUtils</a></code>
     </li><li>The <dfn id="concept-uu-set-the-input">set the input</dfn> algorithm for <code id="dependencies:urlutils-3"><a href="infrastructure.html#urlutils">URLUtils</a></code>
     </li><li>The <dfn id="concept-uu-query-encoding">query encoding</dfn> of an <code id="dependencies:urlutils-4"><a href="infrastructure.html#urlutils">URLUtils</a></code> object
     </li><li>The <dfn id="concept-uu-input">input</dfn> of an <code id="dependencies:urlutils-5"><a href="infrastructure.html#urlutils">URLUtils</a></code> object
     </li><li>The <dfn id="concept-uu-url">url</dfn> of an <code id="dependencies:urlutils-6"><a href="infrastructure.html#urlutils">URLUtils</a></code> object
    </li></ul>

    <p>A number of schemes and protocols are referenced by this specification also:</p>

    <ul class="brief"><li>The <dfn id="about-protocol"><a href="http://tools.ietf.org/html/rfc6694#section-2"><code>about:</code></a></dfn> scheme <a href="references.html#refsABOUT">[ABOUT]</a>
     </li><li>The <dfn id="blob-protocol"><a href="http://dev.w3.org/2006/webapi/FileAPI/#DefinitionOfScheme"><code>blob:</code></a></dfn> scheme <a href="references.html#refsFILEAPI">[FILEAPI]</a>
     </li><li>The <dfn id="data-protocol"><a href="http://tools.ietf.org/html/rfc2397#section-2"><code>data:</code></a></dfn> scheme <a href="references.html#refsRFC2397">[RFC2397]</a>
     </li><li>The <dfn id="http-protocol"><a href="http://tools.ietf.org/html/rfc7230#section-2.7.1"><code>http:</code></a></dfn> scheme <a href="references.html#refsHTTP">[HTTP]</a>
     </li><li>The <dfn id="https-protocol"><a href="http://tools.ietf.org/html/rfc7230#section-2.7.2"><code>https:</code></a></dfn> scheme <a href="references.html#refsHTTP">[HTTP]</a>
     </li><li>The <dfn id="mailto-protocol"><a href="http://tools.ietf.org/html/rfc6068#section-2"><code>mailto:</code></a></dfn> scheme <a href="references.html#refsMAILTO">[MAILTO]</a>
     </li><li>The <dfn id="sms-protocol"><a href="http://tools.ietf.org/html/rfc5724#section-2"><code>sms:</code></a></dfn> scheme <a href="references.html#refsSMS">[SMS]</a>
     </li><li>The <dfn id="urn-protocol"><a href="http://tools.ietf.org/html/rfc2141#section-2"><code>urn:</code></a></dfn> scheme <a href="references.html#refsURN">[URN]</a>
    </li></ul>

   </dd><dt>HTTP and related specifications</dt><dd>

    <p>The following terms are defined in the HTTP specifications: <a href="references.html#refsHTTP">[HTTP]</a></p>

    <ul class="brief"><li><dfn id="http-accept"><code>Accept</code></dfn> header
     </li><li><dfn id="http-accept-language"><code>Accept-Language</code></dfn> header
     </li><li><dfn id="http-cache-control"><code>Cache-Control</code></dfn> header
     </li><li><dfn id="http-content-disposition"><code>Content-Disposition</code></dfn> header
     </li><li><dfn id="http-content-language"><code>Content-Language</code></dfn> header
     </li><li><dfn id="http-content-length"><code>Content-Length</code></dfn> header
     </li><li><dfn id="http-host"><code>Host</code></dfn> header
     </li><li><dfn id="http-last-modified"><code>Last-Modified</code></dfn> header
     </li><li><dfn id="http-referer"><code>Referer</code></dfn> header
    </li></ul>

    <p>The following term is defined in the Web Origin specification: <a href="references.html#refsORIGIN">[ORIGIN]</a></p>

    <ul class="brief"><li><dfn id="http-origin"><code>Origin</code></dfn> header
    </li></ul>

    <p>The following terms are defined in the Cookie specification: <a href="references.html#refsCOOKIES">[COOKIES]</a></p>

    <ul class="brief"><li><dfn id="cookie-string">cookie-string</dfn>
     </li><li><dfn id="receives-a-set-cookie-string">receives a set-cookie-string</dfn>
     </li><li><dfn id="http-cookie"><code>Cookie</code></dfn> header
    </li></ul>

    <p>The following term is defined in the Web Linking specification: <a href="references.html#refsWEBLINK">[WEBLINK]</a></p>

    <ul class="brief"><li><dfn id="http-link"><code>Link</code></dfn> header
    </li></ul>

   </dd><dt>Fetch</dt><dd>

    <p>The following terms are defined in the WHATWG Fetch specification: <a href="references.html#refsFETCH">[FETCH]</a></p>

    <ul class="brief"><li><dfn id="cross-origin-request">cross-origin request</dfn>
     </li><li><dfn id="cross-origin-request-status">cross-origin request status</dfn>
     </li><li><dfn id="custom-request-headers">custom request headers</dfn>
     </li><li><dfn id="simple-cross-origin-request">simple cross-origin request</dfn>
     </li><li><dfn id="redirect-steps">redirect steps</dfn>
     </li><li><dfn id="omit-credentials-flag">omit credentials flag</dfn>
     </li><li><dfn id="resource-sharing-check">resource sharing check</dfn>
    </li></ul>

    <p class="critical">This specification does not yet use the "fetch" algorithm from the WHATWG
    Fetch specification. It will be updated to do so in due course. Some of the terms mentioned
    above are obsolete; this will be fixed when the spec is updated to use the new algorithm.</p>

   </dd><dt>Web IDL</dt><dd>

    <p>The IDL fragments in this specification must be interpreted as required for conforming IDL
    fragments, as described in the Web IDL specification. <a href="references.html#refsWEBIDL">[WEBIDL]</a></p>

    <p>The following terms are defined in the Web IDL specification:</p>

    <ul class="brief"><li><dfn id="supported-property-indices">Supported property indices</dfn>
     </li><li><dfn id="determine-the-value-of-an-indexed-property">Determine the value of an indexed property</dfn>
     </li><li><dfn id="support-named-properties">Support named properties</dfn>
     </li><li><dfn id="supported-property-names">Supported property names</dfn>
     </li><li><dfn id="unenumerable">Unenumerable</dfn>
     </li><li><dfn id="determine-the-value-of-a-named-property">Determine the value of a named property</dfn>
     </li><li><dfn id="platform-array-objects">Platform array objects</dfn>
     </li><li><dfn id="dfn-read-only-array">Read only</dfn> (when applied to arrays)
     </li><li><dfn id="dfn-callback-this-value">Callback this value</dfn>
     </li><li><dfn id="concept-idl-convert"><a href="http://heycam.github.io/webidl/#es-type-mapping">Converting</a></dfn> between WebIDL types and JS types
     </li><li><dfn id="es-invoking-callback-functions"><a href="http://heycam.github.io/webidl/#es-invoking-callback-functions">invoke the Web IDL callback function</a></dfn>
    </li></ul>

    <p>The Web IDL specification also defines the following types that are used in Web IDL fragments
    in this specification:</p>

    <ul class="brief"><li><dfn id="idl-array"><code>Array</code></dfn>
     </li><li><dfn id="idl-boolean"><code>boolean</code></dfn>
     </li><li><dfn id="idl-boolean-wrapper"><code>Boolean</code></dfn>
     </li><li><dfn id="idl-date"><code>Date</code></dfn>
     </li><li><dfn id="idl-domstring"><code>DOMString</code></dfn>
     </li><li><dfn id="idl-usvstring"><code>USVString</code></dfn>
     </li><li><dfn id="idl-double"><code>double</code></dfn>
     </li><li><dfn id="idl-error"><code>Error</code></dfn>
     </li><li><dfn id="idl-function"><code>Function</code></dfn>
     </li><li><dfn id="idl-long"><code>long</code></dfn>
     </li><li><dfn id="idl-map"><code>Map</code></dfn>
     </li><li><dfn id="idl-number-wrapper"><code>Number</code></dfn>
     </li><li><dfn id="idl-object"><code>Object</code></dfn> 
     </li><li><dfn id="idl-regexp"><code>RegExp</code></dfn>
     </li><li><dfn id="idl-set"><code>Set</code></dfn>
     </li><li><dfn id="idl-string-wrapper"><code>String</code></dfn>
     </li><li><dfn id="idl-unrestricted-double"><code>unrestricted double</code></dfn>
     </li><li><dfn id="idl-unsigned-long"><code>unsigned long</code></dfn>

    </li></ul>

    <p>The term <dfn id="throw">throw</dfn> in this specification is used as defined in the WebIDL
    specification. The following exception names are defined by WebIDL and used by this
    specification:</p>

    <ol class="brief"><li value="1"><dfn id="indexsizeerror"><code>IndexSizeError</code></dfn></li><li value="3"><dfn id="hierarchyrequesterror"><code>HierarchyRequestError</code></dfn></li><li value="5"><dfn id="invalidcharactererror"><code>InvalidCharacterError</code></dfn></li><li value="8"><dfn id="notfounderror"><code>NotFoundError</code></dfn></li><li value="9"><dfn id="notsupportederror"><code>NotSupportedError</code></dfn></li><li value="11"><dfn id="invalidstateerror"><code>InvalidStateError</code></dfn></li><li value="12"><dfn id="syntaxerror"><code>SyntaxError</code></dfn></li><li value="15"><dfn id="invalidaccesserror"><code>InvalidAccessError</code></dfn></li><li value="18"><dfn id="securityerror"><code>SecurityError</code></dfn></li><li value="19"><dfn id="networkerror"><code>NetworkError</code></dfn></li><li value="21"><dfn id="urlmismatcherror"><code>URLMismatchError</code></dfn></li><li value="22"><dfn id="quotaexceedederror"><code>QuotaExceededError</code></dfn></li><li value="23"><dfn id="timeouterror"><code>TimeoutError</code></dfn></li><li value="25"><dfn id="datacloneerror"><code>DataCloneError</code></dfn></li><li><dfn id="typeerror"><code>TypeError</code></dfn></li></ol>

    <p>When this specification requires a user agent to <dfn id="create-a-date-object">create a <code>Date</code> object</dfn> representing a particular time (which could be the
    special value Not-a-Number), the milliseconds component of that time, if any, must be truncated
    to an integer, and the time value of the newly created <code id="dependencies:idl-date"><a href="infrastructure.html#idl-date">Date</a></code>
    object must represent the resulting truncated time.</p>

    <p class="example">For instance, given the time 23045 millionths of a second after 01:00 UTC on
    January 1st 2000, i.e. the time 2000-01-01T00:00:00.023045Z, then the <code id="dependencies:idl-date-2"><a href="infrastructure.html#idl-date">Date</a></code> object created representing that time would represent the same
    time as that created representing the time 2000-01-01T00:00:00.023Z, 45 millionths earlier. If
    the given time is NaN, then the result is a <code id="dependencies:idl-date-3"><a href="infrastructure.html#idl-date">Date</a></code> object that
    represents a time value NaN (indicating that the object does not represent a specific instant of
    time).</p>

   </dd><dt>JavaScript</dt><dd>

    <p>Some parts of the language described by this specification only support JavaScript as the
    underlying scripting language. <a href="references.html#refsECMA262">[ECMA262]</a></p>

    <p class="note">The term "JavaScript" is used to refer to ECMA262, rather than the official term
    ECMAScript, since the term JavaScript is more widely known. Similarly, the <a href="infrastructure.html#mime-type" id="dependencies:mime-type">MIME
    type</a> used to refer to JavaScript in this specification is <code>text/javascript</code>, since that is the most commonly used type, <a href="introduction.html#willful-violation" id="dependencies:willful-violation">despite it being an officially obsoleted type</a> according to RFC
    4329. <a href="references.html#refsRFC4329">[RFC4329]</a></p>

    <p>The term <dfn id="javascript-global-environment">JavaScript global environment</dfn> refers to the <i>global
    environment</i> concept defined in the ECMAScript specification.</p>

    <p>The ECMAScript <dfn id="js-syntaxerror"><code>SyntaxError</code></dfn> exception is also
    defined in the ECMAScript specification. <a href="references.html#refsECMA262">[ECMA262]</a></p>

    <p>The <dfn id="arraybuffer">ArrayBuffer</dfn> and related object types and underlying concepts from the
    ECMAScript Specification are used for several features in this specification. <a href="references.html#refsECMA262">[ECMA262]</a></p>

    <p>The following helper IDL is used for referring to <code id="dependencies:arraybuffer"><a href="infrastructure.html#arraybuffer">ArrayBuffer</a></code>-related types:</p>

    <pre class="idl">typedef (<dfn id="int8array">Int8Array</dfn> or <dfn id="uint8array">Uint8Array</dfn> or <dfn id="uint8clampedarray">Uint8ClampedArray</dfn> or
         <dfn id="int16array">Int16Array</dfn> or <dfn id="uint16array">Uint16Array</dfn> or
         <dfn id="int32array">Int32Array</dfn> or <dfn id="uint32array">Uint32Array</dfn> or
         <dfn id="float32array">Float32Array</dfn> or <dfn id="float64array">Float64Array</dfn> or
         <dfn id="dataview">DataView</dfn>) <dfn id="arraybufferview">ArrayBufferView</dfn>;</pre>

    <p class="note">In particular, the <code id="dependencies:uint8clampedarray"><a href="infrastructure.html#uint8clampedarray">Uint8ClampedArray</a></code> type is used by some <a href="http://www.w3.org/html/wg/drafts/2dcontext/master/#imagedata" id="dependencies:imagedata">2D canvas APIs</a>, and the <a href="http://www.w3.org/TR/websockets/#network"><code>WebSocket</code>
    API</a> uses <code id="dependencies:arraybuffer-2"><a href="infrastructure.html#arraybuffer">ArrayBuffer</a></code> objects for handling binary frames.</p>

   </dd><dt>DOM</dt><dd>

    <p>The Document Object Model (DOM) is a representation — a model — of a document and
    its content. The DOM is not just an API; the conformance criteria of HTML implementations are
    defined, in this specification, in terms of operations on the DOM. <a href="references.html#refsDOM">[DOM]</a></p>

    <p>Implementations must support DOM and the events defined in DOM Events, because this
    specification is defined in terms of the DOM, and some of the features are defined as extensions
    to the DOM interfaces. <a href="references.html#refsDOM">[DOM]</a> <a href="references.html#refsDOMEVENTS">[DOMEVENTS]</a></p>

    <p>In particular, the following features are defined in the DOM specification: <a href="references.html#refsDOM">[DOM]</a></p> 

    <ul class="brief"><li><dfn id="attr"><code>Attr</code></dfn> interface</li><li><dfn id="comment-2"><code>Comment</code></dfn> interface</li><li><dfn id="domimplementation"><code>DOMImplementation</code></dfn> interface</li><li><dfn id="dom-document"><code>Document</code></dfn> interface</li><li><dfn id="xmldocument"><code>XMLDocument</code></dfn> interface</li><li><dfn id="documentfragment"><code>DocumentFragment</code></dfn> interface</li><li><dfn id="documenttype"><code>DocumentType</code></dfn> interface</li><li><dfn id="childnode"><code>ChildNode</code></dfn> interface</li><li><dfn id="element"><code>Element</code></dfn> interface</li><li><dfn id="node"><code>Node</code></dfn> interface</li><li><dfn id="nodelist"><code>NodeList</code></dfn> interface</li><li><dfn id="processinginstruction"><code>ProcessingInstruction</code></dfn> interface</li><li><dfn id="text"><code>Text</code></dfn> interface</li><li><dfn id="node-document"><a href="https://dom.spec.whatwg.org/#concept-node-document">node document</a></dfn> concept</li><li><dfn id="htmlcollection"><code>HTMLCollection</code></dfn> interface</li><li><dfn id="dom-htmlcollection-length"><code>HTMLCollection.length</code></dfn> attribute</li><li><dfn id="dom-htmlcollection-item"><code>HTMLCollection.item()</code></dfn> method</li><li><dfn id="dom-htmlcollection-nameditem"><code>HTMLCollection.namedItem()</code></dfn> method</li><li>The terms <dfn id="collections">collections</dfn> and <dfn id="represented-by-the-collection">represented by the collection</dfn></li><li><dfn id="domtokenlist"><code>DOMTokenList</code></dfn> interface</li><li><dfn id="domsettabletokenlist"><code>DOMSettableTokenList</code></dfn> interface</li><li><dfn id="dom-domsettabletokenlist-value"><code>DOMSettableTokenList.value</code></dfn> attribute</li><li><dfn id="dom-domimplementation-createdocument"><code>createDocument()</code></dfn> method</li><li><dfn id="dom-domimplementation-createhtmldocument"><code>createHTMLDocument()</code></dfn> method</li><li><dfn id="dom-document-createelement"><code>createElement()</code></dfn> method</li><li><dfn id="dom-document-createelementns"><code>createElementNS()</code></dfn> method</li><li><dfn id="dom-document-getelementbyid"><code>getElementById()</code></dfn> method</li><li><dfn id="dom-document-getelementsbyclassname"><code>getElementsByClassName()</code></dfn> method</li><li><dfn id="dom-node-insertbefore"><code>insertBefore()</code></dfn> method</li><li><dfn id="dom-node-appendchild"><code>appendChild()</code></dfn> method</li><li><dfn id="dom-node-clonenode"><code>cloneNode()</code></dfn> method</li><li><dfn id="dom-document-importnode"><code>importNode()</code></dfn> method</li><li><dfn id="dom-node-childnodes"><code>childNodes</code></dfn> attribute</li><li><dfn id="dom-node-localname"><code>localName</code></dfn> attribute</li><li><dfn id="dom-node-parentnode"><code>parentNode</code></dfn> attribute</li><li><dfn id="dom-node-namespaceuri"><code>namespaceURI</code></dfn> attribute</li><li><dfn id="dom-element-tagname"><code>tagName</code></dfn> attribute</li><li><dfn id="dom-element-id"><code>id</code></dfn> attribute</li><li><dfn id="textcontent"><code>textContent</code></dfn> attribute</li><li>The <dfn id="concept-node-insert">insert</dfn>, <dfn id="concept-node-append">append</dfn>, <dfn id="concept-node-remove">remove</dfn>, <dfn id="concept-node-replace">replace</dfn>, and <dfn id="concept-node-adopt">adopt</dfn> algorithms for nodes</li><li>The <dfn id="concept-node-insert-ext"><a href="https://dom.spec.whatwg.org/#concept-node-insert-ext">insertion steps</a></dfn>,
             <dfn id="concept-node-remove-ext"><a href="https://dom.spec.whatwg.org/#concept-node-remove-ext">removing steps</a></dfn>,
         and <dfn id="concept-node-adopt-ext"><a href="https://dom.spec.whatwg.org/#concept-node-adopt-ext">adopting steps</a></dfn> hooks</li><li>The <dfn id="attribute-list">attribute list</dfn> concept.</li><li>The <dfn id="concept-cd-data">data</dfn> of a text node.</li><li><dfn id="event"><code>Event</code></dfn> interface</li><li><dfn id="eventtarget"><code>EventTarget</code></dfn> interface</li><li><dfn id="eventinit"><code>EventInit</code></dfn> dictionary type</li><li><dfn id="dom-event-target"><code>target</code></dfn> attribute</li><li><dfn id="dom-event-currenttarget"><code>currentTarget</code></dfn> attribute</li><li><dfn id="dom-event-istrusted"><code>isTrusted</code></dfn> attribute</li><li><dfn id="dom-event-initevent"><code>initEvent()</code></dfn> method</li><li><dfn id="dom-eventtarget-addeventlistener"><code>addEventListener()</code></dfn> method</li><li>The <dfn id="concept-event-type">type</dfn> of an event</li><li>The concept of an <dfn id="concept-event-listener">event listener</dfn> and the <a href="infrastructure.html#concept-event-listener" id="dependencies:concept-event-listener">event listeners</a> associated with an <code id="dependencies:eventtarget"><a href="infrastructure.html#eventtarget">EventTarget</a></code></li><li>The concept of a <dfn id="concept-event-target-override">target override</dfn></li><li>The concept of a regular <dfn id="event-parent">event parent</dfn> and a <dfn id="cross-boundary-event-parent">cross-boundary event parent</dfn></li><li>The <dfn id="document's-character-encoding">encoding</dfn> (herein the <i>character encoding</i>) and <dfn id="concept-document-content-type">content type</dfn> of a <code id="dependencies:document"><a href="dom.html#document">Document</a></code></li><li>The distinction between <dfn id="xml-documents">XML documents</dfn> and <dfn id="html-documents">HTML documents</dfn></li><li>The terms <dfn id="quirks-mode">quirks mode</dfn>, <dfn id="limited-quirks-mode">limited-quirks mode</dfn>, and <dfn id="no-quirks-mode">no-quirks mode</dfn></li><li>The algorithm to <dfn id="concept-node-clone">clone</dfn> a <code id="dependencies:node"><a href="infrastructure.html#node">Node</a></code>, and the concept of <dfn id="concept-node-clone-ext">cloning steps</dfn> used by that algorithm</li><li>The concept of <dfn id="base-url-change-steps">base URL change steps</dfn> and the definition of what happens when an element is <dfn id="affected-by-a-base-url-change">affected by a base URL change</dfn></li><li>The concept of an element's <dfn id="concept-id">unique identifier (ID)</dfn></li><li>The concept of a DOM <dfn id="concept-range">range</dfn>, and the terms <dfn id="concept-range-start">start</dfn>, <dfn id="concept-range-end">end</dfn>, and <dfn id="concept-range-bp">boundary point</dfn> as applied to ranges.</li><li><dfn id="mutationobserver"><code>MutationObserver</code></dfn> interface and <dfn id="mutation-observers"><a href="https://dom.spec.whatwg.org/#mutation-observers">mutation observers</a></dfn> in general</li><li><dfn id="promise">Promise</dfn> interface</li><li>The <dfn id="concept-resolver">resolver</dfn> concept</li><li>The <dfn id="concept-resolver-fulfill">fulfill</dfn> and <dfn id="concept-resolver-reject">reject</dfn> algorithms</li></ul>

    <p>The following features are defined in the DOM Events specification: <a href="references.html#refsDOMEVENTS">[DOMEVENTS]</a></p>

    <ul class="brief"><li><dfn id="mouseevent"><code>MouseEvent</code></dfn> interface</li><li>The <code id="dependencies:mouseevent"><a href="infrastructure.html#mouseevent">MouseEvent</a></code> interface's <dfn id="dom-mouseevent-relatedtarget"><code>relatedTarget</code></dfn> attribute</li><li><dfn id="mouseeventinit"><code>MouseEventInit</code></dfn> dictionary type</li><li>The <dfn id="focusevent"><code>FocusEvent</code></dfn> interface</li><li>The <code id="dependencies:focusevent"><a href="infrastructure.html#focusevent">FocusEvent</a></code> interface's <dfn id="dom-focusevent-relatedtarget"><code>relatedTarget</code></dfn> attribute</li><li>The <dfn id="uievent"><a href="https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3-Events.html#interface-UIEvent"><code>UIEvent</code></a></dfn> interface</li><li>The <code id="dependencies:uievent"><a data-x-internal="uievent" href="https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3-Events.html#interface-UIEvent">UIEvent</a></code> interface's <dfn id="dom-uievent-view"><code>view</code></dfn> attribute</li><li>The <code id="dependencies:uievent-2"><a data-x-internal="uievent" href="https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3-Events.html#interface-UIEvent">UIEvent</a></code> interface's <dfn id="dom-uievent-detail"><code>detail</code></dfn> attribute</li><li><dfn id="event-click"><code>click</code></dfn> event</li><li><dfn id="event-dblclick"><code>dblclick</code></dfn> event</li><li><dfn id="event-mousedown"><code>mousedown</code></dfn> event</li><li><dfn id="event-mouseenter"><code>mouseenter</code></dfn> event</li><li><dfn id="event-mouseleave"><code>mouseleave</code></dfn> event</li><li><dfn id="event-mousemove"><code>mousemove</code></dfn> event</li><li><dfn id="event-mouseout"><code>mouseout</code></dfn> event</li><li><dfn id="event-mouseover"><code>mouseover</code></dfn> event</li><li><dfn id="event-mouseup"><code>mouseup</code></dfn> event</li><li><dfn id="event-mousewheel"><code>mousewheel</code></dfn> event</li><li><dfn id="event-keydown"><code>keydown</code></dfn> event</li><li><dfn id="event-keyup"><code>keyup</code></dfn> event</li><li><dfn id="event-keypress"><code>keypress</code></dfn> event</li></ul>

    <p>The following features are defined in the Touch Events specification: <a href="references.html#refsTOUCH">[TOUCH]</a></p>

    <ul class="brief"><li><dfn id="touch"><code>Touch</code></dfn> interface</li><li><dfn id="touch-point">Touch point</dfn> concept</li></ul>

    <p>This specification sometimes uses the term <dfn>name</dfn> to refer to the event's
    <a href="infrastructure.html#concept-event-type" id="dependencies:concept-event-type">type</a>; as in, "an event named <code>click</code>" or "if the event name is <code>keypress</code>". The terms
    "name" and "type" for events are synonymous.</p>

    <p>The following features are defined in the <cite lang="en-US">DOM Parsing and
    Serialization</cite> specification: <a href="references.html#refsDOMPARSING">[DOMPARSING]</a></p>

    <ul class="brief"><li><dfn id="domparser"><a href="https://dvcs.w3.org/hg/innerhtml/raw-file/tip/index.html#the-domparser-interface"><code>DOMParser</code></a></dfn></li><li><dfn id="dom-innerhtml"><code>innerHTML</code></dfn></li><li><dfn id="dom-outerhtml"><code>outerHTML</code></dfn></li></ul>

    <p>The <dfn id="selection"><code>Selection</code></dfn> interface is defined in the <cite>HTML Editing
    APIs</cite> specification. <a href="references.html#refsEDITING">[EDITING]</a></p>

    <p class="note">User agents are encouraged to implement the features described in the <cite>HTML
    Editing APIs</cite> 
    specification. <a href="references.html#refsEDITING">[EDITING]</a>  </p>

    <p>The following parts of the Fullscreen specification are referenced from this specification,
    in part to define the rendering of <code id="dependencies:the-dialog-element"><a href="semantics.html#the-dialog-element">dialog</a></code> elements, and also to define how the
    Fullscreen API interacts with the sandboxing features in HTML: <a href="references.html#refsFULLSCREEN">[FULLSCREEN]</a></p>

    <ul class="brief"><li>The <dfn id="top-layer">top layer</dfn> concept</li><li><dfn id="dom-element-requestfullscreen"><code>requestFullscreen()</code></dfn>
     </li><li>The <dfn id="fullscreen-enabled-flag">fullscreen enabled flag</dfn></li><li>The <dfn id="fully-exit-fullscreen">fully exit fullscreen</dfn> algorithm</li></ul>

    <p>The <cite>High Resolution Time</cite> specification provides the
    <dfn id="performance"><code>Performance</code></dfn> object's <dfn id="dom-performance-now"><code>now()</code></dfn> method. <a href="references.html#refsHRT">[HRT]</a></p>

   </dd><dt>File API</dt><dd>

    <p>This specification uses the following features defined in the File API specification: <a href="references.html#refsFILEAPI">[FILEAPI]</a></p>

    <ul class="brief"><li><dfn id="blob"><code>Blob</code></dfn> interface</li><li><dfn id="file"><code>File</code></dfn> interface</li><li><dfn id="filelist"><code>FileList</code></dfn> interface</li><li><dfn id="dom-blob-close"><code>Blob.close()</code></dfn></li><li><dfn id="dom-blob-type"><code>Blob.type</code></dfn></li><li>The concept of <dfn id="file-error-read">read errors</dfn></li></ul>

   </dd><dt>Media Providers</dt><dd>

    <p>This specification references the following interfaces:</p>

    <ul class="brief"><li><dfn id="mediastream"><code>MediaStream</code></dfn> <a href="references.html#refsMEDIASTREAM">[MEDIASTREAM]</a></li><li><dfn id="mediasource"><code>MediaSource</code></dfn> <a href="references.html#refsMEDIASOURCE">[MEDIASOURCE]</a></li></ul>

   </dd><dt>XMLHttpRequest</dt><dd>

    <p>This specification references the XMLHttpRequest specification to describe how the two
    specifications interact and to use its <code id="dependencies:progressevent"><a href="infrastructure.html#progressevent">ProgressEvent</a></code> features. The following
    features and terms are defined in the XMLHttpRequest specification: <a href="references.html#refsXHR">[XHR]</a></p>

    <ul class="brief"><li><dfn id="xmlhttprequest"><code>XMLHttpRequest</code></dfn> interface
     </li><li><dfn id="dom-xmlhttprequest-responsexml"><code>XMLHttpRequest.responseXML</code></dfn> attribute

     </li><li><dfn id="progressevent"><code>ProgressEvent</code></dfn> interface
     </li><li><dfn id="dom-progressevent-lengthcomputable"><code>ProgressEvent.lengthComputable</code></dfn> attribute
     </li><li><dfn id="dom-progressevent-loaded"><code>ProgressEvent.loaded</code></dfn> attribute
     </li><li><dfn id="dom-progressevent-total"><code>ProgressEvent.total</code></dfn> attribute
     </li><li><dfn id="fire-a-progress-event">Fire a progress event named <var>e</var></dfn>

    </li></ul>

   </dd><dt>Media Queries</dt><dd>

    <p>Implementations must support the Media Queries language. <a href="references.html#refsMQ">[MQ]</a></p>

   </dd><dt>CSS modules</dt><dd>

    <p>While support for CSS as a whole is not required of implementations of this specification
    (though it is encouraged, at least for Web browsers), some features are defined in terms of
    specific CSS requirements.</p>

    <p>When this specification requires that something be <dfn id="parse-something-according-to-a-css-grammar"><a href="http://dev.w3.org/csswg/css-syntax/#parse-something-according-to-a-css-grammar">parsed
    according to a particular CSS grammar</a></dfn>, the relevant algorithm in the CSS Syntax
    specification must be followed. <a href="references.html#refsCSSSYNTAX">[CSSSYNTAX]</a></p>

    <p>In particular, some features require that a string be <dfn id="parsed-as-a-css-color-value">parsed as a CSS &lt;color&gt;
    value</dfn>. When parsing a CSS value, user agents are required by the CSS specifications to
    apply some error handling rules. These apply to this specification also. <a href="references.html#refsCSSCOLOR">[CSSCOLOR]</a> <a href="references.html#refsCSS">[CSS]</a></p>

    <p class="example">For example, user agents are required to close all open constructs upon
    finding the end of a style sheet unexpectedly. Thus, when parsing the string "<code>rgb(0,0,0</code>" (with a missing close-parenthesis) for a colour value, the close
    parenthesis is implied by this error handling rule, and a value is obtained (the colour 'black').
    However, the similar construct "<code>rgb(0,0,</code>" (with both a missing parenthesis
    and a missing "blue" value) cannot be parsed, as closing the open construct does not result in a
    viable value.</p>

    <p>The term <dfn id="named-colour"><a href="http://dev.w3.org/csswg/css-color/#named-color">named colour</a></dfn>
    is defined in the CSS Color specification. <a href="references.html#refsCSSCOLOR">[CSSCOLOR]</a></p>

    <p>The term <dfn id="css-element-reference-identifier">CSS element reference identifier</dfn> is used as defined in the <cite>CSS
    Image Values and Replaced Content</cite> specification to define the API that declares
    identifiers for use with the CSS 'element()' function. <a href="references.html#refsCSSIMAGES">[CSSIMAGES]</a></p>

    <p>Similarly, the term <dfn id="provides-a-paint-source">provides a paint source</dfn> is used as defined in the <cite>CSS
    Image Values and Replaced Content</cite> specification to define the interaction of certain HTML
    elements with the CSS 'element()' function. <a href="references.html#refsCSSIMAGES">[CSSIMAGES]</a></p>

    <p>The term <dfn id="default-object-size">default object size</dfn> is also defined in the <cite>CSS Image Values and
    Replaced Content</cite> specification. <a href="references.html#refsCSSIMAGES">[CSSIMAGES]</a></p>

    <p>Implementations that support scripting must support the CSS Object Model. The following
    features and terms are defined in the CSSOM specifications: <a href="references.html#refsCSSOM">[CSSOM]</a> <a href="references.html#refsCSSOMVIEW">[CSSOMVIEW]</a>

    </p><ul class="brief"><li><dfn id="screen"><code>Screen</code></dfn> interface</li><li><dfn id="linkstyle"><code>LinkStyle</code></dfn> interface</li><li><dfn id="cssstyledeclaration"><code>CSSStyleDeclaration</code></dfn> interface</li><li><dfn id="dom-cssstyledeclaration-csstext"><code>cssText</code></dfn> attribute of <code id="dependencies:cssstyledeclaration"><a href="infrastructure.html#cssstyledeclaration">CSSStyleDeclaration</a></code></li><li><dfn id="stylesheet"><code>StyleSheet</code></dfn> interface</li><li>The terms <dfn id="create-a-css-style-sheet">create a CSS style sheet</dfn>, <dfn id="remove-a-css-style-sheet">remove a CSS style sheet</dfn>, and <dfn id="associated-css-style-sheet">associated CSS style sheet</dfn></li><li><dfn id="css-style-sheet">CSS style sheets</dfn> and their properties:
         <dfn id="concept-css-style-sheet-type">type</dfn>,
         <dfn id="concept-css-style-sheet-location">location</dfn>,
         <dfn id="concept-css-style-sheet-parent-css-style-sheet">parent CSS style sheet</dfn>,
         <dfn id="concept-css-style-sheet-owner-node">owner node</dfn>,
         <dfn id="concept-css-style-sheet-owner-css-rule">owner CSS rule</dfn>,
         <dfn id="concept-css-style-sheet-media">media</dfn>,
         <dfn id="concept-css-style-sheet-title">title</dfn>,
         <dfn id="concept-css-style-sheet-alternate-flag">alternate flag</dfn>,
         <dfn id="concept-css-style-sheet-disabeld-flag">disabled flag</dfn>,
         <dfn id="concept-css-style-sheet-css-rules">CSS rules</dfn>,
         <dfn id="concept-css-style-sheet-origin-clean-flag">origin-clean flag</dfn>
     </li><li><dfn id="alternative-style-sheet-sets">Alternative style sheet sets</dfn> and the <dfn id="preferred-style-sheet-set">preferred style sheet set</dfn></li><li><dfn id="serialising-a-css-value">Serialising a CSS value</dfn></li><li><dfn id="scroll-an-element-into-view">Scroll an element into view</dfn></li><li><dfn id="scroll-to-the-beginning-of-the-document">Scroll to the beginning of the document</dfn></li><li>The <dfn id="event-resize"><code>resize</code></dfn> event</li><li>The <dfn id="event-scroll"><code>scroll</code></dfn> event</li><li><dfn id="dom-open-features"><a href="http://dev.w3.org/csswg/cssom-view/#the-features-argument-to-the-open()-method">The <var>features</var> argument of <code>window.open</code></a></dfn>
    </li></ul>

    <p>The term <dfn id="environment-encoding">environment encoding</dfn> is defined in the <cite>CSS Syntax</cite>
    specifications. <a href="references.html#refsCSSSYNTAX">[CSSSYNTAX]</a></p>

    <p>The term <dfn id="css-styling-attribute">CSS styling attribute</dfn> is defined in the <cite>CSS Style Attributes</cite>
    specification. <a href="references.html#refsCSSATTR">[CSSATTR]</a></p>

    <p>The <code id="dependencies:canvasrenderingcontext2d"><a href="http://www.w3.org/html/wg/drafts/2dcontext/master/#canvasrenderingcontext2d">CanvasRenderingContext2D</a></code> object's use of fonts depends on the features
    described in the CSS <cite>Fonts</cite> and <cite>Font Loading</cite> specifications, including
    in particular <dfn id="fontface"><code>FontFace</code></dfn> objects and the <dfn id="font-source"><a href="http://dev.w3.org/csswg/css-font-loading/#font-source">font source</a></dfn> concept.
    <a href="references.html#refsCSSFONTS">[CSSFONTS]</a> <a href="references.html#refsCSSFONTLOAD">[CSSFONTLOAD]</a></p>

   </dd><dt>SVG</dt><dd>

    <p>The following interface is defined in the SVG specification: <a href="references.html#refsSVG">[SVG]</a></p>

    <ul class="brief"><li><dfn id="svgmatrix"><code>SVGMatrix</code></dfn> interface
    </li></ul>

    

   </dd><dt>WebGL</dt><dd>

    <p>The following interface is defined in the WebGL specification: <a href="references.html#refsWEBGL">[WEBGL]</a></p>

    <ul class="brief"><li><dfn id="webglrenderingcontext"><code>WebGLRenderingContext</code></dfn> interface
    </li></ul>

   </dd><dt>WebVTT</dt><dd>

    <p>Implementations may support WebVTT as a text track format for subtitles, captions, chapter
    titles, metadata, etc, for media resources. <a href="references.html#refsWEBVTT">[WEBVTT]</a></p>

    <p>The following terms, used in this specification, are defined in the WebVTT specification:</p>

    <ul class="brief"><li><dfn id="webvtt-file">WebVTT file</dfn>
     </li><li><dfn id="webvtt-file-using-cue-text">WebVTT file using cue text</dfn>
     </li><li><dfn id="webvtt-file-using-chapter-title-text">WebVTT file using chapter title text</dfn>
     </li><li><dfn id="webvtt-file-using-only-nested-cues">WebVTT file using only nested cues</dfn>
     </li><li><dfn id="webvtt-parser">WebVTT parser</dfn>
     </li><li>The <dfn id="rules-for-updating-the-display-of-webvtt-text-tracks">rules for updating the display of WebVTT text tracks</dfn>
     </li><li>The <dfn id="rules-for-interpreting-webvtt-cue-text">rules for interpreting WebVTT cue text</dfn>
     </li><li>The WebVTT <dfn id="text-track-cue-writing-direction">text track cue writing direction</dfn>
     </li><li><dfn id="vttcue"><code>VTTCue</code></dfn> interface
    </li></ul>

   </dd><dt>The WebSocket protocol</dt><dd>

    <p>The following terms are defined in the WebSocket protocol specification: <a href="references.html#refsWSP">[WSP]</a></p>

    <ul class="brief"><li><dfn id="concept-websocket-establish">establish a WebSocket connection</dfn>
     </li><li><dfn id="concept-websocket-established">the WebSocket connection is established</dfn>
     </li><li><dfn id="concept-websocket-validate">validate the server's response</dfn>
     </li><li><dfn id="concept-websockets-active-extensions">extensions in use</dfn>
     </li><li><dfn id="concept-websocket-subprotocol">subprotocol in use</dfn>
     </li><li><dfn id="concept-websocket-cookie-headers">headers to send appropriate cookies</dfn>
     </li><li><dfn id="concept-websocket-handshake-cookies">cookies set during the server's opening handshake</dfn>
     </li><li><dfn id="concept-websocket-message-received">a WebSocket message has been received</dfn>
     </li><li><dfn id="concept-websocket-send">send a WebSocket Message</dfn>
     </li><li><dfn id="concept-websocket-fail">fail the WebSocket connection</dfn>
     </li><li><dfn id="concept-websocket-close">close the WebSocket connection</dfn>
     </li><li><dfn id="concept-websocket-start-closing-handshake">start the WebSocket closing handshake</dfn>
     </li><li><dfn id="concept-websocket-closing-handshake">the WebSocket closing handshake is started</dfn>
     </li><li><dfn id="concept-websocket-closed">the WebSocket connection is closed</dfn> (possibly <i>cleanly</i>)
     </li><li><dfn id="concept-websocket-close-code">the WebSocket connection close code</dfn>
     </li><li><dfn id="concept-websocket-close-reason">the WebSocket connection close reason</dfn>
     </li><li><dfn id="http-sec-websocket-protocol"><code>Sec-WebSocket-Protocol</code></dfn> field

    </li></ul>

   </dd><dt>ARIA</dt><dd>

    <p>The terms <dfn id="strong-native-semantics"><a href="http://www.w3.org/TR/wai-aria/host_languages#host_general_conflict_header">strong
    native semantics</a></dfn> is used as defined in the ARIA specification. The term <dfn id="default-implicit-aria-semantics"><a href="http://www.w3.org/TR/wai-aria/host_languages#implicit_semantics">default implicit
    ARIA semantics</a></dfn> has the same meaning as the term <i>implicit WAI-ARIA semantics</i> as used
    in the ARIA specification. <a href="references.html#refsARIA">[ARIA]</a></p>

    <p>The <dfn id="attr-aria-role"><code>role</code></dfn> attribute is defined in the ARIA
    specification, as are the following roles: <a href="references.html#refsARIA">[ARIA]</a></p>

    <ul class="brief"><li><dfn id="attr-aria-role-alert"><a href="http://www.w3.org/TR/wai-aria/roles#alert"><code>alert</code></a></dfn></li><li><dfn id="attr-aria-role-alertdialog"><a href="http://www.w3.org/TR/wai-aria/roles#alertdialog"><code>alertdialog</code></a></dfn></li><li><dfn id="attr-aria-role-application"><a href="http://www.w3.org/TR/wai-aria/roles#application"><code>application</code></a></dfn></li><li><dfn id="attr-aria-role-article"><a href="http://www.w3.org/TR/wai-aria/roles#article"><code>article</code></a></dfn></li><li><dfn id="attr-aria-role-banner"><a href="http://www.w3.org/TR/wai-aria/roles#banner"><code>banner</code></a></dfn></li><li><dfn id="attr-aria-role-button"><a href="http://www.w3.org/TR/wai-aria/roles#button"><code>button</code></a></dfn></li><li><dfn id="attr-aria-role-checkbox"><a href="http://www.w3.org/TR/wai-aria/roles#checkbox"><code>checkbox</code></a></dfn></li><li><dfn id="attr-aria-role-columnheader"><a href="http://www.w3.org/TR/wai-aria/roles#columnheader"><code>columnheader</code></a></dfn></li><li><dfn id="attr-aria-role-combobox"><a href="http://www.w3.org/TR/wai-aria/roles#combobox"><code>combobox</code></a></dfn></li><li><dfn id="attr-aria-role-complementary"><a href="http://www.w3.org/TR/wai-aria/roles#complementary"><code>complementary</code></a></dfn></li><li><dfn id="attr-aria-role-contentinfo"><a href="http://www.w3.org/TR/wai-aria/roles#contentinfo"><code>contentinfo</code></a></dfn></li><li><dfn id="attr-aria-role-dialog"><a href="http://www.w3.org/TR/wai-aria/roles#dialog"><code>dialog</code></a></dfn></li><li><dfn id="attr-aria-role-directory"><a href="http://www.w3.org/TR/wai-aria/roles#directory"><code>directory</code></a></dfn></li><li><dfn id="attr-aria-role-document"><a href="http://www.w3.org/TR/wai-aria/roles#document"><code>document</code></a></dfn></li><li><dfn id="attr-aria-role-grid"><a href="http://www.w3.org/TR/wai-aria/roles#grid"><code>grid</code></a></dfn></li><li><dfn id="attr-aria-role-gridcell"><a href="http://www.w3.org/TR/wai-aria/roles#gridcell"><code>gridcell</code></a></dfn></li><li><dfn id="attr-aria-role-group"><a href="http://www.w3.org/TR/wai-aria/roles#group"><code>group</code></a></dfn></li><li><dfn id="attr-aria-role-heading"><a href="http://www.w3.org/TR/wai-aria/roles#heading"><code>heading</code></a></dfn></li><li><dfn id="attr-aria-role-img"><a href="http://www.w3.org/TR/wai-aria/roles#img"><code>img</code></a></dfn></li><li><dfn id="attr-aria-role-link"><a href="http://www.w3.org/TR/wai-aria/roles#link"><code>link</code></a></dfn></li><li><dfn id="attr-aria-role-list"><a href="http://www.w3.org/TR/wai-aria/roles#list"><code>list</code></a></dfn></li><li><dfn id="attr-aria-role-listbox"><a href="http://www.w3.org/TR/wai-aria/roles#listbox"><code>listbox</code></a></dfn></li><li><dfn id="attr-aria-role-listitem"><a href="http://www.w3.org/TR/wai-aria/roles#listitem"><code>listitem</code></a></dfn></li><li><dfn id="attr-aria-role-log"><a href="http://www.w3.org/TR/wai-aria/roles#log"><code>log</code></a></dfn></li><li><dfn id="attr-aria-role-main"><a href="http://www.w3.org/TR/wai-aria/roles#main"><code>main</code></a></dfn></li><li><dfn id="attr-aria-role-marquee"><a href="http://www.w3.org/TR/wai-aria/roles#marquee"><code>marquee</code></a></dfn></li><li><dfn id="attr-aria-role-menu"><a href="http://www.w3.org/TR/wai-aria/roles#menu"><code>menu</code></a></dfn></li><li><dfn id="attr-aria-role-menubar"><a href="http://www.w3.org/TR/wai-aria/roles#menubar"><code>menubar</code></a></dfn></li><li><dfn id="attr-aria-role-menuitem"><a href="http://www.w3.org/TR/wai-aria/roles#menuitem"><code>menuitem</code></a></dfn></li><li><dfn id="attr-aria-role-menuitemcheckbox"><a href="http://www.w3.org/TR/wai-aria/roles#menuitemcheckbox"><code>menuitemcheckbox</code></a></dfn></li><li><dfn id="attr-aria-role-menuitemradio"><a href="http://www.w3.org/TR/wai-aria/roles#menuitemradio"><code>menuitemradio</code></a></dfn></li><li><dfn id="attr-aria-role-navigation"><a href="http://www.w3.org/TR/wai-aria/roles#navigation"><code>navigation</code></a></dfn></li><li><dfn id="attr-aria-role-note"><a href="http://www.w3.org/TR/wai-aria/roles#note"><code>note</code></a></dfn></li><li><dfn id="attr-aria-role-option"><a href="http://www.w3.org/TR/wai-aria/roles#option"><code>option</code></a></dfn></li><li><dfn id="attr-aria-role-presentation"><a href="http://www.w3.org/TR/wai-aria/roles#presentation"><code>presentation</code></a></dfn></li><li><dfn id="attr-aria-role-progressbar"><a href="http://www.w3.org/TR/wai-aria/roles#progressbar"><code>progressbar</code></a></dfn></li><li><dfn id="attr-aria-role-radio"><a href="http://www.w3.org/TR/wai-aria/roles#radio"><code>radio</code></a></dfn></li><li><dfn id="attr-aria-role-region"><a href="http://www.w3.org/TR/wai-aria/roles#region"><code>region</code></a></dfn></li><li><dfn id="attr-aria-role-row"><a href="http://www.w3.org/TR/wai-aria/roles#row"><code>row</code></a></dfn></li><li><dfn id="attr-aria-role-rowgroup"><a href="http://www.w3.org/TR/wai-aria/roles#rowgroup"><code>rowgroup</code></a></dfn></li><li><dfn id="attr-aria-role-rowheader"><a href="http://www.w3.org/TR/wai-aria/roles#rowheader"><code>rowheader</code></a></dfn></li><li><dfn id="attr-aria-role-search"><a href="http://www.w3.org/TR/wai-aria/roles#search"><code>search</code></a></dfn></li><li><dfn id="attr-aria-role-separator"><a href="http://www.w3.org/TR/wai-aria/roles#separator"><code>separator</code></a></dfn></li><li><dfn id="attr-aria-role-slider"><a href="http://www.w3.org/TR/wai-aria/roles#slider"><code>slider</code></a></dfn></li><li><dfn id="attr-aria-role-spinbutton"><a href="http://www.w3.org/TR/wai-aria/roles#spinbutton"><code>spinbutton</code></a></dfn></li><li><dfn id="attr-aria-role-status"><a href="http://www.w3.org/TR/wai-aria/roles#status"><code>status</code></a></dfn></li><li><dfn id="attr-aria-role-tab"><a href="http://www.w3.org/TR/wai-aria/roles#tab"><code>tab</code></a></dfn></li><li><dfn id="attr-aria-role-tablist"><a href="http://www.w3.org/TR/wai-aria/roles#tablist"><code>tablist</code></a></dfn></li><li><dfn id="attr-aria-role-textbox"><a href="http://www.w3.org/TR/wai-aria/roles#textbox"><code>textbox</code></a></dfn></li><li><dfn id="attr-aria-role-toolbar"><a href="http://www.w3.org/TR/wai-aria/roles#toolbar"><code>toolbar</code></a></dfn></li><li><dfn id="attr-aria-role-tree"><a href="http://www.w3.org/TR/wai-aria/roles#tree"><code>tree</code></a></dfn></li><li><dfn id="attr-aria-role-treeitem"><a href="http://www.w3.org/TR/wai-aria/roles#treeitem"><code>treeitem</code></a></dfn></li></ul>

    <p>In addition, the following <dfn id="attr-aria-*"><code>aria-*</code></dfn> content
    attributes are defined in the ARIA specification: <a href="references.html#refsARIA">[ARIA]</a></p>

    <ul class="brief"><li><dfn id="attr-aria-checked"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-checked"><code>aria-checked</code></a></dfn></li><li><dfn id="attr-aria-describedby"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-describedby"><code>aria-describedby</code></a></dfn></li><li><dfn id="attr-aria-disabled"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-disabled"><code>aria-disabled</code></a></dfn></li><li><dfn id="attr-aria-expanded"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-expanded"><code>aria-expanded</code></a></dfn></li><li><dfn id="attr-aria-hidden"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-hidden"><code>aria-hidden</code></a></dfn></li><li><dfn id="attr-aria-invalid"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-invalid"><code>aria-invalid</code></a></dfn></li><li><dfn id="attr-aria-label"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-label"><code>aria-label</code></a></dfn></li><li><dfn id="attr-aria-level"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-level"><code>aria-level</code></a></dfn></li><li><dfn id="attr-aria-multiline"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-multiline"><code>aria-multiline</code></a></dfn></li><li><dfn id="attr-aria-multiselectable"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-multiselectable"><code>aria-multiselectable</code></a></dfn></li><li><dfn id="attr-aria-owns"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-owns"><code>aria-owns</code></a></dfn></li><li><dfn id="attr-aria-readonly"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-readonly"><code>aria-readonly</code></a></dfn></li><li><dfn id="attr-aria-required"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-required"><code>aria-required</code></a></dfn></li><li><dfn id="attr-aria-selected"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-selected"><code>aria-selected</code></a></dfn></li><li><dfn id="attr-aria-sort"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-sort"><code>aria-sort</code></a></dfn></li><li><dfn id="attr-aria-valuemax"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-valuemax"><code>aria-valuemax</code></a></dfn></li><li><dfn id="attr-aria-valuemin"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-valuemin"><code>aria-valuemin</code></a></dfn></li><li><dfn id="attr-aria-valuenow"><a href="http://www.w3.org/TR/wai-aria/states_and_properties#aria-valuenow"><code>aria-valuenow</code></a></dfn></li></ul>

   </dd></dl>

  <p>This specification does not <em>require</em> support of any particular network protocol, style
  sheet language, scripting language, or any of the DOM specifications beyond those required in the
  list above. However, the language described by this specification is biased towards CSS as the
  styling language, JavaScript as the scripting language, and HTTP as the network protocol, and
  several features assume that those languages and protocols are in use.</p>

  <p>A user agent that implements the HTTP protocol must implement the Web Origin Concept
  specification and the HTTP State Management Mechanism specification (Cookies) as well. <a href="references.html#refsHTTP">[HTTP]</a> <a href="references.html#refsORIGIN">[ORIGIN]</a> <a href="references.html#refsCOOKIES">[COOKIES]</a></p>

  <p class="note">This specification might have certain additional requirements on character
  encodings, image formats, audio formats, and video formats in the respective sections.</p></section>




  <section><h4 id="extensibility-2">2.2.3 Extensibility</h4>

  <p>Vendor-specific proprietary user agent extensions to this specification are strongly
  discouraged. Documents must not use such extensions, as doing so reduces interoperability and
  fragments the user base, allowing only users of specific user agents to access the content in
  question.</p>

  

  <p>If such extensions are nonetheless needed, e.g. for experimental purposes, then vendors are
  strongly urged to use one of the following extension mechanisms:</p>

  <ul><li><p>For markup-level features that can be limited to the XML serialisation and need not be
   supported in the HTML serialisation, vendors should use the namespace mechanism to define custom
   namespaces in which the non-standard elements and attributes are supported.</p>

   </li><li>

    <p>For markup-level features that are intended for use with <a href="syntax.html#syntax" id="extensibility-2:syntax">the HTML syntax</a>,
    extensions should be limited to new attributes of the form "<code>x-<var>vendor</var>-<var>feature</var></code>", where <var>vendor</var> is a short
    string that identifies the vendor responsible for the extension, and <var>feature</var> is the
    name of the feature. New element names should not be created. Using attributes for such
    extensions exclusively allows extensions from multiple vendors to co-exist on the same element,
    which would not be possible with elements. Using the "<code>x-<var>vendor</var>-<var>feature</var></code>" form allows extensions to be made
    without risk of conflicting with future additions to the specification.</p>

    <div class="example">

     <p>For instance, a browser named "FerretBrowser" could use "ferret" as a vendor prefix, while a
     browser named "Mellblom Browser" could use "mb". If both of these browsers invented extensions
     that turned elements into scratch-and-sniff areas, an author experimenting with these features
     could write:</p>

     <pre>&lt;p&gt;This smells of lemons!
&lt;span x-ferret-smellovision x-ferret-smellcode="LEM01"
      x-mb-outputsmell x-mb-smell="lemon juice"&gt;&lt;/span&gt;&lt;/p&gt;</pre>

    </div>

   </li></ul>

  <p>Attribute names beginning with the two characters "<code>x-</code>" are reserved for
  user agent use and are guaranteed to never be formally added to the HTML language. For
  flexibility, attributes names containing underscores (the U+005F LOW LINE character) are also
  reserved for experimental purposes and are guaranteed to never be formally added to the HTML
  language.</p>

  <p class="note">Pages that use such attributes are by definition non-conforming.</p>

  <p>For DOM extensions, e.g. new methods and IDL attributes, the new members should be prefixed by
  vendor-specific strings to prevent clashes with future versions of this specification.</p>

  <p>For events, experimental event types should be prefixed with vendor-specific strings.</p>

  <div class="example">

   <p>For example, if a user agent called "Pleasold" were to add an event to indicate when
   the user is going up in an elevator, it could use the prefix "<code>pleasold</code>" and
   thus name the event "<code>pleasoldgoingup</code>", possibly with an event handler
   attribute named "<code>onpleasoldgoingup</code>".</p>

  </div>

  <p>All extensions must be defined so that the use of extensions neither contradicts nor causes the
  non-conformance of functionality defined in the specification.</p> 

  <div class="example">

   <p>For example, while strongly discouraged from doing so, an implementation "Foo Browser" could
   add a new IDL attribute "<code>fooTypeTime</code>" to a control's DOM interface that
   returned the time it took the user to select the current value of a control (say). On the other
   hand, defining a new control that appears in a form's <code id="extensibility-2:dom-form-elements"><a href="semantics.html#dom-form-elements">elements</a></code> array would be in violation of the above requirement,
   as it would violate the definition of <code id="extensibility-2:dom-form-elements-2"><a href="semantics.html#dom-form-elements">elements</a></code> given in
   this specification.</p>

  </div>

  <p>When adding new <a href="infrastructure.html#reflect" id="extensibility-2:reflect">reflecting</a> IDL attributes corresponding to
  content attributes of the form "<code>x-<var>vendor</var>-<var>feature</var></code>",
  the IDL attribute should be named "<code><var>vendor</var><var>Feature</var></code>"
  (i.e. the "<code>x</code>" is dropped from the IDL attribute's name).</p>

  

  <hr>

  <p>When vendor-neutral extensions to this specification are needed, either this specification can
  be updated accordingly, or an extension specification can be written that overrides the
  requirements in this specification. When someone applying this specification to their activities
  decides that they will recognise the requirements of such an extension specification, it becomes
  an <dfn id="other-applicable-specifications">applicable specification</dfn> for the purposes of
  conformance requirements in this specification.</p>

  <p class="note">Someone could write a specification that defines any arbitrary byte stream as
  conforming, and then claim that their random junk is conforming. However, that does not mean that
  their random junk actually is conforming for everyone's purposes: if someone else decides that
  that specification does not apply to their work, then they can quite legitimately say that the
  aforementioned random junk is just that, junk, and not conforming at all. As far as conformance
  goes, what matters in a particular community is what that community <em>agrees</em> is
  applicable.</p>

  

  <hr>

  <p>User agents must treat elements and attributes that they do not understand as semantically
  neutral; leaving them in the DOM (for DOM processors), and styling them according to CSS (for CSS
  processors), but not inferring any meaning from them.</p>


  <p>When support for a feature is disabled (e.g. as an emergency measure to mitigate a security
  problem, or to aid in development, or for performance reasons), user agents must act as if they
  had no support for the feature whatsoever, and as if the feature was not mentioned in this
  specification. For example, if a particular feature is accessed via an attribute in a Web IDL
  interface, the attribute itself would be omitted from the objects that implement that interface
  — leaving the attribute on the object but making it return null or throw an exception is
  insufficient.</p></section>


  


  

  <section><h4 id="interactions-with-xpath-and-xslt">2.2.4 Interactions with XPath and XSLT</h4>

  <p id="xpath-1.0-processors">Implementations of XPath 1.0 that operate on <a href="infrastructure.html#html-documents" id="interactions-with-xpath-and-xslt:html-documents">HTML
  documents</a> parsed or created in the manners described in this specification (e.g. as part of
  the <code>document.evaluate()</code> API) must act as if the following edit was applied
  to the XPath 1.0 specification.</p>

  <p>First, remove this paragraph:</p>

  <blockquote cite="http://www.w3.org/TR/1999/REC-xpath-19991116/#node-tests">

   <p>A <a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a> in the node test is expanded
   into an <a href="http://www.w3.org/TR/1999/REC-xpath-19991116/#dt-expanded-name">expanded-name</a>
   using the namespace declarations from the expression context. This is the same way expansion is
   done for element type names in start and end-tags except that the default namespace declared with
   <code>xmlns</code> is not used: if the <a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a> does not have a prefix, then the
   namespace URI is null (this is the same way attribute names are expanded). It is an error if the
   <a href="http://www.w3.org/TR/REC-xml-names#NT-QName">QName</a> has a prefix for which there is
   no namespace declaration in the expression context.</p>

  </blockquote>

  <p>Then, insert in its place the following:</p>

  <blockquote cite="https://www.w3.org/Bugs/Public/show_bug.cgi?id=7059#c37">

   <p>A QName in the node test is expanded into an expanded-name using the namespace declarations
   from the expression context. If the QName has a prefix, then there must be a namespace declaration for this prefix in
   the expression context, and the corresponding namespace URI is the one that is
   associated with this prefix. It is an error if the QName has a prefix for which there is no
   namespace declaration in the expression context. </p>

   <p>If the QName has no prefix and the principal node type of the axis is element, then the
   default element namespace is used. Otherwise if the QName has no prefix, the namespace URI is
   null. The default element namespace is a member of the context for the XPath expression. The
   value of the default element namespace when executing an XPath expression through the DOM3 XPath
   API is determined in the following way:</p>

   <ol><li>If the context node is from an HTML DOM, the default element namespace is
    "http://www.w3.org/1999/xhtml".</li><li>Otherwise, the default element namespace URI is null.</li></ol>

   <p class="note">This is equivalent to adding the default element namespace feature of XPath 2.0
   to XPath 1.0, and using the HTML namespace as the default element namespace for HTML documents.
   It is motivated by the desire to have implementations be compatible with legacy HTML content
   while still supporting the changes that this specification introduces to HTML regarding the
   namespace used for HTML elements, and by the desire to use XPath 1.0 rather than XPath 2.0.</p>

  </blockquote>

  <p class="note">This change is a <a href="introduction.html#willful-violation" id="interactions-with-xpath-and-xslt:willful-violation">willful violation</a> of the XPath 1.0 specification,
  motivated by desire to have implementations be compatible with legacy content while still
  supporting the changes that this specification introduces to HTML regarding which namespace is
  used for HTML elements. <a href="references.html#refsXPATH10">[XPATH10]</a></p> 

  <hr>

  <p id="dom-based-xslt-1.0-processors">XSLT 1.0 processors outputting to a DOM when the output
  method is "html" (either explicitly or via the defaulting rule in XSLT 1.0) are affected as
  follows:</p>

  <p>If the transformation program outputs an element in no namespace, the processor must, prior to
  constructing the corresponding DOM element node, change the namespace of the element to the
  <a href="infrastructure.html#html-namespace-2" id="interactions-with-xpath-and-xslt:html-namespace-2">HTML namespace</a>, <a href="infrastructure.html#converted-to-ascii-lowercase" id="interactions-with-xpath-and-xslt:converted-to-ascii-lowercase">ASCII-lowercase</a> the
  element's local name, and <a href="infrastructure.html#converted-to-ascii-lowercase" id="interactions-with-xpath-and-xslt:converted-to-ascii-lowercase-2">ASCII-lowercase</a> the
  names of any non-namespaced attributes on the element.</p>

  <p class="note">This requirement is a <a href="introduction.html#willful-violation" id="interactions-with-xpath-and-xslt:willful-violation-2">willful violation</a> of the XSLT 1.0
  specification, required because this specification changes the namespaces and case-sensitivity
  rules of HTML in a manner that would otherwise be incompatible with DOM-based XSLT
  transformations. (Processors that serialise the output are unaffected.) <a href="references.html#refsXSLT10">[XSLT10]</a></p> 

  <hr>

  <p>This specification does not specify precisely how XSLT processing interacts with the <a href="syntax.html#html-parser" id="interactions-with-xpath-and-xslt:html-parser">HTML
  parser</a> infrastructure (for example, whether an XSLT processor acts as if it puts any
  elements into a <a href="syntax.html#stack-of-open-elements" id="interactions-with-xpath-and-xslt:stack-of-open-elements">stack of open elements</a>). However, XSLT processors must <a href="syntax.html#stop-parsing" id="interactions-with-xpath-and-xslt:stop-parsing">stop
  parsing</a> if they successfully complete, and must set the <a href="dom.html#current-document-readiness" id="interactions-with-xpath-and-xslt:current-document-readiness">current document
  readiness</a> first to "<code>interactive</code>" and then to "<code>complete</code>" if they are aborted.</p>

  <hr>

  <p>This specification does not specify how XSLT interacts with the <a href="browsers.html#navigate" id="interactions-with-xpath-and-xslt:navigate">navigation</a> algorithm, how it fits in with the <a href="webappapis.html#event-loop" id="interactions-with-xpath-and-xslt:event-loop">event loop</a>, nor
  how error pages are to be handled (e.g. whether XSLT errors are to replace an incremental XSLT
  output, or are rendered inline, etc).</p>

  <p class="note">There are also additional non-normative comments regarding the interaction of XSLT
  and HTML <a href="semantics.html#scriptTagXSLT">in the <code>script</code> element section</a>, and of
  XSLT, XPath, and HTML <a href="semantics.html#template-XSLT-XPath">in the <code>template</code> element
  section</a>.</p></section></section>

  




  <section><h3 id="case-sensitivity-and-string-comparison">2.3 Case-sensitivity and string comparison</h3>

  <p>Comparing two strings in a <dfn id="case-sensitive">case-sensitive</dfn> manner means comparing them exactly, code
  point for code point.</p>

  <p>Comparing two strings in an <dfn id="ascii-case-insensitive">ASCII case-insensitive</dfn> manner means comparing them
  exactly, code point for code point, except that the characters in the range U+0041 to U+005A (i.e.
  LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z) and the corresponding characters in the range
  U+0061 to U+007A (i.e. LATIN SMALL LETTER A to LATIN SMALL LETTER Z) are considered to also
  match.</p>

  <p>Comparing two strings in a <dfn id="compatibility-caseless">compatibility caseless</dfn> manner means using the Unicode
  <i>compatibility caseless match</i> operation to compare the two strings, with no
  language-specific tailoirings. <a href="references.html#refsUNICODE">[UNICODE]</a></p>

  <p>Except where otherwise stated, string comparisons must be performed in a
  <a href="infrastructure.html#case-sensitive" id="case-sensitivity-and-string-comparison:case-sensitive">case-sensitive</a> manner.</p>


  

  <p><dfn id="converted-to-ascii-uppercase">Converting a string to ASCII uppercase</dfn> means
  replacing all characters in the range U+0061 to U+007A (i.e. LATIN SMALL LETTER A to LATIN SMALL
  LETTER Z) with the corresponding characters in the range U+0041 to U+005A (i.e. LATIN CAPITAL
  LETTER A to LATIN CAPITAL LETTER Z).</p>

  <p><dfn id="converted-to-ascii-lowercase">Converting a string to ASCII lowercase</dfn> means
  replacing all characters in the range U+0041 to U+005A (i.e. LATIN CAPITAL LETTER A to LATIN
  CAPITAL LETTER Z) with the corresponding characters in the range U+0061 to U+007A (i.e. LATIN
  SMALL LETTER A to LATIN SMALL LETTER Z).</p>

  


  <p>A string <var>pattern</var> is a <dfn id="prefix-match">prefix match</dfn> for a string <var>s</var> when
  <var>pattern</var> is not longer than <var>s</var> and truncating <var>s</var> to
  <var>pattern</var>'s length leaves the two strings as matches of each other.</p></section>



  <section><h3 id="common-microsyntaxes">2.4 Common microsyntaxes</h3>

  <p>There are various places in HTML that accept particular data types, such as dates or numbers.
  This section describes what the conformance criteria for content in those formats is, and how to
  parse them.</p>

  

  <p class="note">Implementors are strongly urged to carefully examine any third-party libraries
  they might consider using to implement the parsing of syntaxes described below. For example, date
  libraries are likely to implement error handling behaviour that differs from what is required in
  this specification, since error-handling behaviour is often not defined in specifications that
  describe date syntaxes similar to those used in this specification, and thus implementations tend
  to vary greatly in how they handle errors.</p>

  


  

  <section><h4 id="common-parser-idioms">2.4.1 Common parser idioms</h4>

  

  <p>The <dfn id="space-character">space characters</dfn>, for the purposes of this
  specification, are U+0020 SPACE, U+0009 CHARACTER TABULATION (tab), U+000A LINE FEED (LF), U+000C
  FORM FEED (FF), and U+000D CARRIAGE RETURN (CR).</p>

  <p>The <dfn id="white_space">White_Space characters</dfn> are those that have the Unicode
  property "White_Space" in the Unicode <code>PropList.txt</code> data file. <a href="references.html#refsUNICODE">[UNICODE]</a></p>

  <p class="note">This should not be confused with the "White_Space" value (abbreviated "WS") of the
  "Bidi_Class" property in the <code>Unicode.txt</code> data file.</p>

  <p>The <dfn id="control-characters">control characters</dfn> are those whose Unicode "General_Category" property has the
  value "Cc" in the Unicode <code>UnicodeData.txt</code> data file. <a href="references.html#refsUNICODE">[UNICODE]</a></p>

  <p>The <dfn id="uppercase-ascii-letters">uppercase ASCII letters</dfn> are the characters in the range U+0041 LATIN CAPITAL
  LETTER A to U+005A LATIN CAPITAL LETTER Z.</p>

  <p>The <dfn id="lowercase-ascii-letters">lowercase ASCII letters</dfn> are the characters in the range U+0061 LATIN SMALL
  LETTER A to U+007A LATIN SMALL LETTER Z.</p>

  <p>The <dfn id="ascii-digits">ASCII digits</dfn> are the characters in the range U+0030 DIGIT ZERO (0) to U+0039
  DIGIT NINE (9).</p>

  <p>The <dfn id="alphanumeric-ascii-characters">alphanumeric ASCII characters</dfn> are those that are either <a href="infrastructure.html#uppercase-ascii-letters" id="common-parser-idioms:uppercase-ascii-letters">uppercase ASCII
  letters</a>, <a href="infrastructure.html#lowercase-ascii-letters" id="common-parser-idioms:lowercase-ascii-letters">lowercase ASCII letters</a>, or <a href="infrastructure.html#ascii-digits" id="common-parser-idioms:ascii-digits">ASCII digits</a>.</p>

  <p>The <dfn id="ascii-hex-digits">ASCII hex digits</dfn> are the characters in the ranges U+0030 DIGIT ZERO (0) to
  U+0039 DIGIT NINE (9), U+0041 LATIN CAPITAL LETTER A to U+0046 LATIN CAPITAL LETTER F, and U+0061
  LATIN SMALL LETTER A to U+0066 LATIN SMALL LETTER F.</p>

  <p>The <dfn id="uppercase-ascii-hex-digits">uppercase ASCII hex digits</dfn> are the characters in the ranges U+0030 DIGIT ZERO (0) to
  U+0039 DIGIT NINE (9) and U+0041 LATIN CAPITAL LETTER A to U+0046 LATIN CAPITAL LETTER F only.</p>

  <p>The <dfn id="lowercase-ascii-hex-digits">lowercase ASCII hex digits</dfn> are the characters in the ranges U+0030 DIGIT ZERO
  (0) to U+0039 DIGIT NINE (9) and U+0061 LATIN SMALL LETTER A to U+0066 LATIN SMALL LETTER F
  only.</p>

  

  <p>Some of the micro-parsers described below follow the pattern of having an <var>input</var>
  variable that holds the string being parsed, and having a <var>position</var> variable pointing at
  the next character to parse in <var>input</var>.</p>

  <p>For parsers based on this pattern, a step that requires the user agent to <dfn id="collect-a-sequence-of-characters">collect a
  sequence of characters</dfn> means that the following algorithm must be run, with
  <var>characters</var> being the set of characters that can be collected:</p>

  <ol><li><p>Let <var>input</var> and <var>position</var> be the same variables as
   those of the same name in the algorithm that invoked these steps.</p></li><li><p>Let <var>result</var> be the empty string.</p></li><li><p>While <var>position</var> doesn't point past the end of <var>input</var> and the character
   at <var>position</var> is one of the <var>characters</var>, append that character to the end of
   <var>result</var> and advance <var>position</var> to the next character in
   <var>input</var>.</p></li><li><p>Return <var>result</var>.</p></li></ol>

  <p>The step <dfn id="skip-whitespace">skip whitespace</dfn> means that the user agent must <a href="infrastructure.html#collect-a-sequence-of-characters" id="common-parser-idioms:collect-a-sequence-of-characters">collect a sequence of
  characters</a> that are <a href="infrastructure.html#space-character" id="common-parser-idioms:space-character">space characters</a>.  The collected
  characters are not used. </p>

  <p>When a user agent is to <dfn id="strip-line-breaks">strip line breaks</dfn> from a string, the user agent must remove
  any U+000A LINE FEED (LF) and U+000D CARRIAGE RETURN (CR) characters from that string.</p>

  <p>When a user agent is to <dfn id="strip-leading-and-trailing-whitespace">strip leading and trailing whitespace</dfn> from a string, the
  user agent must remove all <a href="infrastructure.html#space-character" id="common-parser-idioms:space-character-2">space characters</a> that are at the
  start or end of the string.</p>

  <p>When a user agent is to <dfn id="strip-and-collapse-whitespace">strip and collapse whitespace</dfn> in a string, it must replace
  any sequence of one or more consecutive <a href="infrastructure.html#space-character" id="common-parser-idioms:space-character-3">space characters</a> in
  that string with a single U+0020 SPACE character, and then <a href="infrastructure.html#strip-leading-and-trailing-whitespace" id="common-parser-idioms:strip-leading-and-trailing-whitespace">strip leading and trailing
  whitespace</a> from that string.</p>

  <p>When a user agent has to <dfn id="strictly-split-a-string">strictly split a string</dfn> on a particular delimiter character
  <var>delimiter</var>, it must use the following algorithm:</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p>Let <var>tokens</var> be an ordered list of tokens, initially empty.</p></li><li><p>While <var>position</var> is not past the end of <var>input</var>:</p>

    <ol><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="common-parser-idioms:collect-a-sequence-of-characters-2">Collect a sequence of characters</a> that are not the <var>delimiter</var>
     character.</p></li><li><p>Append the string collected in the previous step to <var>tokens</var>.</p></li><li><p>Advance <var>position</var> to the next character in <var>input</var>.</p></li></ol>

   </li><li><p>Return <var>tokens</var>.</p></li></ol>

  <p class="note">For the special cases of splitting a string <a href="infrastructure.html#split-a-string-on-spaces" id="common-parser-idioms:split-a-string-on-spaces">on spaces</a> and <a href="infrastructure.html#split-a-string-on-commas" id="common-parser-idioms:split-a-string-on-commas">on commas</a>, this
  algorithm does not apply (those algorithms also perform <a href="infrastructure.html#strip-leading-and-trailing-whitespace" id="common-parser-idioms:strip-leading-and-trailing-whitespace-2">whitespace trimming</a>).</p></section>

  



  <section><h4 id="boolean-attributes">2.4.2 Boolean attributes</h4>

  <p>A number of attributes are <dfn id="boolean-attribute">boolean attributes</dfn>. The
  presence of a boolean attribute on an element represents the true value, and the absence of the
  attribute represents the false value.</p>

  <p>If the attribute is present, its value must either be the empty string or a value that is an
  <a href="infrastructure.html#ascii-case-insensitive" id="boolean-attributes:ascii-case-insensitive">ASCII case-insensitive</a> match for the attribute's canonical name, with no leading or
  trailing whitespace.</p>

  <p class="note">The values "true" and "false" are not allowed on boolean attributes. To represent
  a false value, the attribute has to be omitted altogether.</p>

  <div class="example">

   <p>Here is an example of a checkbox that is checked and disabled. The <code id="boolean-attributes:attr-input-checked"><a href="semantics.html#attr-input-checked">checked</a></code> and <code id="boolean-attributes:attr-fe-disabled"><a href="semantics.html#attr-fe-disabled">disabled</a></code>
   attributes are the boolean attributes.</p>

   <pre>&lt;label&gt;&lt;input type=checkbox checked name=cheese disabled&gt; Cheese&lt;/label&gt;</pre>

   <p>This could be equivalently written as this:

   </p><pre>&lt;label&gt;&lt;input type=checkbox checked=checked name=cheese disabled=disabled&gt; Cheese&lt;/label&gt;</pre>

   <p>You can also mix styles; the following is still equivalent:</p>

   <pre>&lt;label&gt;&lt;input type='checkbox' checked name=cheese disabled=""&gt; Cheese&lt;/label&gt;</pre>

  </div></section>



  <section><h4 id="keywords-and-enumerated-attributes">2.4.3 Keywords and enumerated attributes</h4>

  <p>Some attributes are defined as taking one of a finite set of keywords. Such attributes are
  called <dfn id="enumerated-attribute">enumerated attributes</dfn>. The keywords are each
  defined to map to a particular <em>state</em> (several keywords might map to the same state, in
  which case some of the keywords are synonyms of each other; additionally, some of the keywords can
  be said to be non-conforming, and are only in the specification for historical reasons). In
  addition, two default states can be given. The first is the <dfn id="invalid-value-default"><i>invalid value default</i></dfn>, the
  second is the <dfn id="missing-value-default"><i>missing value default</i></dfn>.</p>

  <p>If an enumerated attribute is specified, the attribute's value must be an <a href="infrastructure.html#ascii-case-insensitive" id="keywords-and-enumerated-attributes:ascii-case-insensitive">ASCII
  case-insensitive</a> match for one of the given keywords that are not said to be
  non-conforming, with no leading or trailing whitespace.</p>

  <p>When the attribute is specified, if its value is an <a href="infrastructure.html#ascii-case-insensitive" id="keywords-and-enumerated-attributes:ascii-case-insensitive-2">ASCII case-insensitive</a> match
  for one of the given keywords then that keyword's state is the state that the attribute
  represents. If the attribute value matches none of the given keywords, but the attribute has an
  <i id="keywords-and-enumerated-attributes:invalid-value-default"><a href="infrastructure.html#invalid-value-default">invalid value default</a></i>, then the attribute represents that state. Otherwise, if the
  attribute value matches none of the keywords but there is a <i id="keywords-and-enumerated-attributes:missing-value-default"><a href="infrastructure.html#missing-value-default">missing value default</a></i> state
  defined, then <em>that</em> is the state represented by the attribute. Otherwise, there is no
  default, and invalid values mean that there is no state represented.</p>

  <p>When the attribute is <em>not</em> specified, if there is a <i id="keywords-and-enumerated-attributes:missing-value-default-2"><a href="infrastructure.html#missing-value-default">missing value default</a></i> state
  defined, then that is the state represented by the (missing) attribute. Otherwise, the absence of
  the attribute means that there is no state represented.</p>

  <p class="note">The empty string can be a valid keyword.</p></section>


  <section><h4 id="numbers">2.4.4 Numbers</h4>

  <section><h5 id="signed-integers">2.4.4.1 Signed integers</h5>

  <p>A string is a <dfn id="valid-integer">valid integer</dfn> if it consists of one or more <a href="infrastructure.html#ascii-digits" id="signed-integers:ascii-digits">ASCII digits</a>,
  optionally prefixed with a U+002D HYPHEN-MINUS character (-).</p>

  <p>A <a href="infrastructure.html#valid-integer" id="signed-integers:valid-integer">valid integer</a> without a U+002D HYPHEN-MINUS (-) prefix represents the number
  that is represented in base ten by that string of digits. A <a href="infrastructure.html#valid-integer" id="signed-integers:valid-integer-2">valid integer</a>
  <em>with</em> a U+002D HYPHEN-MINUS (-) prefix represents the number represented in base ten by
  the string of digits that follows the U+002D HYPHEN-MINUS, subtracted from zero.</p>

  

  <p>The <dfn id="rules-for-parsing-integers">rules for parsing integers</dfn> are as given in the following algorithm. When
  invoked, the steps must be followed in the order given, aborting at the first step that returns a
  value. This algorithm will return either an integer or an error.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially pointing at the
   start of the string.</p></li><li><p>Let <var>sign</var> have the value "positive".</p></li><li><p><a href="infrastructure.html#skip-whitespace" id="signed-integers:skip-whitespace">Skip whitespace</a>.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, return an error.</p></li><li>

    <p>If the character indicated by <var>position</var> (the first character) is a U+002D
    HYPHEN-MINUS character (-):</p>

    <ol><li>Let <var>sign</var> be "negative".</li><li>Advance <var>position</var> to the next character.</li><li>If <var>position</var> is past the end of <var>input</var>, return an error.</li></ol>

    <p>Otherwise, if the character indicated by <var>position</var> (the first character) is a
    U+002B PLUS SIGN character (+):</p>

    <ol><li>Advance <var>position</var> to the next character. (The "<code>+</code>" is
     ignored, but it is not conforming.)</li><li>If <var>position</var> is past the end of <var>input</var>, return an error.</li></ol>

   </li><li><p>If the character indicated by <var>position</var> is not an <a href="infrastructure.html#ascii-digits" id="signed-integers:ascii-digits-2">ASCII digit</a>, then return an error.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="signed-integers:collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="signed-integers:ascii-digits-3">ASCII digits</a>, and
   interpret the resulting sequence as a base-ten integer. Let <var>value</var> be that
   integer.</p></li><li><p>If <var>sign</var> is "positive", return <var>value</var>, otherwise return the result of
   subtracting <var>value</var> from zero.</p></li></ol></section>

  


  <section><h5 id="non-negative-integers">2.4.4.2 Non-negative integers</h5>

  <p>A string is a <dfn id="valid-non-negative-integer">valid non-negative integer</dfn> if it consists of one or more <a href="infrastructure.html#ascii-digits" id="non-negative-integers:ascii-digits">ASCII
  digits</a>.</p>

  <p>A <a href="infrastructure.html#valid-non-negative-integer" id="non-negative-integers:valid-non-negative-integer">valid non-negative integer</a> represents the number that is represented in base ten
  by that string of digits.</p>

  

  <p>The <dfn id="rules-for-parsing-non-negative-integers">rules for parsing non-negative integers</dfn> are as given in the following algorithm.
  When invoked, the steps must be followed in the order given, aborting at the first step that
  returns a value. This algorithm will return either zero, a positive integer, or an error.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>value</var> be the result of parsing <var>input</var> using the
   <a href="infrastructure.html#rules-for-parsing-integers" id="non-negative-integers:rules-for-parsing-integers">rules for parsing integers</a>.</p></li><li><p>If <var>value</var> is an error, return an error.</p></li><li><p>If <var>value</var> is less than zero, return an error.</p></li><li><p>Return <var>value</var>.</p></li></ol></section>

  

  


  <section><h5 id="floating-point-numbers">2.4.4.3 Floating-point numbers</h5>

  <p>A string is a <dfn id="valid-floating-point-number">valid floating-point number</dfn> if it consists of:</p>

  <ol class="brief"><li>Optionally, a U+002D HYPHEN-MINUS character (-).</li><li>One or both of the following, in the given order:

    <ol><li>A series of one or more <a href="infrastructure.html#ascii-digits" id="floating-point-numbers:ascii-digits">ASCII digits</a>.</li><li>

      <ol><li>A single U+002E FULL STOP character (.).</li><li>A series of one or more <a href="infrastructure.html#ascii-digits" id="floating-point-numbers:ascii-digits-2">ASCII digits</a>.</li></ol>

     </li></ol>

   </li><li>Optionally:

    <ol><li>Either a U+0065 LATIN SMALL LETTER E character (e) or a U+0045 LATIN CAPITAL LETTER E
     character (E).</li><li>Optionally, a U+002D HYPHEN-MINUS character (-) or U+002B PLUS SIGN character (+).</li><li>A series of one or more <a href="infrastructure.html#ascii-digits" id="floating-point-numbers:ascii-digits-3">ASCII digits</a>.</li></ol>

   </li></ol>

  <p>A <a href="infrastructure.html#valid-floating-point-number" id="floating-point-numbers:valid-floating-point-number">valid floating-point number</a> represents the number obtained by multiplying the
  significand by ten raised to the power of the exponent, where the significand is the first number,
  interpreted as base ten (including the decimal point and the number after the decimal point, if
  any, and interpreting the significand as a negative number if the whole string starts with a
  U+002D HYPHEN-MINUS character (-) and the number is not zero), and where the exponent is the
  number after the E, if any (interpreted as a negative number if there is a U+002D HYPHEN-MINUS
  character (-) between the E and the number and the number is not zero, or else ignoring a U+002B
  PLUS SIGN character (+) between the E and the number if there is one). If there is no E, then the
  exponent is treated as zero.</p>

  <p class="note">The Infinity and Not-a-Number (NaN) values are not <a href="infrastructure.html#valid-floating-point-number" id="floating-point-numbers:valid-floating-point-number-2">valid floating-point numbers</a>.</p>

  

  <p>The <dfn id="best-representation-of-the-number-as-a-floating-point-number">best
  representation of the number <var>n</var> as a floating-point number</dfn> is the string
  obtained from applying the JavaScript operator ToString to <var>n</var>. The JavaScript
  operator ToString is not uniquely determined. When there are multiple possible strings that could
  be obtained from the JavaScript operator ToString for a particular value, the user agent must
  always return the same string for that value (though it may differ from the value used by other
  user agents).</p>

  <p>The <dfn id="rules-for-parsing-floating-point-number-values">rules for parsing floating-point number values</dfn> are as given in the following
  algorithm. This algorithm must be aborted at the first step that returns something. This algorithm
  will return either a number or an error.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially pointing at the
   start of the string.</p></li><li><p>Let <var>value</var> have the value 1.</p></li><li><p>Let <var>divisor</var> have the value 1.</p></li><li><p>Let <var>exponent</var> have the value 1.</p></li><li><p><a href="infrastructure.html#skip-whitespace" id="floating-point-numbers:skip-whitespace">Skip whitespace</a>.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, return an error.</p></li><li>

    <p>If the character indicated by <var>position</var> is a U+002D HYPHEN-MINUS character (-):</p>

    <ol><li>Change <var>value</var> and <var>divisor</var> to −1.</li><li>Advance <var>position</var> to the next character.</li><li>If <var>position</var> is past the end of <var>input</var>, return an error.</li></ol>

    <p>Otherwise, if the character indicated by <var>position</var> (the first character) is a
    U+002B PLUS SIGN character (+):</p>

    <ol><li>Advance <var>position</var> to the next character. (The "<code>+</code>"
     is ignored, but it is not conforming.)</li><li>If <var>position</var> is past the end of <var>input</var>, return an error.</li></ol>

   </li><li><p>If the character indicated by <var>position</var> is a U+002E FULL STOP (.), and that is
   not the last character in <var>input</var>, and the character after the character indicated by
   <var>position</var> is an <a href="infrastructure.html#ascii-digits" id="floating-point-numbers:ascii-digits-4">ASCII digit</a>, then set
   <var>value</var> to zero and jump to the step labeled <i>fraction</i>.</p> 

   </li><li><p>If the character indicated by <var>position</var> is not an <a href="infrastructure.html#ascii-digits" id="floating-point-numbers:ascii-digits-5">ASCII digit</a>, then return an error.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="floating-point-numbers:collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="floating-point-numbers:ascii-digits-6">ASCII digits</a>, and
   interpret the resulting sequence as a base-ten integer. Multiply <var>value</var> by that
   integer.</p></li><li>If <var>position</var> is past the end of <var>input</var>, jump to the step labeled
   <i>conversion</i>.</li><li><p><i>Fraction</i>: If the character indicated by <var>position</var> is a U+002E
   FULL STOP (.), run these substeps:</p>

    <ol><li><p>Advance <var>position</var> to the next character.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, or if the character
     indicated by <var>position</var> is not an <a href="infrastructure.html#ascii-digits" id="floating-point-numbers:ascii-digits-7">ASCII digit</a>,
     U+0065 LATIN SMALL LETTER E (e), or U+0045 LATIN CAPITAL LETTER E (E), then jump to the step
     labeled <i>conversion</i>.</p></li><li><p>If the character indicated by <var>position</var> is a U+0065 LATIN SMALL
     LETTER E character (e) or a U+0045 LATIN CAPITAL LETTER E character (E), skip the remainder of
     these substeps.</p>

     </li><li><p><i>Fraction loop</i>: Multiply <var>divisor</var> by ten.</p></li><li>Add the value of the character indicated by <var>position</var>, interpreted as a
     base-ten digit (0..9) and divided by <var>divisor</var>, to <var>value</var>.</li><li><p>Advance <var>position</var> to the next character.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, then jump to the step
     labeled <i>conversion</i>.</p></li><li><p>If the character indicated by <var>position</var> is an <a href="infrastructure.html#ascii-digits" id="floating-point-numbers:ascii-digits-8">ASCII digit</a>, jump back to the step labeled <i>fraction loop</i> in these
     substeps.</p></li></ol>

   </li><li><p>If the character indicated by <var>position</var> is a U+0065 LATIN SMALL LETTER
   E character (e) or a U+0045 LATIN CAPITAL LETTER E character (E), run these substeps:</p>

    <ol><li><p>Advance <var>position</var> to the next character.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, then jump to the step
     labeled <i>conversion</i>.</p></li><li>

      <p>If the character indicated by <var>position</var> is a U+002D HYPHEN-MINUS character
      (-):</p>

      <ol><li>Change <var>exponent</var> to −1.</li><li>Advance <var>position</var> to the next character.</li><li><p>If <var>position</var> is past the end of <var>input</var>, then jump to the step
       labeled <i>conversion</i>.</p></li></ol>

      <p>Otherwise, if the character indicated by <var>position</var> is a U+002B PLUS SIGN
      character (+):</p>

      <ol><li>Advance <var>position</var> to the next character.</li><li><p>If <var>position</var> is past the end of <var>input</var>, then jump to the step
       labeled <i>conversion</i>.</p></li></ol>

     </li><li><p>If the character indicated by <var>position</var> is not an <a href="infrastructure.html#ascii-digits" id="floating-point-numbers:ascii-digits-9">ASCII digit</a>, then jump to the step labeled <i>conversion</i>.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="floating-point-numbers:collect-a-sequence-of-characters-2">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="floating-point-numbers:ascii-digits-10">ASCII digits</a>, and
     interpret the resulting sequence as a base-ten integer. Multiply <var>exponent</var>
     by that integer.</p></li><li><p>Multiply <var>value</var> by ten raised to the <var>exponent</var>th power.</p></li></ol>

   </li><li><p><i>Conversion</i>: Let <var>S</var> be the set of finite IEEE 754 double-precision
   floating-point values except −0, but with two special values added: 2<sup>1024</sup> and −2<sup>1024</sup>.</p></li><li><p>Let <var>rounded-value</var> be the number in <var>S</var> that is closest to
   <var>value</var>, selecting the number with an even significand if there are two equally close
   values. (The two special values 2<sup>1024</sup> and −2<sup>1024</sup>
   are considered to have even significands for this purpose.)</p></li><li><p>If <var>rounded-value</var> is 2<sup>1024</sup> or −2<sup>1024</sup>, return an error.</p></li><li><p>Return <var>rounded-value</var>.</p></li></ol></section>

  



  <section><h5 id="percentages-and-dimensions">2.4.4.4 Percentages and lengths</h5>

  <p>The <dfn id="rules-for-parsing-dimension-values">rules for parsing dimension values</dfn> are as given in the following algorithm. When
  invoked, the steps must be followed in the order given, aborting at the first step that returns a
  value. This algorithm will return either a number greater than or equal to 1.0, or an error; if a
  number is returned, then it is further categorised as either a percentage or a length.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially pointing at the
   start of the string.</p></li><li><p><a href="infrastructure.html#skip-whitespace" id="percentages-and-dimensions:skip-whitespace">Skip whitespace</a>.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, return an error.</p></li><li><p>If the character indicated by <var>position</var> is a U+002B PLUS SIGN character (+),
   advance <var>position</var> to the next character.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="percentages-and-dimensions:collect-a-sequence-of-characters">Collect a sequence of characters</a> that are U+0030 DIGIT ZERO (0) characters,
   and discard them.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, return an error.</p></li><li><p>If the character indicated by <var>position</var> is not one of U+0031 DIGIT ONE (1) to
   U+0039 DIGIT NINE (9), then return an error.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="percentages-and-dimensions:collect-a-sequence-of-characters-2">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="percentages-and-dimensions:ascii-digits">ASCII digits</a>, and
   interpret the resulting sequence as a base-ten integer. Let <var>value</var> be that number.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, return <var>value</var> as a
   length.</p></li><li>

    <p>If the character indicated by <var>position</var> is a U+002E FULL STOP character (.):</p>

    <ol><li><p>Advance <var>position</var> to the next character.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, or if the character
     indicated by <var>position</var> is not an <a href="infrastructure.html#ascii-digits" id="percentages-and-dimensions:ascii-digits-2">ASCII digit</a>, then
     return <var>value</var> as a length.</p></li><li><p>Let <var>divisor</var> have the value 1.</p></li><li><p><i>Fraction loop</i>: Multiply <var>divisor</var> by ten.</p></li><li>Add the value of the character indicated by <var>position</var>, interpreted as a base-ten
     digit (0..9) and divided by <var>divisor</var>, to <var>value</var>.</li><li><p>Advance <var>position</var> to the next character.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, then return <var>value</var>
     as a length.</p></li><li><p>If the character indicated by <var>position</var> is an <a href="infrastructure.html#ascii-digits" id="percentages-and-dimensions:ascii-digits-3">ASCII digit</a>, return to the step labeled <i>fraction loop</i> in these
     substeps.</p></li></ol>

   </li><li><p>If <var>position</var> is past the end of <var>input</var>, return <var>value</var> as a
   length.</p></li><li><p>If the character indicated by <var>position</var> is a U+0025 PERCENT SIGN character (%),
   return <var>value</var> as a percentage.</p></li><li><p>Return <var>value</var> as a length.</p></li></ol></section>

  


  <section><h5 id="lists-of-integers">2.4.4.5 Lists of integers</h5>

  <p>A <dfn id="valid-list-of-integers">valid list of integers</dfn> is a number of <a href="infrastructure.html#valid-integer" id="lists-of-integers:valid-integer">valid
  integers</a> separated by U+002C COMMA characters, with no other characters (e.g. no <a href="infrastructure.html#space-character" id="lists-of-integers:space-character">space characters</a>). In addition, there might be restrictions on the
  number of integers that can be given, or on the range of values allowed.</p>

  

  <p>The <dfn id="rules-for-parsing-a-list-of-integers">rules for parsing a list of integers</dfn> are as follows:</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially pointing at the
   start of the string.</p></li><li><p>Let <var>numbers</var> be an initially empty list of integers. This list will be the
   result of this algorithm.</p></li><li><p>If there is a character in the string <var>input</var> at position <var>position</var>,
   and it is either a U+0020 SPACE, U+002C COMMA, or U+003B SEMICOLON character, then advance
   <var>position</var> to the next character in <var>input</var>, or to beyond the end of the string
   if there are no more characters.</p></li><li><p>If <var>position</var> points to beyond the end of <var>input</var>, return
   <var>numbers</var> and abort.</p></li><li><p>If the character in the string <var>input</var> at position <var>position</var> is a
   U+0020 SPACE, U+002C COMMA, or U+003B SEMICOLON character, then return to step 4.</p></li><li><p>Let <var>negated</var> be false.</p></li><li><p>Let <var>value</var> be 0.</p></li><li><p>Let <var>started</var> be false. This variable is set to true when the parser sees a
   number or a U+002D HYPHEN-MINUS character (-).</p></li><li><p>Let <var>got number</var> be false. This variable is set to true when the parser sees a
   number.</p></li><li><p>Let <var>finished</var> be false. This variable is set to true to switch parser into a
   mode where it ignores characters until the next separator.</p></li><li><p>Let <var>bogus</var> be false.</p></li><li><p><i>Parser</i>: If the character in the string <var>input</var> at position
   <var>position</var> is:</p>

    <dl class="switch"><dt>A U+002D HYPHEN-MINUS character</dt><dd>

      <p>Follow these substeps:</p>

      <ol><li>If <var>got number</var> is true, let <var>finished</var> be true.</li><li>If <var>finished</var> is true, skip to the next step in the overall set of steps.</li><li>If <var>started</var> is true, let <var>negated</var> be false.</li><li>Otherwise, if <var>started</var> is false and if <var>bogus</var> is false, let
       <var>negated</var> be true.</li><li>Let <var>started</var> be true.</li></ol>

     </dd><dt>An <a href="infrastructure.html#ascii-digits" id="lists-of-integers:ascii-digits">ASCII digit</a></dt><dd>

      <p>Follow these substeps:</p>

      <ol><li>If <var>finished</var> is true, skip to the next step in the overall set of steps.</li><li>Multiply <var>value</var> by ten.</li><li>Add the value of the digit, interpreted in base ten, to <var>value</var>.</li><li>Let <var>started</var> be true.</li><li>Let <var>got number</var> be true.</li></ol>

     </dd><dt>A U+0020 SPACE character</dt><dt>A U+002C COMMA character</dt><dt>A U+003B SEMICOLON character</dt><dd>

      <p>Follow these substeps:</p>

      <ol><li>If <var>got number</var> is false, return the <var>numbers</var> list and abort. This
       happens if an entry in the list has no digits, as in "<code>1,2,x,4</code>".</li><li>If <var>negated</var> is true, then negate <var>value</var>.</li><li>Append <var>value</var> to the <var>numbers</var> list.</li><li>Jump to step 4 in the overall set of steps.</li></ol>

     </dd><dt>A character in the range U+0001 to U+001F,  U+0021 to U+002B,  U+002D to U+002F,  U+003A,  U+003C to U+0040,  U+005B to U+0060,  U+007b to U+007F
        (i.e. any other non-alphabetic ASCII character)</dt><dd>

      <p>Follow these substeps:</p>

      <ol><li>If <var>got number</var> is true, let <var>finished</var> be true.</li><li>If <var>finished</var> is true, skip to the next step in the overall set of steps.</li><li>Let <var>negated</var> be false.</li></ol>

     </dd><dt>Any other character</dt><dd>

      <p>Follow these substeps:</p>

      <ol><li>If <var>finished</var> is true, skip to the next step in the overall set of steps.</li><li>Let <var>negated</var> be false.</li><li>Let <var>bogus</var> be true.</li><li>If <var>started</var> is true, then return the <var>numbers</var> list, and abort. (The
       value in <var>value</var> is not appended to the list first; it is dropped.)</li></ol>

     </dd></dl>

   </li><li><p>Advance <var>position</var> to the next character in <var>input</var>, or to beyond the
   end of the string if there are no more characters.</p></li><li><p>If <var>position</var> points to a character (and not to beyond the end of
   <var>input</var>), jump to the big <i>Parser</i> step above.</p></li><li><p>If <var>negated</var> is true, then negate <var>value</var>.</p></li><li><p>If <var>got number</var> is true, then append <var>value</var> to the <var>numbers</var>
   list.</p></li><li><p>Return the <var>numbers</var> list and abort.</p></li></ol></section>

  

  

  <section><h5 id="lists-of-dimensions">2.4.4.6 Lists of dimensions</h5>

  

  <p>The <dfn id="rules-for-parsing-a-list-of-dimensions">rules for parsing a list of dimensions</dfn> are as follows. These rules return a list
  of zero or more pairs consisting of a number and a unit, the unit being one of <i>percentage</i>,
  <i>relative</i>, and <i>absolute</i>.</p>

  <ol><li><p>Let <var>raw input</var> be the string being parsed.</p></li><li><p>If the last character in <var>raw input</var> is a U+002C COMMA character (,),
   then remove that character from <var>raw input</var>.</p></li><li><p><a href="infrastructure.html#split-a-string-on-commas" id="lists-of-dimensions:split-a-string-on-commas">Split the string <var>raw input</var> on
   commas</a>. Let <var>raw tokens</var> be the resulting list of tokens.</p></li><li><p>Let <var>result</var> be an empty list of number/unit pairs.</p></li><li>

    <p>For each token in <var>raw tokens</var>, run the following substeps:</p>

    <ol><li><p>Let <var>input</var> be the token.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>,
     initially pointing at the start of the string.</p></li><li><p>Let <var>value</var> be the number 0.</p></li><li><p>Let <var>unit</var> be <i>absolute</i>.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, set <var>unit</var> to <i>relative</i> and jump to the last substep.</p></li><li><p>If the character at <var>position</var> is an <a href="infrastructure.html#ascii-digits" id="lists-of-dimensions:ascii-digits">ASCII digit</a>, <a href="infrastructure.html#collect-a-sequence-of-characters" id="lists-of-dimensions:collect-a-sequence-of-characters">collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="lists-of-dimensions:ascii-digits-2">ASCII
     digits</a>, interpret the resulting sequence as an integer in base ten, and increment <var>value</var> by that integer.</p></li><li>

      <p>If the character at <var>position</var> is a U+002E FULL STOP character (.), run
      these substeps:</p>

      <ol><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="lists-of-dimensions:collect-a-sequence-of-characters-2">Collect a sequence of characters</a> consisting of <a href="infrastructure.html#space-character" id="lists-of-dimensions:space-character">space characters</a> and <a href="infrastructure.html#ascii-digits" id="lists-of-dimensions:ascii-digits-3">ASCII digits</a>. Let <var>s</var>
       be the resulting sequence.</p></li><li><p>Remove all <a href="infrastructure.html#space-character" id="lists-of-dimensions:space-character-2">space characters</a> in <var>s</var>.</p></li><li>

        <p>If <var>s</var> is not the empty string, run these subsubsteps:</p>

        <ol><li><p>Let <var>length</var> be the number of characters in <var>s</var> (after the spaces were removed).</p></li><li><p>Let <var>fraction</var> be the result of interpreting <var>s</var> as a base-ten integer, and then dividing that number by <span>10<sup><var>length</var></sup></span>.</p></li><li><p>Increment <var>value</var> by <var>fraction</var>.</p></li></ol>

       </li></ol>

     </li><li><p><a href="infrastructure.html#skip-whitespace" id="lists-of-dimensions:skip-whitespace">Skip whitespace</a>.</p></li><li>

      <p>If the character at <var>position</var> is a U+0025 PERCENT SIGN character (%),
      then set <var>unit</var> to <i>percentage</i>.</p>

      <p>Otherwise, if the character at <var>position</var> is a U+002A ASTERISK character
      (*), then set <var>unit</var> to <i>relative</i>.</p>

     </li><li><p>Add an entry to <var>result</var> consisting of the number given by <var>value</var> and the unit given by <var>unit</var>.</p></li></ol>

   </li><li><p>Return the list <var>result</var>.</p></li></ol></section></section>

  


  <section><h4 id="dates-and-times">2.4.5 Dates and times</h4>

  <p>In the algorithms below, the <dfn id="number-of-days-in-month-month-of-year-year">number of days in month <var>month</var> of year
  <var>year</var></dfn> is: <em>31</em> if <var>month</var> is 1, 3, 5, 7, 8,
  10, or 12; <em>30</em> if <var>month</var> is 4, 6, 9, or 11; <em>29</em> if <var>month</var> is 2 and <var>year</var> is a number divisible by 400, or if <var>year</var> is a number divisible by 4 but not by 100; and <em>28</em> otherwise. This
  takes into account leap years in the Gregorian calendar. <a href="references.html#refsGREGORIAN">[GREGORIAN]</a></p>

  <p>When <a href="infrastructure.html#ascii-digits" id="dates-and-times:ascii-digits">ASCII digits</a> are used in the date and time syntaxes defined in this section,
  they express numbers in base ten.</p>

  

  <p class="note">While the formats described here are intended to be subsets of the corresponding
  ISO8601 formats, this specification defines parsing rules in much more detail than ISO8601.
  Implementors are therefore encouraged to carefully examine any date parsing libraries before using
  them to implement the parsing rules described below; ISO8601 libraries might not parse dates and
  times in exactly the same manner. <a href="references.html#refsISO8601">[ISO8601]</a></p>

  

  <p>Where this specification refers to the <dfn id="proleptic-gregorian-calendar">proleptic Gregorian calendar</dfn>, it means the
  modern Gregorian calendar, extrapolated backwards to year 1. A date in the <a href="infrastructure.html#proleptic-gregorian-calendar" id="dates-and-times:proleptic-gregorian-calendar">proleptic
  Gregorian calendar</a>, sometimes explicitly referred to as a <dfn id="proleptic-gregorian-date">proleptic-Gregorian
  date</dfn>, is one that is described using that calendar even if that calendar was not in use at
  the time (or place) in question. <a href="references.html#refsGREGORIAN">[GREGORIAN]</a></p>

  <p class="note">The use of the Gregorian calendar as the wire format in this specification is an
  arbitrary choice resulting from the cultural biases of those involved in the decision. See also
  the section discussing <a href="semantics.html#input-author-notes">date, time, and number formats</a> in forms
  (for authors), <a href="semantics.html#input-impl-notes">implemention notes regarding
  localization of form controls</a>, and the <code id="dates-and-times:the-time-element"><a href="semantics.html#the-time-element">time</a></code> element.</p>


  <section><h5 id="months">2.4.5.1 Months</h5>

  <p>A <dfn id="concept-month">month</dfn> consists of a specific <a href="infrastructure.html#proleptic-gregorian-date" id="months:proleptic-gregorian-date">proleptic-Gregorian
  date</a> with no time-zone information and no date information beyond a year and a month. <a href="references.html#refsGREGORIAN">[GREGORIAN]</a></p>

  <p>A string is a <dfn id="valid-month-string">valid month string</dfn> representing a year <var>year</var> and
  month <var>month</var> if it consists of the following components in the given order:</p>

  <ol><li>Four or more <a href="infrastructure.html#ascii-digits" id="months:ascii-digits">ASCII digits</a>, representing <var>year</var>, where <var>year</var>&nbsp;&gt;&nbsp;0</li><li>A U+002D HYPHEN-MINUS character (-)</li><li>Two <a href="infrastructure.html#ascii-digits" id="months:ascii-digits-2">ASCII digits</a>, representing the month <var>month</var>, in the range
   1&nbsp;≤&nbsp;<var>month</var>&nbsp;≤&nbsp;12</li></ol>

  

  <p>The rules to <dfn id="parse-a-month-string">parse a month string</dfn> are as follows. This will return either a year and
  month, or nothing. If at any point the algorithm says that it "fails", this means that it is
  aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p><a href="infrastructure.html#parse-a-month-component" id="months:parse-a-month-component">Parse a month component</a> to obtain <var>year</var> and <var>month</var>. If this returns nothing, then fail.</p>

   </li><li><p>If <var>position</var> is <em>not</em> beyond the
   end of <var>input</var>, then fail.</p></li><li><p>Return <var>year</var> and <var>month</var>.</p></li></ol>

  <p>The rules to <dfn id="parse-a-month-component">parse a month component</dfn>, given an <var>input</var> string and
  a <var>position</var>, are as follows. This will return either a year and a month, or
  nothing. If at any point the algorithm says that it "fails", this means that it is aborted at that
  point and returns nothing.</p>

  <ol><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="months:collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="months:ascii-digits-3">ASCII digits</a>. If the
   collected sequence is not at least four characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var>year</var>.</p></li><li><p>If <var>year</var> is not a number greater than zero, then fail.</p></li><li><p>If <var>position</var> is beyond the end of <var>input</var> or if the
   character at <var>position</var> is not a U+002D HYPHEN-MINUS character, then fail.
   Otherwise, move <var>position</var> forwards one character.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="months:collect-a-sequence-of-characters-2">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="months:ascii-digits-4">ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var>month</var>.</p></li><li><p>If <var>month</var> is not a number in the range 1&nbsp;≤&nbsp;<var>month</var>&nbsp;≤&nbsp;12, then fail.</p></li><li><p>Return <var>year</var> and <var>month</var>.</p></li></ol></section>

  


  <section><h5 id="dates">2.4.5.2 Dates</h5>

  <p>A <dfn id="concept-date">date</dfn> consists of a specific <a href="infrastructure.html#proleptic-gregorian-date" id="dates:proleptic-gregorian-date">proleptic-Gregorian
  date</a> with no time-zone information, consisting of a year, a month, and a day. <a href="references.html#refsGREGORIAN">[GREGORIAN]</a></p>

  <p>A string is a <dfn id="valid-date-string">valid date string</dfn> representing a year <var>year</var>, month
  <var>month</var>, and day <var>day</var> if it consists of the following
  components in the given order:</p>

  <ol><li>A <a href="infrastructure.html#valid-month-string" id="dates:valid-month-string">valid month string</a>, representing <var>year</var> and <var>month</var></li><li>A U+002D HYPHEN-MINUS character (-)</li><li>Two <a href="infrastructure.html#ascii-digits" id="dates:ascii-digits">ASCII digits</a>, representing <var>day</var>, in the range
   1&nbsp;≤&nbsp;<var>day</var>&nbsp;≤&nbsp;<var>maxday</var> where <var>maxday</var> is the <a href="infrastructure.html#number-of-days-in-month-month-of-year-year" id="dates:number-of-days-in-month-month-of-year-year">number of
   days in the month <var>month</var> and year <var>year</var></a></li></ol>

  

  <p>The rules to <dfn id="parse-a-date-string">parse a date string</dfn> are as follows. This will return either a date, or
  nothing. If at any point the algorithm says that it "fails", this means that it is aborted at that
  point and returns nothing.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p><a href="infrastructure.html#parse-a-date-component" id="dates:parse-a-date-component">Parse a date component</a> to obtain <var>year</var>, <var>month</var>, and <var>day</var>. If this returns nothing, then fail.</p>

   </li><li><p>If <var>position</var> is <em>not</em> beyond the end of <var>input</var>, then fail.</p></li><li><p>Let <var>date</var> be the date with year <var>year</var>, month <var>month</var>, and day <var>day</var>.</p></li><li><p>Return <var>date</var>.</p></li></ol>

  <p>The rules to <dfn id="parse-a-date-component">parse a date component</dfn>, given an <var>input</var> string and a
  <var>position</var>, are as follows. This will return either a year, a month, and a day,
  or nothing. If at any point the algorithm says that it "fails", this means that it is aborted at
  that point and returns nothing.</p>

  <ol><li><p><a href="infrastructure.html#parse-a-month-component" id="dates:parse-a-month-component">Parse a month component</a> to obtain <var>year</var> and <var>month</var>. If this returns nothing, then fail.</p></li><li><p>Let <var>maxday</var> be the <a href="infrastructure.html#number-of-days-in-month-month-of-year-year" id="dates:number-of-days-in-month-month-of-year-year-2">number of days in month <var>month</var> of year <var>year</var></a>.</p></li><li><p>If <var>position</var> is beyond the end of <var>input</var> or if the
   character at <var>position</var> is not a U+002D HYPHEN-MINUS character, then fail.
   Otherwise, move <var>position</var> forwards one character.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="dates:collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="dates:ascii-digits-2">ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var>day</var>.</p></li><li><p>If <var>day</var> is not a number in the range 1&nbsp;≤&nbsp;<var>day</var>&nbsp;≤&nbsp;<var>maxday</var>, then fail.</p></li><li><p>Return <var>year</var>, <var>month</var>, and <var>day</var>.</p></li></ol></section>

  


  <section><h5 id="yearless-dates">2.4.5.3 Yearless dates</h5>

  <p>A <dfn id="concept-yearless-date">yearless date</dfn> consists of a Gregorian month and a
  day within that month, but with no associated year. <a href="references.html#refsGREGORIAN">[GREGORIAN]</a></p>

  <p>A string is a <dfn id="valid-yearless-date-string">valid yearless date string</dfn> representing a month <var>month</var> and a day <var>day</var> if it consists of the following components
  in the given order:</p>

  <ol><li>Optionally, two U+002D HYPHEN-MINUS characters (-)</li><li>Two <a href="infrastructure.html#ascii-digits" id="yearless-dates:ascii-digits">ASCII digits</a>, representing the month <var>month</var>, in the range
   1&nbsp;≤&nbsp;<var>month</var>&nbsp;≤&nbsp;12</li><li>A U+002D HYPHEN-MINUS character (-)</li><li>Two <a href="infrastructure.html#ascii-digits" id="yearless-dates:ascii-digits-2">ASCII digits</a>, representing <var>day</var>, in the range
   1&nbsp;≤&nbsp;<var>day</var>&nbsp;≤&nbsp;<var>maxday</var> where <var>maxday</var> is the <a href="infrastructure.html#number-of-days-in-month-month-of-year-year" id="yearless-dates:number-of-days-in-month-month-of-year-year">number of
   days</a> in the month <var>month</var> and any arbitrary leap year (e.g. 4 or
   2000)</li></ol>

  <p class="note">In other words, if the <var>month</var> is "<code>02</code>",
  meaning February, then the day can be 29, as if the year was a leap year.</p>

  

  <p>The rules to <dfn id="parse-a-yearless-date-string">parse a yearless date string</dfn> are as follows. This will return either a
  month and a day, or nothing. If at any point the algorithm says that it "fails", this means that
  it is aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p><a href="infrastructure.html#parse-a-yearless-date-component" id="yearless-dates:parse-a-yearless-date-component">Parse a yearless date component</a> to obtain <var>month</var> and <var>day</var>. If this returns nothing, then fail.</p>

   </li><li><p>If <var>position</var> is <em>not</em> beyond the end of <var>input</var>, then fail.</p></li><li><p>Return <var>month</var> and <var>day</var>.</p></li></ol>

  <p>The rules to <dfn id="parse-a-yearless-date-component">parse a yearless date component</dfn>, given an <var>input</var>
  string and a <var>position</var>, are as follows. This will return either a month and a
  day, or nothing. If at any point the algorithm says that it "fails", this means that it is aborted
  at that point and returns nothing.</p>

  <ol><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="yearless-dates:collect-a-sequence-of-characters">Collect a sequence of characters</a> that are U+002D HYPHEN-MINUS characters (-).
   If the collected sequence is not exactly zero or two characters long, then fail.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="yearless-dates:collect-a-sequence-of-characters-2">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="yearless-dates:ascii-digits-3">ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var>month</var>.</p></li><li><p>If <var>month</var> is not a number in the range 1&nbsp;≤&nbsp;<var>month</var>&nbsp;≤&nbsp;12, then fail.</p></li><li><p>Let <var>maxday</var> be the <a href="infrastructure.html#number-of-days-in-month-month-of-year-year" id="yearless-dates:number-of-days-in-month-month-of-year-year-2">number of days</a> in month <var>month</var> of any arbitrary leap year (e.g. 4
   or 2000).</p></li><li><p>If <var>position</var> is beyond the end of <var>input</var> or if the
   character at <var>position</var> is not a U+002D HYPHEN-MINUS character, then fail.
   Otherwise, move <var>position</var> forwards one character.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="yearless-dates:collect-a-sequence-of-characters-3">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="yearless-dates:ascii-digits-4">ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var>day</var>.</p></li><li><p>If <var>day</var> is not a number in the range 1&nbsp;≤&nbsp;<var>day</var>&nbsp;≤&nbsp;<var>maxday</var>, then fail.</p></li><li><p>Return <var>month</var> and <var>day</var>.</p></li></ol></section>

  


  <section><h5 id="times">2.4.5.4 Times</h5>

  <p>A <dfn id="concept-time">time</dfn> consists of a specific time with no time-zone
  information, consisting of an hour, a minute, a second, and a fraction of a second.</p>

  <p>A string is a <dfn id="valid-time-string">valid time string</dfn> representing an hour <var>hour</var>, a
  minute <var>minute</var>, and a second <var>second</var> if it consists of the
  following components in the given order:</p>

  <ol><li>Two <a href="infrastructure.html#ascii-digits" id="times:ascii-digits">ASCII digits</a>, representing <var>hour</var>, in the range
   0&nbsp;≤&nbsp;<var>hour</var>&nbsp;≤&nbsp;23</li><li>A U+003A COLON character (:)</li><li>Two <a href="infrastructure.html#ascii-digits" id="times:ascii-digits-2">ASCII digits</a>, representing <var>minute</var>, in the range
   0&nbsp;≤&nbsp;<var>minute</var>&nbsp;≤&nbsp;59</li><li>If <var>second</var> is non-zero, or optionally if <var>second</var> is
   zero:

    <ol><li>A U+003A COLON character (:)</li><li>Two <a href="infrastructure.html#ascii-digits" id="times:ascii-digits-3">ASCII digits</a>, representing the integer part of <var>second</var>,
     in the range 0&nbsp;≤&nbsp;<var>s</var>&nbsp;≤&nbsp;59</li><li>If <var>second</var> is not an integer, or optionally if <var>second</var> is an integer:

      <ol><li>A 002E FULL STOP character (.)</li><li>One, two, or three <a href="infrastructure.html#ascii-digits" id="times:ascii-digits-4">ASCII digits</a>, representing the fractional part of <var>second</var></li></ol>

     </li></ol>

   </li></ol>

  <p class="note">The <var>second</var> component cannot be 60 or 61; leap seconds cannot
  be represented.</p>

  

  <p>The rules to <dfn id="parse-a-time-string">parse a time string</dfn> are as follows. This will return either a time, or
  nothing. If at any point the algorithm says that it "fails", this means that it is aborted at that
  point and returns nothing.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p><a href="infrastructure.html#parse-a-time-component" id="times:parse-a-time-component">Parse a time component</a> to obtain <var>hour</var>, <var>minute</var>, and <var>second</var>. If this returns nothing, then fail.</p>

   </li><li><p>If <var>position</var> is <em>not</em> beyond the end of <var>input</var>, then fail.</p></li><li><p>Let <var>time</var> be the time with hour <var>hour</var>, minute <var>minute</var>, and second <var>second</var>.</p></li><li><p>Return <var>time</var>.</p></li></ol>

  <p>The rules to <dfn id="parse-a-time-component">parse a time component</dfn>, given an <var>input</var> string and a
  <var>position</var>, are as follows. This will return either an hour, a minute, and a
  second, or nothing. If at any point the algorithm says that it "fails", this means that it is
  aborted at that point and returns nothing.</p>

  <ol><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="times:collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="times:ascii-digits-5">ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var>hour</var>.</p></li><li>If <var>hour</var> is not a number in the range 0&nbsp;≤&nbsp;<var>hour</var>&nbsp;≤&nbsp;23, then fail.</li><li><p>If <var>position</var> is beyond the end of <var>input</var> or if the
   character at <var>position</var> is not a U+003A COLON character, then fail. Otherwise,
   move <var>position</var> forwards one character.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="times:collect-a-sequence-of-characters-2">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="times:ascii-digits-6">ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var>minute</var>.</p></li><li>If <var>minute</var> is not a number in the range 0&nbsp;≤&nbsp;<var>minute</var>&nbsp;≤&nbsp;59, then fail.</li><li><p>Let <var>second</var> be a string with the value "0".</p></li><li>

    <p>If <var>position</var> is not beyond the end of <var>input</var> and the
    character at <var>position</var> is a U+003A COLON, then run these substeps:</p>

    <ol><li><p>Advance <var>position</var> to the next character in <var>input</var>.</p></li><li><p>If <var>position</var> is beyond the end of <var>input</var>, or at
     the last character in <var>input</var>, or if the next <em>two</em> characters in <var>input</var> starting at <var>position</var> are not both <a href="infrastructure.html#ascii-digits" id="times:ascii-digits-7">ASCII
     digits</a>, then fail.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="times:collect-a-sequence-of-characters-3">Collect a sequence of characters</a> that are either <a href="infrastructure.html#ascii-digits" id="times:ascii-digits-8">ASCII digits</a>
     or U+002E FULL STOP characters. If the collected sequence is three characters long, or if it is
     longer than three characters long and the third character is not a U+002E FULL STOP character,
     or if it has more than one U+002E FULL STOP character, then fail. Otherwise, let the collected
     string be <var>second</var> instead of its previous value.</p></li></ol>

   </li><li><p>Interpret <var>second</var> as a base-ten number (possibly with a fractional
   part). Let <var>second</var> be that number instead of the string version.</p></li><li><p>If <var>second</var> is not a number in the range 0&nbsp;≤&nbsp;<var>second</var>&nbsp;&lt;&nbsp;60, then fail.</p></li><li><p>Return <var>hour</var>, <var>minute</var>, and <var>second</var>.</p></li></ol></section>

  


  <section><h5 id="floating-dates-and-times">2.4.5.5 Floating dates and times</h5>

  <p>A <dfn id="concept-datetime-floating">floating date and time</dfn> consists of a specific
  <a href="infrastructure.html#proleptic-gregorian-date" id="floating-dates-and-times:proleptic-gregorian-date">proleptic-Gregorian date</a>, consisting of a year, a month, and a day, and a time,
  consisting of an hour, a minute, a second, and a fraction of a second, but expressed without a
  time zone. <a href="references.html#refsGREGORIAN">[GREGORIAN]</a></p>

  <p>A string is a <dfn id="valid-floating-date-and-time-string">valid floating date and time string</dfn> representing a date and time if it
  consists of the following components in the given order:</p>

  <ol><li>A <a href="infrastructure.html#valid-date-string" id="floating-dates-and-times:valid-date-string">valid date string</a> representing the date</li><li>A U+0054 LATIN CAPITAL LETTER T character (T) or a U+0020 SPACE character</li><li>A <a href="infrastructure.html#valid-time-string" id="floating-dates-and-times:valid-time-string">valid time string</a> representing the time</li></ol>

  <p>A string is a <dfn id="valid-normalised-floating-date-and-time-string">valid normalised floating date and time string</dfn> representing a date and
  time if it consists of the following components in the given order:</p>

  <ol><li>A <a href="infrastructure.html#valid-date-string" id="floating-dates-and-times:valid-date-string-2">valid date string</a> representing the date</li><li>A U+0054 LATIN CAPITAL LETTER T character (T)</li><li>A <a href="infrastructure.html#valid-time-string" id="floating-dates-and-times:valid-time-string-2">valid time string</a> representing the time, expressed as the shortest possible
   string for the given time (e.g. omitting the seconds component entirely if the given time is zero
   seconds past the minute)</li></ol>

  

  <p>The rules to <dfn id="parse-a-floating-date-and-time-string">parse a floating date and time string</dfn> are as follows. This will return
  either a date and time, or nothing. If at any point the algorithm says that it "fails", this means
  that it is aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p><a href="infrastructure.html#parse-a-date-component" id="floating-dates-and-times:parse-a-date-component">Parse a date component</a> to obtain <var>year</var>, <var>month</var>, and <var>day</var>. If this returns nothing, then fail.</p>

   </li><li><p>If <var>position</var> is beyond the end of <var>input</var> or if the
   character at <var>position</var> is neither a U+0054 LATIN CAPITAL LETTER T character
   (T) nor a U+0020 SPACE character, then fail. Otherwise, move <var>position</var>
   forwards one character.</p></li><li><p><a href="infrastructure.html#parse-a-time-component" id="floating-dates-and-times:parse-a-time-component">Parse a time component</a> to obtain <var>hour</var>, <var>minute</var>, and <var>second</var>. If this returns nothing, then fail.</p>

   </li><li><p>If <var>position</var> is <em>not</em> beyond the end of <var>input</var>, then fail.</p></li><li><p>Let <var>date</var> be the date with year <var>year</var>, month <var>month</var>, and day <var>day</var>.</p></li><li><p>Let <var>time</var> be the time with hour <var>hour</var>, minute <var>minute</var>, and second <var>second</var>.</p></li><li><p>Return <var>date</var> and <var>time</var>.</p></li></ol><p>
  The terminology for dates has evolved over time. While the qualifier “floating” applied to dates
  and times is now preferred, it can also be called “local”. Due to this
  <a href="infrastructure.html#concept-datetime-floating">floating date and time</a> is sometimes called
  <dfn id="concept-datetime-local">local date and time</dfn>;

  <a href="infrastructure.html#valid-floating-date-and-time-string">valid floating date and time string</a> is sometimes called
  <dfn id="valid-local-date-and-time-string">valid local date and time string</dfn>;

  <a href="infrastructure.html#valid-normalised-floating-date-and-time-string">valid normalised floating date and time string</a> is sometimes called
  <dfn id="valid-normalised-local-date-and-time-string">valid normalised local date and time string</dfn>; and

  <a href="infrastructure.html#parse-a-floating-date-and-time-string">parse a floating date and time string</a> is sometimes called
  <dfn id="parse-a-local-date-and-time-string">parse a local date and time string</dfn>.
</p>
</section>

  


  <section><h5 id="time-zones">2.4.5.6 Time zones</h5>

  <p>A <dfn id="concept-timezone">time-zone offset</dfn> consists of a signed number of hours and
  minutes.</p>

  <p>A string is a <dfn id="valid-time-zone-offset-string">valid time-zone offset string</dfn> representing a time-zone offset if it
  consists of either:</p>


  <ul><li><p>A U+005A LATIN CAPITAL LETTER Z character (Z), allowed only if the time zone is
   UTC</p></li><li>

    <p>Or, the following components, in the given order:</p>

    <ol><li>Either a U+002B PLUS SIGN character (+) or, if the time-zone offset is not zero, a U+002D
     HYPHEN-MINUS character (-), representing the sign of the time-zone offset</li><li>Two <a href="infrastructure.html#ascii-digits" id="time-zones:ascii-digits">ASCII digits</a>, representing the hours component <var>hour</var> of
     the time-zone offset, in the range 0&nbsp;≤&nbsp;<var>hour</var>&nbsp;≤&nbsp;23</li><li>Optionally, a U+003A COLON character (:)</li><li>Two <a href="infrastructure.html#ascii-digits" id="time-zones:ascii-digits-2">ASCII digits</a>, representing the minutes component <var>minute</var> of the time-zone offset, in the range 0&nbsp;≤&nbsp;<var>minute</var>&nbsp;≤&nbsp;59</li></ol>

   </li></ul>

  <p class="note">This format allows for time-zone offsets from -23:59 to +23:59. Right now, in
  practice, the range of offsets of actual time zones is -12:00 to +14:00, and the minutes component
  of offsets of actual time zones is always either 00, 30, or 45. There is no guarantee that this
  will remain so forever, however, since time zones are used as political footballs and are thus
  subject to very whimsical policy decisions.</p>

  <p class="note">See also the usage notes and examples in the <a href="infrastructure.html#concept-datetime" id="time-zones:concept-datetime">global
  date and time</a> section below for details on using time-zone offsets with historical times
  that predate the formation of formal time zones.</p>

  

  <p>The rules to <dfn id="parse-a-time-zone-offset-string">parse a time-zone offset string</dfn> are as follows. This will return either
  a time-zone offset, or nothing. If at any point the algorithm says that it "fails", this means
  that it is aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p><a href="infrastructure.html#parse-a-time-zone-offset-component" id="time-zones:parse-a-time-zone-offset-component">Parse a time-zone offset component</a> to obtain <var>timezone<sub>hours</sub></var> and <var>timezone<sub>minutes</sub></var>. If this
   returns nothing, then fail.</p>

   </li><li><p>If <var>position</var> is <em>not</em> beyond the end of <var>input</var>, then fail.</p></li><li><p>Return the time-zone offset that is <var>timezone<sub>hours</sub></var>
   hours and <var>timezone<sub>minutes</sub></var> minutes from UTC.</p></li></ol>

  <p>The rules to <dfn id="parse-a-time-zone-offset-component">parse a time-zone offset component</dfn>, given an <var>input</var>
  string and a <var>position</var>, are as follows. This will return either time-zone hours
  and time-zone minutes, or nothing. If at any point the algorithm says that it "fails", this means
  that it is aborted at that point and returns nothing.</p>

  <ol><li>

    <p>If the character at <var>position</var> is a U+005A LATIN CAPITAL LETTER Z character
    (Z), then:</p>

    <ol><li><p>Let <var>timezone<sub>hours</sub></var> be 0.</p></li><li><p>Let <var>timezone<sub>minutes</sub></var> be 0.</p></li><li><p>Advance <var>position</var> to the next character in <var>input</var>.</p></li></ol>

    <p>Otherwise, if the character at <var>position</var> is either a U+002B PLUS SIGN (+)
    or a U+002D HYPHEN-MINUS (-), then:</p>

    <ol><li><p>If the character at <var>position</var> is a U+002B PLUS SIGN (+), let <var>sign</var> be "positive". Otherwise, it's a U+002D HYPHEN-MINUS (-); let <var>sign</var> be "negative".</p></li><li><p>Advance <var>position</var> to the next character in <var>input</var>.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="time-zones:collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="time-zones:ascii-digits-3">ASCII digits</a>. Let
     <var>s</var> be the collected sequence.</p></li><li>

      <p>If <var>s</var> is exactly two characters long, then run these substeps:</p>

      <ol><li><p>Interpret <var>s</var> as a base-ten integer. Let that number be the <var>timezone<sub>hours</sub></var>.</p></li><li><p>If <var>position</var> is beyond the end of <var>input</var> or if
       the character at <var>position</var> is not a U+003A COLON character, then fail.
       Otherwise, move <var>position</var> forwards one character.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="time-zones:collect-a-sequence-of-characters-2">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="time-zones:ascii-digits-4">ASCII digits</a>. If
       the collected sequence is not exactly two characters long, then fail. Otherwise, interpret
       the resulting sequence as a base-ten integer. Let that number be the <var>timezone<sub>minutes</sub></var>.</p></li></ol>

      <p>If <var>s</var> is exactly four characters long, then run these substeps:</p>

      <ol><li><p>Interpret the first two characters of <var>s</var> as a base-ten integer. Let
       that number be the <var>timezone<sub>hours</sub></var>.</p></li><li><p>Interpret the last two characters of <var>s</var> as a base-ten integer. Let
       that number be the <var>timezone<sub>minutes</sub></var>.</p></li></ol>

      <p>Otherwise, fail.</p>

     </li><li>If <var>timezone<sub>hours</sub></var> is not a number in the range
     0&nbsp;≤&nbsp;<var>timezone<sub>hours</sub></var>&nbsp;≤&nbsp;23, then
     fail.</li><li>If <var>sign</var> is "negative", then negate <var>timezone<sub>hours</sub></var>.</li><li>If <var>timezone<sub>minutes</sub></var> is not a number in the range
     0&nbsp;≤&nbsp;<var>timezone<sub>minutes</sub></var>&nbsp;≤&nbsp;59,
     then fail.</li><li>If <var>sign</var> is "negative", then negate <var>timezone<sub>minutes</sub></var>.</li></ol>

    <p>Otherwise, fail.</p>

   </li><li><p>Return <var>timezone<sub>hours</sub></var> and <var>timezone<sub>minutes</sub></var>.</p></li></ol></section>

  


  <section><h5 id="global-dates-and-times">2.4.5.7 Global dates and times</h5>

  <p>A <dfn id="concept-datetime">global date and time</dfn> consists of a specific
  <a href="infrastructure.html#proleptic-gregorian-date" id="global-dates-and-times:proleptic-gregorian-date">proleptic-Gregorian date</a>, consisting of a year, a month, and a day, and a time,
  consisting of an hour, a minute, a second, and a fraction of a second, expressed with a time-zone
  offset, consisting of a signed number of hours and minutes. <a href="references.html#refsGREGORIAN">[GREGORIAN]</a></p>

  <p>A string is a <dfn id="valid-global-date-and-time-string">valid global date and time string</dfn> representing a date, time, and a
  time-zone offset if it consists of the following components in the given order:</p>

  <ol><li>A <a href="infrastructure.html#valid-date-string" id="global-dates-and-times:valid-date-string">valid date string</a> representing the date</li><li>A U+0054 LATIN CAPITAL LETTER T character (T) or a U+0020 SPACE character</li><li>A <a href="infrastructure.html#valid-time-string" id="global-dates-and-times:valid-time-string">valid time string</a> representing the time</li><li>A <a href="infrastructure.html#valid-time-zone-offset-string" id="global-dates-and-times:valid-time-zone-offset-string">valid time-zone offset string</a> representing the time-zone offset</li></ol>

  <p>Times in dates before the formation of UTC in the mid twentieth century must be expressed and
  interpreted in terms of UT1 (contemporary Earth solar time at the 0° longitude), not UTC (the
  approximation of UT1 that ticks in SI seconds). Time before the formation of time zones must be
  expressed and interpeted as UT1 times with explicit time zones that approximate the contemporary
  difference between the appropriate local time and the time observed at the location of Greenwich,
  London.</p>

  <div class="example">

   <p>The following are some examples of dates written as <a href="infrastructure.html#valid-global-date-and-time-string" id="global-dates-and-times:valid-global-date-and-time-string">valid global date and time strings</a>.</p>

   <dl><dt>"<code>0037-12-13 00:00Z</code>"</dt><dd>Midnight in areas using London time on the birthday of Nero (the Roman Emperor). See below
    for further discussion on which date this actually corresponds to.</dd><dt>"<code>1979-10-14T12:00:00.001-04:00</code>"</dt><dd>One millisecond after noon on October 14th 1979, in the time zone in use on the east coast
    of the USA during daylight saving time.</dd><dt>"<code>8592-01-01T02:09+02:09</code>"</dt><dd>Midnight UTC on the 1st of January, 8592. The time zone associated with that time is two
    hours and nine minutes ahead of UTC, which is not currently a real time zone, but is nonetheless
    allowed.</dd></dl>

   <p>Several things are notable about these dates:</p>

   <ul><li>Years with fewer than four digits have to be zero-padded. The date "37-12-13" would not be a
    valid date.</li><li>If the "<code>T</code>" is replaced by a space, it must be a single space
    character. The string "<code>2001-12-21&nbsp;&nbsp;12:00Z</code>" (with two spaces
    between the components) would not be parsed successfully.</li><li>To unambiguously identify a moment in time prior to the introduction of the Gregorian
    calendar (insofar as moments in time before the formation of UTC can be unambiguously
    identified), the date has to be first converted to the Gregorian calendar from the calendar in
    use at the time (e.g. from the Julian calendar). The date of Nero's birth is the 15th of
    December 37, in the Julian Calendar, which is the 13th of December 37 in the <a href="infrastructure.html#proleptic-gregorian-calendar" id="global-dates-and-times:proleptic-gregorian-calendar">proleptic
    Gregorian calendar</a>.</li><li>The time and time-zone offset components are not optional.</li><li>Dates before the year one can't be represented as a datetime in this version of HTML.</li><li>Times of specific events in ancient times are, at best, approximations, since time was not
    well coordinated or measured until relatively recent decades.</li><li>Time-zone offsets differ based on daylight savings time.</li></ul>

  </div>

  <p class="note">
  The zone offset is not a complete time zone specification. When working
  with real date and time values, consider using a separate field for time zone,
  perhaps using IANA time zone IDs. <a href="references.html#refsTIMEZONES">[TIMEZONES]</a>
</p>
<p>A string is a <dfn id="valid-normalised-forced-utc-global-date-and-time-string">valid normalised forced-UTC global date and time string</dfn> representing a
  date, time, and a time-zone offset if it consists of the following components in the given
  order:</p>

  <ol><li>A <a href="infrastructure.html#valid-date-string" id="global-dates-and-times:valid-date-string-2">valid date string</a> representing the date converted to the UTC time zone</li><li>A U+0054 LATIN CAPITAL LETTER T character (T)</li><li>A <a href="infrastructure.html#valid-time-string" id="global-dates-and-times:valid-time-string-2">valid time string</a> representing the time converted to the UTC time zone and
   expressed as the shortest possible string for the given time (e.g. omitting the seconds component
   entirely if the given time is zero seconds past the minute)</li><li>A U+005A LATIN CAPITAL LETTER Z character (Z)</li></ol>

  

  <p>The rules to <dfn id="parse-a-global-date-and-time-string">parse a global date and time string</dfn> are as follows. This will return
  either a time in UTC, with associated time-zone offset information for round-tripping or display
  purposes, or nothing. If at any point the algorithm says that it "fails", this means that it is
  aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p><a href="infrastructure.html#parse-a-date-component" id="global-dates-and-times:parse-a-date-component">Parse a date component</a> to obtain <var>year</var>, <var>month</var>, and <var>day</var>. If this returns nothing, then fail.</p>

   </li><li><p>If <var>position</var> is beyond the end of <var>input</var> or if the
   character at <var>position</var> is neither a U+0054 LATIN CAPITAL LETTER T character
   (T) nor a U+0020 SPACE character, then fail. Otherwise, move <var>position</var>
   forwards one character.</p></li><li><p><a href="infrastructure.html#parse-a-time-component" id="global-dates-and-times:parse-a-time-component">Parse a time component</a> to obtain <var>hour</var>, <var>minute</var>, and <var>second</var>. If this returns nothing, then fail.</p>

   </li><li><p>If <var>position</var> is beyond the end of <var>input</var>, then
   fail.</p></li><li><p><a href="infrastructure.html#parse-a-time-zone-offset-component" id="global-dates-and-times:parse-a-time-zone-offset-component">Parse a time-zone offset component</a> to obtain <var>timezone<sub>hours</sub></var> and <var>timezone<sub>minutes</sub></var>. If this
   returns nothing, then fail.</p>

   </li><li><p>If <var>position</var> is <em>not</em> beyond the end of <var>input</var>, then fail.</p></li><li><p>Let <var>time</var> be the moment in time at year <var>year</var>, month
   <var>month</var>, day <var>day</var>, hours <var>hour</var>, minute
   <var>minute</var>, second <var>second</var>, subtracting <var>timezone<sub>hours</sub></var> hours and <var>timezone<sub>minutes</sub></var> minutes. That moment in time is a moment in the UTC time
   zone.</p></li><li><p>Let <var>timezone</var> be <var>timezone<sub>hours</sub></var>
   hours and <var>timezone<sub>minutes</sub></var> minutes from UTC.</p></li><li><p>Return <var>time</var> and <var>timezone</var>.</p></li></ol></section>

  


  <section><h5 id="weeks">2.4.5.8 Weeks</h5>

  <p>A <dfn id="concept-week">week</dfn> consists of a week-year number and a week number
  representing a seven-day period starting on a Monday. Each week-year in this calendaring system
  has either 52 or 53 such seven-day periods, as defined below. The seven-day period starting on the
  Gregorian date Monday December 29th 1969 (1969-12-29) is defined as week number 1 in week-year
  1970. Consecutive weeks are numbered sequentially. The week before the number 1 week in a
  week-year is the last week in the previous week-year, and vice versa. <a href="references.html#refsGREGORIAN">[GREGORIAN]</a></p>

  <p>A week-year with a number <var>year</var> has 53 weeks if it corresponds to either a
  year <var>year</var> in the <a href="infrastructure.html#proleptic-gregorian-calendar" id="weeks:proleptic-gregorian-calendar">proleptic Gregorian calendar</a> that has a Thursday
  as its first day (January 1st), or a year <var>year</var> in the <a href="infrastructure.html#proleptic-gregorian-calendar" id="weeks:proleptic-gregorian-calendar-2">proleptic
  Gregorian calendar</a> that has a Wednesday as its first day (January 1st) and where <var>year</var> is a number divisible by 400, or a number divisible by 4 but not by 100. All
  other week-years have 52 weeks.</p>

  <p>The <dfn id="week-number-of-the-last-day">week number of the last day</dfn> of a week-year with 53 weeks is 53; the week number
  of the last day of a week-year with 52 weeks is 52.</p>

  <p class="note">The week-year number of a particular day can be different than the number of the
  year that contains that day in the <a href="infrastructure.html#proleptic-gregorian-calendar" id="weeks:proleptic-gregorian-calendar-3">proleptic Gregorian calendar</a>. The first week in a
  week-year <var>y</var> is the week that contains the first Thursday of the Gregorian year
  <var>y</var>.</p>

  <p class="note">For modern purposes, a <a href="infrastructure.html#concept-week" id="weeks:concept-week">week</a> as defined here is
  equivalent to ISO weeks as defined in ISO 8601. <a href="references.html#refsISO8601">[ISO8601]</a></p>

  <p>A string is a <dfn id="valid-week-string">valid week string</dfn> representing a week-year <var>year</var>
  and week <var>week</var> if it consists of the following components in the given
  order:</p>

  <ol><li>Four or more <a href="infrastructure.html#ascii-digits" id="weeks:ascii-digits">ASCII digits</a>, representing <var>year</var>, where <var>year</var>&nbsp;&gt;&nbsp;0</li><li>A U+002D HYPHEN-MINUS character (-)</li><li>A U+0057 LATIN CAPITAL LETTER W character (W)</li><li>Two <a href="infrastructure.html#ascii-digits" id="weeks:ascii-digits-2">ASCII digits</a>, representing the week <var>week</var>, in the range
   1&nbsp;≤&nbsp;<var>week</var>&nbsp;≤&nbsp;<var>maxweek</var>, where <var>maxweek</var> is the <a href="infrastructure.html#week-number-of-the-last-day" id="weeks:week-number-of-the-last-day">week number of the last day</a> of week-year <var>year</var></li></ol>

  

  <p>The rules to <dfn id="parse-a-week-string">parse a week string</dfn> are as follows. This will return either a week-year
  number and week number, or nothing. If at any point the algorithm says that it "fails", this means
  that it is aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="weeks:collect-a-sequence-of-characters">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="weeks:ascii-digits-3">ASCII digits</a>. If the
   collected sequence is not at least four characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var>year</var>.</p></li><li><p>If <var>year</var> is not a number greater than zero, then fail.</p></li><li><p>If <var>position</var> is beyond the end of <var>input</var> or if the
   character at <var>position</var> is not a U+002D HYPHEN-MINUS character, then fail.
   Otherwise, move <var>position</var> forwards one character.</p></li><li><p>If <var>position</var> is beyond the end of <var>input</var> or if the
   character at <var>position</var> is not a U+0057 LATIN CAPITAL LETTER W character (W),
   then fail. Otherwise, move <var>position</var> forwards one character.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="weeks:collect-a-sequence-of-characters-2">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="weeks:ascii-digits-4">ASCII digits</a>. If the
   collected sequence is not exactly two characters long, then fail. Otherwise, interpret the
   resulting sequence as a base-ten integer. Let that number be the <var>week</var>.</p></li><li><p>Let <var>maxweek</var> be the <a href="infrastructure.html#week-number-of-the-last-day" id="weeks:week-number-of-the-last-day-2">week number of the last day</a> of year
   <var>year</var>.</p></li><li><p>If <var>week</var> is not a number in the range 1&nbsp;≤&nbsp;<var>week</var>&nbsp;≤&nbsp;<var>maxweek</var>, then fail.</p></li><li><p>If <var>position</var> is <em>not</em> beyond the end of <var>input</var>, then fail.</p></li><li><p>Return the week-year number <var>year</var> and the week number <var>week</var>.</p></li></ol></section>

  


  <section><h5 id="durations">2.4.5.9 Durations</h5>

  

  <p>A <dfn id="concept-duration">duration</dfn> consists of  a number of seconds.</p>

  <p class="note">Since months and seconds are not comparable (a month is not a precise number of
  seconds, but is instead a period whose exact length depends on the precise day from which it is
  measured) a <a href="infrastructure.html#concept-duration" id="durations:concept-duration">duration</a> as defined in this specification cannot
   include months (or years, which are equivalent to
  twelve months). Only durations that describe a specific number of seconds can be described.</p>

  <p>A string is a <dfn id="valid-duration-string">valid duration string</dfn> representing a <a href="infrastructure.html#concept-duration" id="durations:concept-duration-2">duration</a> <var>t</var> if it consists of either of the
  following:</p>

  <ul><li>

    

    

    <p>A literal U+0050 LATIN CAPITAL LETTER P character followed by one or more of the following
    subcomponents, in the order given, where the number of days, hours, minutes, and
    seconds corresponds to the same number of seconds as in <var>t</var>:</p>

    <ol><li><p>One or more <a href="infrastructure.html#ascii-digits" id="durations:ascii-digits">ASCII digits</a> followed by a U+0044 LATIN CAPITAL LETTER D
     character, representing a number of days.</p></li><li>

      <p>A U+0054 LATIN CAPITAL LETTER T character followed by one or more of the following
      subcomponents, in the order given:</p>

      <ol><li><p>One or more <a href="infrastructure.html#ascii-digits" id="durations:ascii-digits-2">ASCII digits</a> followed by a U+0048 LATIN CAPITAL LETTER H
       character, representing a number of hours.</p></li><li><p>One or more <a href="infrastructure.html#ascii-digits" id="durations:ascii-digits-3">ASCII digits</a> followed by a U+004D LATIN CAPITAL LETTER M
       character, representing a number of minutes.</p></li><li>

        <p>The following components:</p>

        <ol><li><p>One or more <a href="infrastructure.html#ascii-digits" id="durations:ascii-digits-4">ASCII digits</a>, representing a number of seconds.</p></li><li><p>Optionally, a U+002E FULL STOP character (.) followed by one, two, or three
         <a href="infrastructure.html#ascii-digits" id="durations:ascii-digits-5">ASCII digits</a>, representing a fraction of a second.</p></li><li><p>A U+0053 LATIN CAPITAL LETTER S character.</p></li></ol>

       </li></ol>

     </li></ol>

    <p class="note">This, as with a number of other date- and time-related microsyntaxes defined in
    this specification, is based on one of the formats defined in ISO 8601. <a href="references.html#refsISO8601">[ISO8601]</a></p>

   </li><li>

    <p>One or more <a href="infrastructure.html#duration-time-component" id="durations:duration-time-component">duration time components</a>, each with
    a different <a href="infrastructure.html#duration-time-component-scale" id="durations:duration-time-component-scale">duration time component scale</a>, in any order; the sum of the represented
    seconds being equal to the number of seconds in <var>t</var>.</p>

    <p>A <dfn id="duration-time-component">duration time component</dfn> is a string consisting of the following components:</p>

    <ol><li><p>Zero or more <a href="infrastructure.html#space-character" id="durations:space-character">space characters</a>.</p></li><li><p>One or more <a href="infrastructure.html#ascii-digits" id="durations:ascii-digits-6">ASCII digits</a>, representing a number of time units, scaled by
     the <a href="infrastructure.html#duration-time-component-scale" id="durations:duration-time-component-scale-2">duration time component scale</a> specified (see below) to represent a number of
     seconds.</p></li><li><p>If the <a href="infrastructure.html#duration-time-component-scale" id="durations:duration-time-component-scale-3">duration time component scale</a> specified is 1 (i.e. the units are
     seconds), then, optionally, a U+002E FULL STOP character (.) followed by one, two, or three
     <a href="infrastructure.html#ascii-digits" id="durations:ascii-digits-7">ASCII digits</a>, representing a fraction of a second.</p></li><li><p>Zero or more <a href="infrastructure.html#space-character" id="durations:space-character-2">space characters</a>.</p></li><li>

      <p>One of the following characters, representing the <dfn id="duration-time-component-scale">duration time component scale</dfn>
      of the time unit used in the numeric part of the <a href="infrastructure.html#duration-time-component" id="durations:duration-time-component-2">duration time component</a>:</p>

      <dl><dt>U+0057 LATIN CAPITAL LETTER W character</dt><dt>U+0077 LATIN SMALL LETTER W character</dt><dd>Weeks. The scale is 604800.</dd><dt>U+0044 LATIN CAPITAL LETTER D character</dt><dt>U+0064 LATIN SMALL LETTER D character</dt><dd>Days. The scale is 86400.</dd><dt>U+0048 LATIN CAPITAL LETTER H character</dt><dt>U+0068 LATIN SMALL LETTER H character</dt><dd>Hours. The scale is 3600.</dd><dt>U+004D LATIN CAPITAL LETTER M character</dt><dt>U+006D LATIN SMALL LETTER M character</dt><dd>Minutes. The scale is 60.</dd><dt>U+0053 LATIN CAPITAL LETTER S character</dt><dt>U+0073 LATIN SMALL LETTER S character</dt><dd>Seconds. The scale is 1.</dd></dl>

     </li><li><p>Zero or more <a href="infrastructure.html#space-character" id="durations:space-character-3">space
     characters</a>.</p></li></ol>

    <p class="note">This is not based on any of the formats in ISO 8601. It is intended to be a more
    human-readable alternative to the ISO 8601 duration format.</p>

   </li></ul>

  

  <p>The rules to <dfn id="parse-a-duration-string">parse a duration string</dfn> are as follows. This will return either a <a href="infrastructure.html#concept-duration" id="durations:concept-duration-3">duration</a> or nothing. If at any point the algorithm says that it
  "fails", this means that it is aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p>Let <var>months</var>, <var>seconds</var>, and <var>component
   count</var> all be zero.</p></li><li>

    <p>Let <var>M-disambiguator</var> be <i>minutes</i>.</p>

    
    <p class="note">This flag's other value is <i>months</i>. It is used to disambiguate the "M"
    unit in ISO8601 durations, which use the same unit for months and minutes. Months are not
    allowed, but are parsed for future compatibility and to avoid misinterpreting ISO8601 durations
    that would be valid in other contexts.</p>

   </li><li><p><a href="infrastructure.html#skip-whitespace" id="durations:skip-whitespace">Skip whitespace</a>.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, then
   fail.</p></li><li><p>If the character in <var>input</var> pointed to by <var>position</var>
   is a U+0050 LATIN CAPITAL LETTER P character, then advance <var>position</var> to the
   next character, set <var>M-disambiguator</var> to <i>months</i>, and <a href="infrastructure.html#skip-whitespace" id="durations:skip-whitespace-2">skip
   whitespace</a>.</p></li><li>

    <p>Run the following substeps in a loop, until a step requiring the loop to be broken or the
    entire algorithm to fail is reached:</p>

    <ol><li><p>Let <var>units</var> be undefined. It will be assigned one of the following
     values: <i>years</i>, <i>months</i>, <i>weeks</i>, <i>days</i>, <i>hours</i>, <i>minutes</i>,
     and <i>seconds</i>.</p></li><li><p>Let <var>next character</var> be undefined. It is used to process characters
     from the <var>input</var>.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, then break
     the loop.</p></li><li><p>If the character in <var>input</var> pointed to by <var>position</var>
     is a U+0054 LATIN CAPITAL LETTER T character, then advance <var>position</var> to the
     next character, set <var>M-disambiguator</var> to <i>minutes</i>, <a href="infrastructure.html#skip-whitespace" id="durations:skip-whitespace-3">skip
     whitespace</a>, and return to the top of the loop.</p></li><li><p>Set <var>next character</var> to the character in <var>input</var>
     pointed to by <var>position</var>.</p></li><li>

      <p>If <var>next character</var> is a U+002E FULL STOP character (.), then let <var>N</var> equal zero. (Do not advance <var>position</var>. That is taken care
      of below.)</p>

      <p>Otherwise, if <var>next character</var> is an <a href="infrastructure.html#ascii-digits" id="durations:ascii-digits-8">ASCII
      digit</a>, then <a href="infrastructure.html#collect-a-sequence-of-characters" id="durations:collect-a-sequence-of-characters">collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="durations:ascii-digits-9">ASCII
      digits</a>, interpret the resulting sequence as a base-ten integer, and let <var>N</var> be that number.</p>

      <p>Otherwise <var>next character</var> is not part of a number; fail.</p>

     </li><li><p>If <var>position</var> is past the end of <var>input</var>, then
     fail.</p></li><li><p>Set <var>next character</var> to the character in <var>input</var>
     pointed to by <var>position</var>, and this time advance <var>position</var>
     to the next character. (If <var>next character</var> was a U+002E FULL STOP character
     (.) before, it will still be that character this time.)</p></li><li>

      <p>If <var>next character</var> is a U+002E FULL STOP character (.), then run these
      substeps:</p>

      <ol><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="durations:collect-a-sequence-of-characters-2">Collect a sequence of characters</a> that are <a href="infrastructure.html#ascii-digits" id="durations:ascii-digits-10">ASCII digits</a>. Let
       <var>s</var> be the resulting sequence.</p></li><li><p>If <var>s</var> is the empty string, then fail.</p></li><li><p>Let <var>length</var> be the number of characters in <var>s</var>.</p></li><li><p>Let <var>fraction</var> be the result of interpreting <var>s</var>
       as a base-ten integer, and then dividing that number by <span>10<sup><var>length</var></sup></span>.</p></li><li><p>Increment <var>N</var> by <var>fraction</var>.</p></li><li><p><a href="infrastructure.html#skip-whitespace" id="durations:skip-whitespace-4">Skip whitespace</a>.</p></li><li><p>If <var>position</var> is past the end of <var>input</var>, then
       fail.</p></li><li><p>Set <var>next character</var> to the character in <var>input</var>
       pointed to by <var>position</var>, and advance <var>position</var> to the
       next character.</p></li><li><p>If <var>next character</var> is neither a U+0053 LATIN CAPITAL LETTER S
       character nor a U+0073 LATIN SMALL LETTER S character, then fail.</p></li><li><p>Set <var>units</var> to <i>seconds</i>.</p></li></ol>

      <p>Otherwise, run these substeps:</p>

      <ol><li><p>If <var>next character</var> is a <a href="infrastructure.html#space-character" id="durations:space-character-4">space character</a>, then
       <a href="infrastructure.html#skip-whitespace" id="durations:skip-whitespace-5">skip whitespace</a>, set <var>next character</var> to the character in <var>input</var> pointed to by <var>position</var>, and advance <var>position</var> to the next character.</p></li><li>

        

        <p>If <var>next character</var> is a U+0059 LATIN CAPITAL LETTER Y character, or a
        U+0079 LATIN SMALL LETTER Y character, set <var>units</var> to <i>years</i> and set
        <var>M-disambiguator</var> to <i>months</i>.</p>

        <p>If <var>next character</var> is a U+004D LATIN CAPITAL LETTER M character or a
        U+006D LATIN SMALL LETTER M character, and <var>M-disambiguator</var> is
        <i>months</i>, then set <var>units</var> to <i>months</i>.</p>

        <p>If <var>next character</var> is a U+0057 LATIN CAPITAL LETTER W character or a
        U+0077 LATIN SMALL LETTER W character, set <var>units</var> to <i>weeks</i> and set
        <var>M-disambiguator</var> to <i>minutes</i>.</p>

        <p>If <var>next character</var> is a U+0044 LATIN CAPITAL LETTER D character or a
        U+0064 LATIN SMALL LETTER D character, set <var>units</var> to <i>days</i> and set
        <var>M-disambiguator</var> to <i>minutes</i>.</p>

        <p>If <var>next character</var> is a U+0048 LATIN CAPITAL LETTER H character or a
        U+0068 LATIN SMALL LETTER H character, set <var>units</var> to <i>hours</i> and set
        <var>M-disambiguator</var> to <i>minutes</i>.</p>

        <p>If <var>next character</var> is a U+004D LATIN CAPITAL LETTER M character or a
        U+006D LATIN SMALL LETTER M character, and <var>M-disambiguator</var> is
        <i>minutes</i>, then set <var>units</var> to <i>minutes</i>.</p>

        <p>If <var>next character</var> is a U+0053 LATIN CAPITAL LETTER S character or a
        U+0073 LATIN SMALL LETTER S character, set <var>units</var> to <i>seconds</i> and
        set <var>M-disambiguator</var> to <i>minutes</i>.</p>

        <p>Otherwise if <var>next character</var> is none of the above characters, then
        fail.</p>

       </li></ol>

     </li><li><p>Increment <var>component count</var>.</p></li><li><p>Let <var>multiplier</var> be 1.</p></li><li><p>If <var>units</var> is <i>years</i>, multiply <var>multiplier</var> by
     12 and set <var>units</var> to <i>months</i>.</p></li><li>

      <p>If <var>units</var> is <i>months</i>, add the product of <var>N</var> and
      <var>multiplier</var> to <var>months</var>.</p>

      <p>Otherwise, run these substeps:</p>

      <ol><li><p>If <var>units</var> is <i>weeks</i>, multiply <var>multiplier</var>
       by 7 and set <var>units</var> to <i>days</i>.</p></li><li><p>If <var>units</var> is <i>days</i>, multiply <var>multiplier</var>
       by 24 and set <var>units</var> to <i>hours</i>.</p></li><li><p>If <var>units</var> is <i>hours</i>, multiply <var>multiplier</var>
       by 60 and set <var>units</var> to <i>minutes</i>.</p></li><li><p>If <var>units</var> is <i>minutes</i>, multiply <var>multiplier</var> by 60 and set <var>units</var> to <i>seconds</i>.</p></li><li><p>Forcibly, <var>units</var> is now <i>seconds</i>. Add the product of <var>N</var> and <var>multiplier</var> to <var>seconds</var>.</p></li></ol>

     </li><li><p><a href="infrastructure.html#skip-whitespace" id="durations:skip-whitespace-6">Skip whitespace</a>.</p></li></ol>

   </li><li><p>If <var>component count</var> is zero,
   fail.</p></li><li><p>If <var>months</var> is not zero, fail.</p></li><li><p>Return the <a href="infrastructure.html#concept-duration" id="durations:concept-duration-4">duration</a> consisting of <var>seconds</var> seconds.</p></li></ol></section>

  


  <section><h5 id="vaguer-moments-in-time">2.4.5.10 Vaguer moments in time</h5>

  <p>A string is a <dfn id="valid-date-string-with-optional-time">valid date string with optional time</dfn> if
  it is also one of the following:</p>

  <ul><li>A <a href="infrastructure.html#valid-date-string" id="vaguer-moments-in-time:valid-date-string">valid date string</a></li><li>A <a href="infrastructure.html#valid-global-date-and-time-string" id="vaguer-moments-in-time:valid-global-date-and-time-string">valid global date and time string</a></li></ul>

  

  <hr>

  <p>The rules to <dfn id="parse-a-date-or-time-string">parse a date or time string</dfn> are as follows. The algorithm will return
  either a <a href="infrastructure.html#concept-date" id="vaguer-moments-in-time:concept-date">date</a>, a <a href="infrastructure.html#concept-time" id="vaguer-moments-in-time:concept-time">time</a>, a <a href="infrastructure.html#concept-datetime" id="vaguer-moments-in-time:concept-datetime">global date and time</a>, or nothing. If at any point the algorithm
  says that it "fails", this means that it is aborted at that point and returns nothing.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p>Set <var>start position</var> to the same position as <var>position</var>.</p></li><li><p>Set the <var>date present</var> and <var>time present</var> flags to
   true.</p></li><li><p><a href="infrastructure.html#parse-a-date-component" id="vaguer-moments-in-time:parse-a-date-component">Parse a date component</a> to obtain <var>year</var>, <var>month</var>, and <var>day</var>. If this fails, then set the <var>date
   present</var> flag to false.</p>

   </li><li>

    <p>If <var>date present</var> is true, and <var>position</var> is not beyond
    the end of <var>input</var>, and the character at <var>position</var> is
    either a U+0054 LATIN CAPITAL LETTER T character (T) or a U+0020 SPACE character, then advance
    <var>position</var> to the next character in <var>input</var>.</p>

    <p>Otherwise, if <var>date present</var> is true, and either <var>position</var> is beyond the end of <var>input</var> or the character at <var>position</var> is neither a U+0054 LATIN CAPITAL LETTER T character (T) nor a U+0020
    SPACE character, then set <var>time present</var> to false.</p>

    <p>Otherwise, if <var>date present</var> is false, set <var>position</var>
    back to the same position as <var>start position</var>.</p>

   </li><li><p>If the <var>time present</var> flag is true, then <a href="infrastructure.html#parse-a-time-component" id="vaguer-moments-in-time:parse-a-time-component">parse a time
   component</a> to obtain <var>hour</var>, <var>minute</var>, and <var>second</var>. If this returns nothing, then fail.</p></li><li><p>If the <var>date present</var> and <var>time present</var> flags are
   both true, but <var>position</var> is beyond the end of <var>input</var>, then
   fail.</p></li><li><p>If the <var>date present</var> and <var>time present</var> flags are
   both true, <a href="infrastructure.html#parse-a-time-zone-offset-component" id="vaguer-moments-in-time:parse-a-time-zone-offset-component">parse a time-zone offset component</a> to obtain <var>timezone<sub>hours</sub></var> and <var>timezone<sub>minutes</sub></var>. If this
   returns nothing, then fail.</p>

   </li><li><p>If <var>position</var> is <em>not</em> beyond the end of <var>input</var>, then fail.</p></li><li>

    <p>If the <var>date present</var> flag is true and the <var>time present</var>
    flag is false, then let <var>date</var> be the date with year <var>year</var>,
    month <var>month</var>, and day <var>day</var>, and return <var>date</var>.</p>

    <p>Otherwise, if the <var>time present</var> flag is true and the <var>date
    present</var> flag is false, then let <var>time</var> be the time with hour <var>hour</var>, minute <var>minute</var>, and second <var>second</var>,
    and return <var>time</var>.</p>

    <p>Otherwise, let <var>time</var> be the moment in time at year <var>year</var>, month <var>month</var>, day <var>day</var>, hours <var>hour</var>, minute <var>minute</var>, second <var>second</var>,
    subtracting <var>timezone<sub>hours</sub></var> hours and <var>timezone<sub>minutes</sub></var> minutes, that moment in time being a moment
    in the UTC time zone; let <var>timezone</var> be <var>timezone<sub>hours</sub></var> hours and <var>timezone<sub>minutes</sub></var>
    minutes from UTC; and return <var>time</var> and <var>timezone</var>.</p>

   </li></ol></section></section>

  


  <section><h4 id="colours">2.4.6 Colours</h4>

  <p>A <dfn id="simple-colour">simple colour</dfn> consists of three 8-bit numbers in the range 0..255, representing the
  red, green, and blue components of the colour respectively, in the sRGB colour space. <a href="references.html#refsSRGB">[SRGB]</a></p>

  <p>A string is a <dfn id="valid-simple-colour">valid simple colour</dfn> if it is exactly seven characters long, and the
  first character is a U+0023 NUMBER SIGN character (#), and the remaining six characters are all
  <a href="infrastructure.html#ascii-hex-digits" id="colours:ascii-hex-digits">ASCII hex digits</a>, with the first two digits representing the red component, the
  middle two digits representing the green component, and the last two digits representing the blue
  component, in hexadecimal.</p>

  <p>A string is a <dfn id="valid-lowercase-simple-colour">valid lowercase simple colour</dfn> if it is a <a href="infrastructure.html#valid-simple-colour" id="colours:valid-simple-colour">valid simple
  colour</a> and doesn't use any characters in the range U+0041 LATIN CAPITAL LETTER A to U+0046
  LATIN CAPITAL LETTER F.</p>

  

  <p>The <dfn id="rules-for-parsing-simple-colour-values">rules for parsing simple colour values</dfn> are as given in the following algorithm.
  When invoked, the steps must be followed in the order given, aborting at the first step that
  returns a value. This algorithm will return either a <a href="infrastructure.html#simple-colour" id="colours:simple-colour">simple colour</a> or an error.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>If <var>input</var> is not exactly seven characters long, then return an
   error.</p></li><li><p>If the first character in <var>input</var> is not a U+0023 NUMBER SIGN character
   (#), then return an error.</p></li><li><p>If the last six characters of <var>input</var> are not all <a href="infrastructure.html#ascii-hex-digits" id="colours:ascii-hex-digits-2">ASCII hex
   digits</a>, then return an error.</p></li><li><p>Let <var>result</var> be a <a href="infrastructure.html#simple-colour" id="colours:simple-colour-2">simple colour</a>.</p>

   </li><li><p>Interpret the second and third characters as a hexadecimal number and let the result be
   the red component of <var>result</var>.</p>

   </li><li><p>Interpret the fourth and fifth characters as a hexadecimal number and let the result be
   the green component of <var>result</var>.</p>

   </li><li><p>Interpret the sixth and seventh characters as a hexadecimal number and let the result be
   the blue component of <var>result</var>.</p>

   </li><li><p>Return <var>result</var>.</p>

  </li></ol>

  <p>The <dfn id="rules-for-serialising-simple-colour-values">rules for serialising simple colour values</dfn> given a <a href="infrastructure.html#simple-colour" id="colours:simple-colour-3">simple colour</a> are
  as given in the following algorithm:</p>

  <ol><li><p>Let <var>result</var> be a string consisting of a single U+0023 NUMBER SIGN
   character (#).</p></li><li><p>Convert the red, green, and blue components in turn to two-digit hexadecimal numbers using
   <a href="infrastructure.html#lowercase-ascii-hex-digits" id="colours:lowercase-ascii-hex-digits">lowercase ASCII hex digits</a>, zero-padding if necessary, and append these numbers to
   <var>result</var>, in the order red, green, blue.</p>

   </li><li><p>Return <var>result</var>, which will be a <a href="infrastructure.html#valid-lowercase-simple-colour" id="colours:valid-lowercase-simple-colour">valid lowercase simple
   colour</a>.</p></li></ol>

  <hr>

  <p>Some obsolete legacy attributes parse colours in a more complicated manner, using the <dfn id="rules-for-parsing-a-legacy-colour-value">rules
  for parsing a legacy colour value</dfn>, which are given in the following algorithm. When invoked,
  the steps must be followed in the order given, aborting at the first step that returns a value.
  This algorithm will return either a <a href="infrastructure.html#simple-colour" id="colours:simple-colour-4">simple colour</a> or an error.</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>If <var>input</var> is the empty string, then return an error.</p></li><li><p><a href="infrastructure.html#strip-leading-and-trailing-whitespace" id="colours:strip-leading-and-trailing-whitespace">Strip leading and trailing whitespace</a> from <var>input</var>.</p></li><li><p>If <var>input</var> is an <a href="infrastructure.html#ascii-case-insensitive" id="colours:ascii-case-insensitive">ASCII case-insensitive</a> match for the
   string "<code>transparent</code>", then return an error.</p></li><li>

    <p>If <var>input</var> is an <a href="infrastructure.html#ascii-case-insensitive" id="colours:ascii-case-insensitive-2">ASCII case-insensitive</a> match for one of the
    <span>named colours</span>, then return the <a href="infrastructure.html#simple-colour" id="colours:simple-colour-5">simple
    colour</a> corresponding to that keyword. <a href="references.html#refsCSSCOLOR">[CSSCOLOR]</a></p>

    <p class="note"><a href="http://www.w3.org/TR/css3-color/#css2-system">CSS2 System
    Colors</a> are not recognised.</p>

   </li><li>

    <p>If <var>input</var> is four characters long, and the first character in <var>input</var> is a U+0023 NUMBER SIGN character (#), and the last three characters of
    <var>input</var> are all <a href="infrastructure.html#ascii-hex-digits" id="colours:ascii-hex-digits-3">ASCII hex digits</a>, then run these substeps:</p>

    <ol><li><p>Let <var>result</var> be a <a href="infrastructure.html#simple-colour" id="colours:simple-colour-6">simple colour</a>.</p>

     </li><li><p>Interpret the second character of <var>input</var> as a hexadecimal digit; let
     the red component of <var>result</var> be the resulting number multiplied by 17.</p>

     </li><li><p>Interpret the third character of <var>input</var> as a hexadecimal digit; let
     the green component of <var>result</var> be the resulting number multiplied by 17.</p>

     </li><li><p>Interpret the fourth character of <var>input</var> as a hexadecimal digit; let
     the blue component of <var>result</var> be the resulting number multiplied by 17.</p>

     </li><li><p>Return <var>result</var>.</p>

    </li></ol>

   </li><li><p>Replace any characters in <var>input</var> that have a Unicode code point greater
   than U+FFFF (i.e. any characters that are not in the basic multilingual plane) with the
   two-character string "<code>00</code>".</p></li><li><p>If <var>input</var> is longer than 128 characters, truncate <var>input</var>, leaving only the first 128 characters.</p></li><li><p>If the first character in <var>input</var> is a U+0023 NUMBER SIGN character (#),
   remove it.</p></li><li><p>Replace any character in <var>input</var> that is not an <a href="infrastructure.html#ascii-hex-digits" id="colours:ascii-hex-digits-4">ASCII hex digit</a> with the character U+0030 DIGIT ZERO (0).</p></li><li><p>While <var>input</var>'s length is zero or not a multiple of three, append a
   U+0030 DIGIT ZERO (0) character to <var>input</var>.</p></li><li><p>Split <var>input</var> into three strings of equal length, to obtain three
   components. Let <var>length</var> be the length of those components (one third the
   length of <var>input</var>).</p></li><li><p>If <var>length</var> is greater than 8, then remove the leading <span><var>length</var>-8</span> characters in each component, and let <var>length</var> be 8.</p></li><li><p>While <var>length</var> is greater than two and the first character in each
   component is a U+0030 DIGIT ZERO (0) character, remove that character and reduce <var>length</var> by one.</p></li><li><p>If <var>length</var> is <em>still</em> greater than two, truncate each component,
   leaving only the first two characters in each.</p></li><li><p>Let <var>result</var> be a <a href="infrastructure.html#simple-colour" id="colours:simple-colour-7">simple colour</a>.</p>

   </li><li><p>Interpret the first component as a hexadecimal number; let the red component of <var>result</var> be the resulting number.</p></li><li><p>Interpret the second component as a hexadecimal number; let the green component of <var>result</var> be the resulting number.</p></li><li><p>Interpret the third component as a hexadecimal number; let the blue component of <var>result</var> be the resulting number.</p></li><li><p>Return <var>result</var>.</p>

  </li></ol>

  

  <hr>

  <p class="note">The <a href="semantics.html#canvas-context-2d" id="colours:canvas-context-2d">2D graphics context</a> has a separate
  colour syntax that also handles opacity.</p></section>



  <section><h4 id="space-separated-tokens">2.4.7 Space-separated tokens</h4>

  <p>A <dfn id="set-of-space-separated-tokens">set of space-separated tokens</dfn> is a string containing zero or more words (known as
  tokens) separated by one or more <a href="infrastructure.html#space-character" id="space-separated-tokens:space-character">space characters</a>, where
  words consist of any string of one or more characters, none of which are <a href="infrastructure.html#space-character" id="space-separated-tokens:space-character-2">space characters</a>.</p>

  <p>A string containing a <a href="infrastructure.html#set-of-space-separated-tokens" id="space-separated-tokens:set-of-space-separated-tokens">set of space-separated tokens</a> may have leading or trailing
  <a href="infrastructure.html#space-character" id="space-separated-tokens:space-character-3">space characters</a>.</p>

  <p>An <dfn id="unordered-set-of-unique-space-separated-tokens">unordered set of unique space-separated tokens</dfn> is a <a href="infrastructure.html#set-of-space-separated-tokens" id="space-separated-tokens:set-of-space-separated-tokens-2">set of space-separated
  tokens</a> where none of the tokens are duplicated.</p>

  <p>An <dfn id="ordered-set-of-unique-space-separated-tokens">ordered set of unique space-separated tokens</dfn> is a <a href="infrastructure.html#set-of-space-separated-tokens" id="space-separated-tokens:set-of-space-separated-tokens-3">set of space-separated
  tokens</a> where none of the tokens are duplicated but where the order of the tokens is
  meaningful.</p>

  <p><a href="infrastructure.html#set-of-space-separated-tokens" id="space-separated-tokens:set-of-space-separated-tokens-4">Sets of space-separated tokens</a> sometimes
  have a defined set of allowed values. When a set of allowed values is defined, the tokens must all
  be from that list of allowed values; other values are non-conforming. If no such set of allowed
  values is provided, then all values are conforming.</p>

  <p class="note">How tokens in a <a href="infrastructure.html#set-of-space-separated-tokens" id="space-separated-tokens:set-of-space-separated-tokens-5">set of space-separated tokens</a> are to be compared
  (e.g. case-sensitively or not) is defined on a per-set basis.</p>

  

  <p>When a user agent has to <dfn id="split-a-string-on-spaces">split a string on spaces</dfn>, it must use the following
  algorithm:</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p>Let <var>tokens</var> be an ordered list of tokens, initially empty.</p></li><li><p><a href="infrastructure.html#skip-whitespace" id="space-separated-tokens:skip-whitespace">Skip whitespace</a></p></li><li><p>While <var>position</var> is not past the end of <var>input</var>:</p>

    <ol><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="space-separated-tokens:collect-a-sequence-of-characters">Collect a sequence of characters</a> that are not <a href="infrastructure.html#space-character" id="space-separated-tokens:space-character-4">space characters</a>.</p></li><li><p>Append the string collected in the previous step to <var>tokens</var>.</p></li><li><p><a href="infrastructure.html#skip-whitespace" id="space-separated-tokens:skip-whitespace-2">Skip whitespace</a></p></li></ol>

   </li><li><p>Return <var>tokens</var>.</p></li></ol></section>

  


  <section><h4 id="comma-separated-tokens">2.4.8 Comma-separated tokens</h4>

  <p>A <dfn id="set-of-comma-separated-tokens">set of comma-separated tokens</dfn> is a string containing zero or more tokens each
  separated from the next by a single U+002C COMMA character (,), where tokens consist of any string
  of zero or more characters, neither beginning nor ending with <a href="infrastructure.html#space-character" id="comma-separated-tokens:space-character">space
  characters</a>, nor containing any U+002C COMMA characters (,), and optionally surrounded by
  <a href="infrastructure.html#space-character" id="comma-separated-tokens:space-character-2">space characters</a>.</p>

  <p class="example">For instance, the string "<code>&nbsp;a&nbsp;,b,,d&nbsp;d&nbsp;</code>" consists of four tokens: "a", "b", the empty
  string, and "d&nbsp;d". Leading and trailing whitespace around each token doesn't count as part of
  the token, and the empty string can be a token.</p>

  <p><a href="infrastructure.html#set-of-comma-separated-tokens" id="comma-separated-tokens:set-of-comma-separated-tokens">Sets of comma-separated tokens</a> sometimes
  have further restrictions on what consists a valid token. When such restrictions are defined, the
  tokens must all fit within those restrictions; other values are non-conforming. If no such
  restrictions are specified, then all values are conforming.</p>

  

  <p>When a user agent has to <dfn id="split-a-string-on-commas">split a string on commas</dfn>, it must use the following
  algorithm:</p>

  <ol><li><p>Let <var>input</var> be the string being parsed.</p></li><li><p>Let <var>position</var> be a pointer into <var>input</var>, initially
   pointing at the start of the string.</p></li><li><p>Let <var>tokens</var> be an ordered list of tokens, initially empty.</p></li><li><p><i>Token</i>: If <var>position</var> is past the end of <var>input</var>, jump to the last step.</p></li><li><p><a href="infrastructure.html#collect-a-sequence-of-characters" id="comma-separated-tokens:collect-a-sequence-of-characters">Collect a sequence of characters</a> that are not U+002C COMMA characters (,).
   Let <var>s</var> be the resulting sequence (which might be the empty string).</p></li><li><p><a href="infrastructure.html#strip-leading-and-trailing-whitespace" id="comma-separated-tokens:strip-leading-and-trailing-whitespace">Strip leading and trailing whitespace</a> from <var>s</var>.</p></li><li><p>Append <var>s</var> to <var>tokens</var>.</p></li><li><p>If <var>position</var> is not past the end of <var>input</var>, then
   the character at <var>position</var> is a U+002C COMMA character (,); advance <var>position</var> past that character.</p></li><li><p>Jump back to the step labeled <i>token</i>.</p></li><li><p>Return <var>tokens</var>.</p></li></ol></section>

  




  <section><h4 id="syntax-references">2.4.9 References</h4>

  <p>A <dfn id="valid-hash-name-reference">valid hash-name reference</dfn> to an element of type <var>type</var> is a
  string consisting of a U+0023 NUMBER SIGN character (#) followed by a string which exactly matches
  the value of the <code>name</code> attribute of an element with type <var>type</var> in the document.</p>

  

  <p>The <dfn id="rules-for-parsing-a-hash-name-reference">rules for parsing a hash-name reference</dfn> to an element of type <var>type</var>, given a context node <var>scope</var>, are as follows:</p>

  <ol><li><p>If the string being parsed does not contain a U+0023 NUMBER SIGN character, or if the
   first such character in the string is the last character in the string, then return null and
   abort these steps.</p></li><li><p>Let <var>s</var> be the string from the character immediately after the first
   U+0023 NUMBER SIGN character in the string being parsed up to the end of that string.</p></li><li><p>Return the first element of type <var>type</var> in <a href="infrastructure.html#tree-order" id="syntax-references:tree-order">tree order</a> in the subtree rooted at <var>scope</var> that has an <code id="syntax-references:the-id-attribute"><a href="dom.html#the-id-attribute">id</a></code> attribute whose value is a <a href="infrastructure.html#case-sensitive" id="syntax-references:case-sensitive">case-sensitive</a> match for <var>s</var> or a <code>name</code> attribute whose value is a <a href="infrastructure.html#compatibility-caseless" id="syntax-references:compatibility-caseless">compatibility
   caseless</a> match for <var>s</var>.</p></li></ol></section>

  


  <section><h4 id="mq">2.4.10 Media queries</h4>

  <p>A string is a <dfn id="valid-media-query-list">valid media query list</dfn> if it matches the <code>&lt;media-query-list&gt;</code> production of the Media Queries specification. <a href="references.html#refsMQ">[MQ]</a></p>

  <p>A string <dfn id="matches-the-environment">matches the environment</dfn> of the user if it is the empty string, a string
  consisting of only <a href="infrastructure.html#space-character" id="mq:space-character">space characters</a>, or is a media query list
  that matches the user's environment according to the definitions given in the Media Queries
  specification. <a href="references.html#refsMQ">[MQ]</a></p></section></section>




  <section><h3 id="urls">2.5 URLs</h3>

  <section><h4 id="terminology-2">2.5.1 Terminology</h4>

  <p>A <a href="infrastructure.html#url" id="terminology-2:url">URL</a> is a <dfn id="valid-url">valid URL</dfn> if it conforms to the authoring conformance
  requirements in the WHATWG URL standard. <a href="references.html#refsURL">[URL]</a></p>

  <p>A string is a <dfn id="valid-non-empty-url">valid non-empty URL</dfn> if it is a <a href="infrastructure.html#valid-url" id="terminology-2:valid-url">valid URL</a> but it is not
  the empty string.</p>

  <p>A string is a <dfn id="valid-url-potentially-surrounded-by-spaces">valid URL potentially surrounded by spaces</dfn> if, after <a href="infrastructure.html#strip-leading-and-trailing-whitespace" id="terminology-2:strip-leading-and-trailing-whitespace">stripping leading and trailing whitespace</a>
  from it, it is a <a href="infrastructure.html#valid-url" id="terminology-2:valid-url-2">valid URL</a>.</p>

  <p>A string is a <dfn id="valid-non-empty-url-potentially-surrounded-by-spaces">valid non-empty URL potentially surrounded by spaces</dfn> if, after <a href="infrastructure.html#strip-leading-and-trailing-whitespace" id="terminology-2:strip-leading-and-trailing-whitespace-2">stripping leading and trailing whitespace</a>
  from it, it is a <a href="infrastructure.html#valid-non-empty-url" id="terminology-2:valid-non-empty-url">valid non-empty URL</a>.</p>

  <p>This specification defines the URL <dfn id="about:legacy-compat"><code>about:legacy-compat</code></dfn> as a reserved,
  though unresolvable, <code id="terminology-2:about-protocol"><a data-x-internal="about-protocol" href="http://tools.ietf.org/html/rfc6694#section-2">about:</a></code> URL, for use in <a href="syntax.html#syntax-doctype" id="terminology-2:syntax-doctype">DOCTYPE</a>s in <a href="infrastructure.html#html-documents" id="terminology-2:html-documents">HTML documents</a> when needed for
  compatibility with XML tools. <a href="references.html#refsABOUT">[ABOUT]</a></p>

  <p>This specification defines the URL <dfn id="about:srcdoc"><code>about:srcdoc</code></dfn> as a reserved, though
  unresolvable, <code id="terminology-2:about-protocol-2"><a data-x-internal="about-protocol" href="http://tools.ietf.org/html/rfc6694#section-2">about:</a></code> URL, that is used as <a id="terminology-2:the-document's-address" href="https://dom.spec.whatwg.org/#concept-document-url" data-x-internal="the-document's-address">the
  document's address</a> of <a href="semantics.html#an-iframe-srcdoc-document" id="terminology-2:an-iframe-srcdoc-document"><code>iframe</code> <code>srcdoc</code> documents</a>. <a href="references.html#refsABOUT">[ABOUT]</a></p>

  <p>The <dfn id="fallback-base-url">fallback base URL</dfn> of a <code id="terminology-2:document"><a href="dom.html#document">Document</a></code> object is the <a href="infrastructure.html#absolute-url" id="terminology-2:absolute-url">absolute
  URL</a> obtained by running these substeps:</p>

  <ol><li><p>If the <code id="terminology-2:document-2"><a href="dom.html#document">Document</a></code> is <a href="semantics.html#an-iframe-srcdoc-document" id="terminology-2:an-iframe-srcdoc-document-2">an <code>iframe</code> <code>srcdoc</code> document</a>, then return the <a href="infrastructure.html#document-base-url" id="terminology-2:document-base-url">document base
   URL</a> of the <code id="terminology-2:document-3"><a href="dom.html#document">Document</a></code>'s <a href="browsers.html#browsing-context" id="terminology-2:browsing-context">browsing context</a>'s <a href="browsers.html#browsing-context-container" id="terminology-2:browsing-context-container">browsing context
   container</a>'s <a id="terminology-2:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> and abort these steps.</p></li><li>

    

    

    <p>If <a id="terminology-2:the-document's-address-2" href="https://dom.spec.whatwg.org/#concept-document-url" data-x-internal="the-document's-address">the document's address</a> is <code id="terminology-2:about:blank"><a href="infrastructure.html#about:blank">about:blank</a></code>, and the
    <code id="terminology-2:document-4"><a href="dom.html#document">Document</a></code>'s <a href="browsers.html#browsing-context" id="terminology-2:browsing-context-2">browsing context</a> has a <a href="browsers.html#creator-browsing-context" id="terminology-2:creator-browsing-context">creator browsing
    context</a>, then return the <a href="infrastructure.html#document-base-url" id="terminology-2:document-base-url-2">document base URL</a> of the <a href="browsers.html#creator-document" id="terminology-2:creator-document">creator
    <code>Document</code></a>, and abort these steps.</p>

   </li><li><p>Return <a id="terminology-2:the-document's-address-3" href="https://dom.spec.whatwg.org/#concept-document-url" data-x-internal="the-document's-address">the document's address</a>.</p></li></ol>

  <p>The <dfn id="document-base-url">document base URL</dfn> of a <code id="terminology-2:document-5"><a href="dom.html#document">Document</a></code> object is the <a href="infrastructure.html#absolute-url" id="terminology-2:absolute-url-2">absolute
  URL</a> obtained by running these substeps:</p>

  <ol><li><p>If there is no <code id="terminology-2:the-base-element"><a href="semantics.html#the-base-element">base</a></code> element that has an <code id="terminology-2:attr-base-href"><a href="semantics.html#attr-base-href">href</a></code> attribute in the <code id="terminology-2:document-6"><a href="dom.html#document">Document</a></code>, then the
   <a href="infrastructure.html#document-base-url" id="terminology-2:document-base-url-3">document base URL</a> is the <code id="terminology-2:document-7"><a href="dom.html#document">Document</a></code>'s <a href="infrastructure.html#fallback-base-url" id="terminology-2:fallback-base-url">fallback base URL</a>;
   abort these steps.</p></li><li><p>Otherwise, the <a href="infrastructure.html#document-base-url" id="terminology-2:document-base-url-4">document base URL</a> is the <a href="semantics.html#frozen-base-url" id="terminology-2:frozen-base-url">frozen base URL</a> of the
   first <code id="terminology-2:the-base-element-2"><a href="semantics.html#the-base-element">base</a></code> element in the <code id="terminology-2:document-8"><a href="dom.html#document">Document</a></code> that has an <code id="terminology-2:attr-base-href-2"><a href="semantics.html#attr-base-href">href</a></code> attribute, in <a href="infrastructure.html#tree-order" id="terminology-2:tree-order">tree order</a>.</p></li></ol></section>


  

  <section><h4 id="resolving-urls">2.5.2 Resolving URLs</h4>

  <p>Resolving a URL is the process of taking a <a href="infrastructure.html#relative-url" id="resolving-urls:relative-url">relative URL</a> and obtaining the
  <a href="infrastructure.html#absolute-url" id="resolving-urls:absolute-url">absolute URL</a> that it implies.</p>

  <p>To <dfn id="resolve-a-url">resolve a URL</dfn> to an <a href="infrastructure.html#absolute-url" id="resolving-urls:absolute-url-2">absolute URL</a> relative to either another
  <a href="infrastructure.html#absolute-url" id="resolving-urls:absolute-url-3">absolute URL</a> or an element, the user agent must use the following steps. Resolving a
  URL can result in an error, in which case the URL is not resolvable.</p>

  <ol><li><p>Let <var>url</var> be the <a href="infrastructure.html#url" id="resolving-urls:url">URL</a> being resolved.</p></li><li>

    <p>Let <var>encoding</var> be determined as follows:</p>

    <dl class="switch"><dt>If the URL had a character encoding defined when the URL was created or defined or when
     this algorithm was invoked</dt><dd>The URL character encoding is as defined.</dd><dt>If the URL came from a script (e.g. as an argument to a method)</dt><dd>The URL character encoding is the <a href="webappapis.html#api-url-character-encoding" id="resolving-urls:api-url-character-encoding">API URL character encoding</a> specified by the
     script's <a href="webappapis.html#settings-object" id="resolving-urls:settings-object">settings object</a>.</dd><dt>If the URL came from a DOM node (e.g. from an element)</dt><dd>The node has a <code id="resolving-urls:document"><a href="dom.html#document">Document</a></code>, and the URL character encoding is the
     <a href="infrastructure.html#document's-character-encoding" id="resolving-urls:document's-character-encoding">document's character encoding</a>.</dd></dl>

   </li><li><p>If <var>encoding</var> is <a href="infrastructure.html#a-utf-16-encoding" id="resolving-urls:a-utf-16-encoding">a UTF-16 encoding</a>, then change the value
   of <var>encoding</var> to UTF-8.</p></li><li>

    <p>If the algorithm was invoked with an <a href="infrastructure.html#absolute-url" id="resolving-urls:absolute-url-4">absolute URL</a> to use as the base URL, let
    <var>base</var> be that <a href="infrastructure.html#absolute-url" id="resolving-urls:absolute-url-5">absolute URL</a>.</p>

    <p>Otherwise, let <var>base</var> be <a href="infrastructure.html#the-element's-base-url" id="resolving-urls:the-element's-base-url">the element's base URL</a>.</p>

   </li><li><p>Apply the <a href="infrastructure.html#url-parser" id="resolving-urls:url-parser">URL parser</a> to <var>url</var>, with <var>base</var> as the base URL, with <var>encoding</var> as the encoding.</p></li><li><p>If this returns failure, then abort these steps with an error.</p></li><li><p>Let <var>parsed URL</var> be the result of the <a href="infrastructure.html#url-parser" id="resolving-urls:url-parser-2">URL parser</a>.</p></li><li><p>Let <var>serialised URL</var> be the result of apply the <a href="infrastructure.html#concept-url-serialiser" id="resolving-urls:concept-url-serialiser">URL serialiser</a> to <var>parsed URL</var>.</p></li><li><p>Return <var>serialised URL</var> as the <dfn id="resulting-absolute-url">resulting absolute URL</dfn> and <var>parsed
   URL</var> as the <dfn id="resulting-parsed-url">resulting parsed URL</dfn>.</p></li></ol>

  <p>Given an element, <dfn id="the-element's-base-url">the element's base URL</dfn> is the <i>base URI of the element</i>, as
  defined by the XML Base specification, with <i>the base URI of the document entity</i> being
  defined as the <a href="infrastructure.html#document-base-url" id="resolving-urls:document-base-url">document base URL</a> of the <code id="resolving-urls:document-2"><a href="dom.html#document">Document</a></code> that owns the element.
  <a href="references.html#refsXMLBASE">[XMLBASE]</a></p>

  <p>For the purposes of the XML Base specification, user agents must act as if all
  <code id="resolving-urls:document-3"><a href="dom.html#document">Document</a></code> objects represented XML documents.</p>

  <p class="note">It is possible for <code id="resolving-urls:the-xml:base-attribute-(xml-only)"><a href="dom.html#the-xml:base-attribute-(xml-only)">xml:base</a></code> attributes to be
  present even in HTML fragments, as such attributes can be added dynamically using script. (Such
  scripts would not be conforming, however, as <code id="resolving-urls:the-xml:base-attribute-(xml-only)-2"><a href="dom.html#the-xml:base-attribute-(xml-only)">xml:base</a></code>
  attributes are not allowed in <a href="infrastructure.html#html-documents" id="resolving-urls:html-documents">HTML documents</a>.)</p></section>

  



  

  <section><h4 id="dynamic-changes-to-base-urls">2.5.3 Dynamic changes to base URLs</h4>

  <p>When an <code id="dynamic-changes-to-base-urls:the-xml:base-attribute-(xml-only)"><a href="dom.html#the-xml:base-attribute-(xml-only)">xml:base</a></code> attribute is set, changed, or removed, the
  attribute's element, and all descendant elements, are <a href="infrastructure.html#affected-by-a-base-url-change" id="dynamic-changes-to-base-urls:affected-by-a-base-url-change">affected by a base URL
  change</a>.</p>

  <p>When a document's <a href="infrastructure.html#document-base-url" id="dynamic-changes-to-base-urls:document-base-url">document base URL</a> changes, all elements in that document are
  <a href="infrastructure.html#affected-by-a-base-url-change" id="dynamic-changes-to-base-urls:affected-by-a-base-url-change-2">affected by a base URL change</a>.</p>

  <p>The following are <a href="infrastructure.html#base-url-change-steps" id="dynamic-changes-to-base-urls:base-url-change-steps">base URL change steps</a>, which run when an element is
  <a href="infrastructure.html#affected-by-a-base-url-change" id="dynamic-changes-to-base-urls:affected-by-a-base-url-change-3">affected by a base URL change</a> (as defined by the DOM specification):</p>

  <dl class="switch"><dt>If the element creates a <a href="semantics.html#hyperlink" id="dynamic-changes-to-base-urls:hyperlink">hyperlink</a></dt><dd>

    <p>If the <a href="infrastructure.html#absolute-url" id="dynamic-changes-to-base-urls:absolute-url">absolute URL</a> identified by the hyperlink is being shown to the user, or
    if any data derived from that URL is affecting the display, then the <code id="dynamic-changes-to-base-urls:attr-hyperlink-href"><a href="semantics.html#attr-hyperlink-href">href</a></code> attribute should be <a href="infrastructure.html#resolve-a-url" id="dynamic-changes-to-base-urls:resolve-a-url">re-resolved</a> relative to the element and the UI updated appropriately.</p>

    <p class="example">For example, the CSS <code id="dynamic-changes-to-base-urls:selector-link"><a href="semantics.html#selector-link">:link</a></code>/<code id="dynamic-changes-to-base-urls:selector-visited"><a href="semantics.html#selector-visited">:visited</a></code> pseudo-classes might have been affected.</p>

    

   </dd><dt>If the element is a <code id="dynamic-changes-to-base-urls:the-q-element"><a href="semantics.html#the-q-element">q</a></code>, <code id="dynamic-changes-to-base-urls:the-blockquote-element"><a href="semantics.html#the-blockquote-element">blockquote</a></code>, <code id="dynamic-changes-to-base-urls:the-ins-element"><a href="semantics.html#the-ins-element">ins</a></code>, or
   <code id="dynamic-changes-to-base-urls:the-del-element"><a href="semantics.html#the-del-element">del</a></code> element with a <code>cite</code> attribute</dt><dd>

    <p>If the <a href="infrastructure.html#absolute-url" id="dynamic-changes-to-base-urls:absolute-url-3">absolute URL</a> identified by the <code>cite</code> attribute is
    being shown to the user, or if any data derived from that URL is affecting the display, then the
    <a href="infrastructure.html#url" id="dynamic-changes-to-base-urls:url">URL</a> should be <a href="infrastructure.html#resolve-a-url" id="dynamic-changes-to-base-urls:resolve-a-url-3">re-resolved</a> relative to the
    element and the UI updated appropriately.</p>

   </dd><dt>Otherwise</dt><dd>

    <p>The element is not directly affected.</p>

    <p class="example">For instance, changing the base URL doesn't affect the image displayed by
    <code id="dynamic-changes-to-base-urls:the-img-element"><a href="semantics.html#the-img-element">img</a></code> elements, although subsequent accesses of the <code id="dynamic-changes-to-base-urls:dom-img-src"><a href="semantics.html#dom-img-src">src</a></code> IDL attribute from script will return a new <a href="infrastructure.html#absolute-url" id="dynamic-changes-to-base-urls:absolute-url-4">absolute
    URL</a> that might no longer correspond to the image being shown.</p>

   </dd></dl></section></section>

  


  

  <section><h3 id="fetching-resources">2.6 Fetching resources</h3>

  <section><h4 id="terminology-3">2.6.1 Terminology</h4>

  <p id="concept-http-equivalent">User agents can implement a variety of transfer protocols, but
  this specification mostly defines behaviour in terms of HTTP. <a href="references.html#refsHTTP">[HTTP]</a></p>

  <p>The <dfn id="concept-http-equivalent-get">HTTP GET method</dfn> is equivalent to the default
  retrieval action of the protocol. For example, RETR in FTP. Such actions are idempotent and safe,
  in HTTP terms.</p>

  <p>The <dfn id="concept-http-equivalent-codes">HTTP response codes</dfn> are equivalent to
  statuses in other protocols that have the same basic meanings. For example, a "file not found"
  error is equivalent to a 404 code, a server error is equivalent to a 5xx code, and so on.</p>

  <p>The <dfn id="concept-http-equivalent-headers">HTTP headers</dfn> are equivalent to fields in
  other protocols that have the same basic meaning. For example, the HTTP authentication headers are
  equivalent to the authentication aspects of the FTP protocol.</p></section>


  <section><h4 id="processing-model">2.6.2 Processing model</h4>

  <p>When a user agent is to <dfn id="fetch">fetch</dfn> a resource or <a href="infrastructure.html#url" id="processing-model:url">URL</a>, optionally
  <strong>from</strong> an origin <i>origin</i>, optionally <strong>using</strong> a
  specific <code id="processing-model:document"><a href="dom.html#document">Document</a></code> or a specific <a href="infrastructure.html#url" id="processing-model:url-2">URL</a> as an <i>override referrer source</i>, and optionally with
  any of a <i>blocking flag</i>, a <i>manual redirect flag</i>, a <i>force same-origin flag</i>,
  and a <i>block cookies flag</i>, the following steps must be run. (When a
  <em><a href="infrastructure.html#url" id="processing-model:url-3">URL</a></em> is to be fetched, the URL identifies a resource to be obtained.)</p>

  

  

  

  

  <ol><li><p>If there is a specific <i>override referrer source</i>, and it is a <a href="infrastructure.html#url" id="processing-model:url-4">URL</a>, then
   let <var>referrer</var> be the <i>override referrer source</i>, and jump to the step
   labeled <i>clean referrer</i>.</p></li><li>

    <p>Let <var>document</var> be the appropriate <code id="processing-model:document-2"><a href="dom.html#document">Document</a></code> as given by the
    following list:</p>

    <dl class="switch"><dt>If there is a specific <i>override referrer source</i> (which might be null)</dt><dd>The <i>override referrer source</i>.</dd><dt>When <a href="browsers.html#navigate" id="processing-model:navigate">navigating</a></dt><dd>The <a href="browsers.html#active-document" id="processing-model:active-document">active document</a> of the <a href="browsers.html#source-browsing-context" id="processing-model:source-browsing-context">source browsing context</a>.</dd><dt>When fetching resources for an element</dt><dd>The element's <a id="processing-model:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a>.</dd></dl>

   </li><li>

    <p>While <var>document</var> is <a href="semantics.html#an-iframe-srcdoc-document" id="processing-model:an-iframe-srcdoc-document">an <code>iframe</code> <code>srcdoc</code> document</a>, let <var>document</var> be
    <var>document</var>'s <a href="browsers.html#browsing-context" id="processing-model:browsing-context">browsing context</a>'s <a href="browsers.html#browsing-context-container" id="processing-model:browsing-context-container">browsing context
    container</a>'s <a id="processing-model:node-document-2" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> instead.</p>

   </li><li>

    <p>If <var>document</var> is null, or if the <a href="browsers.html#origin-2" id="processing-model:origin-2">origin</a> of <var>document</var> is not a scheme/host/port tuple,
    then set <var>referrer</var> to the empty string and jump to the step labeled <i>cleaned
    referrer</i>.</p>

   </li><li>

    <p>Let <var>referrer</var> be <a id="processing-model:the-document's-address" href="https://dom.spec.whatwg.org/#concept-document-url" data-x-internal="the-document's-address">the document's address</a> of <var>document</var>.</p>

   </li><li>

    <p><i>Clean referrer</i>: Apply the <a href="infrastructure.html#url-parser" id="processing-model:url-parser">URL parser</a> to <var>referrer</var> and let <var>parsed referrer</var> be the <a href="infrastructure.html#resulting-parsed-url" id="processing-model:resulting-parsed-url">resulting parsed URL</a>.</p>

   </li><li>

    <p>Let <var>referrer</var> be the result of applying the <a href="infrastructure.html#concept-url-serialiser" id="processing-model:concept-url-serialiser">URL serialiser</a> to <var>parsed referrer</var>, with the
    <i>exclude fragment flag</i> set.</p> 

   </li><li>

    <p><i>Cleaned referrer</i>: If <var>referrer</var> is not the empty string, is not a <a href="http://tools.ietf.org/html/rfc2397#section-2" id="processing-model:data-protocol" data-x-internal="data-protocol"><code>data:</code> URL</a>, and is not the <a href="infrastructure.html#url" id="processing-model:url-5">URL</a>
    "<code id="processing-model:about:blank"><a href="infrastructure.html#about:blank">about:blank</a></code>", then generate the <i>address of the resource from which Request-URIs
    are obtained</i> as required by HTTP for the <code id="processing-model:http-referer"><a href="infrastructure.html#http-referer">Referer</a></code> (sic)
    header from <var>referrer</var>. <a href="references.html#refsHTTP">[HTTP]</a></p>

    <p>Otherwise, the <code id="processing-model:http-referer-2"><a href="infrastructure.html#http-referer">Referer</a></code> (sic) header must be omitted,
    regardless of its value.</p>

   </li><li><p>If the algorithm was not invoked with the <i>blocking flag</i>, perform the remaining
   steps <a href="infrastructure.html#in-parallel" id="processing-model:in-parallel">in parallel</a>.</p></li><li><p>If the <code id="processing-model:document-3"><a href="dom.html#document">Document</a></code> with which any <a href="webappapis.html#concept-task" id="processing-model:concept-task">tasks</a> <a href="webappapis.html#queue-a-task" id="processing-model:queue-a-task">queued</a> by this algorithm would be associated doesn't have an
   associated <a href="browsers.html#browsing-context" id="processing-model:browsing-context-2">browsing context</a>, then abort these steps.</p></li><li>

    <p>This is the <i>main step</i>.</p>

    <p>If the resource is to be obtained from an <a href="browsers.html#application-cache" id="processing-model:application-cache">application cache</a>, then use the data
    from that <a href="browsers.html#application-cache" id="processing-model:application-cache-2">application cache</a>, as if it had been obtained in the manner appropriate
    given its <a href="infrastructure.html#url" id="processing-model:url-6">URL</a>.</p>

    <p>If the resource is identified by an <a href="infrastructure.html#absolute-url" id="processing-model:absolute-url">absolute URL</a>, and the resource is to be
    obtained using an idempotent action (such as an HTTP GET <a href="infrastructure.html#concept-http-equivalent-get" id="processing-model:concept-http-equivalent-get">or equivalent</a>), and it is already being downloaded
    for other reasons (e.g. another invocation of this algorithm), and this request would be
    identical to the previous one (e.g. same <code id="processing-model:http-accept"><a href="infrastructure.html#http-accept">Accept</a></code> and <code id="processing-model:http-origin"><a href="infrastructure.html#http-origin">Origin</a></code> headers), and the user agent is configured such that it is to
    reuse the data from the existing download instead of initiating a new one, then use the results
    of the existing download instead of starting a new one.</p>

    <p>Otherwise, if the resource is identified by an <a href="infrastructure.html#absolute-url" id="processing-model:absolute-url-2">absolute URL</a> with a scheme that
    does not define a mechanism to obtain the resource (e.g. it is a <code id="processing-model:mailto-protocol"><a data-x-internal="mailto-protocol" href="http://tools.ietf.org/html/rfc6068#section-2">mailto:</a></code> URL) or that the user agent does not support, then act as if the
    resource was an HTTP 204 No Content response with no other metadata.</p>

    <p>Otherwise, if the resource is identified by the <a href="infrastructure.html#url" id="processing-model:url-7">URL</a>
    <dfn id="about:blank"><code>about:blank</code></dfn>, then the resource is immediately available and consists of
    the empty string, with no metadata.</p>

    <p>Otherwise, at a time convenient to the user and the user agent, download (or otherwise
    obtain) the resource, applying the semantics of the relevant specifications (e.g. performing an
    HTTP GET or POST operation, or reading the file from disk, or expanding <a href="http://tools.ietf.org/html/rfc2397#section-2" id="processing-model:data-protocol-2" data-x-internal="data-protocol"><code>data:</code> URLs</a>, etc).</p>

    <p>For the purposes of the <code id="processing-model:http-referer-3"><a href="infrastructure.html#http-referer">Referer</a></code> (sic) header, use the
    <i>address of the resource from which Request-URIs are obtained</i> generated in the earlier
    step.</p>

    <p>For the purposes of the <code id="processing-model:http-origin-2"><a href="infrastructure.html#http-origin">Origin</a></code> header, if the <a href="infrastructure.html#fetch" id="processing-model:fetch">fetching algorithm</a> was explicitly initiated from an <i>origin</i>, then
    <i>the origin that initiated the HTTP request</i> is <i>origin</i>. Otherwise, this is <i>a
    request from a "privacy-sensitive" context</i>. <a href="references.html#refsORIGIN">[ORIGIN]</a></p>

   </li><li>

    <p>If the algorithm was not invoked with the <i>block cookies flag</i>, and there are cookies to
    be set, then the user agent must run the following substeps:</p>

    <ol><li><p>Wait until ownership of the <a href="webappapis.html#storage-mutex" id="processing-model:storage-mutex">storage mutex</a> can be taken by this instance of
     the <a href="infrastructure.html#fetch" id="processing-model:fetch-2">fetching</a> algorithm.</p></li><li><p>Take ownership of the <a href="webappapis.html#storage-mutex" id="processing-model:storage-mutex-2">storage mutex</a>.</p></li><li><p>Update the cookies. <a href="references.html#refsCOOKIES">[COOKIES]</a>
     <a href="introduction.html#fingerprinting-vector" id="processing-model:fingerprinting-vector" class="fingerprint" title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src="img/fingerprint.png" width="46" height="64"></a>
     </p></li><li><p>Release the <a href="webappapis.html#storage-mutex" id="processing-model:storage-mutex-3">storage mutex</a> so that it is once again free.</p></li></ol>

   </li><li>

    <p>If the fetched resource is an HTTP redirect <a href="infrastructure.html#concept-http-equivalent-codes" id="processing-model:concept-http-equivalent-codes">or
    equivalent</a>, then:</p>

    <dl class="switch"><dt>If the <i>force same-origin flag</i> is set and the <a href="infrastructure.html#url" id="processing-model:url-8">URL</a> of the target of the
     redirect does not have the <a href="browsers.html#same-origin" id="processing-model:same-origin">same origin</a> as the <a href="infrastructure.html#url" id="processing-model:url-9">URL</a> for which the
     <a href="infrastructure.html#fetch" id="processing-model:fetch-3">fetch</a> algorithm was invoked</dt><dd>

      <p>Abort these steps and return failure from this algorithm, as if the remote host could not
      be contacted.</p>

     </dd><dt>If the <i>manual redirect flag</i> is set</dt><dd>

      <p>Continue, using the fetched resource (the redirect) as the result of the algorithm. If the
      calling algorithm subsequently requires the user agent to <dfn id="transparently-follow-the-redirect">transparently follow the
      redirect</dfn>, then the user agent must resume this algorithm from the <i>main step</i>, but
      using the target of the redirect as the resource to fetch, rather than the original
      resource.</p>

     </dd><dt>Otherwise</dt><dd>

      <p>First, apply any relevant requirements for redirects (such as showing any appropriate
      prompts). Then, redo <i>main step</i>, but using the target of the redirect as the resource to
      fetch, rather than the original resource. For HTTP requests, the new request must include the
      same headers as the original request, except for headers for which other requirements are
      specified (such as the <code id="processing-model:http-host"><a href="infrastructure.html#http-host">Host</a></code> header). <a href="references.html#refsHTTP">[HTTP]</a></p>

      <p class="note">The HTTP specification requires that 301, 302, and 307 redirects, when applied
      to methods other than the safe methods, not be followed without user confirmation. That would
      be an appropriate prompt for the purposes of the requirement in the paragraph above. <a href="references.html#refsHTTP">[HTTP]</a></p>

     </dd></dl>

   </li><li>

    <p>If the algorithm was not invoked with the <i>blocking flag</i>: When the resource is
    available, or if there is an error of some description, <a href="webappapis.html#queue-a-task" id="processing-model:queue-a-task-2">queue a task</a> that uses the
    resource as appropriate. If the resource can be processed incrementally, as, for instance, with
    a progressively interlaced JPEG or an HTML file, additional tasks may be queued to process the
    data as it is downloaded. The <a href="webappapis.html#task-source" id="processing-model:task-source">task source</a> for these <a href="webappapis.html#concept-task" id="processing-model:concept-task-2">tasks</a> is the <a href="webappapis.html#networking-task-source" id="processing-model:networking-task-source">networking task source</a>.</p>

    <p>Otherwise, return the resource or error information to the calling algorithm.</p>

   </li></ol>

  <p>If the user agent can determine the actual length of the resource being <a href="infrastructure.html#fetch" id="processing-model:fetch-4">fetched</a> for an instance of this algorithm, and if that length is finite, then
  that length is the file's <dfn id="concept-fetch-total">size</dfn>. Otherwise, the subject of
  the algorithm (that is, the resource being fetched) has no known <a href="infrastructure.html#concept-fetch-total" id="processing-model:concept-fetch-total">size</a>. (For example, the HTTP <code id="processing-model:http-content-length"><a href="infrastructure.html#http-content-length">Content-Length</a></code> header might provide this information.)</p>

  <p>The user agent must also keep track of the <dfn id="concept-fetch-loaded">number of bytes
  downloaded</dfn> for each instance of this algorithm. This number must exclude any out-of-band
  metadata, such as HTTP headers.</p>

  <p class="note">The <a href="browsers.html#application-cache" id="processing-model:application-cache-3">application cache</a> processing model introduces some <a href="browsers.html#changesToNetworkingModel">changes to the networking model</a> to handle the returning of
  cached resources.</p>

  <p class="note">The <a href="browsers.html#navigate" id="processing-model:navigate-2">navigation</a> processing model handles redirects
  itself, overriding the redirection handling that would be done by the fetching algorithm.</p>

  <p class="note">Whether the <a href="infrastructure.html#content-type-sniffing">type sniffing rules</a> apply to the
  fetched resource depends on the algorithm that invokes the rules — they are not always
  applicable.</p></section>



  <section><h4 id="encrypted-http-and-related-security-concerns">2.6.3 Encrypted HTTP and related security concerns</h4>

  <p>Anything in this specification that refers to HTTP also applies to HTTP-over-TLS, as
  represented by <a href="infrastructure.html#url" id="encrypted-http-and-related-security-concerns:url">URLs</a> using the <code id="encrypted-http-and-related-security-concerns:https-protocol"><a data-x-internal="https-protocol" href="http://tools.ietf.org/html/rfc7230#section-2.7.2">https:</a></code> scheme. <a href="references.html#refsHTTP">[HTTP]</a></p>

  <p class="warning">User agents should report certificate errors to the user and must either refuse
  to download resources sent with erroneous certificates or must act as if such resources were in
  fact served with no encryption.</p>

  <p>User agents should warn the user that there is a potential problem whenever the user visits a
  page that the user has previously visited, if the page uses less secure encryption on the second
  visit.</p>

  <p>Not doing so can result in users not noticing man-in-the-middle attacks.</p>

  <div class="example">

   <p>If a user connects to a server with a self-signed certificate, the user agent could allow the
   connection but just act as if there had been no encryption. If the user agent instead allowed the
   user to override the problem and then displayed the page as if it was fully and safely encrypted,
   the user could be easily tricked into accepting man-in-the-middle connections.</p>

   <p>If a user connects to a server with full encryption, but the page then refers to an external
   resource that has an expired certificate, then the user agent will act as if the resource was
   unavailable, possibly also reporting the problem to the user. If the user agent instead allowed
   the resource to be used, then an attacker could just look for "secure" sites that used resources
   from a different host and only apply man-in-the-middle attacks to that host, for example taking
   over scripts in the page.</p>

   <p>If a user bookmarks a site that uses a CA-signed certificate, and then later revisits that
   site directly but the site has started using a self-signed certificate, the user agent could warn
   the user that a man-in-the-middle attack is likely underway, instead of simply acting as if the
   page was not encrypted.</p>

  </div></section>



  <section><h4 id="content-type-sniffing">2.6.4 Determining the type of a resource</h4>

  <p>The <dfn id="content-type">Content-Type metadata</dfn> of a resource must be obtained and
  interpreted in a manner consistent with the requirements of the MIME Sniffing specification. <a href="references.html#refsMIMESNIFF">[MIMESNIFF]</a></p>

  <p>The <dfn id="content-type-sniffing-2"><a href="https://mimesniff.spec.whatwg.org/#sniffed-mime-type">sniffed type of a resource</a></dfn>
  must be found in a manner consistent with the requirements given in the MIME Sniffing
  specification for finding the <i>sniffed media type</i> of the relevant sequence of octets. <a href="references.html#refsMIMESNIFF">[MIMESNIFF]</a></p>

  <p>The <dfn id="content-type-sniffing:-image"><a href="https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically">rules for
  sniffing images specifically</a></dfn>, the <dfn id="content-type-sniffing:-text-or-binary"><a href="https://mimesniff.spec.whatwg.org/#rules-for-text-or-binary">rules for distinguishing
  if a resource is text or binary</a></dfn>, and the <dfn id="content-type-sniffing:-video"><a href="https://mimesniff.spec.whatwg.org/#rules-for-sniffing-audio-and-video-specifically">rules
  for sniffing audio and video specifically</a></dfn> are also defined in the MIME Sniffing
  specification. These rules return a <a href="infrastructure.html#mime-type" id="content-type-sniffing:mime-type">MIME type</a> as their result. <a href="references.html#refsMIMESNIFF">[MIMESNIFF]</a></p>

  <p class="warning">It is imperative that the rules in the MIME Sniffing specification be followed
  exactly. When a user agent uses different heuristics for content type detection than the server
  expects, security problems can occur. For more details, see the MIME Sniffing specification. <a href="references.html#refsMIMESNIFF">[MIMESNIFF]</a></p></section>


  <section><h4 id="extracting-character-encodings-from-meta-elements">2.6.5 Extracting character encodings from <code id="extracting-character-encodings-from-meta-elements:the-meta-element"><a href="semantics.html#the-meta-element">meta</a></code> elements</h4>

  <p>The <dfn id="algorithm-for-extracting-a-character-encoding-from-a-meta-element">algorithm for extracting a character encoding from a <code>meta</code> element</dfn>,
  given a string <var>s</var>, is as follows. It either returns a character encoding or
  nothing.</p>

  <ol><li><p>Let <var>position</var> be a pointer into <var>s</var>, initially
   pointing at the start of the string.</p></li><li><p><i>Loop</i>: Find the first seven characters in <var>s</var> after <var>position</var> that are an <a href="infrastructure.html#ascii-case-insensitive" id="extracting-character-encodings-from-meta-elements:ascii-case-insensitive">ASCII case-insensitive</a> match for the word "<code>charset</code>". If no such match is found, return nothing and abort these
   steps.</p></li><li><p>Skip any <a href="infrastructure.html#space-character" id="extracting-character-encodings-from-meta-elements:space-character">space characters</a> that immediately follow the
   word "<code>charset</code>" (there might not be any).</p></li><li><p>If the next character is not a U+003D EQUALS SIGN (=), then move <var>position</var> to point just before that next character, and jump back to the step
   labeled <i>loop</i>.</p></li><li><p>Skip any <a href="infrastructure.html#space-character" id="extracting-character-encodings-from-meta-elements:space-character-2">space characters</a> that immediately follow the
   equals sign (there might not be any).</p></li><li>

    <p>Process the next character as follows:</p>

    <dl class="switch"><dt>If it is a U+0022 QUOTATION MARK character (") and there is a later U+0022 QUOTATION MARK character (") in <var>s</var></dt><dt>If it is a U+0027 APOSTROPHE character (') and there is a later U+0027 APOSTROPHE character (') in <var>s</var></dt><dd>Return the result of <a id="extracting-character-encodings-from-meta-elements:getting-an-encoding" href="https://encoding.spec.whatwg.org/#concept-encoding-get" data-x-internal="getting-an-encoding">getting an encoding</a> from the substring that is between
     this character and the next earliest occurrence of this character.</dd><dt>If it is an unmatched U+0022 QUOTATION MARK character (")</dt><dt>If it is an unmatched U+0027 APOSTROPHE character (')</dt><dt>If there is no next character</dt><dd>Return nothing.</dd><dt>Otherwise</dt><dd>Return the result of <a id="extracting-character-encodings-from-meta-elements:getting-an-encoding-2" href="https://encoding.spec.whatwg.org/#concept-encoding-get" data-x-internal="getting-an-encoding">getting an encoding</a> from the substring that consists of
     this character up to but not including the first <a href="infrastructure.html#space-character" id="extracting-character-encodings-from-meta-elements:space-character-3">space character</a> or U+003B
     SEMICOLON character (;), or the end of <var>s</var>, whichever comes first.</dd></dl>

   </li></ol>

  <p class="note">This algorithm is distinct from those in the HTTP specification (for example, HTTP
  doesn't allow the use of single quotes and requires supporting a backslash-escape mechanism that
  is not supported by this algorithm). While the algorithm is used in
  contexts that, historically, were related to HTTP, the syntax as supported by implementations
  diverged some time ago. <a href="references.html#refsHTTP">[HTTP]</a></p></section>

  


  <section><h4 id="cors-settings-attributes">2.6.6 CORS settings attributes</h4>

  <p>A <dfn id="cors-settings-attribute">CORS settings attribute</dfn> is an <a href="infrastructure.html#enumerated-attribute" id="cors-settings-attributes:enumerated-attribute">enumerated attribute</a>. The following
  table lists the keywords and states for the attribute — the keywords in the left column map
  to the states in the cell in the second column on the same row as the keyword.</p>

  <table><thead><tr><th> Keyword
     </th><th> State
     </th><th> Brief description
   </th></tr></thead><tbody><tr><td><dfn id="attr-crossorigin-anonymous-keyword"><code>anonymous</code></dfn>
     </td><td><dfn id="attr-crossorigin-anonymous">Anonymous</dfn>
     </td><td>Cross-origin CORS requests for the element will have the <i id="cors-settings-attributes:omit-credentials-flag"><a href="infrastructure.html#omit-credentials-flag">omit credentials flag</a></i> set.
    </td></tr><tr><td><dfn id="attr-crossorigin-use-credentials-keyword"><code>use-credentials</code></dfn>
     </td><td><dfn id="attr-crossorigin-use-credentials">Use Credentials</dfn>
     </td><td>Cross-origin CORS requests for the element will not have the <i id="cors-settings-attributes:omit-credentials-flag-2"><a href="infrastructure.html#omit-credentials-flag">omit credentials flag</a></i> set.
  </td></tr></tbody></table>

  <p>The empty string is also a valid keyword, and maps to the <a href="infrastructure.html#attr-crossorigin-anonymous" id="cors-settings-attributes:attr-crossorigin-anonymous">Anonymous</a> state. The attribute's <i id="cors-settings-attributes:invalid-value-default"><a href="infrastructure.html#invalid-value-default">invalid value default</a></i> is the <a href="infrastructure.html#attr-crossorigin-anonymous" id="cors-settings-attributes:attr-crossorigin-anonymous-2">Anonymous</a> state. For the
  purposes of <a href="infrastructure.html#reflect" id="cors-settings-attributes:reflect">reflection</a>, the canonical case for the <a href="infrastructure.html#attr-crossorigin-anonymous" id="cors-settings-attributes:attr-crossorigin-anonymous-3">Anonymous</a> state is the <code id="cors-settings-attributes:attr-crossorigin-anonymous-keyword"><a href="infrastructure.html#attr-crossorigin-anonymous-keyword">anonymous</a></code> keyword. The <i id="cors-settings-attributes:missing-value-default"><a href="infrastructure.html#missing-value-default">missing value default</a></i>, used when the attribute is omitted, is the <dfn id="attr-crossorigin-none">No
  CORS</dfn> state.</p></section>


  
  <section><h4 id="cors-enabled-fetch">2.6.7 CORS-enabled fetch</h4>

  <p>When the user agent is required to perform a <dfn id="potentially-cors-enabled-fetch">potentially CORS-enabled fetch</dfn> of an
  <a href="infrastructure.html#absolute-url" id="cors-enabled-fetch:absolute-url">absolute URL</a> <var>URL</var> with a mode <var>mode</var> that is
  either "<a href="infrastructure.html#attr-crossorigin-none" id="cors-enabled-fetch:attr-crossorigin-none">No CORS</a>", "<a href="infrastructure.html#attr-crossorigin-anonymous" id="cors-enabled-fetch:attr-crossorigin-anonymous">Anonymous</a>", or "<a href="infrastructure.html#attr-crossorigin-use-credentials" id="cors-enabled-fetch:attr-crossorigin-use-credentials">Use Credentials</a>", optionally using a
  specific <code id="cors-enabled-fetch:document"><a href="dom.html#document">Document</a></code> or specific <a href="infrastructure.html#url" id="cors-enabled-fetch:url">URL</a> <var>referrer source</var>, with an <a href="browsers.html#origin-2" id="cors-enabled-fetch:origin-2">origin</a>
  <var>origin</var>, and with a default origin behaviour <var>default</var>
  which is either "<i>taint</i>" or "<i>fail</i>", it must run the first applicable set of steps
  from the following list. The default origin behaviour is only used if <var>mode</var> is
  "<a href="infrastructure.html#attr-crossorigin-none" id="cors-enabled-fetch:attr-crossorigin-none-2">No CORS</a>". This algorithm wraps the <a href="infrastructure.html#fetch" id="cors-enabled-fetch:fetch">fetch</a>
  algorithm above, and labels the obtained resource as either <dfn id="cors-same-origin">CORS-same-origin</dfn> or
  <dfn id="cors-cross-origin">CORS-cross-origin</dfn>, or blocks the resource entirely.</p>

  <dl class="switch"><dt>If the <var>URL</var> has the <a href="browsers.html#same-origin" id="cors-enabled-fetch:same-origin">same origin</a> as <var>origin</var></dt><dt>If the <var>URL</var> is a <a href="http://tools.ietf.org/html/rfc2397#section-2" id="cors-enabled-fetch:data-protocol" data-x-internal="data-protocol"><code>data:</code> URL</a></dt><dt>If the <var>URL</var> is <code id="cors-enabled-fetch:about:blank"><a href="infrastructure.html#about:blank">about:blank</a></code></dt><dd>

    <p>Run these substeps:</p>

    <ol><li><p><a href="infrastructure.html#fetch" id="cors-enabled-fetch:fetch-2">Fetch</a> <var>URL</var>, using <var>referrer
     source</var> if one was specified, with the <i>manual redirect flag</i> set.</p></li><li><p><i>Loop</i>: Wait for the <a href="infrastructure.html#fetch" id="cors-enabled-fetch:fetch-3">fetch</a> algorithm to know if the result is a
     redirect or not.</p></li><li>

      <p>Follow the first appropriate steps from the following list:</p>

      <dl class="switch"><dt>If the result of the <a href="infrastructure.html#fetch" id="cors-enabled-fetch:fetch-4">fetch</a> is a redirect, and the <a href="browsers.html#origin-2" id="cors-enabled-fetch:origin-2-2">origin</a> of the
       target URL of the redirect is not the <a href="browsers.html#same-origin" id="cors-enabled-fetch:same-origin-2">same origin</a> as <var>origin</var></dt><dd>

        <p>Set <var>URL</var> to the target URL of the redirect and return to the top of
        the <a href="infrastructure.html#potentially-cors-enabled-fetch" id="cors-enabled-fetch:potentially-cors-enabled-fetch">potentially CORS-enabled fetch</a> algorithm (this time, one of the other
        branches below might be taken, based on the value of <var>mode</var>).</p>

       </dd><dt>If the result of the <a href="infrastructure.html#fetch" id="cors-enabled-fetch:fetch-5">fetch</a> is a redirect</dt><dd>

        <p class="note">The <a href="browsers.html#origin-2" id="cors-enabled-fetch:origin-2-3">origin</a> of the target URL of the redirect is the <a href="browsers.html#same-origin" id="cors-enabled-fetch:same-origin-3">same
        origin</a> as <var>origin</var>.</p>

        <p><a href="infrastructure.html#transparently-follow-the-redirect" id="cors-enabled-fetch:transparently-follow-the-redirect">Transparently follow the redirect</a> and jump to the step labeled <i>loop</i>
        above.</p>

       </dd><dt>Otherwise</dt><dd>

        <p class="note">The resource is available, it is not a redirect, and its <a href="browsers.html#origin-2" id="cors-enabled-fetch:origin-2-4">origin</a>
        is the <a href="browsers.html#same-origin" id="cors-enabled-fetch:same-origin-4">same origin</a> as <var>origin</var>.</p>

        <p>The <a href="webappapis.html#concept-task" id="cors-enabled-fetch:concept-task">tasks</a> from the <a href="infrastructure.html#fetch" id="cors-enabled-fetch:fetch-6">fetch</a> algorithm are
        <a href="webappapis.html#queue-a-task" id="cors-enabled-fetch:queue-a-task">queued</a> normally, and for the purposes of the calling
        algorithm, the obtained resource is <a href="infrastructure.html#cors-same-origin" id="cors-enabled-fetch:cors-same-origin">CORS-same-origin</a>.</p>

       </dd></dl>

     </li></ol>

   </dd><dt>If <var>mode</var> is "<a href="infrastructure.html#attr-crossorigin-none" id="cors-enabled-fetch:attr-crossorigin-none-3">No CORS</a>" and
   <var>default</var> is <i>taint</i></dt><dd>

    <p class="note">The <var>URL</var> does not have the <a href="browsers.html#same-origin" id="cors-enabled-fetch:same-origin-5">same origin</a> as <var>origin</var>.</p>

    <p><a href="infrastructure.html#fetch" id="cors-enabled-fetch:fetch-7">Fetch</a> <var>URL</var>, using <var>referrer
    source</var> if one was specified.</p> 

    <p>The <a href="webappapis.html#concept-task" id="cors-enabled-fetch:concept-task-2">tasks</a> from the <a href="infrastructure.html#fetch" id="cors-enabled-fetch:fetch-8">fetch</a> algorithm are <a href="webappapis.html#queue-a-task" id="cors-enabled-fetch:queue-a-task-2">queued</a> normally, but for the purposes of the calling algorithm, the
    obtained resource is <a href="infrastructure.html#cors-cross-origin" id="cors-enabled-fetch:cors-cross-origin">CORS-cross-origin</a>. The user agent may report a cross-origin
    resource access failure to the user (e.g. in a debugging console).</p>

   </dd><dt>If <var>mode</var> is "<a href="infrastructure.html#attr-crossorigin-none" id="cors-enabled-fetch:attr-crossorigin-none-4">No CORS</a>"</dt><dd>

    <p class="note">The <var>URL</var> does not have the <a href="browsers.html#same-origin" id="cors-enabled-fetch:same-origin-6">same origin</a> as <var>origin</var>, and <var>default</var> is <i>fail</i>.</p>

    <p>Discard any data fetched as part of this algorithm, and prevent any <a href="webappapis.html#concept-task" id="cors-enabled-fetch:concept-task-3">tasks</a> from such invocations of the <a href="infrastructure.html#fetch" id="cors-enabled-fetch:fetch-9">fetch</a> algorithm
    from being <a href="webappapis.html#queue-a-task" id="cors-enabled-fetch:queue-a-task-3">queued</a>.

    For the purposes of the calling algorithm, the user agent must act as if there was a fatal
    network error and no resource was obtained. The user agent may report a cross-origin resource
    access failure to the user (e.g. in a debugging console).</p>

   </dd><dt>If <var>mode</var> is "<a href="infrastructure.html#attr-crossorigin-anonymous" id="cors-enabled-fetch:attr-crossorigin-anonymous-2">Anonymous</a>"
   or "<a href="infrastructure.html#attr-crossorigin-use-credentials" id="cors-enabled-fetch:attr-crossorigin-use-credentials-2">Use Credentials</a>"</dt><dd>

    <p class="note">The <var>URL</var> does not have the <a href="browsers.html#same-origin" id="cors-enabled-fetch:same-origin-7">same origin</a> as <var>origin</var>.</p>

    <p>Run these steps:</p>

    <ol><li><p>Perform a <a href="infrastructure.html#cross-origin-request" id="cors-enabled-fetch:cross-origin-request">cross-origin request</a> with the <i>request URL</i> set
     to <var>URL</var>, with the CORS <i>referrer source</i> set to <var>referrer source</var> if
     one was specified, the <i>source origin</i> set to <var>origin</var>, and with the <i id="cors-enabled-fetch:omit-credentials-flag"><a href="infrastructure.html#omit-credentials-flag">omit credentials flag</a></i> set if <var>mode</var> is "<a href="infrastructure.html#attr-crossorigin-anonymous" id="cors-enabled-fetch:attr-crossorigin-anonymous-3">Anonymous</a>" and not set otherwise. <a href="references.html#refsFETCH">[FETCH]</a></p></li><li><p>Wait for the CORS <a href="infrastructure.html#cross-origin-request-status" id="cors-enabled-fetch:cross-origin-request-status">cross-origin request status</a> to have a value.</p></li><li>

      <p>Jump to the appropriate step from the following list:</p>

      <dl class="switch"><dt>If the CORS <a href="infrastructure.html#cross-origin-request-status" id="cors-enabled-fetch:cross-origin-request-status-2">cross-origin request status</a> is not <i>success</i></dt><dd>

        <p>Discard all fetched data and prevent any <a href="webappapis.html#concept-task" id="cors-enabled-fetch:concept-task-4">tasks</a> from
        the <a href="infrastructure.html#fetch" id="cors-enabled-fetch:fetch-10">fetch</a> algorithm from being <a href="webappapis.html#queue-a-task" id="cors-enabled-fetch:queue-a-task-4">queued</a>. For
        the purposes of the calling algorithm, the user agent must act as if there was a fatal
        network error and no resource was obtained. If a CORS <a href="infrastructure.html#resource-sharing-check" id="cors-enabled-fetch:resource-sharing-check">resource sharing check</a>
        failed, the user agent may report a cross-origin resource access failure to the user (e.g.
        in a debugging console).</p>

       </dd><dt>If the CORS <a href="infrastructure.html#cross-origin-request-status" id="cors-enabled-fetch:cross-origin-request-status-3">cross-origin request status</a> is <i>success</i></dt><dd>

        <p>The <a href="webappapis.html#concept-task" id="cors-enabled-fetch:concept-task-5">tasks</a> from the <a href="infrastructure.html#fetch" id="cors-enabled-fetch:fetch-11">fetch</a> algorithm are
        <a href="webappapis.html#queue-a-task" id="cors-enabled-fetch:queue-a-task-5">queued</a> normally, and for the purposes of the calling
        algorithm, the obtained resource is <a href="infrastructure.html#cors-same-origin" id="cors-enabled-fetch:cors-same-origin-2">CORS-same-origin</a>.</p>

       </dd></dl>

     </li></ol>

   </dd></dl></section></section>

  



  <section><h3 id="common-dom-interfaces">2.7 Common DOM interfaces</h3>

  <section><h4 id="reflecting-content-attributes-in-idl-attributes">2.7.1 Reflecting content attributes in IDL attributes</h4>

  <p>Some IDL attributes are defined to <dfn id="reflect">reflect</dfn> a particular content attribute. This
  means that on getting, the IDL attribute returns the current value of the content attribute, and
  on setting, the IDL attribute changes the value of the content attribute to the given value.</p>

  

  <p>In general, on getting, if the content attribute is not present, the IDL attribute must act as
  if the content attribute's value is the empty string; and on setting, if the content attribute is
  not present, it must first be added.</p>

  <p>If a reflecting IDL attribute is a <code id="reflecting-content-attributes-in-idl-attributes:idl-domstring"><a href="infrastructure.html#idl-domstring">DOMString</a></code> attribute whose content attribute is
  defined to contain a <a href="infrastructure.html#url" id="reflecting-content-attributes-in-idl-attributes:url">URL</a>, then on getting, the IDL attribute must <a href="infrastructure.html#resolve-a-url" id="reflecting-content-attributes-in-idl-attributes:resolve-a-url">resolve</a> the value of the content attribute relative to the element
  and return the resulting <a href="infrastructure.html#absolute-url" id="reflecting-content-attributes-in-idl-attributes:absolute-url">absolute URL</a> if that was successful, or the empty string
  otherwise; and on setting, must set the content attribute to the specified literal value. If the
  content attribute is absent, the IDL attribute must return the default value, if the content
  attribute has one, or else the empty string.</p>

  <p>If a reflecting IDL attribute is a <code id="reflecting-content-attributes-in-idl-attributes:idl-domstring-2"><a href="infrastructure.html#idl-domstring">DOMString</a></code> attribute whose content attribute is
  defined to contain one or more <a href="infrastructure.html#url" id="reflecting-content-attributes-in-idl-attributes:url-2">URLs</a>, then on getting, the IDL attribute
  must <a href="infrastructure.html#split-a-string-on-spaces" id="reflecting-content-attributes-in-idl-attributes:split-a-string-on-spaces">split the content attribute on spaces</a> and
  return the concatenation of <a href="infrastructure.html#resolve-a-url" id="reflecting-content-attributes-in-idl-attributes:resolve-a-url-2">resolving</a> each token URL to an
  <a href="infrastructure.html#absolute-url" id="reflecting-content-attributes-in-idl-attributes:absolute-url-2">absolute URL</a> relative to the element, with a single U+0020 SPACE character between
  each URL, ignoring any tokens that did not resolve successfully. If the content attribute is
  absent, the IDL attribute must return the default value, if the content attribute has one, or else
  the empty string. On setting, the IDL attribute must set the content attribute to the specified
  literal value.</p>

  <p>If a reflecting IDL attribute is a <code id="reflecting-content-attributes-in-idl-attributes:idl-domstring-3"><a href="infrastructure.html#idl-domstring">DOMString</a></code> attribute whose content attribute is
  an <a href="infrastructure.html#enumerated-attribute" id="reflecting-content-attributes-in-idl-attributes:enumerated-attribute">enumerated attribute</a>, and the IDL attribute is <dfn id="limited-to-only-known-values">limited to only known
  values</dfn>, then, on getting, the IDL attribute must return the conforming value associated with
  the state the attribute is in (in its canonical case), if any, or the empty string if the
  attribute is in a state that has no associated keyword value or if the attribute is not in a defined state
  (e.g. the attribute is missing and there is no <i id="reflecting-content-attributes-in-idl-attributes:missing-value-default"><a href="infrastructure.html#missing-value-default">missing value default</a></i>); and on setting, the
  content attribute must be set to the specified new value.</p>

  <p>If a reflecting IDL attribute is a nullable <code id="reflecting-content-attributes-in-idl-attributes:idl-domstring-4"><a href="infrastructure.html#idl-domstring">DOMString</a></code>
  attribute whose content attribute is an <a href="infrastructure.html#enumerated-attribute" id="reflecting-content-attributes-in-idl-attributes:enumerated-attribute-2">enumerated attribute</a>, then, on getting, if
  the corresponding content attribute is in its <i>missing value default</i> then the IDL attribute
  must return null, otherwise, the IDL attribute must return the conforming value associated with
  the state the attribute is in (in its canonical case); and on setting, if the new value is null,
  the content attribute must be removed, and otherwise, the content attribute must be set to the
  specified new value.</p>

  <p>If a reflecting IDL attribute is a <code id="reflecting-content-attributes-in-idl-attributes:idl-domstring-5"><a href="infrastructure.html#idl-domstring">DOMString</a></code> attribute but doesn't fall into any
  of the above categories, then the getting and setting must be done in a transparent,
  case-preserving manner.</p>

  <p>If a reflecting IDL attribute is a <code id="reflecting-content-attributes-in-idl-attributes:idl-boolean"><a href="infrastructure.html#idl-boolean">boolean</a></code> attribute, then on
  getting the IDL attribute must return true if the content attribute is set, and false if it is
  absent. On setting, the content attribute must be removed if the IDL attribute is set to false,
  and must be set to the empty string if the IDL attribute is set to true. (This corresponds to the
  rules for <a href="infrastructure.html#boolean-attribute" id="reflecting-content-attributes-in-idl-attributes:boolean-attribute">boolean content attributes</a>.)</p>

  <p>If a reflecting IDL attribute has a signed integer type (<code id="reflecting-content-attributes-in-idl-attributes:idl-long"><a href="infrastructure.html#idl-long">long</a></code>)
  then, on getting, the content attribute must be parsed according to the <a href="infrastructure.html#rules-for-parsing-integers" id="reflecting-content-attributes-in-idl-attributes:rules-for-parsing-integers">rules for parsing signed integers</a>, and if that is successful, and the
  value is in the range of the IDL attribute's type, the resulting value must be returned. If, on
  the other hand, it fails or returns an out of range value, or if the attribute is absent, then the
  default value must be returned instead, or 0 if there is no default value. On setting, the given
  value must be converted to the shortest possible string representing the number as a <a href="infrastructure.html#valid-integer" id="reflecting-content-attributes-in-idl-attributes:valid-integer">valid
  integer</a> and then that string must be used as the new content attribute value.</p>

  <p>If a reflecting IDL attribute has a signed integer type (<code id="reflecting-content-attributes-in-idl-attributes:idl-long-2"><a href="infrastructure.html#idl-long">long</a></code>)
  that is <dfn id="limited-to-only-non-negative-numbers">limited to only non-negative numbers</dfn> then, on getting, the content attribute
  must be parsed according to the <a href="infrastructure.html#rules-for-parsing-non-negative-integers" id="reflecting-content-attributes-in-idl-attributes:rules-for-parsing-non-negative-integers">rules for parsing non-negative integers</a>, and if that
  is successful, and the value is in the range of the IDL attribute's type, the resulting value must
  be returned. If, on the other hand, it fails or returns an out of range value, or if the attribute
  is absent, the default value must be returned instead, or −1 if there is no default value.
  On setting, if the value is negative, the user agent must throw an <code id="reflecting-content-attributes-in-idl-attributes:indexsizeerror"><a href="infrastructure.html#indexsizeerror">IndexSizeError</a></code>
  exception. Otherwise, the given value must be converted to the shortest possible string
  representing the number as a <a href="infrastructure.html#valid-non-negative-integer" id="reflecting-content-attributes-in-idl-attributes:valid-non-negative-integer">valid non-negative integer</a> and then that string must be
  used as the new content attribute value.</p>

  <p>If a reflecting IDL attribute has an <em>unsigned</em> integer type (<code id="reflecting-content-attributes-in-idl-attributes:idl-unsigned-long"><a href="infrastructure.html#idl-unsigned-long">unsigned long</a></code>) then, on getting, the content attribute must be
  parsed according to the <a href="infrastructure.html#rules-for-parsing-non-negative-integers" id="reflecting-content-attributes-in-idl-attributes:rules-for-parsing-non-negative-integers-2">rules for parsing non-negative integers</a>, and if that is
  successful, and the value is in the range 0 to 2147483647 inclusive, the resulting value must be
  returned. If, on the other hand, it fails or returns an out of range value, or if the attribute is
  absent, the default value must be returned instead, or 0 if there is no default value. On setting,
  first, if the new value is in the range 0 to 2147483647, then let <var>n</var> be the new value,
  otherwise let <var>n</var> be the default value, or 0 if there is no default value; then,
  <var>n</var> must be converted to the shortest possible string representing the number as a
  <a href="infrastructure.html#valid-non-negative-integer" id="reflecting-content-attributes-in-idl-attributes:valid-non-negative-integer-2">valid non-negative integer</a> and that string must be used as the new content attribute
  value.</p>
  

  <p>If a reflecting IDL attribute has an unsigned integer type (<code id="reflecting-content-attributes-in-idl-attributes:idl-unsigned-long-2"><a href="infrastructure.html#idl-unsigned-long">unsigned long</a></code>) that is <dfn id="limited-to-only-non-negative-numbers-greater-than-zero">limited to only non-negative numbers
  greater than zero</dfn>, then the behaviour is similar to the previous case, but zero is not
  allowed. On getting, the content attribute must first be parsed according to the <a href="infrastructure.html#rules-for-parsing-non-negative-integers" id="reflecting-content-attributes-in-idl-attributes:rules-for-parsing-non-negative-integers-3">rules for
  parsing non-negative integers</a>, and if that is successful, and the value is in the range 1
  to 2147483647 inclusive, the resulting value must be returned. If, on the other hand, it fails or
  returns an out of range value, or if the attribute is absent, the default value must be returned
  instead, or 1 if there is no default value. On setting, if the value is zero, the user agent must
  throw an <code id="reflecting-content-attributes-in-idl-attributes:indexsizeerror-2"><a href="infrastructure.html#indexsizeerror">IndexSizeError</a></code> exception. Otherwise, first, if the new value is in the range
  1 to 2147483647, then let <var>n</var> be the new value, otherwise let <var>n</var> be the default
  value, or 1 if there is no default value; then, <var>n</var> must be converted to the shortest
  possible string representing the number as a <a href="infrastructure.html#valid-non-negative-integer" id="reflecting-content-attributes-in-idl-attributes:valid-non-negative-integer-3">valid non-negative integer</a> and that
  string must be used as the new content attribute value.</p> 

  <p>If a reflecting IDL attribute has a floating-point number type (<code id="reflecting-content-attributes-in-idl-attributes:idl-double"><a href="infrastructure.html#idl-double">double</a></code> or <code id="reflecting-content-attributes-in-idl-attributes:idl-unrestricted-double"><a href="infrastructure.html#idl-unrestricted-double">unrestricted
  double</a></code>), then, on getting, the content attribute must be parsed according to the
  <a href="infrastructure.html#rules-for-parsing-floating-point-number-values" id="reflecting-content-attributes-in-idl-attributes:rules-for-parsing-floating-point-number-values">rules for parsing floating-point number values</a>, and if that is successful, the
  resulting value must be returned. If, on the other hand, it fails, or if the attribute is absent,
  the default value must be returned instead, or 0.0 if there is no default value. On setting, the
  given value must be converted to the <a href="infrastructure.html#best-representation-of-the-number-as-a-floating-point-number" id="reflecting-content-attributes-in-idl-attributes:best-representation-of-the-number-as-a-floating-point-number">best representation of the number as a floating-point
  number</a> and then that string must be used as the new content attribute value.</p>

  <p>If a reflecting IDL attribute has a floating-point number type (<code id="reflecting-content-attributes-in-idl-attributes:idl-double-2"><a href="infrastructure.html#idl-double">double</a></code> or <code id="reflecting-content-attributes-in-idl-attributes:idl-unrestricted-double-2"><a href="infrastructure.html#idl-unrestricted-double">unrestricted
  double</a></code>) that is <dfn id="limited-to-numbers-greater-than-zero">limited to numbers greater than zero</dfn>, then the behaviour is
  similar to the previous case, but zero and negative values are not allowed. On getting, the
  content attribute must be parsed according to the <a href="infrastructure.html#rules-for-parsing-floating-point-number-values" id="reflecting-content-attributes-in-idl-attributes:rules-for-parsing-floating-point-number-values-2">rules for parsing floating-point number
  values</a>, and if that is successful and the value is greater than 0.0, the resulting value
  must be returned. If, on the other hand, it fails or returns an out of range value, or if the
  attribute is absent, the default value must be returned instead, or 0.0 if there is no default
  value. On setting, if the value is less than or equal to zero, then the value must be ignored.
  Otherwise, the given value must be converted to the <a href="infrastructure.html#best-representation-of-the-number-as-a-floating-point-number" id="reflecting-content-attributes-in-idl-attributes:best-representation-of-the-number-as-a-floating-point-number-2">best representation of the number as a
  floating-point number</a> and then that string must be used as the new content attribute
  value.</p>

  <p class="note">The values Infinity and Not-a-Number (NaN) values throw an exception on setting,
  as defined in the Web IDL specification. <a href="references.html#refsWEBIDL">[WEBIDL]</a></p>

  <p>If a reflecting IDL attribute has the type <code id="reflecting-content-attributes-in-idl-attributes:domtokenlist"><a href="infrastructure.html#domtokenlist">DOMTokenList</a></code> or
  <code id="reflecting-content-attributes-in-idl-attributes:domsettabletokenlist"><a href="infrastructure.html#domsettabletokenlist">DOMSettableTokenList</a></code>, then on getting it must return a <code id="reflecting-content-attributes-in-idl-attributes:domtokenlist-2"><a href="infrastructure.html#domtokenlist">DOMTokenList</a></code> or
  <code id="reflecting-content-attributes-in-idl-attributes:domsettabletokenlist-2"><a href="infrastructure.html#domsettabletokenlist">DOMSettableTokenList</a></code> object (as appropriate) whose associated element is the element
  in question and whose associated attribute's local name is the name of the attribute in question.
  The same <code id="reflecting-content-attributes-in-idl-attributes:domtokenlist-3"><a href="infrastructure.html#domtokenlist">DOMTokenList</a></code> or <code id="reflecting-content-attributes-in-idl-attributes:domsettabletokenlist-3"><a href="infrastructure.html#domsettabletokenlist">DOMSettableTokenList</a></code> object must be returned
  every time for each attribute.</p>

  <p>If a reflecting IDL attribute has the type <code id="reflecting-content-attributes-in-idl-attributes:htmlelement"><a href="dom.html#htmlelement">HTMLElement</a></code>, or an interface that
  descends from <code id="reflecting-content-attributes-in-idl-attributes:htmlelement-2"><a href="dom.html#htmlelement">HTMLElement</a></code>, then, on getting, it must run the following algorithm
  (stopping at the first point where a value is returned):</p>

  <ol><li>If the corresponding content attribute is absent, then the IDL attribute must return
   null.</li><li>Let <var>candidate</var> be the element that the <code id="reflecting-content-attributes-in-idl-attributes:dom-document-getelementbyid"><a href="infrastructure.html#dom-document-getelementbyid">document.getElementById()</a></code> method would find when
   called on the content attribute's element's <a id="reflecting-content-attributes-in-idl-attributes:node-document" href="https://dom.spec.whatwg.org/#concept-node-document" data-x-internal="node-document">node document</a> if it were passed as its argument the current value of
   the corresponding content attribute.</li><li>If <var>candidate</var> is null, or if it is not type-compatible with the IDL
   attribute, then the IDL attribute must return null.</li><li>Otherwise, it must return <var>candidate</var>.</li></ol>

  <p>On setting, if the given element has an <code id="reflecting-content-attributes-in-idl-attributes:the-id-attribute"><a href="dom.html#the-id-attribute">id</a></code> attribute, and has the
  same <a href="infrastructure.html#home-subtree" id="reflecting-content-attributes-in-idl-attributes:home-subtree">home subtree</a> as the element of the attribute being set, and the given element is
  the first element in that <a href="infrastructure.html#home-subtree" id="reflecting-content-attributes-in-idl-attributes:home-subtree-2">home subtree</a> whose <a href="infrastructure.html#concept-id" id="reflecting-content-attributes-in-idl-attributes:concept-id">ID</a> is
  the value of that <code id="reflecting-content-attributes-in-idl-attributes:the-id-attribute-2"><a href="dom.html#the-id-attribute">id</a></code> attribute, then the content attribute must be
  set to the value of that <code id="reflecting-content-attributes-in-idl-attributes:the-id-attribute-3"><a href="dom.html#the-id-attribute">id</a></code> attribute. Otherwise, the content
  attribute must be set to the empty string.</p></section>

  



  <section><h4 id="collections-2">2.7.2 Collections</h4>

  <p>The <code id="collections-2:htmlallcollection"><a href="infrastructure.html#htmlallcollection">HTMLAllCollection</a></code>, <code id="collections-2:htmlformcontrolscollection"><a href="infrastructure.html#htmlformcontrolscollection">HTMLFormControlsCollection</a></code>,
  <code id="collections-2:htmloptionscollection"><a href="infrastructure.html#htmloptionscollection">HTMLOptionsCollection</a></code>, and <code id="collections-2:htmlpropertiescollection"><a href="infrastructure.html#htmlpropertiescollection">HTMLPropertiesCollection</a></code> interfaces are
  <a href="infrastructure.html#collections" id="collections-2:collections">collections</a> derived from the <code id="collections-2:htmlcollection"><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> interface.</p>


  <section><h5 id="the-htmlallcollection-interface">2.7.2.1 The <code id="the-htmlallcollection-interface:htmlallcollection"><a href="infrastructure.html#htmlallcollection">HTMLAllCollection</a></code> interface</h5>

  <p>The <code id="the-htmlallcollection-interface:htmlallcollection-2"><a href="infrastructure.html#htmlallcollection">HTMLAllCollection</a></code> interface is used for the legacy <code id="the-htmlallcollection-interface:dom-document-all"><a href="obsolete.html#dom-document-all">document.all</a></code> attribute. It operates similarly to
  <code id="the-htmlallcollection-interface:htmlcollection"><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code>; the main differences are that its <code id="the-htmlallcollection-interface:dom-htmlallcollection-nameditem"><a href="infrastructure.html#dom-htmlallcollection-nameditem">namedItem()</a></code> method returns an
  <code id="the-htmlallcollection-interface:htmlcollection-2"><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> object when there are multiple matching elements, and that its <code id="the-htmlallcollection-interface:dom-htmlallcollection-item"><a href="infrastructure.html#dom-htmlallcollection-item">item()</a></code> method can be used as a synonym for its <code id="the-htmlallcollection-interface:dom-htmlallcollection-nameditem-2"><a href="infrastructure.html#dom-htmlallcollection-nameditem">namedItem()</a></code> method.</p>

  <p class="note">All <code id="the-htmlallcollection-interface:htmlallcollection-3"><a href="infrastructure.html#htmlallcollection">HTMLAllCollection</a></code> objects are rooted at a <code id="the-htmlallcollection-interface:document"><a href="dom.html#document">Document</a></code>
  and have a filter that matches all elements, so the elements <a href="infrastructure.html#represented-by-the-collection" id="the-htmlallcollection-interface:represented-by-the-collection">represented by the
  collection</a> of an <code id="the-htmlallcollection-interface:htmlallcollection-4"><a href="infrastructure.html#htmlallcollection">HTMLAllCollection</a></code> object consist of all the descendant
  elements of the root <code id="the-htmlallcollection-interface:document-2"><a href="dom.html#document">Document</a></code>.</p>

  <pre class="idl">interface <dfn id="htmlallcollection">HTMLAllCollection</dfn> : <a href="infrastructure.html#htmlcollection" id="the-htmlallcollection-interface:htmlcollection-3">HTMLCollection</a> {
  // inherits <a href="infrastructure.html#dom-htmlcollection-length" id="the-htmlallcollection-interface:dom-htmlcollection-length">length</a> and 'getter'
  <a href="infrastructure.html#element" id="the-htmlallcollection-interface:element">Element</a>? <a href="infrastructure.html#dom-htmlallcollection-item" id="the-htmlallcollection-interface:dom-htmlallcollection-item-2">item</a>(unsigned long index);
  (<a href="infrastructure.html#htmlcollection" id="the-htmlallcollection-interface:htmlcollection-4">HTMLCollection</a> or <a href="infrastructure.html#element" id="the-htmlallcollection-interface:element-2">Element</a>)? <a href="infrastructure.html#dom-htmlallcollection-item-string" id="the-htmlallcollection-interface:dom-htmlallcollection-item-string">item</a>(DOMString name);
  legacycaller getter (<a href="infrastructure.html#htmlcollection" id="the-htmlallcollection-interface:htmlcollection-5">HTMLCollection</a> or <a href="infrastructure.html#element" id="the-htmlallcollection-interface:element-3">Element</a>)? <a href="infrastructure.html#dom-htmlallcollection-nameditem" id="the-htmlallcollection-interface:dom-htmlallcollection-nameditem-3">namedItem</a>(DOMString name); // shadows inherited namedItem()
};</pre>

  <dl class="domintro"><dt><var>collection</var> . <code id="the-htmlallcollection-interface:dom-htmlcollection-length-2"><a href="infrastructure.html#dom-htmlcollection-length">length</a></code></dt><dd>
    <p>Returns the number of elements in the collection.</p>
   </dd><dt><var>element</var> = <var>collection</var> . <code id="the-htmlallcollection-interface:dom-htmlallcollection-item-3"><a href="infrastructure.html#dom-htmlallcollection-item">item</a></code>(<var>index</var>)</dt><dt><var>collection</var>[<var>index</var>]</dt><dd>
    <p>Returns the item with index <var>index</var> from the collection. The items are sorted in <a href="infrastructure.html#tree-order" id="the-htmlallcollection-interface:tree-order">tree order</a>.</p>
   </dd><dt><var>element</var> = <var>collection</var> . <code id="the-htmlallcollection-interface:dom-htmlallcollection-item-string-2"><a href="infrastructure.html#dom-htmlallcollection-item-string">item</a></code>(<var>name</var>)</dt><dt><var>collection</var> = <var>collection</var> . <code id="the-htmlallcollection-interface:dom-htmlallcollection-item-string-3"><a href="infrastructure.html#dom-htmlallcollection-item-string">item</a></code>(<var>name</var>)</dt><dt><var>element</var> = <var>collection</var> . <code id="the-htmlallcollection-interface:dom-htmlallcollection-nameditem-4"><a href="infrastructure.html#dom-htmlallcollection-nameditem">namedItem</a></code>(<var>name</var>)</dt><dt><var>collection</var> = <var>collection</var> . <code id="the-htmlallcollection-interface:dom-htmlallcollection-nameditem-5"><a href="infrastructure.html#dom-htmlallcollection-nameditem">namedItem</a></code>(<var>name</var>)</dt><dt><var>element</var> = <var>collection</var>(<var>name</var>)</dt><dt><var>collection</var> = <var>collection</var>(<var>name</var>)</dt><dt><var>collection</var>[<var>name</var>]</dt><dd>
    <p>Returns the item with <a href="infrastructure.html#concept-id" id="the-htmlallcollection-interface:concept-id">ID</a> or name <var>name</var> from the collection.</p>
    <p>If there are multiple matching items, then an <code id="the-htmlallcollection-interface:htmlcollection-6"><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> object containing all those elements is returned.</p>
    
    <p>Only <code id="the-htmlallcollection-interface:the-button-element"><a href="semantics.html#the-button-element">button</a></code>, <code id="the-htmlallcollection-interface:the-form-element"><a href="semantics.html#the-form-element">form</a></code>, <code id="the-htmlallcollection-interface:the-iframe-element"><a href="semantics.html#the-iframe-element">iframe</a></code>,
    <code id="the-htmlallcollection-interface:the-input-element"><a href="semantics.html#the-input-element">input</a></code>, <code id="the-htmlallcollection-interface:the-map-element"><a href="semantics.html#the-map-element">map</a></code>, <code id="the-htmlallcollection-interface:the-meta-element"><a href="semantics.html#the-meta-element">meta</a></code>, <code id="the-htmlallcollection-interface:the-object-element"><a href="semantics.html#the-object-element">object</a></code>,
    <code id="the-htmlallcollection-interface:the-select-element"><a href="semantics.html#the-select-element">select</a></code>, and <code id="the-htmlallcollection-interface:the-textarea-element"><a href="semantics.html#the-textarea-element">textarea</a></code> elements can have a name for the purpose of this
    method; their name is given by the value of their <code>name</code> attribute.</p>
   </dd></dl>

  

  <p>The object's <a href="infrastructure.html#supported-property-indices" id="the-htmlallcollection-interface:supported-property-indices">supported property indices</a> are as defined for
  <code id="the-htmlallcollection-interface:htmlcollection-7"><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> objects.</p>

  <p>The <dfn id="dom-htmlallcollection-item"><code>item()</code></dfn> method, when invoked
  with a numeric argument, must act like the <a href="infrastructure.html#dom-htmlcollection-item" id="the-htmlallcollection-interface:dom-htmlcollection-item">item()</a>
  method inherited from <code id="the-htmlallcollection-interface:htmlcollection-8"><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code>.</p>

  
  <p>The following elements are <dfn id="all-named-elements">"all"-named elements</dfn>:
   <code id="the-htmlallcollection-interface:the-a-element"><a href="semantics.html#the-a-element">a</a></code>, 
   <code id="the-htmlallcollection-interface:the-applet-element"><a href="obsolete.html#the-applet-element">applet</a></code>,
   <code id="the-htmlallcollection-interface:the-button-element-2"><a href="semantics.html#the-button-element">button</a></code>, 
   <code id="the-htmlallcollection-interface:the-embed-element"><a href="semantics.html#the-embed-element">embed</a></code>,
   <code id="the-htmlallcollection-interface:the-form-element-2"><a href="semantics.html#the-form-element">form</a></code>,
   <code id="the-htmlallcollection-interface:frame"><a href="obsolete.html#frame">frame</a></code>,
   <code id="the-htmlallcollection-interface:frameset"><a href="obsolete.html#frameset">frameset</a></code>,
   <code id="the-htmlallcollection-interface:the-iframe-element-2"><a href="semantics.html#the-iframe-element">iframe</a></code>, 
   <code id="the-htmlallcollection-interface:the-img-element"><a href="semantics.html#the-img-element">img</a></code>,
   <code id="the-htmlallcollection-interface:the-input-element-2"><a href="semantics.html#the-input-element">input</a></code>,
   
   <code id="the-htmlallcollection-interface:the-map-element-2"><a href="semantics.html#the-map-element">map</a></code>, 
   <code id="the-htmlallcollection-interface:the-meta-element-2"><a href="semantics.html#the-meta-element">meta</a></code>, 
   <code id="the-htmlallcollection-interface:the-object-element-2"><a href="semantics.html#the-object-element">object</a></code>,
   <code id="the-htmlallcollection-interface:the-select-element-2"><a href="semantics.html#the-select-element">select</a></code>, and
   <code id="the-htmlallcollection-interface:the-textarea-element-2"><a href="semantics.html#the-textarea-element">textarea</a></code> 
  </p>

  <p>The <a href="infrastructure.html#supported-property-names" id="the-htmlallcollection-interface:supported-property-names">supported property names</a> consist of the non-empty values of all the <code id="the-htmlallcollection-interface:the-id-attribute"><a href="dom.html#the-id-attribute">id</a></code> attributes of all the elements <a href="infrastructure.html#represented-by-the-collection" id="the-htmlallcollection-interface:represented-by-the-collection-2">represented by the
  collection</a>, and the non-empty values of all the <code>name</code> attributes of
  all the <a href="infrastructure.html#all-named-elements" id="the-htmlallcollection-interface:all-named-elements">"all"-named elements</a> <a href="infrastructure.html#represented-by-the-collection" id="the-htmlallcollection-interface:represented-by-the-collection-3">represented by the collection</a>, in
  <a href="infrastructure.html#tree-order" id="the-htmlallcollection-interface:tree-order-2">tree order</a>, ignoring later duplicates, with the <code id="the-htmlallcollection-interface:the-id-attribute-2"><a href="dom.html#the-id-attribute">id</a></code> of
  an element preceding its <code>name</code> if it contributes both, they differ from each
  other, and neither is the duplicate of an earlier entry.</p>

  <p>The properties exposed in this way must be <a href="infrastructure.html#unenumerable" id="the-htmlallcollection-interface:unenumerable">unenumerable</a>.</p>

  <p>The <dfn id="dom-htmlallcollection-item-string"><code>item(<var>name</var>)</code></dfn> and <dfn id="dom-htmlallcollection-nameditem"><code>namedItem(<var>name</var>)</code></dfn>
  methods must act according to the following algorithm:</p>

  <ol><li>If <var>name</var> is the empty string, return null and stop the algorithm.</li><li>

    <p>Let <var>collection</var> be an <code id="the-htmlallcollection-interface:htmlcollection-9"><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> object rooted at the
    same <code id="the-htmlallcollection-interface:document-3"><a href="dom.html#document">Document</a></code> as the <code id="the-htmlallcollection-interface:htmlallcollection-5"><a href="infrastructure.html#htmlallcollection">HTMLAllCollection</a></code> object on which the method was
    invoked, whose filter matches only elements that are either:</p>

    <ul><li><a href="infrastructure.html#all-named-elements" id="the-htmlallcollection-interface:all-named-elements-2">"all"-named elements</a> with a <code>name</code> attribute equal to
     <var>name</var>, or,</li><li>elements with an <a href="infrastructure.html#concept-id" id="the-htmlallcollection-interface:concept-id-2">ID</a> equal to <var>name</var>.</li></ul>

   </li><li>If, at the time the method is called, there is exactly one node in <var>collection</var>, then return that node and stop the algorithm.</li><li>Otherwise, if, at the time the method is called, <var>collection</var> is empty,
   return null and stop the algorithm.</li><li>Otherwise, return <var>collection</var>.</li></ol></section>

  


  <section><h5 id="the-htmlformcontrolscollection-interface">2.7.2.2 The <code id="the-htmlformcontrolscollection-interface:htmlformcontrolscollection"><a href="infrastructure.html#htmlformcontrolscollection">HTMLFormControlsCollection</a></code> interface</h5>

  <p>The <code id="the-htmlformcontrolscollection-interface:htmlformcontrolscollection-2"><a href="infrastructure.html#htmlformcontrolscollection">HTMLFormControlsCollection</a></code> interface is used for <a href="infrastructure.html#collections" id="the-htmlformcontrolscollection-interface:collections">collections</a> of
  <a href="semantics.html#category-listed" id="the-htmlformcontrolscollection-interface:category-listed">listed elements</a> in <code id="the-htmlformcontrolscollection-interface:the-form-element"><a href="semantics.html#the-form-element">form</a></code> and
  <code id="the-htmlformcontrolscollection-interface:the-fieldset-element"><a href="semantics.html#the-fieldset-element">fieldset</a></code> elements.</p>

  <pre class="idl">interface <dfn id="htmlformcontrolscollection">HTMLFormControlsCollection</dfn> : <a href="infrastructure.html#htmlcollection" id="the-htmlformcontrolscollection-interface:htmlcollection">HTMLCollection</a> {
  // inherits <a href="infrastructure.html#dom-htmlcollection-length" id="the-htmlformcontrolscollection-interface:dom-htmlcollection-length">length</a> and <a href="infrastructure.html#dom-htmlcollection-item" id="the-htmlformcontrolscollection-interface:dom-htmlcollection-item">item</a>()
  legacycaller getter (<a href="infrastructure.html#radionodelist" id="the-htmlformcontrolscollection-interface:radionodelist">RadioNodeList</a> or <a href="infrastructure.html#element" id="the-htmlformcontrolscollection-interface:element">Element</a>)? <a href="infrastructure.html#dom-htmlformcontrolscollection-nameditem" id="the-htmlformcontrolscollection-interface:dom-htmlformcontrolscollection-nameditem">namedItem</a>(DOMString name); // shadows inherited namedItem()
};

interface <dfn id="radionodelist">RadioNodeList</dfn> : <a href="infrastructure.html#nodelist" id="the-htmlformcontrolscollection-interface:nodelist">NodeList</a> {
  attribute DOMString <a href="infrastructure.html#dom-radionodelist-value" id="the-htmlformcontrolscollection-interface:dom-radionodelist-value">value</a>;
};</pre>

  <dl class="domintro"><dt><var>collection</var> . <code id="the-htmlformcontrolscollection-interface:dom-htmlcollection-length-2"><a href="infrastructure.html#dom-htmlcollection-length">length</a></code></dt><dd>
    <p>Returns the number of elements in the collection.</p>
   </dd><dt><var>element</var> = <var>collection</var> . <code id="the-htmlformcontrolscollection-interface:dom-htmlcollection-item-2"><a href="infrastructure.html#dom-htmlcollection-item">item</a></code>(<var>index</var>)</dt><dt><var>collection</var>[<var>index</var>]</dt><dd>
    <p>Returns the item with index <var>index</var> from the collection. The items are sorted in <a href="infrastructure.html#tree-order" id="the-htmlformcontrolscollection-interface:tree-order">tree order</a>.</p>
   </dd><dt><var>element</var> = <var>collection</var> . <code id="the-htmlformcontrolscollection-interface:dom-htmlformcontrolscollection-nameditem-2"><a href="infrastructure.html#dom-htmlformcontrolscollection-nameditem">namedItem</a></code>(<var>name</var>)</dt><dt><var>radioNodeList</var> = <var>collection</var> . <code id="the-htmlformcontrolscollection-interface:dom-htmlformcontrolscollection-nameditem-3"><a href="infrastructure.html#dom-htmlformcontrolscollection-nameditem">namedItem</a></code>(<var>name</var>)</dt><dt><var>collection</var>[<var>name</var>]</dt><dt><var>collection</var>(<var>name</var>)</dt><dd>
    <p>Returns the item with <a href="infrastructure.html#concept-id" id="the-htmlformcontrolscollection-interface:concept-id">ID</a> or <code id="the-htmlformcontrolscollection-interface:attr-fe-name"><a href="semantics.html#attr-fe-name">name</a></code> <var>name</var> from the collection.</p>
    <p>If there are multiple matching items, then a <code id="the-htmlformcontrolscollection-interface:radionodelist-2"><a href="infrastructure.html#radionodelist">RadioNodeList</a></code> object containing all those elements is returned.</p>
   </dd><dt><var>radioNodeList</var> . <var>value</var> [ = <var>value</var> ]</dt><dd>
    <p>Returns the value of the first checked radio button represented by the object.</p>
    <p>Can be set, to check the first radio button with the given value represented by the object.</p>
   </dd></dl>

  

  <p>The object's <a href="infrastructure.html#supported-property-indices" id="the-htmlformcontrolscollection-interface:supported-property-indices">supported property indices</a> are as defined for
  <code id="the-htmlformcontrolscollection-interface:htmlcollection-2"><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> objects.</p>

  <p>The <a href="infrastructure.html#supported-property-names" id="the-htmlformcontrolscollection-interface:supported-property-names">supported property names</a> consist of the non-empty values of all the <code id="the-htmlformcontrolscollection-interface:the-id-attribute"><a href="dom.html#the-id-attribute">id</a></code> and <code id="the-htmlformcontrolscollection-interface:attr-fe-name-2"><a href="semantics.html#attr-fe-name">name</a></code> attributes of all the
  elements <a href="infrastructure.html#represented-by-the-collection" id="the-htmlformcontrolscollection-interface:represented-by-the-collection">represented by the collection</a>, in <a href="infrastructure.html#tree-order" id="the-htmlformcontrolscollection-interface:tree-order-2">tree order</a>, ignoring later
  duplicates, with the <code id="the-htmlformcontrolscollection-interface:the-id-attribute-2"><a href="dom.html#the-id-attribute">id</a></code> of an element preceding its <code id="the-htmlformcontrolscollection-interface:attr-fe-name-3"><a href="semantics.html#attr-fe-name">name</a></code> if it contributes both, they differ from each other, and neither is the
  duplicate of an earlier entry.</p>

  <p>The properties exposed in this way must be <a href="infrastructure.html#unenumerable" id="the-htmlformcontrolscollection-interface:unenumerable">unenumerable</a>.</p>

  <p>The <dfn id="dom-htmlformcontrolscollection-nameditem"><code>namedItem(<var>name</var>)</code></dfn> method must act according to the following algorithm:</p>

  <ol><li>If <var>name</var> is the empty string, return null and stop the algorithm.</li><li>If, at the time the method is called, there is exactly one node in the collection that has
   either an <code id="the-htmlformcontrolscollection-interface:the-id-attribute-3"><a href="dom.html#the-id-attribute">id</a></code> attribute or a <code id="the-htmlformcontrolscollection-interface:attr-fe-name-4"><a href="semantics.html#attr-fe-name">name</a></code>
   attribute equal to <var>name</var>, then return that node and stop the algorithm.</li><li>Otherwise, if there are no nodes in the collection that have either an <code id="the-htmlformcontrolscollection-interface:the-id-attribute-4"><a href="dom.html#the-id-attribute">id</a></code> attribute or a <code id="the-htmlformcontrolscollection-interface:attr-fe-name-5"><a href="semantics.html#attr-fe-name">name</a></code> attribute equal
   to <var>name</var>, then return null and stop the algorithm.</li><li>Otherwise, create a new <code id="the-htmlformcontrolscollection-interface:radionodelist-3"><a href="infrastructure.html#radionodelist">RadioNodeList</a></code> object representing a <a href="infrastructure.html#live" id="the-htmlformcontrolscollection-interface:live">live</a>
   view of the <code id="the-htmlformcontrolscollection-interface:htmlformcontrolscollection-3"><a href="infrastructure.html#htmlformcontrolscollection">HTMLFormControlsCollection</a></code> object, further filtered so that the only
   nodes in the <code id="the-htmlformcontrolscollection-interface:radionodelist-4"><a href="infrastructure.html#radionodelist">RadioNodeList</a></code> object are those that have either an <code id="the-htmlformcontrolscollection-interface:the-id-attribute-5"><a href="dom.html#the-id-attribute">id</a></code> attribute or a <code id="the-htmlformcontrolscollection-interface:attr-fe-name-6"><a href="semantics.html#attr-fe-name">name</a></code> attribute equal
   to <var>name</var>. The nodes in the <code id="the-htmlformcontrolscollection-interface:radionodelist-5"><a href="infrastructure.html#radionodelist">RadioNodeList</a></code> object must be sorted in
   <a href="infrastructure.html#tree-order" id="the-htmlformcontrolscollection-interface:tree-order-3">tree order</a>.</li><li>Return that <code id="the-htmlformcontrolscollection-interface:radionodelist-6"><a href="infrastructure.html#radionodelist">RadioNodeList</a></code> object.</li></ol>

  <hr>

  <p>Members of the <code id="the-htmlformcontrolscollection-interface:radionodelist-7"><a href="infrastructure.html#radionodelist">RadioNodeList</a></code> interface inherited from the <code id="the-htmlformcontrolscollection-interface:nodelist-2"><a href="infrastructure.html#nodelist">NodeList</a></code>
  interface must behave as they would on a <code id="the-htmlformcontrolscollection-interface:nodelist-3"><a href="infrastructure.html#nodelist">NodeList</a></code> object.</p>

  <p>The <dfn id="dom-radionodelist-value"><code>value</code></dfn> IDL attribute on the
  <code id="the-htmlformcontrolscollection-interface:radionodelist-8"><a href="infrastructure.html#radionodelist">RadioNodeList</a></code> object, on getting, must return the value returned by running the
  following steps:</p>

  <ol><li><p>Let <var>element</var> be the first element in <a href="infrastructure.html#tree-order" id="the-htmlformcontrolscollection-interface:tree-order-4">tree order</a>
   represented by the <code id="the-htmlformcontrolscollection-interface:radionodelist-9"><a href="infrastructure.html#radionodelist">RadioNodeList</a></code> object that is an <code id="the-htmlformcontrolscollection-interface:the-input-element"><a href="semantics.html#the-input-element">input</a></code> element whose
   <code id="the-htmlformcontrolscollection-interface:attr-input-type"><a href="semantics.html#attr-input-type">type</a></code> attribute is in the <a href="semantics.html#radio-button-state-(type=radio)" id="the-htmlformcontrolscollection-interface:radio-button-state-(type=radio)">Radio Button</a> state and whose <a href="semantics.html#concept-fe-checked" id="the-htmlformcontrolscollection-interface:concept-fe-checked">checkedness</a> is true. Otherwise, let it be null.</p></li><li><p>If <var>element</var> is null, return the empty string.</p></li><li><p>If <var>element</var> is an element with no <code id="the-htmlformcontrolscollection-interface:attr-input-value"><a href="semantics.html#attr-input-value">value</a></code> attribute, return the string "<code>on</code>".</p></li><li><p>Otherwise, return the value of <var>element</var>'s <code id="the-htmlformcontrolscollection-interface:attr-input-value-2"><a href="semantics.html#attr-input-value">value</a></code> attribute.</p></li></ol>

  <p>On setting, the <code id="the-htmlformcontrolscollection-interface:dom-radionodelist-value-2"><a href="infrastructure.html#dom-radionodelist-value">value</a></code> IDL attribute must run the
  following steps:</p>

  <ol><li><p>If the new value is the string "<code>on</code>": let <var>element</var> be the first element in <a href="infrastructure.html#tree-order" id="the-htmlformcontrolscollection-interface:tree-order-5">tree order</a>
   represented by the <code id="the-htmlformcontrolscollection-interface:radionodelist-10"><a href="infrastructure.html#radionodelist">RadioNodeList</a></code> object that is an <code id="the-htmlformcontrolscollection-interface:the-input-element-2"><a href="semantics.html#the-input-element">input</a></code> element whose
   <code id="the-htmlformcontrolscollection-interface:attr-input-type-2"><a href="semantics.html#attr-input-type">type</a></code> attribute is in the <a href="semantics.html#radio-button-state-(type=radio)" id="the-htmlformcontrolscollection-interface:radio-button-state-(type=radio)-2">Radio Button</a> state and whose <code id="the-htmlformcontrolscollection-interface:attr-input-value-3"><a href="semantics.html#attr-input-value">value</a></code> content attribute is either absent, or present and equal to the new value, if any. If no such element exists, then instead let <var>element</var> be null.</p>

   <p>Otherwise: let <var>element</var> be the first element in <a href="infrastructure.html#tree-order" id="the-htmlformcontrolscollection-interface:tree-order-6">tree order</a>
   represented by the <code id="the-htmlformcontrolscollection-interface:radionodelist-11"><a href="infrastructure.html#radionodelist">RadioNodeList</a></code> object that is an <code id="the-htmlformcontrolscollection-interface:the-input-element-3"><a href="semantics.html#the-input-element">input</a></code> element whose
   <code id="the-htmlformcontrolscollection-interface:attr-input-type-3"><a href="semantics.html#attr-input-type">type</a></code> attribute is in the <a href="semantics.html#radio-button-state-(type=radio)" id="the-htmlformcontrolscollection-interface:radio-button-state-(type=radio)-3">Radio Button</a> state and whose <code id="the-htmlformcontrolscollection-interface:attr-input-value-4"><a href="semantics.html#attr-input-value">value</a></code> content attribute is present and equal to the new value, if
   any. If no such element exists, then instead let <var>element</var> be null.</p></li><li><p>If <var>element</var> is not null, then set its <a href="semantics.html#concept-fe-checked" id="the-htmlformcontrolscollection-interface:concept-fe-checked-2">checkedness</a> to true.</p>

  </li></ol></section>



  


  <section><h5 id="the-htmloptionscollection-interface">2.7.2.3 The <code id="the-htmloptionscollection-interface:htmloptionscollection"><a href="infrastructure.html#htmloptionscollection">HTMLOptionsCollection</a></code> interface</h5>

  <p>The <code id="the-htmloptionscollection-interface:htmloptionscollection-2"><a href="infrastructure.html#htmloptionscollection">HTMLOptionsCollection</a></code> interface is used for <a href="infrastructure.html#collections" id="the-htmloptionscollection-interface:collections">collections</a> of
  <code id="the-htmloptionscollection-interface:the-option-element"><a href="semantics.html#the-option-element">option</a></code> elements. It is always rooted on a <code id="the-htmloptionscollection-interface:the-select-element"><a href="semantics.html#the-select-element">select</a></code> element and has
  attributes and methods that manipulate that element's descendants.</p>

  <pre class="idl">interface <dfn id="htmloptionscollection">HTMLOptionsCollection</dfn> : <a href="infrastructure.html#htmlcollection" id="the-htmloptionscollection-interface:htmlcollection">HTMLCollection</a> {
  // inherits <a href="infrastructure.html#dom-htmlcollection-item" id="the-htmloptionscollection-interface:dom-htmlcollection-item">item</a>()
  attribute unsigned long <a href="infrastructure.html#dom-htmloptionscollection-length" id="the-htmloptionscollection-interface:dom-htmloptionscollection-length">length</a>; // shadows inherited length
  <a href="infrastructure.html#dom-htmloptionscollection-nameditem" id="the-htmloptionscollection-interface:dom-htmloptionscollection-nameditem">legacycaller</a> <a href="semantics.html#htmloptionelement" id="the-htmloptionscollection-interface:htmloptionelement">HTMLOptionElement</a>? (DOMString name);
  <a href="infrastructure.html#dom-htmloptionscollection-setter" id="the-htmloptionscollection-interface:dom-htmloptionscollection-setter">setter creator</a> void (unsigned long index, <a href="semantics.html#htmloptionelement" id="the-htmloptionscollection-interface:htmloptionelement-2">HTMLOptionElement</a>? option);
  void <a href="infrastructure.html#dom-htmloptionscollection-add" id="the-htmloptionscollection-interface:dom-htmloptionscollection-add">add</a>((<a href="semantics.html#htmloptionelement" id="the-htmloptionscollection-interface:htmloptionelement-3">HTMLOptionElement</a> or <a href="semantics.html#htmloptgroupelement" id="the-htmloptionscollection-interface:htmloptgroupelement">HTMLOptGroupElement</a>) element, optional (<a href="dom.html#htmlelement" id="the-htmloptionscollection-interface:htmlelement">HTMLElement</a> or long)? before = null);
  void <a href="infrastructure.html#dom-htmloptionscollection-remove" id="the-htmloptionscollection-interface:dom-htmloptionscollection-remove">remove</a>(long index);
  attribute long <a href="infrastructure.html#dom-htmloptionscollection-selectedindex" id="the-htmloptionscollection-interface:dom-htmloptionscollection-selectedindex">selectedIndex</a>;
};</pre>

  <dl class="domintro"><dt><var>collection</var> . <code id="the-htmloptionscollection-interface:dom-htmloptionscollection-length-2"><a href="infrastructure.html#dom-htmloptionscollection-length">length</a></code> [ = <var>value</var> ]</dt><dd>
    <p>Returns the number of elements in the collection.</p>
    <p>When set to a smaller number, truncates the number of <code id="the-htmloptionscollection-interface:the-option-element-2"><a href="semantics.html#the-option-element">option</a></code> elements in the corresponding container.</p>
    <p>When set to a greater number, adds new blank <code id="the-htmloptionscollection-interface:the-option-element-3"><a href="semantics.html#the-option-element">option</a></code> elements to that container.</p>
   </dd><dt><var>element</var> = <var>collection</var> . <code id="the-htmloptionscollection-interface:dom-htmlcollection-item-2"><a href="infrastructure.html#dom-htmlcollection-item">item</a></code>(<var>index</var>)</dt><dt><var>collection</var>[<var>index</var>]</dt><dd>
    <p>Returns the item with index <var>index</var> from the collection. The items are sorted in <a href="infrastructure.html#tree-order" id="the-htmloptionscollection-interface:tree-order">tree order</a>.</p>
   </dd><dt><var>element</var> = <var>collection</var> . <code id="the-htmloptionscollection-interface:dom-htmloptionscollection-nameditem-2"><a href="infrastructure.html#dom-htmloptionscollection-nameditem">namedItem</a></code>(<var>name</var>)</dt><dt><var>nodeList</var> = <var>collection</var> . <code id="the-htmloptionscollection-interface:dom-htmloptionscollection-nameditem-3"><a href="infrastructure.html#dom-htmloptionscollection-nameditem">namedItem</a></code>(<var>name</var>)</dt><dt><var>collection</var>[<var>name</var>]</dt><dt><var>collection</var>(<var>name</var>)</dt><dd>
    <p>Returns the item with <a href="infrastructure.html#concept-id" id="the-htmloptionscollection-interface:concept-id">ID</a> or <code id="the-htmloptionscollection-interface:attr-option-name"><a href="obsolete.html#attr-option-name">name</a></code> <var>name</var> from the collection.</p>
    <p>If there are multiple matching items, then the first is returned.</p>
   </dd><dt><var>collection</var> . <code id="the-htmloptionscollection-interface:dom-htmloptionscollection-add-2"><a href="infrastructure.html#dom-htmloptionscollection-add">add</a></code>(<var>element</var> [, <var>before</var> ] )</dt><dd>
    <p>Inserts <var>element</var> before the node given by <var>before</var>.</p>
    <p>The <var>before</var> argument can be a number, in which case <var>element</var> is inserted before the item with that number, or an element from the
    collection, in which case <var>element</var> is inserted before that element.</p>
    <p>If <var>before</var> is omitted, null, or a number out of range, then <var>element</var> will be added at the end of the list.</p>
    <p>This method will throw a <code id="the-htmloptionscollection-interface:hierarchyrequesterror"><a href="infrastructure.html#hierarchyrequesterror">HierarchyRequestError</a></code> exception if <var>element</var> is an ancestor of the element into which it is to be inserted.</p>
   </dd><dt><var>collection</var> . <code id="the-htmloptionscollection-interface:dom-htmloptionscollection-selectedindex-2"><a href="infrastructure.html#dom-htmloptionscollection-selectedindex">selectedIndex</a></code> [ = <var>value</var> ]</dt><dd>

    <p>Returns the index of the first selected item, if any, or −1 if there is no selected
    item.</p>

    <p>Can be set, to change the selection.</p>

   </dd></dl>

  

  <p>The object's <a href="infrastructure.html#supported-property-indices" id="the-htmloptionscollection-interface:supported-property-indices">supported property indices</a> are as defined for
  <code id="the-htmloptionscollection-interface:htmlcollection-2"><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> objects.</p>

  <p>On getting, the <dfn id="dom-htmloptionscollection-length"><code>length</code></dfn>
  attribute must return the number of nodes <a href="infrastructure.html#represented-by-the-collection" id="the-htmloptionscollection-interface:represented-by-the-collection">represented by the collection</a>.</p>

  <p>On setting, the behaviour depends on whether the new value is equal to, greater than, or less
  than the number of nodes <a href="infrastructure.html#represented-by-the-collection" id="the-htmloptionscollection-interface:represented-by-the-collection-2">represented by the collection</a> at that time. If the number is
  the same, then setting the attribute must do nothing. If the new value is greater, then <var>n</var> new <code id="the-htmloptionscollection-interface:the-option-element-4"><a href="semantics.html#the-option-element">option</a></code> elements with no attributes and no child nodes must be
  appended to the <code id="the-htmloptionscollection-interface:the-select-element-2"><a href="semantics.html#the-select-element">select</a></code> element on which the <code id="the-htmloptionscollection-interface:htmloptionscollection-3"><a href="infrastructure.html#htmloptionscollection">HTMLOptionsCollection</a></code> is
  rooted, where <var>n</var> is the difference between the two numbers (new value minus old
  value). Mutation events must be fired as if a <code id="the-htmloptionscollection-interface:documentfragment"><a href="infrastructure.html#documentfragment">DocumentFragment</a></code> containing the new
  <code id="the-htmloptionscollection-interface:the-option-element-5"><a href="semantics.html#the-option-element">option</a></code> elements had been inserted. If the new value is lower, then the last <var>n</var> nodes in the collection must be removed from their parent nodes, where <var>n</var> is the difference between the two numbers (old value minus new value).</p>

  <p class="note">Setting <code id="the-htmloptionscollection-interface:dom-htmloptionscollection-length-3"><a href="infrastructure.html#dom-htmloptionscollection-length">length</a></code> never removes
  or adds any <code id="the-htmloptionscollection-interface:the-optgroup-element"><a href="semantics.html#the-optgroup-element">optgroup</a></code> elements, and never adds new children to existing
  <code id="the-htmloptionscollection-interface:the-optgroup-element-2"><a href="semantics.html#the-optgroup-element">optgroup</a></code> elements (though it can remove children from them).</p>

  <p>The <a href="infrastructure.html#supported-property-names" id="the-htmloptionscollection-interface:supported-property-names">supported property names</a> consist of the non-empty values of all the <code id="the-htmloptionscollection-interface:the-id-attribute"><a href="dom.html#the-id-attribute">id</a></code> and <code id="the-htmloptionscollection-interface:attr-option-name-2"><a href="obsolete.html#attr-option-name">name</a></code> attributes of all the
  elements <a href="infrastructure.html#represented-by-the-collection" id="the-htmloptionscollection-interface:represented-by-the-collection-3">represented by the collection</a>, in <a href="infrastructure.html#tree-order" id="the-htmloptionscollection-interface:tree-order-2">tree order</a>, ignoring later
  duplicates, with the <code id="the-htmloptionscollection-interface:the-id-attribute-2"><a href="dom.html#the-id-attribute">id</a></code> of an element preceding its <code id="the-htmloptionscollection-interface:attr-option-name-3"><a href="obsolete.html#attr-option-name">name</a></code> if it contributes both, they differ from each other, and neither is
  the duplicate of an earlier entry.</p>

  <p>The properties exposed in this way must be <a href="infrastructure.html#unenumerable" id="the-htmloptionscollection-interface:unenumerable">unenumerable</a>.</p>

  <p>The <dfn id="dom-htmloptionscollection-nameditem">legacy caller</dfn> of the
  <code id="the-htmloptionscollection-interface:htmloptionscollection-4"><a href="infrastructure.html#htmloptionscollection">HTMLOptionsCollection</a></code> interface must act like the <code id="the-htmloptionscollection-interface:dom-htmlcollection-nameditem"><a href="infrastructure.html#dom-htmlcollection-nameditem">namedItem()</a></code> method on the ancestor
  <code id="the-htmloptionscollection-interface:htmlcollection-3"><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> interface.</p>

  <p>When the user agent is to <dfn id="dom-htmloptionscollection-setter">set the value of a new
  indexed property or set the value of an existing indexed property</dfn> for a given property index
  <var>index</var> to a new value <var>value</var>, it must run the following
  algorithm:</p>

  <ol><li><p>If <var>value</var> is null, invoke the steps for the <code id="the-htmloptionscollection-interface:dom-htmloptionscollection-remove-2"><a href="infrastructure.html#dom-htmloptionscollection-remove">remove</a></code> method with <var>index</var> as
   the argument, and abort these steps.</p></li><li><p>Let <var>length</var> be the number of nodes <a href="infrastructure.html#represented-by-the-collection" id="the-htmloptionscollection-interface:represented-by-the-collection-4">represented by the
   collection</a>.</p></li><li><p>Let <var>n</var> be <var>index</var> minus <var>length</var>.</p></li><li><p>If <var>n</var> is greater than zero, then <a href="infrastructure.html#concept-node-append" id="the-htmloptionscollection-interface:concept-node-append">append</a> a <code id="the-htmloptionscollection-interface:documentfragment-2"><a href="infrastructure.html#documentfragment">DocumentFragment</a></code> consisting of <span><var>n</var>-1</span> new <code id="the-htmloptionscollection-interface:the-option-element-6"><a href="semantics.html#the-option-element">option</a></code> elements with no attributes and
   no child nodes to the <code id="the-htmloptionscollection-interface:the-select-element-3"><a href="semantics.html#the-select-element">select</a></code> element on which the <code id="the-htmloptionscollection-interface:htmloptionscollection-5"><a href="infrastructure.html#htmloptionscollection">HTMLOptionsCollection</a></code>
   is rooted.</p></li><li><p>If <var>n</var> is greater than or equal to zero, <a href="infrastructure.html#concept-node-append" id="the-htmloptionscollection-interface:concept-node-append-2">append</a> <var>value</var> to the <code id="the-htmloptionscollection-interface:the-select-element-4"><a href="semantics.html#the-select-element">select</a></code>
   element. Otherwise, <a href="infrastructure.html#concept-node-replace" id="the-htmloptionscollection-interface:concept-node-replace">replace</a> the <var>index</var>th element in the collection by <var>value</var>.</p></li></ol>

  <p>The <dfn id="dom-htmloptionscollection-add"><code>add(<var>element</var>, <var>before</var>)</code></dfn> method must act according to the following algorithm:</p>

  <ol><li><p>If <var>element</var> is an ancestor of the <code id="the-htmloptionscollection-interface:the-select-element-5"><a href="semantics.html#the-select-element">select</a></code> element on which
   the <code id="the-htmloptionscollection-interface:htmloptionscollection-6"><a href="infrastructure.html#htmloptionscollection">HTMLOptionsCollection</a></code> is rooted, then throw a <code id="the-htmloptionscollection-interface:hierarchyrequesterror-2"><a href="infrastructure.html#hierarchyrequesterror">HierarchyRequestError</a></code>
   exception and abort these steps.</p></li><li><p>If <var>before</var> is an element, but that element isn't a descendant of the
   <code id="the-htmloptionscollection-interface:the-select-element-6"><a href="semantics.html#the-select-element">select</a></code> element on which the <code id="the-htmloptionscollection-interface:htmloptionscollection-7"><a href="infrastructure.html#htmloptionscollection">HTMLOptionsCollection</a></code> is rooted, then throw
   a <code id="the-htmloptionscollection-interface:notfounderror"><a href="infrastructure.html#notfounderror">NotFoundError</a></code> exception and abort these steps.</p></li><li><p>If <var>element</var> and <var>before</var> are the same element, then
   return and abort these steps.</p></li><li><p>If <var>before</var> is a node, then let <var>reference</var> be that
   node. Otherwise, if <var>before</var> is an integer, and there is a <var>before</var>th node in the collection, let <var>reference</var> be that node.
   Otherwise, let <var>reference</var> be null.</p></li><li><p>If <var>reference</var> is not null, let <var>parent</var> be the parent
   node of <var>reference</var>. Otherwise, let <var>parent</var> be the
   <code id="the-htmloptionscollection-interface:the-select-element-7"><a href="semantics.html#the-select-element">select</a></code> element on which the <code id="the-htmloptionscollection-interface:htmloptionscollection-8"><a href="infrastructure.html#htmloptionscollection">HTMLOptionsCollection</a></code> is rooted.</p></li><li><p>Act as if the DOM <code id="the-htmloptionscollection-interface:dom-node-insertbefore"><a href="infrastructure.html#dom-node-insertbefore">insertBefore()</a></code> method was
   invoked on the <var>parent</var> node, with <var>element</var> as the first
   argument and <var>reference</var> as the second argument.</p>

  </li></ol>

  <p>The <dfn id="dom-htmloptionscollection-remove"><code>remove(<var>index</var>)</code></dfn> method must act according to the following algorithm:</p>

  <ol><li><p>If the number of nodes <a href="infrastructure.html#represented-by-the-collection" id="the-htmloptionscollection-interface:represented-by-the-collection-5">represented by the collection</a> is zero, abort these
   steps.</p></li><li><p>If <var>index</var> is not a number greater than or equal to 0 and less than the
   number of nodes <a href="infrastructure.html#represented-by-the-collection" id="the-htmloptionscollection-interface:represented-by-the-collection-6">represented by the collection</a>, abort these steps.</p></li><li><p>Let <var>element</var> be the <var>index</var>th element in the
   collection.</p></li><li><p>Remove <var>element</var> from its parent node.</p></li></ol>

  <p>The <dfn id="dom-htmloptionscollection-selectedindex"><code>selectedIndex</code></dfn> IDL
  attribute must act like the identically named attribute on the <code id="the-htmloptionscollection-interface:the-select-element-8"><a href="semantics.html#the-select-element">select</a></code> element on
  which the <code id="the-htmloptionscollection-interface:htmloptionscollection-9"><a href="infrastructure.html#htmloptionscollection">HTMLOptionsCollection</a></code> is rooted</p></section>

  

  



  <section><h5 id="the-htmlpropertiescollection-interface">2.7.2.4 The <code id="the-htmlpropertiescollection-interface:htmlpropertiescollection"><a href="infrastructure.html#htmlpropertiescollection">HTMLPropertiesCollection</a></code> interface</h5>

  <p>The <code id="the-htmlpropertiescollection-interface:htmlpropertiescollection-2"><a href="infrastructure.html#htmlpropertiescollection">HTMLPropertiesCollection</a></code> interface is used for <a href="infrastructure.html#collections" id="the-htmlpropertiescollection-interface:collections">collections</a> of
  elements that add <a href="http://www.w3.org/TR/microdata/#the-properties-of-an-item" id="the-htmlpropertiescollection-interface:the-properties-of-an-item">name-value pairs</a> to a particular
  <a href="http://www.w3.org/TR/microdata/#concept-item" id="the-htmlpropertiescollection-interface:concept-item">item</a> in the <a href="http://www.w3.org/TR/microdata/#microdata" id="the-htmlpropertiescollection-interface:microdata">microdata</a> model.</p>

  <pre class="idl">interface <dfn id="htmlpropertiescollection">HTMLPropertiesCollection</dfn> : <a href="infrastructure.html#htmlcollection" id="the-htmlpropertiescollection-interface:htmlcollection">HTMLCollection</a> {
  // inherits <a href="infrastructure.html#dom-htmlcollection-length" id="the-htmlpropertiescollection-interface:dom-htmlcollection-length">length</a> and <a href="infrastructure.html#dom-htmlcollection-item" id="the-htmlpropertiescollection-interface:dom-htmlcollection-item">item</a>()
  getter <a href="infrastructure.html#propertynodelist" id="the-htmlpropertiescollection-interface:propertynodelist">PropertyNodeList</a>? <a href="infrastructure.html#dom-htmlpropertiescollection-nameditem" id="the-htmlpropertiescollection-interface:dom-htmlpropertiescollection-nameditem">namedItem</a>(DOMString name); // shadows inherited namedItem()
  [SameObject] readonly attribute DOMString[] <a href="infrastructure.html#dom-htmlpropertiescollection-names" id="the-htmlpropertiescollection-interface:dom-htmlpropertiescollection-names">names</a>;
};

typedef sequence&lt;any&gt; <dfn id="propertyvaluearray">PropertyValueArray</dfn>;

interface <dfn id="propertynodelist">PropertyNodeList</dfn> : <a href="infrastructure.html#nodelist" id="the-htmlpropertiescollection-interface:nodelist">NodeList</a> {
  <a href="infrastructure.html#propertyvaluearray" id="the-htmlpropertiescollection-interface:propertyvaluearray">PropertyValueArray</a> <a href="infrastructure.html#dom-propertynodelist-getvalues" id="the-htmlpropertiescollection-interface:dom-propertynodelist-getvalues">getValues</a>();
};</pre>

  <dl class="domintro"><dt><var>collection</var> . <code id="the-htmlpropertiescollection-interface:dom-htmlcollection-length-2"><a href="infrastructure.html#dom-htmlcollection-length">length</a></code></dt><dd>
    <p>Returns the number of elements in the collection.</p>
   </dd><dt><var>element</var> = <var>collection</var> . <code id="the-htmlpropertiescollection-interface:dom-htmlcollection-item-2"><a href="infrastructure.html#dom-htmlcollection-item">item</a></code>(<var>index</var>)</dt><dt><var>collection</var>[<var>index</var>]</dt><dd>
    <p>Returns the element with index <var>index</var> from the collection. The items are sorted in <a href="infrastructure.html#tree-order" id="the-htmlpropertiescollection-interface:tree-order">tree order</a>.</p>
   </dd><dt><var>propertyNodeList</var> = <var>collection</var> . <code id="the-htmlpropertiescollection-interface:dom-htmlpropertiescollection-nameditem-2"><a href="infrastructure.html#dom-htmlpropertiescollection-nameditem">namedItem</a></code>(<var>name</var>)</dt><dd>
    <p>Returns a <code id="the-htmlpropertiescollection-interface:propertynodelist-2"><a href="infrastructure.html#propertynodelist">PropertyNodeList</a></code> object containing any elements that add a property named <var>name</var>.</p>
   </dd><dt><var>collection</var>[<var>name</var>]</dt><dd>
    <p>Returns a <code id="the-htmlpropertiescollection-interface:propertynodelist-3"><a href="infrastructure.html#propertynodelist">PropertyNodeList</a></code> object containing any elements that add a property named <var>name</var>. The <var>name</var> index has to be one of the values listed in the <code id="the-htmlpropertiescollection-interface:dom-htmlpropertiescollection-names-2"><a href="infrastructure.html#dom-htmlpropertiescollection-names">names</a></code> list.</p>
   </dd><dt><var>collection</var> . <code id="the-htmlpropertiescollection-interface:dom-htmlpropertiescollection-names-3"><a href="infrastructure.html#dom-htmlpropertiescollection-names">names</a></code></dt><dd>
    <p>Returns an array with the <a href="http://www.w3.org/TR/microdata/#property-names" id="the-htmlpropertiescollection-interface:property-names">property names</a> of the elements in the collection.</p>
   </dd><dt><var>propertyNodeList</var> . <code id="the-htmlpropertiescollection-interface:dom-propertynodelist-getvalues-2"><a href="infrastructure.html#dom-propertynodelist-getvalues">getValues</a></code>()</dt><dd>
    <p>Returns an array of the various values that the relevant elements have.</p>
   </dd></dl>

  

  <p>The object's <a href="infrastructure.html#supported-property-indices" id="the-htmlpropertiescollection-interface:supported-property-indices">supported property indices</a> are as defined for
  <code id="the-htmlpropertiescollection-interface:htmlcollection-2"><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> objects.</p>

  <p>The <a href="infrastructure.html#supported-property-names" id="the-htmlpropertiescollection-interface:supported-property-names">supported property names</a> consist of the <a href="http://www.w3.org/TR/microdata/#property-names" id="the-htmlpropertiescollection-interface:property-names-2">property names</a> of all the
  elements <a href="infrastructure.html#represented-by-the-collection" id="the-htmlpropertiescollection-interface:represented-by-the-collection">represented by the collection</a>, in <a href="infrastructure.html#tree-order" id="the-htmlpropertiescollection-interface:tree-order-2">tree order</a>, ignoring later
  duplicates.</p>

  <p>The properties exposed in this way must be <a href="infrastructure.html#unenumerable" id="the-htmlpropertiescollection-interface:unenumerable">unenumerable</a>.</p>

  <p>The <dfn id="dom-htmlpropertiescollection-names"><code>names</code></dfn> attribute must
  return a <a href="infrastructure.html#live" id="the-htmlpropertiescollection-interface:live">live</a> <a href="infrastructure.html#dfn-read-only-array" id="the-htmlpropertiescollection-interface:dfn-read-only-array">read only</a> array object giving
  the <a href="http://www.w3.org/TR/microdata/#property-names" id="the-htmlpropertiescollection-interface:property-names-3">property names</a> of all the elements <a href="infrastructure.html#represented-by-the-collection" id="the-htmlpropertiescollection-interface:represented-by-the-collection-2">represented by the collection</a>,
  listed in <a href="infrastructure.html#tree-order" id="the-htmlpropertiescollection-interface:tree-order-3">tree order</a>, but with duplicates removed, leaving only the first occurrence
  of each name.</p>

  <p>The <dfn id="dom-htmlpropertiescollection-nameditem"><code>namedItem(<var>name</var>)</code></dfn> method must return a <code id="the-htmlpropertiescollection-interface:propertynodelist-4"><a href="infrastructure.html#propertynodelist">PropertyNodeList</a></code> object
  representing a <a href="infrastructure.html#live" id="the-htmlpropertiescollection-interface:live-2">live</a> view of the <code id="the-htmlpropertiescollection-interface:htmlpropertiescollection-3"><a href="infrastructure.html#htmlpropertiescollection">HTMLPropertiesCollection</a></code> object, further
  filtered so that the only nodes in the <code id="the-htmlpropertiescollection-interface:propertynodelist-5"><a href="infrastructure.html#propertynodelist">PropertyNodeList</a></code> object are those that have a
  <a href="http://www.w3.org/TR/microdata/#property-names" id="the-htmlpropertiescollection-interface:property-names-4">property name</a> equal to <var>name</var>. The nodes in
  the <code id="the-htmlpropertiescollection-interface:propertynodelist-6"><a href="infrastructure.html#propertynodelist">PropertyNodeList</a></code> object must be sorted in <a href="infrastructure.html#tree-order" id="the-htmlpropertiescollection-interface:tree-order-4">tree order</a>, and the same
  object must be returned each time a particular <var>name</var> is queried from a given <code id="the-htmlpropertiescollection-interface:htmlpropertiescollection-4"><a href="infrastructure.html#htmlpropertiescollection">HTMLPropertiesCollection</a></code> object.</p>

  <hr>

  <p>Members of the <code id="the-htmlpropertiescollection-interface:propertynodelist-7"><a href="infrastructure.html#propertynodelist">PropertyNodeList</a></code> interface inherited from the <code id="the-htmlpropertiescollection-interface:nodelist-2"><a href="infrastructure.html#nodelist">NodeList</a></code>
  interface must behave as they would on a <code id="the-htmlpropertiescollection-interface:nodelist-3"><a href="infrastructure.html#nodelist">NodeList</a></code> object.</p>

  <p>The <dfn id="dom-propertynodelist-getvalues"><code>getValues</code></dfn> method the
  <code id="the-htmlpropertiescollection-interface:propertynodelist-8"><a href="infrastructure.html#propertynodelist">PropertyNodeList</a></code> object must return a newly constructed array whose values are the
  values obtained from the <code id="the-htmlpropertiescollection-interface:dom-itemvalue"><a href="http://www.w3.org/TR/microdata/#dom-itemvalue">itemValue</a></code> IDL attribute of each of the
  elements represented by the object, in <a href="infrastructure.html#tree-order" id="the-htmlpropertiescollection-interface:tree-order-5">tree order</a>.</p></section></section>

  



  <section><h4 id="the-domstringmap-interface">2.7.3 The <code id="the-domstringmap-interface:domstringmap"><a href="infrastructure.html#domstringmap">DOMStringMap</a></code> interface</h4>

  <p>The <code id="the-domstringmap-interface:domstringmap-2"><a href="infrastructure.html#domstringmap">DOMStringMap</a></code> interface represents a set of name-value pairs. It exposes these
  using the scripting language's native mechanisms for property access.</p>

  

  <p>When a <code id="the-domstringmap-interface:domstringmap-3"><a href="infrastructure.html#domstringmap">DOMStringMap</a></code> object is instantiated, it is associated with three
  algorithms, one for getting the list of name-value pairs, one for setting names to certain values,
  and one for deleting names.</p>

  <pre class="idl">[OverrideBuiltins, Exposed=(Window,Worker)]
interface <dfn id="domstringmap">DOMStringMap</dfn> {
  <a href="infrastructure.html#dom-domstringmap-nameditem" id="the-domstringmap-interface:dom-domstringmap-nameditem">getter</a> DOMString (DOMString name);
  <a href="infrastructure.html#dom-domstringmap-setitem" id="the-domstringmap-interface:dom-domstringmap-setitem">setter</a> <a href="infrastructure.html#dom-domstringmap-additem" id="the-domstringmap-interface:dom-domstringmap-additem">creator</a> void (DOMString name, DOMString value);
  <a href="infrastructure.html#dom-domstringmap-removeitem" id="the-domstringmap-interface:dom-domstringmap-removeitem">deleter</a> void (DOMString name);
};</pre>

  <p>The <a href="infrastructure.html#supported-property-names" id="the-domstringmap-interface:supported-property-names">supported property names</a> on a <code id="the-domstringmap-interface:domstringmap-4"><a href="infrastructure.html#domstringmap">DOMStringMap</a></code> object at any instant
  are the names of each pair returned from the algorithm for getting the list of name-value pairs at
  that instant, in the order returned.</p>

  <p>To <dfn id="dom-domstringmap-nameditem">determine the value of a named property</dfn> <var>name</var> in a <code id="the-domstringmap-interface:domstringmap-5"><a href="infrastructure.html#domstringmap">DOMStringMap</a></code>, the user agent must return the value component
  of the name-value pair whose name component is <var>name</var> in the list returned by
  the algorithm for getting the list of name-value pairs.</p>

  <p>To set the value of a <dfn id="dom-domstringmap-additem">new</dfn> or <dfn id="dom-domstringmap-setitem">existing</dfn> named property <var>name</var> to value
  <var>value</var>, the algorithm for setting names to certain values must be run, passing
  <var>name</var> as the name and the result of converting <var>value</var> to a
  <code id="the-domstringmap-interface:idl-domstring"><a href="infrastructure.html#idl-domstring">DOMString</a></code> as the value.</p>

  <p>To <dfn id="dom-domstringmap-removeitem">delete an existing named property</dfn> <var>name</var>, the algorithm for deleting names must be run, passing <var>name</var> as the name.</p>

  <p class="note">The <code id="the-domstringmap-interface:domstringmap-6"><a href="infrastructure.html#domstringmap">DOMStringMap</a></code> interface definition here is only intended for
  JavaScript environments. Other language bindings will need to define how <code id="the-domstringmap-interface:domstringmap-7"><a href="infrastructure.html#domstringmap">DOMStringMap</a></code>
  is to be implemented for those languages.</p>

  

  <div class="example">

   <p>The <code id="the-domstringmap-interface:dom-dataset"><a href="dom.html#dom-dataset">dataset</a></code> attribute on elements exposes the <code id="the-domstringmap-interface:attr-data-*"><a href="dom.html#attr-data-*">data-*</a></code> attributes on the element.</p>

   <p>Given the following fragment and elements with similar constructions:</p>

   <pre>&lt;img class="tower" id="tower5" data-x="12" data-y="5"
     data-ai="robotarget" data-hp="46" data-ability="flames"
     src="towers/rocket.png" alt="Rocket Tower"&gt;</pre>

   <p>...one could imagine a function <code>splashDamage()</code> that takes some arguments, the first
   of which is the element to process:</p>

   <pre>function splashDamage(node, x, y, damage) {
  if (node.classList.contains('tower') &amp;&amp; // checking the 'class' attribute
      node.dataset.x == x &amp;&amp; // reading the 'data-x' attribute
      node.dataset.y == y) { // reading the 'data-y' attribute
    var hp = parseInt(node.dataset.hp); // reading the 'data-hp' attribute
    hp = hp - damage;
    if (hp &lt; 0) {
      hp = 0;
      node.dataset.ai = 'dead'; // setting the 'data-ai' attribute
      delete node.dataset.ability; // removing the 'data-ability' attribute
    }
    node.dataset.hp = hp; // setting the 'data-hp' attribute
  }
}</pre>

  </div></section>


  <section><h4 id="domelementmap">2.7.4 DOMElementMap</h4>

  <p>The <code id="domelementmap:domelementmap-2"><a href="infrastructure.html#domelementmap-2">DOMElementMap</a></code> interface represents a set of name-element mappings. It exposes
  these using the scripting language's native mechanisms for property access.</p>

  

  <p>When a <code id="domelementmap:domelementmap-2-2"><a href="infrastructure.html#domelementmap-2">DOMElementMap</a></code> object is instantiated, it is associated with three
  algorithms, one for getting the list of name-element mappings, one for mapping a name to a certain
  element, and one for deleting mappings by name.</p>

  <pre class="idl">interface <dfn id="domelementmap-2">DOMElementMap</dfn> {
  <a href="infrastructure.html#dom-domelementmap-nameditem" id="domelementmap:dom-domelementmap-nameditem">getter</a> <a href="infrastructure.html#element" id="domelementmap:element">Element</a> (DOMString name);
  <a href="infrastructure.html#dom-domelementmap-setitem" id="domelementmap:dom-domelementmap-setitem">setter</a> <a href="infrastructure.html#dom-domelementmap-additem" id="domelementmap:dom-domelementmap-additem">creator</a> void (DOMString name, <a href="infrastructure.html#element" id="domelementmap:element-2">Element</a> value);
  <a href="infrastructure.html#dom-domelementmap-removeitem" id="domelementmap:dom-domelementmap-removeitem">deleter</a> void (DOMString name);
};</pre>

  <p>The <a href="infrastructure.html#supported-property-names" id="domelementmap:supported-property-names">supported property names</a> on a <code id="domelementmap:domelementmap-2-3"><a href="infrastructure.html#domelementmap-2">DOMElementMap</a></code> object at any instant
  are the names for each mapping returned from the algorithm for getting the list of name-element
  mappings at that instant, in the order returned.</p>

  <p>To <dfn id="dom-domelementmap-nameditem">determine the value of a named property</dfn> <var>name</var> in a <code id="domelementmap:domelementmap-2-4"><a href="infrastructure.html#domelementmap-2">DOMElementMap</a></code>, the user agent must return the element
  component of the name-element mapping whose name component is <var>name</var> in the list
  returned by the algorithm for getting the list of name-element mappings.</p>

  <p>To set the value of a <dfn id="dom-domelementmap-additem">new</dfn> or <dfn id="dom-domelementmap-setitem">existing</dfn> named property <var>name</var> to value
  <var>value</var>, the algorithm for mapping a name to a certain element must be run,
  passing <var>name</var> as the name <var>value</var> as the element.</p>

  <p>To <dfn id="dom-domelementmap-removeitem">delete an existing named property</dfn> <var>name</var>, the algorithm for deleting mappings must be run, passing <var>name</var> as the name component of the mapping to be deleted.</p>

  <p class="note">The <code id="domelementmap:domelementmap-2-5"><a href="infrastructure.html#domelementmap-2">DOMElementMap</a></code> interface definition here is only intended for
  JavaScript environments. Other language bindings will need to define how
  <code id="domelementmap:domelementmap-2-6"><a href="infrastructure.html#domelementmap-2">DOMElementMap</a></code> is to be implemented for those languages.</p></section>

  



  <section><h4 id="transferable-objects">2.7.5 Transferable objects</h4>

  <p>Some objects support being copied and closed in one operation. This is called
  <i>transferring</i> the object, and is used in particular to transfer ownership of unsharable or
  expensive resources across worker boundaries.</p>

  <p>The following <code id="transferable-objects:transferable"><a href="infrastructure.html#transferable">Transferable</a></code> types exist:</p>

  <ul class="brief"><li><code id="transferable-objects:arraybuffer"><a href="infrastructure.html#arraybuffer">ArrayBuffer</a></code> <a href="references.html#refsECMA262">[ECMA262]</a>
   </li><li><code id="transferable-objects:canvasproxy"><a href="semantics.html#canvasproxy">CanvasProxy</a></code> (defined in this specification)
   </li><li><code id="transferable-objects:messageport"><a href="http://www.w3.org/TR/webmessaging/#messageport">MessagePort</a></code> (defined in this specification)
  </li></ul>

  

  <p>The following IDL block formalizes this:</p>

  <pre class="idl">typedef (<a href="infrastructure.html#arraybuffer" id="transferable-objects:arraybuffer-2">ArrayBuffer</a> or <a href="semantics.html#canvasproxy" id="transferable-objects:canvasproxy-2">CanvasProxy</a> or <a href="http://www.w3.org/TR/webmessaging/#messageport" id="transferable-objects:messageport-2">MessagePort</a>) <dfn id="transferable">Transferable</dfn>;</pre>

  <p>To <dfn id="transfer-a-transferable-object">transfer a <code>Transferable</code> object</dfn> to a new owner, the user agent must
  run the steps defined for the type of object in question. The steps will return a new object of
  the same type, and will permanently <dfn id="concept-transferable-neutered">neuter</dfn> the
  original object. (This is an irreversible and non-idempotent operation; once an object has been
  transferred, it cannot be transferred, or indeed used, again.)</p>

  <p id="transferArrayBuffer">To <a href="infrastructure.html#transfer-a-transferable-object" id="transferable-objects:transfer-a-transferable-object">transfer</a> an
  <code id="transferable-objects:arraybuffer-3"><a href="infrastructure.html#arraybuffer">ArrayBuffer</a></code> object <var>old</var> to a new owner <var>owner</var>, a user agent must create a new <code id="transferable-objects:arraybuffer-4"><a href="infrastructure.html#arraybuffer">ArrayBuffer</a></code> object pointing at
  the same underlying data as <var>old</var>, thus obtaining <var>new</var>,
  must <a href="infrastructure.html#concept-transferable-neutered" id="transferable-objects:concept-transferable-neutered">neuter</a> the <var>old</var>
  object, and must finally return <var>new</var>. <a href="references.html#refsECMA262">[ECMA262]</a></p>
  

  <p class="note">Rules for how to <a href="semantics.html#transferCanvasProxy">transfer a
  <code>CanvasProxy</code> object</a> and how to <a href="http://www.w3.org/TR/webmessaging/#transferMessagePort">transfer a
  <code>MessagePort</code> object</a> are given in the relevant sections of this specification.</p></section>

  

  

  <section><h4 id="safe-passing-of-structured-data">2.7.6 Safe passing of structured data</h4>

  <p>When a user agent is required to obtain a <dfn id="structured-clone">structured clone</dfn> of a value, optionally
  with a <i>transfer map</i>, it must run the following algorithm, which either returns a separate
  value, or throws an exception. If a <i>transfer map</i> is provided, it consists of an association
  list of <code id="safe-passing-of-structured-data:transferable"><a href="infrastructure.html#transferable">Transferable</a></code> objects to placeholder objects.</p>

  <ol><li><p>Let <var>input</var> be the value being cloned.</p></li><li><p>Let <var>transfer map</var> be the <i>transfer map</i> passed to the algorithm, if any, or
   the empty list otherwise.</p></li><li><p>Let <var>memory</var> be an association list of pairs of objects, initially empty. This is
   used to handle duplicate references. In each pair of objects, one is called the <i>source</i> object and the other the <i>destination</i> object.</p></li><li><p>For each mapping in <var>transfer map</var>, add a mapping from the
   <code id="safe-passing-of-structured-data:transferable-2"><a href="infrastructure.html#transferable">Transferable</a></code> object (the source object) to the placeholder object (the destination
   object) to <var>memory</var>.</p></li><li><p>Let <var>output</var> be the value resulting from calling the <a href="infrastructure.html#internal-structured-cloning-algorithm" id="safe-passing-of-structured-data:internal-structured-cloning-algorithm">internal structured
   cloning algorithm</a> with <var>input</var> as the "<var>input</var>" argument, and
   <var>memory</var> as the "<var>memory</var>" argument.</p></li><li><p>Return <var>output</var>.</p></li></ol>

  <p>The <dfn id="internal-structured-cloning-algorithm">internal structured cloning algorithm</dfn> is always called with two arguments,
  <var>input</var> and <var>memory</var>, and its behaviour is as follows:</p>

  <ol><li><p>If <var>input</var> is the source object of a pair of objects in <var>memory</var>, then
   return the destination object in that pair of objects and abort these steps.</p></li><li><p>If <var>input</var> is a primitive value, then return that value and abort these
   steps.</p></li><li><p>Let <var>deep clone</var> be <i>none</i>.</p></li><li>

    <p>The <var>input</var> value is an object. Jump to the appropriate step below:</p>

    <dl class="switch"><dt>If <var>input</var> is a <code id="safe-passing-of-structured-data:idl-boolean-wrapper"><a href="infrastructure.html#idl-boolean-wrapper">Boolean</a></code> object</dt><dd><p>Let <var>output</var> be a newly constructed Boolean object with the same value as
     <var>input</var>.</p></dd><dt>If <var>input</var> is a <code id="safe-passing-of-structured-data:idl-number-wrapper"><a href="infrastructure.html#idl-number-wrapper">Number</a></code> object</dt><dd><p>Let <var>output</var> be a newly constructed Number object with the same value as
     <var>input</var>.</p></dd><dt>If <var>input</var> is a <code id="safe-passing-of-structured-data:idl-string-wrapper"><a href="infrastructure.html#idl-string-wrapper">String</a></code> object</dt><dd><p>Let <var>output</var> be a newly constructed String object with the same value as
     <var>input</var>.</p></dd><dt>If <var>input</var> is a <code id="safe-passing-of-structured-data:idl-date"><a href="infrastructure.html#idl-date">Date</a></code> object</dt><dd><p>Let <var>output</var> be a newly constructed <code id="safe-passing-of-structured-data:idl-date-2"><a href="infrastructure.html#idl-date">Date</a></code> object with the same
     value as <var>input</var>.</p></dd><dt>If <var>input</var> is a <code id="safe-passing-of-structured-data:idl-regexp"><a href="infrastructure.html#idl-regexp">RegExp</a></code> object</dt><dd>

      <p>Let <var>output</var> be a newly constructed <code id="safe-passing-of-structured-data:idl-regexp-2"><a href="infrastructure.html#idl-regexp">RegExp</a></code> object with the same
      pattern and flags as <var>input</var>.</p>

      <p class="note">The value of the <code>lastIndex</code> property is not copied.</p>

     </dd><dt>If <var>input</var> is a <code id="safe-passing-of-structured-data:blob"><a href="infrastructure.html#blob">Blob</a></code> object</dt><dd><p>If <var>input</var> has been disabled through the <code id="safe-passing-of-structured-data:dom-blob-close"><a href="infrastructure.html#dom-blob-close">close()</a></code> method, throw a <code id="safe-passing-of-structured-data:datacloneerror"><a href="infrastructure.html#datacloneerror">DataCloneError</a></code> exception
     and abort the overall <a href="infrastructure.html#structured-clone" id="safe-passing-of-structured-data:structured-clone">structured clone</a> algorithm. Otherwise, let <var>output</var>
     be a newly constructed object of the same class as <var>input</var>, corresponding to the same
     underlying data.</p></dd><dt>If <var>input</var> is a <code id="safe-passing-of-structured-data:filelist"><a href="infrastructure.html#filelist">FileList</a></code> object</dt><dd><p>Let <var>output</var> be a newly constructed <code id="safe-passing-of-structured-data:filelist-2"><a href="infrastructure.html#filelist">FileList</a></code> object containing a
     list of newly constructed <code id="safe-passing-of-structured-data:file"><a href="infrastructure.html#file">File</a></code> objects corresponding to the same underlying data
     as those in <var>input</var>, maintaining their relative order.</p></dd><dt>If <var>input</var> is an <code id="safe-passing-of-structured-data:imagedata"><a href="http://www.w3.org/html/wg/drafts/2dcontext/master/#imagedata">ImageData</a></code> object</dt><dd><p>Let <var>output</var> be a newly constructed <code id="safe-passing-of-structured-data:imagedata-2"><a href="http://www.w3.org/html/wg/drafts/2dcontext/master/#imagedata">ImageData</a></code> object whose <code id="safe-passing-of-structured-data:dom-imagedata-width"><a href="http://www.w3.org/html/wg/drafts/2dcontext/master/#dom-imagedata-width">width</a></code> and <code id="safe-passing-of-structured-data:dom-imagedata-height"><a href="http://www.w3.org/html/wg/drafts/2dcontext/master/#dom-imagedata-height">height</a></code>
     have values equal to the corresponding attributes on <var>input</var>, and whose <code id="safe-passing-of-structured-data:dom-imagedata-data"><a href="http://www.w3.org/html/wg/drafts/2dcontext/master/#dom-imagedata-data">data</a></code> attribute has the value obtained from invoking the
     <a href="infrastructure.html#internal-structured-cloning-algorithm" id="safe-passing-of-structured-data:internal-structured-cloning-algorithm-2">internal structured cloning algorithm</a> recursively with the value of the <code id="safe-passing-of-structured-data:dom-imagedata-data-2"><a href="http://www.w3.org/html/wg/drafts/2dcontext/master/#dom-imagedata-data">data</a></code> attribute on <var>input</var> as the new
     "<var>input</var>" argument and <var>memory</var> as the new "<var>memory</var>"
     argument.</p></dd><dt>If <var>input</var> is an <code id="safe-passing-of-structured-data:imagebitmap"><a href="webappapis.html#imagebitmap">ImageBitmap</a></code> object</dt><dd><p>Let <var>output</var> be a newly constructed <code id="safe-passing-of-structured-data:imagebitmap-2"><a href="webappapis.html#imagebitmap">ImageBitmap</a></code> object whose
     bitmap data is a copy of <var>input</var>'s bitmap data.</p></dd><dt>If <var>input</var> is an <code id="safe-passing-of-structured-data:arraybuffer"><a href="infrastructure.html#arraybuffer">ArrayBuffer</a></code> object</dt><dd><p>If <var>input</var> has been <a href="infrastructure.html#concept-transferable-neutered" id="safe-passing-of-structured-data:concept-transferable-neutered">neutered</a>, throw a <code id="safe-passing-of-structured-data:datacloneerror-2"><a href="infrastructure.html#datacloneerror">DataCloneError</a></code>
     exception and abort the overall <a href="infrastructure.html#structured-clone" id="safe-passing-of-structured-data:structured-clone-2">structured clone</a> algorithm. Otherwise, let
     <var>output</var> be a newly constructed <code id="safe-passing-of-structured-data:arraybuffer-2"><a href="infrastructure.html#arraybuffer">ArrayBuffer</a></code> object whose contents are a
     copy of <var>input</var>'s contents, with the same length.</p></dd><dt>If <var>input</var> is an object with a [[DataView]] internal slot</dt><dd>

      <p>Let <var>output</var> be a newly constructed object of the same class as <var>input</var>,
      with its [[DataView]] internal property present, its [[ViewedArrayBuffer]] internal property
      set to the value obtained from invoking the <a href="infrastructure.html#internal-structured-cloning-algorithm" id="safe-passing-of-structured-data:internal-structured-cloning-algorithm-3">internal structured cloning algorithm</a>
      recursively with the value of the internal property on <var>input</var> as the new
      "<var>input</var>" argument and <var>memory</var> as the new "<var>memory</var>" argument, and
      with the [[ByteLength]] and [[ByteOffset]] internal properties set to the same value as their
      counterparts on <var>input</var>.</p>

      

     </dd><dt>If <var>input</var> is an <code id="safe-passing-of-structured-data:idl-array"><a href="infrastructure.html#idl-array">Array</a></code> object</dt><dd>

      <p>Let <var>output</var> be a newly constructed empty <code id="safe-passing-of-structured-data:idl-array-2"><a href="infrastructure.html#idl-array">Array</a></code>
      object whose <code>length</code> is equal to the <code>length</code> of
      <var>input</var>, and set <var>deep clone</var> to <i>own</i>.</p>

      <p class="note">This means that the length of sparse arrays is preserved.</p>

     </dd><dt>If <var>input</var> is an <code id="safe-passing-of-structured-data:idl-object"><a href="infrastructure.html#idl-object">Object</a></code> object</dt><dd><p>Let <var>output</var> be a newly constructed empty <code id="safe-passing-of-structured-data:idl-object-2"><a href="infrastructure.html#idl-object">Object</a></code> object, and set <var>deep clone</var> to <i>own</i>.</p></dd><dt>If <var>input</var> is a <code id="safe-passing-of-structured-data:idl-map"><a href="infrastructure.html#idl-map">Map</a></code> object</dt><dd><p>Let <var>output</var> be a newly constructed empty <code id="safe-passing-of-structured-data:idl-map-2"><a href="infrastructure.html#idl-map">Map</a></code>
     object, and set <var>deep clone</var> to <i>map</i>.</p></dd><dt>If <var>input</var> is a <code id="safe-passing-of-structured-data:idl-set"><a href="infrastructure.html#idl-set">Set</a></code> object</dt><dd><p>Let <var>output</var> be a newly constructed empty <code id="safe-passing-of-structured-data:idl-set-2"><a href="infrastructure.html#idl-set">Set</a></code>
     object, and set <var>deep clone</var> to <i>set</i>.</p></dd><dt>If <var>input</var> is an object that another specification defines how to clone</dt><dd><p>Let <var>output</var> be a clone of the object as defined by the other
     specification.</p></dd><dt>If <var>input</var> is another native object type (e.g. <code id="safe-passing-of-structured-data:idl-error"><a href="infrastructure.html#idl-error">Error</a></code>, <code id="safe-passing-of-structured-data:idl-function"><a href="infrastructure.html#idl-function">Function</a></code>)</dt><dt>If
     <var>input</var> is a host object (e.g. a DOM node)</dt><dd><p>Throw a <code id="safe-passing-of-structured-data:datacloneerror-3"><a href="infrastructure.html#datacloneerror">DataCloneError</a></code> exception and abort the overall <a href="infrastructure.html#structured-clone" id="safe-passing-of-structured-data:structured-clone-3">structured
     clone</a> algorithm.</p></dd></dl>

    <p>For the purposes of the algorithm above, an object is a particular type of object
    <var>class</var> if its [[Class]] internal property is equal to <var>class</var>.</p>

    <p class="example">For example, "<var>input</var> is an <code id="safe-passing-of-structured-data:idl-object-3"><a href="infrastructure.html#idl-object">Object</a></code>
    object" if <var>input</var>'s [[Class]] internal property is equal to the string "<code>Object</code>".</p>

   </li><li><p>Add a mapping from <var>input</var> (the source object) to <var>output</var> (the
   destination object) to <var>memory</var>.</p></li><li>

    <p>If <var>deep clone</var> is set to <i>map</i>, then run these substeps. These substeps use
    the terminology and typographic conventions used in the JavaScript specification's definition of
    Maps. <a href="references.html#refsECMA262">[ECMA262]</a></p>

    <ol><li><p>Let <var>source</var> be the List that is the value of <var>input</var>'s [[MapData]]
     internal slot, if any. If there is no such slot, then instead throw a
     <code id="safe-passing-of-structured-data:datacloneerror-4"><a href="infrastructure.html#datacloneerror">DataCloneError</a></code> exception and abort the overall <a href="infrastructure.html#structured-clone" id="safe-passing-of-structured-data:structured-clone-4">structured clone</a>
     algorithm. <a href="references.html#refsECMA262">[ECMA262]</a></p></li><li><p>Let <var>target</var> be the List that is the value of <var>output</var>'s [[MapData]]
     internal slot.</p></li><li>

      <p>For each Record {[[key]], [[value]]} <var>entry</var> that is an element of
      <var>source</var>, run the following substeps:</p>

      <ol><li><p>Let <var>key</var> have the value obtained from invoking the <a href="infrastructure.html#internal-structured-cloning-algorithm" id="safe-passing-of-structured-data:internal-structured-cloning-algorithm-4">internal structured
       cloning algorithm</a> recursively with <var>entry</var>.[[key]] as the new
       "<var>input</var>" argument and <var>memory</var> as the new "<var>memory</var>"
       argument.</p></li><li><p>Let <var>value</var> have the value obtained from invoking the <a href="infrastructure.html#internal-structured-cloning-algorithm" id="safe-passing-of-structured-data:internal-structured-cloning-algorithm-5">internal
       structured cloning algorithm</a> recursively with <var>entry</var>.[[value]] as the new
       "<var>input</var>" argument and <var>memory</var> as the new "<var>memory</var>"
       argument.</p></li><li><p>Let <var>new entry</var> be the Record {[[key]]: <var>key</var>, [[value]]:
       <var>value</var>}.</p></li><li><p>Append <var>new entry</var> as the last element of <var>target</var>.</p></li></ol>

     </li><li><p>Set <var>deep clone</var> to <i>own</i>.</p></li></ol>

   </li><li>

    <p>If <var>deep clone</var> is set to <i>set</i>, then run these substeps. These substeps use
    the terminology and typographic conventions used in the JavaScript specification's definition of
    Sets. <a href="references.html#refsECMA262">[ECMA262]</a></p>

    <ol><li><p>Let <var>source</var> be the List that is the value of <var>input</var>'s [[SetData]]
     internal slot, if any. If there is no such slot, then instead throw a
     <code id="safe-passing-of-structured-data:datacloneerror-5"><a href="infrastructure.html#datacloneerror">DataCloneError</a></code> exception and abort the overall <a href="infrastructure.html#structured-clone" id="safe-passing-of-structured-data:structured-clone-5">structured clone</a>
     algorithm. <a href="references.html#refsECMA262">[ECMA262]</a></p></li><li><p>Let <var>target</var> be the List that is the value of <var>output</var>'s [[SetData]]
     internal slot.</p></li><li>

      <p>For each <var>entry</var> that is an element of <var>source</var> that is not <i>empty</i>,
      run the following substeps:</p>

      <ol><li><p>Let <var>new entry</var> have the value obtained from invoking the <a href="infrastructure.html#internal-structured-cloning-algorithm" id="safe-passing-of-structured-data:internal-structured-cloning-algorithm-6">internal
       structured cloning algorithm</a> recursively with <var>entry</var> as the new
       "<var>input</var>" argument and <var>memory</var> as the new "<var>memory</var>"
       argument.</p></li><li><p>Append <var>new entry</var> as the last element of <var>target</var>.</p></li></ol>

     </li><li><p>Set <var>deep clone</var> to <i>own</i>.</p></li></ol>

   </li><li>

    <p>If <var>deep clone</var> is set to <i>own</i>, then, for each enumerable own property in
    <var>input</var>, run the following steps:</p>

    <ol><li><p>Let <var>name</var> be the name of the property.</p></li><li><p>Let <var>source value</var> be the result of calling the [[Get]] internal method of
     <var>input</var> with the argument <var>name</var>. If the [[Get]] internal method of a
     property involved executing script, and that script threw an uncaught exception, then abort the
     overall <a href="infrastructure.html#structured-clone" id="safe-passing-of-structured-data:structured-clone-6">structured clone</a> algorithm, with that exception being passed through to
     the caller.</p></li><li><p>Let <var>cloned value</var> be the result of invoking the <a href="infrastructure.html#internal-structured-cloning-algorithm" id="safe-passing-of-structured-data:internal-structured-cloning-algorithm-7">internal structured
     cloning algorithm</a> recursively with <var>source value</var> as the "<var>input</var>"
     argument and <var>memory</var> as the "<var>memory</var>" argument. If this results in an
     exception, then abort the overall <a href="infrastructure.html#structured-clone" id="safe-passing-of-structured-data:structured-clone-7">structured clone</a> algorithm, with that exception
     being passed through to the caller.</p></li><li><p>Add a new property to <var>output</var> having the name <var>name</var>, and having the
     value <var>cloned value</var>.</p></li></ol>

    <p>The order of the properties in the <var>input</var> and <var>output</var> objects must be the
    same, and any properties whose [[Get]] internal method involves running script must be processed
    in that same order.</p>

    <p class="note">This does not walk the prototype chain.</p>

    <p class="note">Property descriptors, setters, getters, and analogous features are not copied in
    this process. For example, the property in the input could be marked as read-only, but in the
    output it would just have the default state (typically read-write, though that could depend on
    the scripting environment).</p>

    <p class="note">Properties of Array objects are not treated any differently than those of other
    Objects. In particular, this means that non-index properties of arrays are copied as well.</p>

   </li><li><p>Return <var>output</var>.</p></li></ol>

  <p class="note">This algorithm preserves cycles and preserves the identity of duplicate objects in
  graphs.</p></section>

  


  <section><h4 id="callbacks">2.7.7 Callbacks</h4>

  <p>The following callback function type is used in various APIs that interact with
  <code id="callbacks:file"><a href="infrastructure.html#file">File</a></code> objects:</p>

  <pre class="idl">callback <dfn id="filecallback">FileCallback</dfn> = void (<a href="infrastructure.html#file" id="callbacks:file-2">File</a> file);</pre></section>


  

  <section><h4 id="garbage-collection">2.7.8 Garbage collection</h4>

  <p>There is an <dfn id="implied-strong-reference">implied strong reference</dfn> from any IDL attribute that returns a
  pre-existing object to that object.</p>

  <div class="example">

   <p>For example, the <code id="garbage-collection:dom-document-location"><a href="browsers.html#dom-document-location">document.location</a></code> attribute means
   that there is a strong reference from a <code id="garbage-collection:document"><a href="dom.html#document">Document</a></code> object to its <code id="garbage-collection:location"><a href="browsers.html#location">Location</a></code>
   object. Similarly, there is always a strong reference from a <code id="garbage-collection:document-2"><a href="dom.html#document">Document</a></code> to any
   descendant nodes, and from any node to its owner <code id="garbage-collection:document-3"><a href="dom.html#document">Document</a></code>.</p>

  </div></section></section>

  



  <section><h3 id="namespaces">2.8 Namespaces</h3>

  <p>The <dfn id="html-namespace-2">HTML namespace</dfn> is: <code>http://www.w3.org/1999/xhtml</code></p>

  <p>The <dfn id="mathml-namespace">MathML namespace</dfn> is: <code>http://www.w3.org/1998/Math/MathML</code></p>

  <p>The <dfn id="svg-namespace">SVG namespace</dfn> is: <code>http://www.w3.org/2000/svg</code></p>

  <p>The <dfn id="xlink-namespace">XLink namespace</dfn> is: <code>http://www.w3.org/1999/xlink</code></p>

  <p>The <dfn id="xml-namespace">XML namespace</dfn> is: <code>http://www.w3.org/XML/1998/namespace</code></p>

  <p>The <dfn id="xmlns-namespace">XMLNS namespace</dfn> is: <code>http://www.w3.org/2000/xmlns/</code></p>

  <hr>

  <p>Data mining tools and other user agents that perform operations
  on content without running scripts, evaluating CSS or XPath
  expressions, or otherwise exposing the resulting DOM to arbitrary
  content, may "support namespaces" by just asserting that their DOM
  node analogues are in certain namespaces, without actually exposing
  the above strings.</p>

  <hr>

  <p class="note">In <a href="syntax.html#syntax" id="namespaces:syntax">the HTML syntax</a>, namespace prefixes
  and namespace declarations do not have the same effect as in XML.
  For instance, the colon has no special meaning in HTML element
  names.</p></section></section>



  



  



  




  

  





  

  




  





  



  





  




  





  


  

  




  

  

  





  

  



  


  



  


  

  

 




<nav class="prev_next"><a href="introduction.html#introduction">← 1 Introduction</a> — <a href="Overview.html#contents">Table of contents</a> — <a href="dom.html#dom">3 Semantics, structure, and APIs of HTML documents →</a></nav><script src="redirection.js"></script></body></html>